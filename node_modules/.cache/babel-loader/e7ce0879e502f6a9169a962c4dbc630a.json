{"ast":null,"code":"import _regeneratorRuntime from\"/home/kodachi/Desktop/Frontend1/Frontend1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kodachi/Desktop/Frontend1/Frontend1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/kodachi/Desktop/Frontend1/Frontend1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/kodachi/Desktop/Frontend1/Frontend1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7;import React,{useEffect,useState}from'react';import styled from'styled-components';import{Card,CardBody,ArrowForwardIcon,Link,Button,Text,Skeleton,Flex}from'@pancakeswap/uikit';import{useTranslation}from'contexts/Localization';import{getTotalWon}from'state/predictions/helpers';import{usePriceBnbBusd}from'state/hooks';import useRefresh from'hooks/useRefresh';import useIntersectionObserver from'hooks/useIntersectionObserver';import Balance from'../../../components/Balance';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledPredictionCard=styled(Card)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-image: url('/images/prediction_promotion.png');\\n  background-repeat: no-repeat;\\n  background-position: bottom right;\\n  background-size: 50%;\\n  min-height: 376px;\\n  \",\" {\\n    background-size: 45%;\\n  }\\n\\n  \",\" {\\n    background-size: 50%;\\n  }\\n\"])),function(_ref){var theme=_ref.theme;return theme.mediaQueries.sm;},function(_ref2){var theme=_ref2.theme;return theme.mediaQueries.md;});var PredictionLive=styled(Text)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  font-size: 28px;\\n  line-height: 1.1;\\n  font-weight: 600;\\n  \",\" {\\n    font-size: 40px;\\n  }\\n\"])),function(_ref3){var theme=_ref3.theme;return theme.mediaQueries.lg;});var PredictionOver=styled(Text)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-size: 36px;\\n  line-height: 1.1;\\n  font-weight: 600;\\n  max-width: 380px;\\n  \",\" {\\n    font-size: 50px;\\n  }\\n\"])),function(_ref4){var theme=_ref4.theme;return theme.mediaQueries.lg;});var PredictionWon=styled(Balance)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  font-size: 36px;\\n  line-height: 1.1;\\n  font-weight: 600;\\n  \",\" {\\n    font-size: 50px;\\n  }\\n\"])),function(_ref5){var theme=_ref5.theme;return theme.mediaQueries.lg;});var StyledSkeleton=styled(Skeleton)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  height: 40px;\\n  \",\" {\\n    height: 55px;\\n  }\\n\"])),function(_ref6){var theme=_ref6.theme;return theme.mediaQueries.lg;});var PredictionBNBSoFar=styled(Text)(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  font-size: 22px;\\n  line-height: 1.1;\\n  font-weight: 600;\\n  max-width: 160px;\\n  \",\" {\\n    font-size: 24px;\\n    max-width: 320px;\\n  }\\n\"])),function(_ref7){var theme=_ref7.theme;return theme.mediaQueries.sm;});var PredictionTryNow=styled(Flex)(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  max-width: 120px;\\n  \",\" {\\n    max-width: none;\\n  }\\n\"])),function(_ref8){var theme=_ref8.theme;return theme.mediaQueries.sm;});var PredictionPromotionCard=function PredictionPromotionCard(){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useRefresh=useRefresh(),slowRefresh=_useRefresh.slowRefresh;var _useIntersectionObser=useIntersectionObserver(),observerRef=_useIntersectionObser.observerRef,isIntersecting=_useIntersectionObser.isIntersecting;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadData=_useState2[0],setLoadData=_useState2[1];var bnbBusdPrice=usePriceBnbBusd();var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),bnbWon=_useState4[0],setBnbWon=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),bnbWonInUsd=_useState6[0],setBnbWonInUsd=_useState6[1];// Fetch farm data once to get the max APR\nuseEffect(function(){if(isIntersecting){setLoadData(true);}},[isIntersecting]);useEffect(function(){var fetchMarketData=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var totalWon;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getTotalWon();case 2:totalWon=_context.sent;setBnbWon(totalWon);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchMarketData(){return _ref9.apply(this,arguments);};}();if(loadData){fetchMarketData();}},[slowRefresh,loadData]);useEffect(function(){if(bnbBusdPrice.gt(0)&&bnbWon>0){setBnbWonInUsd(bnbBusdPrice.times(bnbWon).toNumber());}},[bnbBusdPrice,bnbWon]);var bnbWonInUsdText=bnbWonInUsd?bnbWonInUsd.toString():'-';var wonBNBText=t('',{amount:bnbWonInUsdText});var _wonBNBText$split=wonBNBText.split(bnbWonInUsdText),_wonBNBText$split2=_slicedToArray(_wonBNBText$split,2),over=_wonBNBText$split2[0],bnbSoFar=_wonBNBText$split2[1];return/*#__PURE__*/_jsx(StyledPredictionCard,{children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(PredictionLive,{mb:\"24px\",children:t('Announcements')}),/*#__PURE__*/_jsx(PredictionOver,{bold:true,color:\"#7645d9\",children:over}),bnbWonInUsd?/*#__PURE__*/_jsx(PredictionWon,{mb:\"24px\",color:\"#7645d9\",bold:true,prefix:\"$\",decimals:0,value:bnbWonInUsd}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StyledSkeleton,{animation:\"pulse\",variant:\"rect\",mb:\"24px\",width:180}),/*#__PURE__*/_jsx(\"div\",{ref:observerRef})]}),/*#__PURE__*/_jsx(PredictionBNBSoFar,{bold:true,mb:\"24px\",children:bnbSoFar}),/*#__PURE__*/_jsxs(Text,{color:\"textSubtle\",mb:\"24px\",children:[\"*\",t('Beta Version')]}),/*#__PURE__*/_jsx(Link,{href:\"https://twitter.com/ToucanSwapDex\",id:\"homepage-prediction-cta\",children:/*#__PURE__*/_jsx(Button,{px:['14px',null,null,null,'20px'],children:/*#__PURE__*/_jsxs(PredictionTryNow,{children:[/*#__PURE__*/_jsx(Text,{color:\"white\",bold:true,fontSize:\"16px\",children:t('Twitter')}),/*#__PURE__*/_jsx(ArrowForwardIcon,{color:\"white\"})]})})})]})});};export default PredictionPromotionCard;","map":{"version":3,"sources":["/home/kodachi/Desktop/Frontend1/Frontend1/src/views/Home/components/PredictionPromotionCard.tsx"],"names":["React","useEffect","useState","styled","Card","CardBody","ArrowForwardIcon","Link","Button","Text","Skeleton","Flex","useTranslation","getTotalWon","usePriceBnbBusd","useRefresh","useIntersectionObserver","Balance","StyledPredictionCard","theme","mediaQueries","sm","md","PredictionLive","lg","PredictionOver","PredictionWon","StyledSkeleton","PredictionBNBSoFar","PredictionTryNow","PredictionPromotionCard","t","slowRefresh","observerRef","isIntersecting","loadData","setLoadData","bnbBusdPrice","bnbWon","setBnbWon","bnbWonInUsd","setBnbWonInUsd","fetchMarketData","totalWon","gt","times","toNumber","bnbWonInUsdText","toString","wonBNBText","amount","split","over","bnbSoFar"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { Card, CardBody, ArrowForwardIcon, Link, Button, Text, Skeleton, Flex } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport { getTotalWon } from 'state/predictions/helpers'\nimport { usePriceBnbBusd } from 'state/hooks'\nimport useRefresh from 'hooks/useRefresh'\nimport useIntersectionObserver from 'hooks/useIntersectionObserver'\nimport Balance from '../../../components/Balance'\n\nconst StyledPredictionCard = styled(Card)`\n  background-image: url('/images/prediction_promotion.png');\n  background-repeat: no-repeat;\n  background-position: bottom right;\n  background-size: 50%;\n  min-height: 376px;\n  ${({ theme }) => theme.mediaQueries.sm} {\n    background-size: 45%;\n  }\n\n  ${({ theme }) => theme.mediaQueries.md} {\n    background-size: 50%;\n  }\n`\n\nconst PredictionLive = styled(Text)`\n  font-size: 28px;\n  line-height: 1.1;\n  font-weight: 600;\n  ${({ theme }) => theme.mediaQueries.lg} {\n    font-size: 40px;\n  }\n`\n\nconst PredictionOver = styled(Text)`\n  font-size: 36px;\n  line-height: 1.1;\n  font-weight: 600;\n  max-width: 380px;\n  ${({ theme }) => theme.mediaQueries.lg} {\n    font-size: 50px;\n  }\n`\n\nconst PredictionWon = styled(Balance)`\n  font-size: 36px;\n  line-height: 1.1;\n  font-weight: 600;\n  ${({ theme }) => theme.mediaQueries.lg} {\n    font-size: 50px;\n  }\n`\n\nconst StyledSkeleton = styled(Skeleton)`\n  height: 40px;\n  ${({ theme }) => theme.mediaQueries.lg} {\n    height: 55px;\n  }\n`\n\nconst PredictionBNBSoFar = styled(Text)`\n  font-size: 22px;\n  line-height: 1.1;\n  font-weight: 600;\n  max-width: 160px;\n  ${({ theme }) => theme.mediaQueries.sm} {\n    font-size: 24px;\n    max-width: 320px;\n  }\n`\n\nconst PredictionTryNow = styled(Flex)`\n  align-items: center;\n  max-width: 120px;\n  ${({ theme }) => theme.mediaQueries.sm} {\n    max-width: none;\n  }\n`\n\nconst PredictionPromotionCard = () => {\n  const { t } = useTranslation()\n  const { slowRefresh } = useRefresh()\n  const { observerRef, isIntersecting } = useIntersectionObserver()\n  const [loadData, setLoadData] = useState(false)\n  const bnbBusdPrice = usePriceBnbBusd()\n  const [bnbWon, setBnbWon] = useState(0)\n  const [bnbWonInUsd, setBnbWonInUsd] = useState(0)\n\n  // Fetch farm data once to get the max APR\n  useEffect(() => {\n    if (isIntersecting) {\n      setLoadData(true)\n    }\n  }, [isIntersecting])\n\n  useEffect(() => {\n    const fetchMarketData = async () => {\n      const totalWon = await getTotalWon()\n      setBnbWon(totalWon)\n    }\n\n    if (loadData) {\n      fetchMarketData()\n    }\n  }, [slowRefresh, loadData])\n\n  useEffect(() => {\n    if (bnbBusdPrice.gt(0) && bnbWon > 0) {\n      setBnbWonInUsd(bnbBusdPrice.times(bnbWon).toNumber())\n    }\n  }, [bnbBusdPrice, bnbWon])\n\n  const bnbWonInUsdText = bnbWonInUsd ? bnbWonInUsd.toString() : '-'\n  const wonBNBText = t('', { amount: bnbWonInUsdText })\n  const [over, bnbSoFar] = wonBNBText.split(bnbWonInUsdText)\n\n  return (\n    <StyledPredictionCard>\n      <CardBody>\n        <PredictionLive mb=\"24px\">{t('Announcements')}</PredictionLive>\n        <PredictionOver bold color=\"#7645d9\">\n          {over}\n        </PredictionOver>\n        {bnbWonInUsd ? (\n          <PredictionWon mb=\"24px\" color=\"#7645d9\" bold prefix=\"$\" decimals={0} value={bnbWonInUsd} />\n        ) : (\n          <>\n            <StyledSkeleton animation=\"pulse\" variant=\"rect\" mb=\"24px\" width={180} />\n            <div ref={observerRef} />\n          </>\n        )}\n        <PredictionBNBSoFar bold mb=\"24px\">\n          {bnbSoFar}\n        </PredictionBNBSoFar>\n        <Text color=\"textSubtle\" mb=\"24px\">\n          *{t('Beta Version')}\n        </Text>\n        <Link href=\"https://twitter.com/ToucanSwapDex\" id=\"homepage-prediction-cta\">\n          <Button px={['14px', null, null, null, '20px']}>\n            <PredictionTryNow>\n              <Text color=\"white\" bold fontSize=\"16px\">\n                {t('Twitter')}\n              </Text>\n              <ArrowForwardIcon color=\"white\" />\n            </PredictionTryNow>\n          </Button>\n        </Link>\n      </CardBody>\n    </StyledPredictionCard>\n  )\n}\n\nexport default PredictionPromotionCard\n"]},"metadata":{},"sourceType":"module"}