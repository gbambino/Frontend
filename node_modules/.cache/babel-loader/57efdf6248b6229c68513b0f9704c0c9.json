{"ast":null,"code":"import _regeneratorRuntime from\"/home/kodachi/Desktop/Frontend1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kodachi/Desktop/Frontend1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/kodachi/Desktop/Frontend1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import BigNumber from'bignumber.js';import React,{useCallback,useMemo,useState}from'react';import{Button,Modal,LinkExternal}from'@pancakeswap/uikit';import{ModalActions,ModalInput}from'components/Modal';import{useTranslation}from'contexts/Localization';import{getFullDisplayBalance}from'utils/formatBalance';import useToast from'hooks/useToast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DepositModal=function DepositModal(_ref){var max=_ref.max,onConfirm=_ref.onConfirm,onDismiss=_ref.onDismiss,_ref$tokenName=_ref.tokenName,tokenName=_ref$tokenName===void 0?'':_ref$tokenName,addLiquidityUrl=_ref.addLiquidityUrl;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),val=_useState2[0],setVal=_useState2[1];var _useToast=useToast(),toastSuccess=_useToast.toastSuccess,toastError=_useToast.toastError;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),pendingTx=_useState4[0],setPendingTx=_useState4[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var fullBalance=useMemo(function(){return getFullDisplayBalance(max);},[max]);var valNumber=new BigNumber(val);var fullBalanceNumber=new BigNumber(fullBalance);var handleChange=useCallback(function(e){if(e.currentTarget.validity.valid){setVal(e.currentTarget.value.replace(/,/g,'.'));}},[setVal]);var handleSelectMax=useCallback(function(){setVal(fullBalance);},[fullBalance,setVal]);return/*#__PURE__*/_jsxs(Modal,{title:t('Stake LP tokens'),onDismiss:onDismiss,children:[/*#__PURE__*/_jsx(ModalInput,{value:val,onSelectMax:handleSelectMax,onChange:handleChange,max:fullBalance,symbol:tokenName,addLiquidityUrl:addLiquidityUrl,inputTitle:t('Stake')}),/*#__PURE__*/_jsxs(ModalActions,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:onDismiss,width:\"100%\",disabled:pendingTx,children:t('Cancel')}),/*#__PURE__*/_jsx(Button,{width:\"100%\",disabled:pendingTx||!valNumber.isFinite()||valNumber.eq(0)||valNumber.gt(fullBalanceNumber),onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setPendingTx(true);_context.prev=1;_context.next=4;return onConfirm(val);case 4:toastSuccess(t('Staked!'),t('Your funds have been staked in the farm'));onDismiss();_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);toastError(t('Error'),t('Please try again. Confirm the transaction and make sure you are paying enough gas!'));console.error(_context.t0);case 12:_context.prev=12;setPendingTx(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,8,12,15]]);})),children:pendingTx?t('Pending Confirmation'):t('Confirm')})]}),/*#__PURE__*/_jsx(LinkExternal,{href:addLiquidityUrl,style:{alignSelf:'center'},children:t('Get %symbol%',{symbol:tokenName})})]});};export default DepositModal;","map":{"version":3,"sources":["/home/kodachi/Desktop/Frontend1/src/views/Farms/components/DepositModal.tsx"],"names":["BigNumber","React","useCallback","useMemo","useState","Button","Modal","LinkExternal","ModalActions","ModalInput","useTranslation","getFullDisplayBalance","useToast","DepositModal","max","onConfirm","onDismiss","tokenName","addLiquidityUrl","val","setVal","toastSuccess","toastError","pendingTx","setPendingTx","t","fullBalance","valNumber","fullBalanceNumber","handleChange","e","currentTarget","validity","valid","value","replace","handleSelectMax","isFinite","eq","gt","console","error","alignSelf","symbol"],"mappings":"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","sourcesContent":["import BigNumber from 'bignumber.js'\nimport React, { useCallback, useMemo, useState } from 'react'\nimport { Button, Modal, LinkExternal } from '@pancakeswap/uikit'\nimport { ModalActions, ModalInput } from 'components/Modal'\nimport { useTranslation } from 'contexts/Localization'\nimport { getFullDisplayBalance } from 'utils/formatBalance'\nimport useToast from 'hooks/useToast'\n\ninterface DepositModalProps {\n  max: BigNumber\n  onConfirm: (amount: string) => void\n  onDismiss?: () => void\n  tokenName?: string\n  addLiquidityUrl?: string\n}\n\nconst DepositModal: React.FC<DepositModalProps> = ({ max, onConfirm, onDismiss, tokenName = '', addLiquidityUrl }) => {\n  const [val, setVal] = useState('')\n  const { toastSuccess, toastError } = useToast()\n  const [pendingTx, setPendingTx] = useState(false)\n  const { t } = useTranslation()\n  const fullBalance = useMemo(() => {\n    return getFullDisplayBalance(max)\n  }, [max])\n\n  const valNumber = new BigNumber(val)\n  const fullBalanceNumber = new BigNumber(fullBalance)\n\n  const handleChange = useCallback(\n    (e: React.FormEvent<HTMLInputElement>) => {\n      if (e.currentTarget.validity.valid) {\n        setVal(e.currentTarget.value.replace(/,/g, '.'))\n      }\n    },\n    [setVal],\n  )\n\n  const handleSelectMax = useCallback(() => {\n    setVal(fullBalance)\n  }, [fullBalance, setVal])\n\n  return (\n    <Modal title={t('Stake LP tokens')} onDismiss={onDismiss}>\n      <ModalInput\n        value={val}\n        onSelectMax={handleSelectMax}\n        onChange={handleChange}\n        max={fullBalance}\n        symbol={tokenName}\n        addLiquidityUrl={addLiquidityUrl}\n        inputTitle={t('Stake')}\n      />\n      <ModalActions>\n        <Button variant=\"secondary\" onClick={onDismiss} width=\"100%\" disabled={pendingTx}>\n          {t('Cancel')}\n        </Button>\n        <Button\n          width=\"100%\"\n          disabled={pendingTx || !valNumber.isFinite() || valNumber.eq(0) || valNumber.gt(fullBalanceNumber)}\n          onClick={async () => {\n            setPendingTx(true)\n            try {\n              await onConfirm(val)\n              toastSuccess(t('Staked!'), t('Your funds have been staked in the farm'))\n              onDismiss()\n            } catch (e) {\n              toastError(\n                t('Error'),\n                t('Please try again. Confirm the transaction and make sure you are paying enough gas!'),\n              )\n              console.error(e)\n            } finally {\n              setPendingTx(false)\n            }\n          }}\n        >\n          {pendingTx ? t('Pending Confirmation') : t('Confirm')}\n        </Button>\n      </ModalActions>\n      <LinkExternal href={addLiquidityUrl} style={{ alignSelf: 'center' }}>\n        {t('Get %symbol%', { symbol: tokenName })}\n      </LinkExternal>\n    </Modal>\n  )\n}\n\nexport default DepositModal\n"]},"metadata":{},"sourceType":"module"}