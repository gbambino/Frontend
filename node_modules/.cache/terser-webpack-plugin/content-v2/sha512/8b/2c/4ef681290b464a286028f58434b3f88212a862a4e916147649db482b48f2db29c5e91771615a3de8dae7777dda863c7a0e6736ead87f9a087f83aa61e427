{"code":"(this[\"webpackJsonppancake-frontend\"]=this[\"webpackJsonppancake-frontend\"]||[]).push([[5],{1250:function(e,t,n){\"use strict\";var i=n(565);n(1251),n(1252),n(1253),n(833),n(835),n(1255),n(1256),n(1257),n(1258),n(1259),n(834);var r=n(1260),o=n(1263),a=/Mac/.test(navigator.platform),l=new RegExp(/(<a.*?https?:\\/\\/.*?[^a]>)+?/g),s={toggleBold:C,toggleItalic:w,drawLink:I,toggleHeadingSmaller:A,toggleHeadingBigger:E,drawImage:z,toggleBlockquote:F,toggleOrderedList:N,toggleUnorderedList:B,toggleCodeBlock:S,togglePreview:U,toggleStrikethrough:k,toggleHeading1:T,toggleHeading2:L,toggleHeading3:M,cleanBlock:O,drawTable:P,drawHorizontalRule:_,undo:W,redo:j,toggleSideBySide:q,toggleFullScreen:D},u={toggleBold:\"Cmd-B\",toggleItalic:\"Cmd-I\",drawLink:\"Cmd-K\",toggleHeadingSmaller:\"Cmd-H\",toggleHeadingBigger:\"Shift-Cmd-H\",cleanBlock:\"Cmd-E\",drawImage:\"Cmd-Alt-I\",toggleBlockquote:\"Cmd-'\",toggleOrderedList:\"Cmd-Alt-L\",toggleUnorderedList:\"Cmd-L\",toggleCodeBlock:\"Cmd-Alt-C\",togglePreview:\"Cmd-P\",toggleSideBySide:\"F9\",toggleFullScreen:\"F11\"},c=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t};function d(e){return e=a?e.replace(\"Ctrl\",\"Cmd\"):e.replace(\"Cmd\",\"Ctrl\")}var h={};function f(e){return h[e]||(h[e]=new RegExp(\"\\\\s*\"+e+\"(\\\\s*)\",\"g\"))}function p(e,t){if(e&&t){var n=f(t);e.className.match(n)||(e.className+=\" \"+t)}}function m(e,t){if(e&&t){var n=f(t);e.className.match(n)&&(e.className=e.className.replace(n,\"$1\"))}}function g(e,t,n,i){var r=v(e,!1,t,n,\"button\",i);r.className+=\" easymde-dropdown\";var o=document.createElement(\"div\");o.className=\"easymde-dropdown-content\";for(var a=0;a<e.children.length;a++){var l,s=e.children[a];l=v(\"string\"===typeof s&&s in Q?Q[s]:s,!0,t,n,\"button\",i),o.appendChild(l)}return r.appendChild(o),r}function v(e,t,n,i,r,o){e=e||{};var l=document.createElement(r);l.className=e.name,l.setAttribute(\"type\",r),n=void 0==n||n,e.name&&e.name in i&&(s[e.name]=e.action),e.title&&n&&(l.title=function(e,t,n){var i,r=e;t&&n[i=function(e){for(var t in s)if(s[t]===e)return t;return null}(t)]&&(r+=\" (\"+d(n[i])+\")\");return r}(e.title,e.action,i),a&&(l.title=l.title.replace(\"Ctrl\",\"\\u2318\"),l.title=l.title.replace(\"Alt\",\"\\u2325\"))),e.noDisable&&l.classList.add(\"no-disable\"),e.noMobile&&l.classList.add(\"no-mobile\");var u=[];\"undefined\"!==typeof e.className&&(u=e.className.split(\" \"));for(var c=[],h=0;h<u.length;h++){var f=u[h];f.match(/^fa([srlb]|(-[\\w-]*)|$)/)?c.push(f):l.classList.add(f)}l.tabIndex=-1;for(var p=document.createElement(\"i\"),m=0;m<c.length;m++){var g=c[m];p.classList.add(g)}return l.appendChild(p),\"undefined\"!==typeof e.icon&&(l.innerHTML=e.icon),e.action&&t&&(\"function\"===typeof e.action?l.onclick=function(t){t.preventDefault(),e.action(o)}:\"string\"===typeof e.action&&(l.onclick=function(t){t.preventDefault(),window.open(e.action,\"_blank\")})),l}function x(){var e=document.createElement(\"i\");return e.className=\"separator\",e.innerHTML=\"|\",e}function y(e,t){t=t||e.getCursor(\"start\");var n=e.getTokenAt(t);if(!n.type)return{};for(var i,r,o=n.type.split(\" \"),a={},l=0;l<o.length;l++)\"strong\"===(i=o[l])?a.bold=!0:\"variable-2\"===i?(r=e.getLine(t.line),/^\\s*\\d+\\.\\s/.test(r)?a[\"ordered-list\"]=!0:a[\"unordered-list\"]=!0):\"atom\"===i?a.quote=!0:\"em\"===i?a.italic=!0:\"quote\"===i?a.quote=!0:\"strikethrough\"===i?a.strikethrough=!0:\"comment\"===i?a.code=!0:\"link\"===i?a.link=!0:\"tag\"===i?a.image=!0:i.match(/^header(-[1-6])?$/)&&(a[i.replace(\"header\",\"heading\")]=!0);return a}var b=\"\";function D(e){var t=e.codemirror;t.setOption(\"fullScreen\",!t.getOption(\"fullScreen\")),t.getOption(\"fullScreen\")?(b=document.body.style.overflow,document.body.style.overflow=\"hidden\"):document.body.style.overflow=b;var n=t.getWrapperElement(),i=n.nextSibling;if(/editor-preview-active-side/.test(i.className))if(!1===e.options.sideBySideFullscreen){var r=n.parentNode;t.getOption(\"fullScreen\")?m(r,\"sided--no-fullscreen\"):p(r,\"sided--no-fullscreen\")}else q(e);if(e.options.onToggleFullScreen&&e.options.onToggleFullScreen(t.getOption(\"fullScreen\")||!1),\"undefined\"!==typeof e.options.maxHeight&&(t.getOption(\"fullScreen\")?(t.getScrollerElement().style.removeProperty(\"height\"),i.style.removeProperty(\"height\")):(t.getScrollerElement().style.height=e.options.maxHeight,e.setPreviewMaxHeight())),/fullscreen/.test(e.toolbar_div.className)?e.toolbar_div.className=e.toolbar_div.className.replace(/\\s*fullscreen\\b/,\"\"):e.toolbar_div.className+=\" fullscreen\",e.toolbarElements&&e.toolbarElements.fullscreen){var o=e.toolbarElements.fullscreen;/active/.test(o.className)?o.className=o.className.replace(/\\s*active\\s*/g,\"\"):o.className+=\" active\"}}function C(e){K(e,\"bold\",e.options.blockStyles.bold)}function w(e){K(e,\"italic\",e.options.blockStyles.italic)}function k(e){K(e,\"strikethrough\",\"~~\")}function S(e){var t=e.options.blockStyles.code;function n(e){if(\"object\"!==typeof e)throw\"fencing_line() takes a 'line' object (not a line number, or line text).  Got: \"+typeof e+\": \"+e;return e.styles&&e.styles[2]&&-1!==e.styles[2].indexOf(\"formatting-code-block\")}function i(e){return e.state.base.base||e.state.base}function r(e,t,r,o,a){r=r||e.getLineHandle(t),o=o||e.getTokenAt({line:t,ch:1}),a=a||!!r.text&&e.getTokenAt({line:t,ch:r.text.length-1});var l=o.type?o.type.split(\" \"):[];return a&&i(a).indentedCode?\"indented\":-1!==l.indexOf(\"comment\")&&(i(o).fencedChars||i(a).fencedChars||n(r)?\"fenced\":\"single\")}var o,a,l,s=e.codemirror,u=s.getCursor(\"start\"),c=s.getCursor(\"end\"),d=s.getTokenAt({line:u.line,ch:u.ch||1}),h=s.getLineHandle(u.line),f=r(s,u.line,h,d);if(\"single\"===f){var p=h.text.slice(0,u.ch).replace(\"`\",\"\"),m=h.text.slice(u.ch).replace(\"`\",\"\");s.replaceRange(p+m,{line:u.line,ch:0},{line:u.line,ch:99999999999999}),u.ch--,u!==c&&c.ch--,s.setSelection(u,c),s.focus()}else if(\"fenced\"===f)if(u.line!==c.line||u.ch!==c.ch){for(o=u.line;o>=0&&!n(h=s.getLineHandle(o));o--);var g,v,x,y,b=i(s.getTokenAt({line:o,ch:1})).fencedChars;n(s.getLineHandle(u.line))?(g=\"\",v=u.line):n(s.getLineHandle(u.line-1))?(g=\"\",v=u.line-1):(g=b+\"\\n\",v=u.line),n(s.getLineHandle(c.line))?(x=\"\",y=c.line,0===c.ch&&(y+=1)):0!==c.ch&&n(s.getLineHandle(c.line+1))?(x=\"\",y=c.line+1):(x=b+\"\\n\",y=c.line+1),0===c.ch&&(y-=1),s.operation((function(){s.replaceRange(x,{line:y,ch:0},{line:y+(x?0:1),ch:0}),s.replaceRange(g,{line:v,ch:0},{line:v+(g?0:1),ch:0})})),s.setSelection({line:v+(g?1:0),ch:0},{line:y+(g?1:-1),ch:0}),s.focus()}else{var D=u.line;if(n(s.getLineHandle(u.line))&&(\"fenced\"===r(s,u.line+1)?(o=u.line,D=u.line+1):(a=u.line,D=u.line-1)),void 0===o)for(o=D;o>=0&&!n(h=s.getLineHandle(o));o--);if(void 0===a)for(l=s.lineCount(),a=D;a<l&&!n(h=s.getLineHandle(a));a++);s.operation((function(){s.replaceRange(\"\",{line:o,ch:0},{line:o+1,ch:0}),s.replaceRange(\"\",{line:a-1,ch:0},{line:a,ch:0})})),s.focus()}else if(\"indented\"===f){if(u.line!==c.line||u.ch!==c.ch)o=u.line,a=c.line,0===c.ch&&a--;else{for(o=u.line;o>=0;o--)if(!(h=s.getLineHandle(o)).text.match(/^\\s*$/)&&\"indented\"!==r(s,o,h)){o+=1;break}for(l=s.lineCount(),a=u.line;a<l;a++)if(!(h=s.getLineHandle(a)).text.match(/^\\s*$/)&&\"indented\"!==r(s,a,h)){a-=1;break}}var C=s.getLineHandle(a+1),w=C&&s.getTokenAt({line:a+1,ch:C.text.length-1});w&&i(w).indentedCode&&s.replaceRange(\"\\n\",{line:a+1,ch:0});for(var k=o;k<=a;k++)s.indentLine(k,\"subtract\");s.focus()}else{var S=u.line===c.line&&u.ch===c.ch&&0===u.ch,F=u.line!==c.line;S||F?function(e,t,n,i){var r=t.line+1,o=n.line+1,a=t.line!==n.line,l=i+\"\\n\",s=\"\\n\"+i;a&&o++,a&&0===n.ch&&(s=i+\"\\n\",o--),$(e,!1,[l,s]),e.setSelection({line:r,ch:0},{line:o,ch:0})}(s,u,c,t):$(s,!1,[\"`\",\"`\"])}}function F(e){V(e.codemirror,\"quote\")}function A(e){G(e.codemirror,\"smaller\")}function E(e){G(e.codemirror,\"bigger\")}function T(e){G(e.codemirror,void 0,1)}function L(e){G(e.codemirror,void 0,2)}function M(e){G(e.codemirror,void 0,3)}function B(e){V(e.codemirror,\"unordered-list\")}function N(e){V(e.codemirror,\"ordered-list\")}function O(e){!function(e){if(/editor-preview-active/.test(e.getWrapperElement().lastChild.className))return;for(var t,n=e.getCursor(\"start\"),i=e.getCursor(\"end\"),r=n.line;r<=i.line;r++)t=(t=e.getLine(r)).replace(/^[ ]*([# ]+|\\*|-|[> ]+|[0-9]+(.|\\)))[ ]*/,\"\"),e.replaceRange(t,{line:r,ch:0},{line:r,ch:99999999999999})}(e.codemirror)}function I(e){var t=e.codemirror,n=y(t),i=e.options,r=\"https://\";if(i.promptURLs&&!(r=prompt(i.promptTexts.link,\"https://\")))return!1;$(t,n.link,i.insertTexts.link,r)}function z(e){var t=e.codemirror,n=y(t),i=e.options,r=\"https://\";if(i.promptURLs&&!(r=prompt(i.promptTexts.image,\"https://\")))return!1;$(t,n.image,i.insertTexts.image,r)}function H(e){e.openBrowseFileWindow()}function R(e,t){var n=e.codemirror,i=y(n),r=e.options,o=t.substr(t.lastIndexOf(\"/\")+1),a=o.substring(o.lastIndexOf(\".\")+1).replace(/\\?.*$/,\"\");if([\"png\",\"jpg\",\"jpeg\",\"gif\",\"svg\"].includes(a))$(n,i.image,r.insertTexts.uploadedImage,t);else{var l=r.insertTexts.link;l[0]=\"[\"+o,$(n,i.link,l,t)}e.updateStatusBar(\"upload-image\",e.options.imageTexts.sbOnUploaded.replace(\"#image_name#\",o)),setTimeout((function(){e.updateStatusBar(\"upload-image\",e.options.imageTexts.sbInit)}),1e3)}function P(e){var t=e.codemirror,n=y(t),i=e.options;$(t,n.table,i.insertTexts.table)}function _(e){var t=e.codemirror,n=y(t),i=e.options;$(t,n.image,i.insertTexts.horizontalRule)}function W(e){var t=e.codemirror;t.undo(),t.focus()}function j(e){var t=e.codemirror;t.redo(),t.focus()}function q(e){var t=e.codemirror,n=t.getWrapperElement(),i=n.nextSibling,r=e.toolbarElements&&e.toolbarElements[\"side-by-side\"],o=!1,a=n.parentNode;/editor-preview-active-side/.test(i.className)?(!1===e.options.sideBySideFullscreen&&m(a,\"sided--no-fullscreen\"),i.className=i.className.replace(/\\s*editor-preview-active-side\\s*/g,\"\"),r&&(r.className=r.className.replace(/\\s*active\\s*/g,\"\")),n.className=n.className.replace(/\\s*CodeMirror-sided\\s*/g,\" \")):(setTimeout((function(){t.getOption(\"fullScreen\")||(!1===e.options.sideBySideFullscreen?p(a,\"sided--no-fullscreen\"):D(e)),i.className+=\" editor-preview-active-side\"}),1),r&&(r.className+=\" active\"),n.className+=\" CodeMirror-sided\",o=!0);var l=n.lastChild;if(/editor-preview-active/.test(l.className)){l.className=l.className.replace(/\\s*editor-preview-active\\s*/g,\"\");var s=e.toolbarElements.preview,u=e.toolbar_div;s.className=s.className.replace(/\\s*active\\s*/g,\"\"),u.className=u.className.replace(/\\s*disabled-for-preview*/g,\"\")}if(t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=function(){var t=e.options.previewRender(e.value(),i);null!=t&&(i.innerHTML=t)}),o){var c=e.options.previewRender(e.value(),i);null!=c&&(i.innerHTML=c),t.on(\"update\",t.sideBySideRenderingFunction)}else t.off(\"update\",t.sideBySideRenderingFunction);t.refresh()}function U(e){var t=e.codemirror,n=t.getWrapperElement(),i=e.toolbar_div,r=!!e.options.toolbar&&e.toolbarElements.preview,o=n.lastChild,a=t.getWrapperElement().nextSibling;if(/editor-preview-active-side/.test(a.className)&&q(e),!o||!/editor-preview-full/.test(o.className)){if((o=document.createElement(\"div\")).className=\"editor-preview-full\",e.options.previewClass)if(Array.isArray(e.options.previewClass))for(var l=0;l<e.options.previewClass.length;l++)o.className+=\" \"+e.options.previewClass[l];else\"string\"===typeof e.options.previewClass&&(o.className+=\" \"+e.options.previewClass);n.appendChild(o)}/editor-preview-active/.test(o.className)?(o.className=o.className.replace(/\\s*editor-preview-active\\s*/g,\"\"),r&&(r.className=r.className.replace(/\\s*active\\s*/g,\"\"),i.className=i.className.replace(/\\s*disabled-for-preview*/g,\"\"))):(setTimeout((function(){o.className+=\" editor-preview-active\"}),1),r&&(r.className+=\" active\",i.className+=\" disabled-for-preview\")),o.innerHTML=e.options.previewRender(e.value(),o)}function $(e,t,n,i){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var r,o=n[0],a=n[1],l={},s={};Object.assign(l,e.getCursor(\"start\")),Object.assign(s,e.getCursor(\"end\")),i&&(o=o.replace(\"#url#\",i),a=a.replace(\"#url#\",i)),t?(o=(r=e.getLine(l.line)).slice(0,l.ch),a=r.slice(l.ch),e.replaceRange(o+a,{line:l.line,ch:0})):(r=e.getSelection(),e.replaceSelection(o+r+a),l.ch+=o.length,l!==s&&(s.ch+=o.length)),e.setSelection(l,s),e.focus()}}function G(e,t,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var i=e.getCursor(\"start\"),r=e.getCursor(\"end\"),o=i.line;o<=r.line;o++)!function(i){var r=e.getLine(i),o=r.search(/[^#]/);r=void 0!==t?o<=0?\"bigger\"==t?\"###### \"+r:\"# \"+r:6==o&&\"smaller\"==t?r.substr(7):1==o&&\"bigger\"==t?r.substr(2):\"bigger\"==t?r.substr(1):\"#\"+r:1==n?o<=0?\"# \"+r:o==n?r.substr(o+1):\"# \"+r.substr(o+1):2==n?o<=0?\"## \"+r:o==n?r.substr(o+1):\"## \"+r.substr(o+1):o<=0?\"### \"+r:o==n?r.substr(o+1):\"### \"+r.substr(o+1),e.replaceRange(r,{line:i,ch:0},{line:i,ch:99999999999999})}(o);e.focus()}}function V(e,t){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var n=/^(\\s*)(\\*|-|\\+|\\d*\\.)(\\s+)/,i=/^\\s*/,r=y(e),o=e.getCursor(\"start\"),a=e.getCursor(\"end\"),l={quote:/^(\\s*)>\\s+/,\"unordered-list\":n,\"ordered-list\":n},s=function(e,t,r){var o=n.exec(t),a=function(e,t){return{quote:\">\",\"unordered-list\":\"*\",\"ordered-list\":\"%%i.\"}[e].replace(\"%%i\",t)}(e,u);return null!==o?(function(e,t){var n=new RegExp({quote:\">\",\"unordered-list\":\"*\",\"ordered-list\":\"\\\\d+.\"}[e]);return t&&n.test(t)}(e,o[2])&&(a=\"\"),t=o[1]+a+o[3]+t.replace(i,\"\").replace(l[e],\"$1\")):0==r&&(t=a+\" \"+t),t},u=1,c=o.line;c<=a.line;c++)!function(n){var i=e.getLine(n);r[t]?i=i.replace(l[t],\"$1\"):(\"unordered-list\"==t&&(i=s(\"ordered-list\",i,!0)),i=s(t,i,!1),u+=1),e.replaceRange(i,{line:n,ch:0},{line:n,ch:99999999999999})}(c);e.focus()}}function K(e,t,n,i){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){i=\"undefined\"===typeof i?n:i;var r,o=e.codemirror,a=y(o),l=n,s=i,u=o.getCursor(\"start\"),c=o.getCursor(\"end\");a[t]?(l=(r=o.getLine(u.line)).slice(0,u.ch),s=r.slice(u.ch),\"bold\"==t?(l=l.replace(/(\\*\\*|__)(?![\\s\\S]*(\\*\\*|__))/,\"\"),s=s.replace(/(\\*\\*|__)/,\"\")):\"italic\"==t?(l=l.replace(/(\\*|_)(?![\\s\\S]*(\\*|_))/,\"\"),s=s.replace(/(\\*|_)/,\"\")):\"strikethrough\"==t&&(l=l.replace(/(\\*\\*|~~)(?![\\s\\S]*(\\*\\*|~~))/,\"\"),s=s.replace(/(\\*\\*|~~)/,\"\")),o.replaceRange(l+s,{line:u.line,ch:0},{line:u.line,ch:99999999999999}),\"bold\"==t||\"strikethrough\"==t?(u.ch-=2,u!==c&&(c.ch-=2)):\"italic\"==t&&(u.ch-=1,u!==c&&(c.ch-=1))):(r=o.getSelection(),\"bold\"==t?r=(r=r.split(\"**\").join(\"\")).split(\"__\").join(\"\"):\"italic\"==t?r=(r=r.split(\"*\").join(\"\")).split(\"_\").join(\"\"):\"strikethrough\"==t&&(r=r.split(\"~~\").join(\"\")),o.replaceSelection(l+r+s),u.ch+=n.length,c.ch=u.ch+r.length),o.setSelection(u,c),o.focus()}}function X(e,t){if(Math.abs(e)<1024)return\"\"+e+t[0];var n=0;do{e/=1024,++n}while(Math.abs(e)>=1024&&n<t.length);return\"\"+e.toFixed(1)+t[n]}function Z(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]instanceof Array?e[n]=t[n].concat(e[n]instanceof Array?e[n]:[]):null!==t[n]&&\"object\"===typeof t[n]&&t[n].constructor===Object?e[n]=Z(e[n]||{},t[n]):e[n]=t[n]);return e}function Y(e){for(var t=1;t<arguments.length;t++)e=Z(e,arguments[t]);return e}function J(e){var t=e.match(/[a-zA-Z0-9_\\u00A0-\\u02AF\\u0392-\\u03c9\\u0410-\\u04F9]+|[\\u4E00-\\u9FFF\\u3400-\\u4dbf\\uf900-\\ufaff\\u3040-\\u309f\\uac00-\\ud7af]+/g),n=0;if(null===t)return n;for(var i=0;i<t.length;i++)t[i].charCodeAt(0)>=19968?n+=t[i].length:n+=1;return n}var Q={bold:{name:\"bold\",action:C,className:\"fa fa-bold\",title:\"Bold\",default:!0},italic:{name:\"italic\",action:w,className:\"fa fa-italic\",title:\"Italic\",default:!0},strikethrough:{name:\"strikethrough\",action:k,className:\"fa fa-strikethrough\",title:\"Strikethrough\"},heading:{name:\"heading\",action:A,className:\"fa fa-header fa-heading\",title:\"Heading\",default:!0},\"heading-smaller\":{name:\"heading-smaller\",action:A,className:\"fa fa-header fa-heading header-smaller\",title:\"Smaller Heading\"},\"heading-bigger\":{name:\"heading-bigger\",action:E,className:\"fa fa-header fa-heading header-bigger\",title:\"Bigger Heading\"},\"heading-1\":{name:\"heading-1\",action:T,className:\"fa fa-header fa-heading header-1\",title:\"Big Heading\"},\"heading-2\":{name:\"heading-2\",action:L,className:\"fa fa-header fa-heading header-2\",title:\"Medium Heading\"},\"heading-3\":{name:\"heading-3\",action:M,className:\"fa fa-header fa-heading header-3\",title:\"Small Heading\"},\"separator-1\":{name:\"separator-1\"},code:{name:\"code\",action:S,className:\"fa fa-code\",title:\"Code\"},quote:{name:\"quote\",action:F,className:\"fa fa-quote-left\",title:\"Quote\",default:!0},\"unordered-list\":{name:\"unordered-list\",action:B,className:\"fa fa-list-ul\",title:\"Generic List\",default:!0},\"ordered-list\":{name:\"ordered-list\",action:N,className:\"fa fa-list-ol\",title:\"Numbered List\",default:!0},\"clean-block\":{name:\"clean-block\",action:O,className:\"fa fa-eraser\",title:\"Clean block\"},\"separator-2\":{name:\"separator-2\"},link:{name:\"link\",action:I,className:\"fa fa-link\",title:\"Create Link\",default:!0},image:{name:\"image\",action:z,className:\"fa fa-image\",title:\"Insert Image\",default:!0},\"upload-image\":{name:\"upload-image\",action:H,className:\"fa fa-image\",title:\"Import an image\"},table:{name:\"table\",action:P,className:\"fa fa-table\",title:\"Insert Table\"},\"horizontal-rule\":{name:\"horizontal-rule\",action:_,className:\"fa fa-minus\",title:\"Insert Horizontal Line\"},\"separator-3\":{name:\"separator-3\"},preview:{name:\"preview\",action:U,className:\"fa fa-eye\",noDisable:!0,title:\"Toggle Preview\",default:!0},\"side-by-side\":{name:\"side-by-side\",action:q,className:\"fa fa-columns\",noDisable:!0,noMobile:!0,title:\"Toggle Side by Side\",default:!0},fullscreen:{name:\"fullscreen\",action:D,className:\"fa fa-arrows-alt\",noDisable:!0,noMobile:!0,title:\"Toggle Fullscreen\",default:!0},\"separator-4\":{name:\"separator-4\"},guide:{name:\"guide\",action:\"https://www.markdownguide.org/basic-syntax/\",className:\"fa fa-question-circle\",noDisable:!0,title:\"Markdown Guide\",default:!0},\"separator-5\":{name:\"separator-5\"},undo:{name:\"undo\",action:W,className:\"fa fa-undo\",noDisable:!0,title:\"Undo\"},redo:{name:\"redo\",action:j,className:\"fa fa-repeat fa-redo\",noDisable:!0,title:\"Redo\"}},ee={link:[\"[\",\"](#url#)\"],image:[\"![](\",\"#url#)\"],uploadedImage:[\"![](#url#)\",\"\"],table:[\"\",\"\\n\\n| Column 1 | Column 2 | Column 3 |\\n| -------- | -------- | -------- |\\n| Text     | Text     | Text     |\\n\\n\"],horizontalRule:[\"\",\"\\n\\n-----\\n\\n\"]},te={link:\"URL for the link:\",image:\"URL of the image:\"},ne={locale:\"en-US\",format:{hour:\"2-digit\",minute:\"2-digit\"}},ie={bold:\"**\",code:\"```\",italic:\"*\"},re={sbInit:\"Attach files by drag and dropping or pasting from clipboard.\",sbOnDragEnter:\"Drop image to upload it.\",sbOnDrop:\"Uploading image #images_names#...\",sbProgress:\"Uploading #file_name#: #progress#%\",sbOnUploaded:\"Uploaded #image_name#\",sizeUnits:\" B, KB, MB\"},oe={noFileGiven:\"You must select a file.\",typeNotAllowed:\"This image type is not allowed.\",fileTooLarge:\"Image #image_name# is too big (#image_size#).\\nMaximum file size is #image_max_size#.\",importError:\"Something went wrong when uploading the image #image_name#.\"};function ae(e){(e=e||{}).parent=this;var t=!0;if(!1===e.autoDownloadFontAwesome&&(t=!1),!0!==e.autoDownloadFontAwesome)for(var n=document.styleSheets,i=0;i<n.length;i++)n[i].href&&n[i].href.indexOf(\"//maxcdn.bootstrapcdn.com/font-awesome/\")>-1&&(t=!1);if(t){var r=document.createElement(\"link\");r.rel=\"stylesheet\",r.href=\"https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css\",document.getElementsByTagName(\"head\")[0].appendChild(r)}if(e.element)this.element=e.element;else if(null===e.element)return void console.log(\"EasyMDE: Error. No element was found.\");if(void 0===e.toolbar)for(var o in e.toolbar=[],Q)Object.prototype.hasOwnProperty.call(Q,o)&&(-1!=o.indexOf(\"separator-\")&&e.toolbar.push(\"|\"),(!0===Q[o].default||e.showIcons&&e.showIcons.constructor===Array&&-1!=e.showIcons.indexOf(o))&&e.toolbar.push(o));if(Object.prototype.hasOwnProperty.call(e,\"previewClass\")||(e.previewClass=\"editor-preview\"),Object.prototype.hasOwnProperty.call(e,\"status\")||(e.status=[\"autosave\",\"lines\",\"words\",\"cursor\"],e.uploadImage&&e.status.unshift(\"upload-image\")),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=Y({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=Y({},ee,e.insertTexts||{}),e.promptTexts=Y({},te,e.promptTexts||{}),e.blockStyles=Y({},ie,e.blockStyles||{}),void 0!=e.autosave&&(e.autosave.timeFormat=Y({},ne,e.autosave.timeFormat||{})),e.shortcuts=Y({},u,e.shortcuts||{}),e.maxHeight=e.maxHeight||void 0,\"undefined\"!==typeof e.maxHeight?e.minHeight=e.maxHeight:e.minHeight=e.minHeight||\"300px\",e.errorCallback=e.errorCallback||function(e){alert(e)},e.uploadImage=e.uploadImage||!1,e.imageMaxSize=e.imageMaxSize||2097152,e.imageAccept=e.imageAccept||\"image/png, image/jpeg\",e.imageTexts=Y({},re,e.imageTexts||{}),e.errorMessages=Y({},oe,e.errorMessages||{}),void 0!=e.autosave&&void 0!=e.autosave.unique_id&&\"\"!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),e.overlayMode&&void 0===e.overlayMode.combine&&(e.overlayMode.combine=!0),this.options=e,this.render(),!e.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(e.initialValue),e.uploadImage){var a=this;this.codemirror.on(\"dragenter\",(function(e,t){a.updateStatusBar(\"upload-image\",a.options.imageTexts.sbOnDragEnter),t.stopPropagation(),t.preventDefault()})),this.codemirror.on(\"dragend\",(function(e,t){a.updateStatusBar(\"upload-image\",a.options.imageTexts.sbInit),t.stopPropagation(),t.preventDefault()})),this.codemirror.on(\"dragleave\",(function(e,t){a.updateStatusBar(\"upload-image\",a.options.imageTexts.sbInit),t.stopPropagation(),t.preventDefault()})),this.codemirror.on(\"dragover\",(function(e,t){a.updateStatusBar(\"upload-image\",a.options.imageTexts.sbOnDragEnter),t.stopPropagation(),t.preventDefault()})),this.codemirror.on(\"drop\",(function(t,n){n.stopPropagation(),n.preventDefault(),e.imageUploadFunction?a.uploadImagesUsingCustomFunction(e.imageUploadFunction,n.dataTransfer.files):a.uploadImages(n.dataTransfer.files)})),this.codemirror.on(\"paste\",(function(t,n){e.imageUploadFunction?a.uploadImagesUsingCustomFunction(e.imageUploadFunction,n.clipboardData.files):a.uploadImages(n.clipboardData.files)}))}}function le(){if(\"object\"!==typeof localStorage)return!1;try{localStorage.setItem(\"smde_localStorage\",1),localStorage.removeItem(\"smde_localStorage\")}catch(e){return!1}return!0}ae.prototype.uploadImages=function(e,t,n){if(0!==e.length){for(var i=[],r=0;r<e.length;r++)i.push(e[r].name),this.uploadImage(e[r],t,n);this.updateStatusBar(\"upload-image\",this.options.imageTexts.sbOnDrop.replace(\"#images_names#\",i.join(\", \")))}},ae.prototype.uploadImagesUsingCustomFunction=function(e,t){if(0!==t.length){for(var n=[],i=0;i<t.length;i++)n.push(t[i].name),this.uploadImageUsingCustomFunction(e,t[i]);this.updateStatusBar(\"upload-image\",this.options.imageTexts.sbOnDrop.replace(\"#images_names#\",n.join(\", \")))}},ae.prototype.updateStatusBar=function(e,t){if(this.gui.statusbar){var n=this.gui.statusbar.getElementsByClassName(e);1===n.length?this.gui.statusbar.getElementsByClassName(e)[0].textContent=t:0===n.length?console.log(\"EasyMDE: status bar item \"+e+\" was not found.\"):console.log(\"EasyMDE: Several status bar items named \"+e+\" was found.\")}},ae.prototype.markdown=function(e){if(o){var t;if(t=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?t.breaks=!1:t.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting){var n=this.options.renderingConfig.hljs||window.hljs;n&&(t.highlight=function(e,t){return t&&n.getLanguage(t)?n.highlight(t,e).value:n.highlightAuto(e).value})}o.setOptions(t);var i=o(e);return this.options.renderingConfig&&\"function\"===typeof this.options.renderingConfig.sanitizerFunction&&(i=this.options.renderingConfig.sanitizerFunction.call(this,i)),i=function(e){for(var t=(new DOMParser).parseFromString(e,\"text/html\"),n=t.getElementsByTagName(\"li\"),i=0;i<n.length;i++)for(var r=n[i],o=0;o<r.children.length;o++){var a=r.children[o];a instanceof HTMLInputElement&&\"checkbox\"===a.type&&(r.style.marginLeft=\"-1.5em\",r.style.listStyleType=\"none\")}return t.documentElement.innerHTML}(i=function(e){for(var t;null!==(t=l.exec(e));){var n=t[0];if(-1===n.indexOf(\"target=\")){var i=n.replace(/>$/,' target=\"_blank\">');e=e.replace(n,i)}}return e}(i))}},ae.prototype.render=function(e){if(e||(e=this.element||document.getElementsByTagName(\"textarea\")[0]),!this._rendered||this._rendered!==e){this.element=e;var t,n,o=this.options,a=this,l={};for(var u in o.shortcuts)null!==o.shortcuts[u]&&null!==s[u]&&function(e){l[d(o.shortcuts[e])]=function(){var t=s[e];\"function\"===typeof t?t(a):\"string\"===typeof t&&window.open(t,\"_blank\")}}(u);if(l.Enter=\"newlineAndIndentContinueMarkdownList\",l.Tab=\"tabAndIndentMarkdownList\",l[\"Shift-Tab\"]=\"shiftTabAndUnindentMarkdownList\",l.Esc=function(e){e.getOption(\"fullScreen\")&&D(a)},this.documentOnKeyDown=function(e){27==(e=e||window.event).keyCode&&a.codemirror.getOption(\"fullScreen\")&&D(a)},document.addEventListener(\"keydown\",this.documentOnKeyDown,!1),o.overlayMode?(i.defineMode(\"overlay-mode\",(function(e){return i.overlayMode(i.getMode(e,!1!==o.spellChecker?\"spell-checker\":\"gfm\"),o.overlayMode.mode,o.overlayMode.combine)})),t=\"overlay-mode\",(n=o.parsingConfig).gitHubSpice=!1):((t=o.parsingConfig).name=\"gfm\",t.gitHubSpice=!1),!1!==o.spellChecker&&(t=\"spell-checker\",(n=o.parsingConfig).name=\"gfm\",n.gitHubSpice=!1,r({codeMirrorInstance:i})),this.codemirror=i.fromTextArea(e,{mode:t,backdrop:n,theme:void 0!=o.theme?o.theme:\"easymde\",tabSize:void 0!=o.tabSize?o.tabSize:2,indentUnit:void 0!=o.tabSize?o.tabSize:2,indentWithTabs:!1!==o.indentWithTabs,lineNumbers:!0===o.lineNumbers,autofocus:!0===o.autofocus,extraKeys:l,lineWrapping:!1!==o.lineWrapping,allowDropFileTypes:[\"text/plain\"],placeholder:o.placeholder||e.getAttribute(\"placeholder\")||\"\",styleSelectedText:void 0!=o.styleSelectedText?o.styleSelectedText:!c(),scrollbarStyle:void 0!=o.scrollbarStyle?o.scrollbarStyle:\"native\",configureMouse:function(e,t,n){return{addNew:!1}},inputStyle:void 0!=o.inputStyle?o.inputStyle:c()?\"contenteditable\":\"textarea\",spellcheck:void 0==o.nativeSpellcheck||o.nativeSpellcheck,autoRefresh:void 0!=o.autoRefresh&&o.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=o.minHeight,\"undefined\"!==typeof o.maxHeight&&(this.codemirror.getScrollerElement().style.height=o.maxHeight),!0===o.forceSync){var h=this.codemirror;h.on(\"change\",(function(){h.save()}))}this.gui={};var f=document.createElement(\"div\");f.classList.add(\"EasyMDEContainer\");var p=this.codemirror.getWrapperElement();p.parentNode.insertBefore(f,p),f.appendChild(p),!1!==o.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==o.status&&(this.gui.statusbar=this.createStatusbar()),void 0!=o.autosave&&!0===o.autosave.enabled&&(this.autosave(),this.codemirror.on(\"change\",(function(){clearTimeout(a._autosave_timeout),a._autosave_timeout=setTimeout((function(){a.autosave()}),a.options.autosave.submit_delay||a.options.autosave.delay||1e3)})));var m=this;this.codemirror.on(\"update\",(function(){o.previewImagesInEditor&&f.querySelectorAll(\".cm-image-marker\").forEach((function(e){var t=e.parentElement;if(t.innerText.match(/^!\\[.*?\\]\\(.*\\)/g)&&!t.hasAttribute(\"data-img-src\")){var n=t.innerText.match(\"\\\\((.*)\\\\)\");if(window.EMDEimagesCache||(window.EMDEimagesCache={}),n&&n.length>=2){var i=n[1];if(window.EMDEimagesCache[i])v(t,window.EMDEimagesCache[i]);else{var r=document.createElement(\"img\");r.onload=function(){window.EMDEimagesCache[i]={naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight,url:i},v(t,window.EMDEimagesCache[i])},r.src=i}}}}))})),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var g=this.codemirror;setTimeout(function(){g.refresh()}.bind(g),0)}function v(e,t){var n,i;e.setAttribute(\"data-img-src\",t.url),e.setAttribute(\"style\",\"--bg-image:url(\"+t.url+\");--width:\"+t.naturalWidth+\"px;--height:\"+(n=t.naturalWidth,i=t.naturalHeight,n<window.getComputedStyle(document.querySelector(\".CodeMirror-sizer\")).width.replace(\"px\",\"\")?i+\"px\":i/n*100+\"%\")),m.codemirror.setSize()}},ae.prototype.cleanup=function(){document.removeEventListener(\"keydown\",this.documentOnKeyDown)},ae.prototype.autosave=function(){if(le()){var e=this;if(void 0==this.options.autosave.uniqueId||\"\"==this.options.autosave.uniqueId)return void console.log(\"EasyMDE: You must set a uniqueId to use the autosave feature\");!0!==this.options.autosave.binded&&(null!=e.element.form&&void 0!=e.element.form&&e.element.form.addEventListener(\"submit\",(function(){clearTimeout(e.autosaveTimeoutId),e.autosaveTimeoutId=void 0,localStorage.removeItem(\"smde_\"+e.options.autosave.uniqueId)})),this.options.autosave.binded=!0),!0!==this.options.autosave.loaded&&(\"string\"==typeof localStorage.getItem(\"smde_\"+this.options.autosave.uniqueId)&&\"\"!=localStorage.getItem(\"smde_\"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem(\"smde_\"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var t=e.value();\"\"!==t?localStorage.setItem(\"smde_\"+this.options.autosave.uniqueId,t):localStorage.removeItem(\"smde_\"+this.options.autosave.uniqueId);var n=document.getElementById(\"autosaved\");if(null!=n&&void 0!=n&&\"\"!=n){var i=new Date,r=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,\"en-US\"],this.options.autosave.timeFormat.format).format(i),o=void 0==this.options.autosave.text?\"Autosaved: \":this.options.autosave.text;n.innerHTML=o+r}}else console.log(\"EasyMDE: localStorage not available, cannot autosave\")},ae.prototype.clearAutosavedValue=function(){if(le()){if(void 0==this.options.autosave||void 0==this.options.autosave.uniqueId||\"\"==this.options.autosave.uniqueId)return void console.log(\"EasyMDE: You must set a uniqueId to clear the autosave value\");localStorage.removeItem(\"smde_\"+this.options.autosave.uniqueId)}else console.log(\"EasyMDE: localStorage not available, cannot autosave\")},ae.prototype.openBrowseFileWindow=function(e,t){var n=this,i=this.gui.toolbar.getElementsByClassName(\"imageInput\")[0];i.click(),i.addEventListener(\"change\",(function r(o){n.options.imageUploadFunction?n.uploadImagesUsingCustomFunction(n.options.imageUploadFunction,o.target.files):n.uploadImages(o.target.files,e,t),i.removeEventListener(\"change\",r)}))},ae.prototype.uploadImage=function(e,t,n){var i=this;function r(e){i.updateStatusBar(\"upload-image\",e),setTimeout((function(){i.updateStatusBar(\"upload-image\",i.options.imageTexts.sbInit)}),1e4),n&&\"function\"===typeof n&&n(e),i.options.errorCallback(e)}function o(t){var n=i.options.imageTexts.sizeUnits.split(\",\");return t.replace(\"#image_name#\",e.name).replace(\"#image_size#\",X(e.size,n)).replace(\"#image_max_size#\",X(i.options.imageMaxSize,n))}if(t=t||function(e){R(i,e)},e.size>this.options.imageMaxSize)r(o(this.options.errorMessages.fileTooLarge));else{var a=new FormData;a.append(\"image\",e),i.options.imageCSRFToken&&a.append(\"csrfmiddlewaretoken\",i.options.imageCSRFToken);var l=new XMLHttpRequest;l.upload.onprogress=function(t){if(t.lengthComputable){var n=\"\"+Math.round(100*t.loaded/t.total);i.updateStatusBar(\"upload-image\",i.options.imageTexts.sbProgress.replace(\"#file_name#\",e.name).replace(\"#progress#\",n))}},l.open(\"POST\",this.options.imageUploadEndpoint),l.onload=function(){try{var e=JSON.parse(this.responseText)}catch(n){return console.error(\"EasyMDE: The server did not return a valid json.\"),void r(o(i.options.errorMessages.importError))}200===this.status&&e&&!e.error&&e.data&&e.data.filePath?t((i.options.imagePathAbsolute?\"\":window.location.origin+\"/\")+e.data.filePath):e.error&&e.error in i.options.errorMessages?r(o(i.options.errorMessages[e.error])):e.error?r(o(e.error)):(console.error(\"EasyMDE: Received an unexpected response after uploading the image.\"+this.status+\" (\"+this.statusText+\")\"),r(o(i.options.errorMessages.importError)))},l.onerror=function(e){console.error(\"EasyMDE: An unexpected error occurred when trying to upload the image.\"+e.target.status+\" (\"+e.target.statusText+\")\"),r(i.options.errorMessages.importError)},l.send(a)}},ae.prototype.uploadImageUsingCustomFunction=function(e,t){var n=this;e.apply(this,[t,function(e){R(n,e)},function(e){var i=function(e){var i=n.options.imageTexts.sizeUnits.split(\",\");return e.replace(\"#image_name#\",t.name).replace(\"#image_size#\",X(t.size,i)).replace(\"#image_max_size#\",X(n.options.imageMaxSize,i))}(e);n.updateStatusBar(\"upload-image\",i),setTimeout((function(){n.updateStatusBar(\"upload-image\",n.options.imageTexts.sbInit)}),1e4),n.options.errorCallback(i)}])},ae.prototype.setPreviewMaxHeight=function(){var e=this.codemirror.getWrapperElement(),t=e.nextSibling,n=parseInt(window.getComputedStyle(e).paddingTop),i=parseInt(window.getComputedStyle(e).borderTopWidth),r=(parseInt(this.options.maxHeight)+2*n+2*i).toString()+\"px\";t.style.height=r},ae.prototype.createSideBySide=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.nextSibling;if(!n||!/editor-preview-side/.test(n.className)){if((n=document.createElement(\"div\")).className=\"editor-preview-side\",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var i=0;i<this.options.previewClass.length;i++)n.className+=\" \"+this.options.previewClass[i];else\"string\"===typeof this.options.previewClass&&(n.className+=\" \"+this.options.previewClass);t.parentNode.insertBefore(n,t.nextSibling)}if(\"undefined\"!==typeof this.options.maxHeight&&this.setPreviewMaxHeight(),!1===this.options.syncSideBySidePreviewScroll)return n;var r=!1,o=!1;return e.on(\"scroll\",(function(e){if(r)r=!1;else{o=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,i=parseFloat(e.getScrollInfo().top)/t,a=(n.scrollHeight-n.clientHeight)*i;n.scrollTop=a}})),n.onscroll=function(){if(o)o=!1;else{r=!0;var t=n.scrollHeight-n.clientHeight,i=parseFloat(n.scrollTop)/t,a=(e.getScrollInfo().height-e.getScrollInfo().clientHeight)*i;e.scrollTo(0,a)}},n},ae.prototype.createToolbar=function(e){if((e=e||this.options.toolbar)&&0!==e.length){var t;for(t=0;t<e.length;t++)void 0!=Q[e[t]]&&(e[t]=Q[e[t]]);var n=document.createElement(\"div\");n.className=\"editor-toolbar\";var i=this,r={};for(i.toolbar=e,t=0;t<e.length;t++)if((\"guide\"!=e[t].name||!1!==i.options.toolbarGuideIcon)&&(!i.options.hideIcons||-1==i.options.hideIcons.indexOf(e[t].name))&&(\"fullscreen\"!=e[t].name&&\"side-by-side\"!=e[t].name||!c())){if(\"|\"===e[t]){for(var o=!1,a=t+1;a<e.length;a++)\"|\"===e[a]||i.options.hideIcons&&-1!=i.options.hideIcons.indexOf(e[a].name)||(o=!0);if(!o)continue}!function(e){var t;if(t=\"|\"===e?x():e.children?g(e,i.options.toolbarTips,i.options.shortcuts,i):v(e,!0,i.options.toolbarTips,i.options.shortcuts,\"button\",i),r[e.name||e]=t,n.appendChild(t),\"upload-image\"===e.name){var o=document.createElement(\"input\");o.className=\"imageInput\",o.type=\"file\",o.multiple=!0,o.name=\"image\",o.accept=i.options.imageAccept,o.style.display=\"none\",o.style.opacity=0,n.appendChild(o)}}(e[t])}i.toolbar_div=n,i.toolbarElements=r;var l=this.codemirror;l.on(\"cursorActivity\",(function(){var e=y(l);for(var t in r)!function(t){var n=r[t];e[t]?n.className+=\" active\":\"fullscreen\"!=t&&\"side-by-side\"!=t&&(n.className=n.className.replace(/\\s*active\\s*/g,\"\"))}(t)}));var s=l.getWrapperElement();return s.parentNode.insertBefore(n,s),n}},ae.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,n=this.codemirror;if(e&&0!==e.length){var i,r,o,a,l=[];for(i=0;i<e.length;i++)if(r=void 0,o=void 0,a=void 0,\"object\"===typeof e[i])l.push({className:e[i].className,defaultValue:e[i].defaultValue,onUpdate:e[i].onUpdate,onActivity:e[i].onActivity});else{var s=e[i];\"words\"===s?(a=function(e){e.innerHTML=J(n.getValue())},r=function(e){e.innerHTML=J(n.getValue())}):\"lines\"===s?(a=function(e){e.innerHTML=n.lineCount()},r=function(e){e.innerHTML=n.lineCount()}):\"cursor\"===s?(a=function(e){e.innerHTML=\"0:0\"},o=function(e){var t=n.getCursor();e.innerHTML=t.line+\":\"+t.ch}):\"autosave\"===s?a=function(e){void 0!=t.autosave&&!0===t.autosave.enabled&&e.setAttribute(\"id\",\"autosaved\")}:\"upload-image\"===s&&(a=function(e){e.innerHTML=t.imageTexts.sbInit}),l.push({className:s,defaultValue:a,onUpdate:r,onActivity:o})}var u=document.createElement(\"div\");for(u.className=\"editor-statusbar\",i=0;i<l.length;i++){var c=l[i],d=document.createElement(\"span\");d.className=c.className,\"function\"===typeof c.defaultValue&&c.defaultValue(d),\"function\"===typeof c.onUpdate&&this.codemirror.on(\"update\",function(e,t){return function(){t.onUpdate(e)}}(d,c)),\"function\"===typeof c.onActivity&&this.codemirror.on(\"cursorActivity\",function(e,t){return function(){t.onActivity(e)}}(d,c)),u.appendChild(d)}var h=this.codemirror.getWrapperElement();return h.parentNode.insertBefore(u,h.nextSibling),u}},ae.prototype.value=function(e){var t=this.codemirror;if(void 0===e)return t.getValue();if(t.getDoc().setValue(e),this.isPreviewActive()){var n=t.getWrapperElement().lastChild;n.innerHTML=this.options.previewRender(e,n)}return this},ae.toggleBold=C,ae.toggleItalic=w,ae.toggleStrikethrough=k,ae.toggleBlockquote=F,ae.toggleHeadingSmaller=A,ae.toggleHeadingBigger=E,ae.toggleHeading1=T,ae.toggleHeading2=L,ae.toggleHeading3=M,ae.toggleCodeBlock=S,ae.toggleUnorderedList=B,ae.toggleOrderedList=N,ae.cleanBlock=O,ae.drawLink=I,ae.drawImage=z,ae.drawUploadedImage=H,ae.drawTable=P,ae.drawHorizontalRule=_,ae.undo=W,ae.redo=j,ae.togglePreview=U,ae.toggleSideBySide=q,ae.toggleFullScreen=D,ae.prototype.toggleBold=function(){C(this)},ae.prototype.toggleItalic=function(){w(this)},ae.prototype.toggleStrikethrough=function(){k(this)},ae.prototype.toggleBlockquote=function(){F(this)},ae.prototype.toggleHeadingSmaller=function(){A(this)},ae.prototype.toggleHeadingBigger=function(){E(this)},ae.prototype.toggleHeading1=function(){T(this)},ae.prototype.toggleHeading2=function(){L(this)},ae.prototype.toggleHeading3=function(){M(this)},ae.prototype.toggleCodeBlock=function(){S(this)},ae.prototype.toggleUnorderedList=function(){B(this)},ae.prototype.toggleOrderedList=function(){N(this)},ae.prototype.cleanBlock=function(){O(this)},ae.prototype.drawLink=function(){I(this)},ae.prototype.drawImage=function(){z(this)},ae.prototype.drawUploadedImage=function(){H(this)},ae.prototype.drawTable=function(){P(this)},ae.prototype.drawHorizontalRule=function(){_(this)},ae.prototype.undo=function(){W(this)},ae.prototype.redo=function(){j(this)},ae.prototype.togglePreview=function(){U(this)},ae.prototype.toggleSideBySide=function(){q(this)},ae.prototype.toggleFullScreen=function(){D(this)},ae.prototype.isPreviewActive=function(){var e=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(e.className)},ae.prototype.isSideBySideActive=function(){var e=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(e.className)},ae.prototype.isFullscreenActive=function(){return this.codemirror.getOption(\"fullScreen\")},ae.prototype.getState=function(){return y(this.codemirror)},ae.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.parentNode;n&&(this.gui.toolbar&&n.removeChild(this.gui.toolbar),this.gui.statusbar&&n.removeChild(this.gui.statusbar),this.gui.sideBySide&&n.removeChild(this.gui.sideBySide)),n.parentNode.insertBefore(t,n),n.remove(),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},e.exports=ae},1251:function(e,t,n){!function(e){\"use strict\";var t=/^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]\\s|[*+-]\\s|(\\d+)([.)]))(\\s*)/,n=/^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]|[*+-]|(\\d+)[.)])(\\s*)$/,i=/[*+-]\\s/;function r(e,n){var i=n.line,r=0,o=0,a=t.exec(e.getLine(i)),l=a[1];do{var s=i+(r+=1),u=e.getLine(s),c=t.exec(u);if(c){var d=c[1],h=parseInt(a[3],10)+r-o,f=parseInt(c[3],10),p=f;if(l!==d||isNaN(f)){if(l.length>d.length)return;if(l.length<d.length&&1===r)return;o+=1}else h===f&&(p=f+1),h>f&&(p=h+1),e.replaceRange(u.replace(t,d+p+c[4]+c[5]),{line:s,ch:0},{line:s,ch:u.length})}}while(c)}e.commands.newlineAndIndentContinueMarkdownList=function(o){if(o.getOption(\"disableInput\"))return e.Pass;for(var a=o.listSelections(),l=[],s=0;s<a.length;s++){var u=a[s].head,c=o.getStateAfter(u.line),d=e.innerMode(o.getMode(),c);if(\"markdown\"!==d.mode.name)return void o.execCommand(\"newlineAndIndent\");var h=!1!==(c=d.state).list,f=0!==c.quote,p=o.getLine(u.line),m=t.exec(p),g=/^\\s*$/.test(p.slice(0,u.ch));if(!a[s].empty()||!h&&!f||!m||g)return void o.execCommand(\"newlineAndIndent\");if(n.test(p)){var v=f&&/>\\s*$/.test(p),x=!/>\\s*$/.test(p);(v||x)&&o.replaceRange(\"\",{line:u.line,ch:0},{line:u.line,ch:u.ch+1}),l[s]=\"\\n\"}else{var y=m[1],b=m[5],D=!(i.test(m[2])||m[2].indexOf(\">\")>=0),C=D?parseInt(m[3],10)+1+m[4]:m[2].replace(\"x\",\" \");l[s]=\"\\n\"+y+C+b,D&&r(o,u)}}o.replaceSelections(l)}}(n(565))},1252:function(e,t,n){var i=n(565);i.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand(\"indentMore\");else if(e.options.indentWithTabs)e.execCommand(\"insertTab\");else{var n=Array(e.options.tabSize+1).join(\" \");e.replaceSelection(n)}},i.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand(\"indentLess\");else if(e.options.indentWithTabs)e.execCommand(\"insertTab\");else{var n=Array(e.options.tabSize+1).join(\" \");e.replaceSelection(n)}}},1253:function(e,t,n){!function(e){\"use strict\";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width=\"\",t.style.height=\"auto\",t.className+=\" CodeMirror-fullscreen\",document.documentElement.style.overflow=\"hidden\",e.refresh()}function n(e){var t=e.getWrapperElement();t.className=t.className.replace(/\\s*CodeMirror-fullscreen\\b/,\"\"),document.documentElement.style.overflow=\"\";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}e.defineOption(\"fullScreen\",!1,(function(i,r,o){o==e.Init&&(o=!1),!o!=!r&&(r?t(i):n(i))}))}(n(565))},1254:function(e,t,n){!function(e){\"use strict\";e.modeInfo=[{name:\"APL\",mime:\"text/apl\",mode:\"apl\",ext:[\"dyalog\",\"apl\"]},{name:\"PGP\",mimes:[\"application/pgp\",\"application/pgp-encrypted\",\"application/pgp-keys\",\"application/pgp-signature\"],mode:\"asciiarmor\",ext:[\"asc\",\"pgp\",\"sig\"]},{name:\"ASN.1\",mime:\"text/x-ttcn-asn\",mode:\"asn.1\",ext:[\"asn\",\"asn1\"]},{name:\"Asterisk\",mime:\"text/x-asterisk\",mode:\"asterisk\",file:/^extensions\\.conf$/i},{name:\"Brainfuck\",mime:\"text/x-brainfuck\",mode:\"brainfuck\",ext:[\"b\",\"bf\"]},{name:\"C\",mime:\"text/x-csrc\",mode:\"clike\",ext:[\"c\",\"h\",\"ino\"]},{name:\"C++\",mime:\"text/x-c++src\",mode:\"clike\",ext:[\"cpp\",\"c++\",\"cc\",\"cxx\",\"hpp\",\"h++\",\"hh\",\"hxx\"],alias:[\"cpp\"]},{name:\"Cobol\",mime:\"text/x-cobol\",mode:\"cobol\",ext:[\"cob\",\"cpy\"]},{name:\"C#\",mime:\"text/x-csharp\",mode:\"clike\",ext:[\"cs\"],alias:[\"csharp\",\"cs\"]},{name:\"Clojure\",mime:\"text/x-clojure\",mode:\"clojure\",ext:[\"clj\",\"cljc\",\"cljx\"]},{name:\"ClojureScript\",mime:\"text/x-clojurescript\",mode:\"clojure\",ext:[\"cljs\"]},{name:\"Closure Stylesheets (GSS)\",mime:\"text/x-gss\",mode:\"css\",ext:[\"gss\"]},{name:\"CMake\",mime:\"text/x-cmake\",mode:\"cmake\",ext:[\"cmake\",\"cmake.in\"],file:/^CMakeLists\\.txt$/},{name:\"CoffeeScript\",mimes:[\"application/vnd.coffeescript\",\"text/coffeescript\",\"text/x-coffeescript\"],mode:\"coffeescript\",ext:[\"coffee\"],alias:[\"coffee\",\"coffee-script\"]},{name:\"Common Lisp\",mime:\"text/x-common-lisp\",mode:\"commonlisp\",ext:[\"cl\",\"lisp\",\"el\"],alias:[\"lisp\"]},{name:\"Cypher\",mime:\"application/x-cypher-query\",mode:\"cypher\",ext:[\"cyp\",\"cypher\"]},{name:\"Cython\",mime:\"text/x-cython\",mode:\"python\",ext:[\"pyx\",\"pxd\",\"pxi\"]},{name:\"Crystal\",mime:\"text/x-crystal\",mode:\"crystal\",ext:[\"cr\"]},{name:\"CSS\",mime:\"text/css\",mode:\"css\",ext:[\"css\"]},{name:\"CQL\",mime:\"text/x-cassandra\",mode:\"sql\",ext:[\"cql\"]},{name:\"D\",mime:\"text/x-d\",mode:\"d\",ext:[\"d\"]},{name:\"Dart\",mimes:[\"application/dart\",\"text/x-dart\"],mode:\"dart\",ext:[\"dart\"]},{name:\"diff\",mime:\"text/x-diff\",mode:\"diff\",ext:[\"diff\",\"patch\"]},{name:\"Django\",mime:\"text/x-django\",mode:\"django\"},{name:\"Dockerfile\",mime:\"text/x-dockerfile\",mode:\"dockerfile\",file:/^Dockerfile$/},{name:\"DTD\",mime:\"application/xml-dtd\",mode:\"dtd\",ext:[\"dtd\"]},{name:\"Dylan\",mime:\"text/x-dylan\",mode:\"dylan\",ext:[\"dylan\",\"dyl\",\"intr\"]},{name:\"EBNF\",mime:\"text/x-ebnf\",mode:\"ebnf\"},{name:\"ECL\",mime:\"text/x-ecl\",mode:\"ecl\",ext:[\"ecl\"]},{name:\"edn\",mime:\"application/edn\",mode:\"clojure\",ext:[\"edn\"]},{name:\"Eiffel\",mime:\"text/x-eiffel\",mode:\"eiffel\",ext:[\"e\"]},{name:\"Elm\",mime:\"text/x-elm\",mode:\"elm\",ext:[\"elm\"]},{name:\"Embedded JavaScript\",mime:\"application/x-ejs\",mode:\"htmlembedded\",ext:[\"ejs\"]},{name:\"Embedded Ruby\",mime:\"application/x-erb\",mode:\"htmlembedded\",ext:[\"erb\"]},{name:\"Erlang\",mime:\"text/x-erlang\",mode:\"erlang\",ext:[\"erl\"]},{name:\"Esper\",mime:\"text/x-esper\",mode:\"sql\"},{name:\"Factor\",mime:\"text/x-factor\",mode:\"factor\",ext:[\"factor\"]},{name:\"FCL\",mime:\"text/x-fcl\",mode:\"fcl\"},{name:\"Forth\",mime:\"text/x-forth\",mode:\"forth\",ext:[\"forth\",\"fth\",\"4th\"]},{name:\"Fortran\",mime:\"text/x-fortran\",mode:\"fortran\",ext:[\"f\",\"for\",\"f77\",\"f90\",\"f95\"]},{name:\"F#\",mime:\"text/x-fsharp\",mode:\"mllike\",ext:[\"fs\"],alias:[\"fsharp\"]},{name:\"Gas\",mime:\"text/x-gas\",mode:\"gas\",ext:[\"s\"]},{name:\"Gherkin\",mime:\"text/x-feature\",mode:\"gherkin\",ext:[\"feature\"]},{name:\"GitHub Flavored Markdown\",mime:\"text/x-gfm\",mode:\"gfm\",file:/^(readme|contributing|history)\\.md$/i},{name:\"Go\",mime:\"text/x-go\",mode:\"go\",ext:[\"go\"]},{name:\"Groovy\",mime:\"text/x-groovy\",mode:\"groovy\",ext:[\"groovy\",\"gradle\"],file:/^Jenkinsfile$/},{name:\"HAML\",mime:\"text/x-haml\",mode:\"haml\",ext:[\"haml\"]},{name:\"Haskell\",mime:\"text/x-haskell\",mode:\"haskell\",ext:[\"hs\"]},{name:\"Haskell (Literate)\",mime:\"text/x-literate-haskell\",mode:\"haskell-literate\",ext:[\"lhs\"]},{name:\"Haxe\",mime:\"text/x-haxe\",mode:\"haxe\",ext:[\"hx\"]},{name:\"HXML\",mime:\"text/x-hxml\",mode:\"haxe\",ext:[\"hxml\"]},{name:\"ASP.NET\",mime:\"application/x-aspx\",mode:\"htmlembedded\",ext:[\"aspx\"],alias:[\"asp\",\"aspx\"]},{name:\"HTML\",mime:\"text/html\",mode:\"htmlmixed\",ext:[\"html\",\"htm\",\"handlebars\",\"hbs\"],alias:[\"xhtml\"]},{name:\"HTTP\",mime:\"message/http\",mode:\"http\"},{name:\"IDL\",mime:\"text/x-idl\",mode:\"idl\",ext:[\"pro\"]},{name:\"Pug\",mime:\"text/x-pug\",mode:\"pug\",ext:[\"jade\",\"pug\"],alias:[\"jade\"]},{name:\"Java\",mime:\"text/x-java\",mode:\"clike\",ext:[\"java\"]},{name:\"Java Server Pages\",mime:\"application/x-jsp\",mode:\"htmlembedded\",ext:[\"jsp\"],alias:[\"jsp\"]},{name:\"JavaScript\",mimes:[\"text/javascript\",\"text/ecmascript\",\"application/javascript\",\"application/x-javascript\",\"application/ecmascript\"],mode:\"javascript\",ext:[\"js\"],alias:[\"ecmascript\",\"js\",\"node\"]},{name:\"JSON\",mimes:[\"application/json\",\"application/x-json\"],mode:\"javascript\",ext:[\"json\",\"map\"],alias:[\"json5\"]},{name:\"JSON-LD\",mime:\"application/ld+json\",mode:\"javascript\",ext:[\"jsonld\"],alias:[\"jsonld\"]},{name:\"JSX\",mime:\"text/jsx\",mode:\"jsx\",ext:[\"jsx\"]},{name:\"Jinja2\",mime:\"text/jinja2\",mode:\"jinja2\",ext:[\"j2\",\"jinja\",\"jinja2\"]},{name:\"Julia\",mime:\"text/x-julia\",mode:\"julia\",ext:[\"jl\"],alias:[\"jl\"]},{name:\"Kotlin\",mime:\"text/x-kotlin\",mode:\"clike\",ext:[\"kt\"]},{name:\"LESS\",mime:\"text/x-less\",mode:\"css\",ext:[\"less\"]},{name:\"LiveScript\",mime:\"text/x-livescript\",mode:\"livescript\",ext:[\"ls\"],alias:[\"ls\"]},{name:\"Lua\",mime:\"text/x-lua\",mode:\"lua\",ext:[\"lua\"]},{name:\"Markdown\",mime:\"text/x-markdown\",mode:\"markdown\",ext:[\"markdown\",\"md\",\"mkd\"]},{name:\"mIRC\",mime:\"text/mirc\",mode:\"mirc\"},{name:\"MariaDB SQL\",mime:\"text/x-mariadb\",mode:\"sql\"},{name:\"Mathematica\",mime:\"text/x-mathematica\",mode:\"mathematica\",ext:[\"m\",\"nb\",\"wl\",\"wls\"]},{name:\"Modelica\",mime:\"text/x-modelica\",mode:\"modelica\",ext:[\"mo\"]},{name:\"MUMPS\",mime:\"text/x-mumps\",mode:\"mumps\",ext:[\"mps\"]},{name:\"MS SQL\",mime:\"text/x-mssql\",mode:\"sql\"},{name:\"mbox\",mime:\"application/mbox\",mode:\"mbox\",ext:[\"mbox\"]},{name:\"MySQL\",mime:\"text/x-mysql\",mode:\"sql\"},{name:\"Nginx\",mime:\"text/x-nginx-conf\",mode:\"nginx\",file:/nginx.*\\.conf$/i},{name:\"NSIS\",mime:\"text/x-nsis\",mode:\"nsis\",ext:[\"nsh\",\"nsi\"]},{name:\"NTriples\",mimes:[\"application/n-triples\",\"application/n-quads\",\"text/n-triples\"],mode:\"ntriples\",ext:[\"nt\",\"nq\"]},{name:\"Objective-C\",mime:\"text/x-objectivec\",mode:\"clike\",ext:[\"m\"],alias:[\"objective-c\",\"objc\"]},{name:\"Objective-C++\",mime:\"text/x-objectivec++\",mode:\"clike\",ext:[\"mm\"],alias:[\"objective-c++\",\"objc++\"]},{name:\"OCaml\",mime:\"text/x-ocaml\",mode:\"mllike\",ext:[\"ml\",\"mli\",\"mll\",\"mly\"]},{name:\"Octave\",mime:\"text/x-octave\",mode:\"octave\",ext:[\"m\"]},{name:\"Oz\",mime:\"text/x-oz\",mode:\"oz\",ext:[\"oz\"]},{name:\"Pascal\",mime:\"text/x-pascal\",mode:\"pascal\",ext:[\"p\",\"pas\"]},{name:\"PEG.js\",mime:\"null\",mode:\"pegjs\",ext:[\"jsonld\"]},{name:\"Perl\",mime:\"text/x-perl\",mode:\"perl\",ext:[\"pl\",\"pm\"]},{name:\"PHP\",mimes:[\"text/x-php\",\"application/x-httpd-php\",\"application/x-httpd-php-open\"],mode:\"php\",ext:[\"php\",\"php3\",\"php4\",\"php5\",\"php7\",\"phtml\"]},{name:\"Pig\",mime:\"text/x-pig\",mode:\"pig\",ext:[\"pig\"]},{name:\"Plain Text\",mime:\"text/plain\",mode:\"null\",ext:[\"txt\",\"text\",\"conf\",\"def\",\"list\",\"log\"]},{name:\"PLSQL\",mime:\"text/x-plsql\",mode:\"sql\",ext:[\"pls\"]},{name:\"PostgreSQL\",mime:\"text/x-pgsql\",mode:\"sql\"},{name:\"PowerShell\",mime:\"application/x-powershell\",mode:\"powershell\",ext:[\"ps1\",\"psd1\",\"psm1\"]},{name:\"Properties files\",mime:\"text/x-properties\",mode:\"properties\",ext:[\"properties\",\"ini\",\"in\"],alias:[\"ini\",\"properties\"]},{name:\"ProtoBuf\",mime:\"text/x-protobuf\",mode:\"protobuf\",ext:[\"proto\"]},{name:\"Python\",mime:\"text/x-python\",mode:\"python\",ext:[\"BUILD\",\"bzl\",\"py\",\"pyw\"],file:/^(BUCK|BUILD)$/},{name:\"Puppet\",mime:\"text/x-puppet\",mode:\"puppet\",ext:[\"pp\"]},{name:\"Q\",mime:\"text/x-q\",mode:\"q\",ext:[\"q\"]},{name:\"R\",mime:\"text/x-rsrc\",mode:\"r\",ext:[\"r\",\"R\"],alias:[\"rscript\"]},{name:\"reStructuredText\",mime:\"text/x-rst\",mode:\"rst\",ext:[\"rst\"],alias:[\"rst\"]},{name:\"RPM Changes\",mime:\"text/x-rpm-changes\",mode:\"rpm\"},{name:\"RPM Spec\",mime:\"text/x-rpm-spec\",mode:\"rpm\",ext:[\"spec\"]},{name:\"Ruby\",mime:\"text/x-ruby\",mode:\"ruby\",ext:[\"rb\"],alias:[\"jruby\",\"macruby\",\"rake\",\"rb\",\"rbx\"]},{name:\"Rust\",mime:\"text/x-rustsrc\",mode:\"rust\",ext:[\"rs\"]},{name:\"SAS\",mime:\"text/x-sas\",mode:\"sas\",ext:[\"sas\"]},{name:\"Sass\",mime:\"text/x-sass\",mode:\"sass\",ext:[\"sass\"]},{name:\"Scala\",mime:\"text/x-scala\",mode:\"clike\",ext:[\"scala\"]},{name:\"Scheme\",mime:\"text/x-scheme\",mode:\"scheme\",ext:[\"scm\",\"ss\"]},{name:\"SCSS\",mime:\"text/x-scss\",mode:\"css\",ext:[\"scss\"]},{name:\"Shell\",mimes:[\"text/x-sh\",\"application/x-sh\"],mode:\"shell\",ext:[\"sh\",\"ksh\",\"bash\"],alias:[\"bash\",\"sh\",\"zsh\"],file:/^PKGBUILD$/},{name:\"Sieve\",mime:\"application/sieve\",mode:\"sieve\",ext:[\"siv\",\"sieve\"]},{name:\"Slim\",mimes:[\"text/x-slim\",\"application/x-slim\"],mode:\"slim\",ext:[\"slim\"]},{name:\"Smalltalk\",mime:\"text/x-stsrc\",mode:\"smalltalk\",ext:[\"st\"]},{name:\"Smarty\",mime:\"text/x-smarty\",mode:\"smarty\",ext:[\"tpl\"]},{name:\"Solr\",mime:\"text/x-solr\",mode:\"solr\"},{name:\"SML\",mime:\"text/x-sml\",mode:\"mllike\",ext:[\"sml\",\"sig\",\"fun\",\"smackspec\"]},{name:\"Soy\",mime:\"text/x-soy\",mode:\"soy\",ext:[\"soy\"],alias:[\"closure template\"]},{name:\"SPARQL\",mime:\"application/sparql-query\",mode:\"sparql\",ext:[\"rq\",\"sparql\"],alias:[\"sparul\"]},{name:\"Spreadsheet\",mime:\"text/x-spreadsheet\",mode:\"spreadsheet\",alias:[\"excel\",\"formula\"]},{name:\"SQL\",mime:\"text/x-sql\",mode:\"sql\",ext:[\"sql\"]},{name:\"SQLite\",mime:\"text/x-sqlite\",mode:\"sql\"},{name:\"Squirrel\",mime:\"text/x-squirrel\",mode:\"clike\",ext:[\"nut\"]},{name:\"Stylus\",mime:\"text/x-styl\",mode:\"stylus\",ext:[\"styl\"]},{name:\"Swift\",mime:\"text/x-swift\",mode:\"swift\",ext:[\"swift\"]},{name:\"sTeX\",mime:\"text/x-stex\",mode:\"stex\"},{name:\"LaTeX\",mime:\"text/x-latex\",mode:\"stex\",ext:[\"text\",\"ltx\",\"tex\"],alias:[\"tex\"]},{name:\"SystemVerilog\",mime:\"text/x-systemverilog\",mode:\"verilog\",ext:[\"v\",\"sv\",\"svh\"]},{name:\"Tcl\",mime:\"text/x-tcl\",mode:\"tcl\",ext:[\"tcl\"]},{name:\"Textile\",mime:\"text/x-textile\",mode:\"textile\",ext:[\"textile\"]},{name:\"TiddlyWiki\",mime:\"text/x-tiddlywiki\",mode:\"tiddlywiki\"},{name:\"Tiki wiki\",mime:\"text/tiki\",mode:\"tiki\"},{name:\"TOML\",mime:\"text/x-toml\",mode:\"toml\",ext:[\"toml\"]},{name:\"Tornado\",mime:\"text/x-tornado\",mode:\"tornado\"},{name:\"troff\",mime:\"text/troff\",mode:\"troff\",ext:[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\"]},{name:\"TTCN\",mime:\"text/x-ttcn\",mode:\"ttcn\",ext:[\"ttcn\",\"ttcn3\",\"ttcnpp\"]},{name:\"TTCN_CFG\",mime:\"text/x-ttcn-cfg\",mode:\"ttcn-cfg\",ext:[\"cfg\"]},{name:\"Turtle\",mime:\"text/turtle\",mode:\"turtle\",ext:[\"ttl\"]},{name:\"TypeScript\",mime:\"application/typescript\",mode:\"javascript\",ext:[\"ts\"],alias:[\"ts\"]},{name:\"TypeScript-JSX\",mime:\"text/typescript-jsx\",mode:\"jsx\",ext:[\"tsx\"],alias:[\"tsx\"]},{name:\"Twig\",mime:\"text/x-twig\",mode:\"twig\"},{name:\"Web IDL\",mime:\"text/x-webidl\",mode:\"webidl\",ext:[\"webidl\"]},{name:\"VB.NET\",mime:\"text/x-vb\",mode:\"vb\",ext:[\"vb\"]},{name:\"VBScript\",mime:\"text/vbscript\",mode:\"vbscript\",ext:[\"vbs\"]},{name:\"Velocity\",mime:\"text/velocity\",mode:\"velocity\",ext:[\"vtl\"]},{name:\"Verilog\",mime:\"text/x-verilog\",mode:\"verilog\",ext:[\"v\"]},{name:\"VHDL\",mime:\"text/x-vhdl\",mode:\"vhdl\",ext:[\"vhd\",\"vhdl\"]},{name:\"Vue.js Component\",mimes:[\"script/x-vue\",\"text/x-vue\"],mode:\"vue\",ext:[\"vue\"]},{name:\"XML\",mimes:[\"application/xml\",\"text/xml\"],mode:\"xml\",ext:[\"xml\",\"xsl\",\"xsd\",\"svg\"],alias:[\"rss\",\"wsdl\",\"xsd\"]},{name:\"XQuery\",mime:\"application/xquery\",mode:\"xquery\",ext:[\"xy\",\"xquery\"]},{name:\"Yacas\",mime:\"text/x-yacas\",mode:\"yacas\",ext:[\"ys\"]},{name:\"YAML\",mimes:[\"text/x-yaml\",\"text/yaml\"],mode:\"yaml\",ext:[\"yaml\",\"yml\"],alias:[\"yml\"]},{name:\"Z80\",mime:\"text/x-z80\",mode:\"z80\",ext:[\"z80\"]},{name:\"mscgen\",mime:\"text/x-mscgen\",mode:\"mscgen\",ext:[\"mscgen\",\"mscin\",\"msc\"]},{name:\"xu\",mime:\"text/x-xu\",mode:\"mscgen\",ext:[\"xu\"]},{name:\"msgenny\",mime:\"text/x-msgenny\",mode:\"mscgen\",ext:[\"msgenny\"]},{name:\"WebAssembly\",mime:\"text/webassembly\",mode:\"wast\",ext:[\"wat\",\"wast\"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.mime==t)return i;if(i.mimes)for(var r=0;r<i.mimes.length;r++)if(i.mimes[r]==t)return i}return/\\+xml$/.test(t)?e.findModeByMIME(\"application/xml\"):/\\+json$/.test(t)?e.findModeByMIME(\"application/json\"):void 0},e.findModeByExtension=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.ext)for(var r=0;r<i.ext.length;r++)if(i.ext[r]==t)return i}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.file&&i.file.test(t))return i}var r=t.lastIndexOf(\".\"),o=r>-1&&t.substring(r+1,t.length);if(o)return e.findModeByExtension(o)},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.name.toLowerCase()==t)return i;if(i.alias)for(var r=0;r<i.alias.length;r++)if(i.alias[r].toLowerCase()==t)return i}}}(n(565))},1255:function(e,t,n){!function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function n(e){t(e);var n=e.state.placeholder=document.createElement(\"pre\");n.style.cssText=\"height: 0; overflow: visible\",n.style.direction=e.getOption(\"direction\"),n.className=\"CodeMirror-placeholder CodeMirror-line-like\";var i=e.getOption(\"placeholder\");\"string\"==typeof i&&(i=document.createTextNode(i)),n.appendChild(i),e.display.lineSpace.insertBefore(n,e.display.lineSpace.firstChild)}function i(e){setTimeout((function(){var i=!1;if(1==e.lineCount()){var r=e.getInputField();i=\"TEXTAREA\"==r.nodeName?!e.getLine(0).length:!/[^\\u200b]/.test(r.querySelector(\".CodeMirror-line\").textContent)}i?n(e):t(e)}),20)}function r(e){a(e)&&n(e)}function o(e){var i=e.getWrapperElement(),r=a(e);i.className=i.className.replace(\" CodeMirror-empty\",\"\")+(r?\" CodeMirror-empty\":\"\"),r?n(e):t(e)}function a(e){return 1===e.lineCount()&&\"\"===e.getLine(0)}e.defineOption(\"placeholder\",\"\",(function(n,a,l){var s=l&&l!=e.Init;if(a&&!s)n.on(\"blur\",r),n.on(\"change\",o),n.on(\"swapDoc\",o),e.on(n.getInputField(),\"compositionupdate\",n.state.placeholderCompose=function(){i(n)}),o(n);else if(!a&&s){n.off(\"blur\",r),n.off(\"change\",o),n.off(\"swapDoc\",o),e.off(n.getInputField(),\"compositionupdate\",n.state.placeholderCompose),t(n);var u=n.getWrapperElement();u.className=u.className.replace(\" CodeMirror-empty\",\"\")}a&&!n.hasFocus()&&r(n)}))}(n(565))},1256:function(e,t,n){!function(e){\"use strict\";function t(t,i){function r(){t.display.wrapper.offsetHeight?(n(t,i),t.display.lastWrapHeight!=t.display.wrapper.clientHeight&&t.refresh()):i.timeout=setTimeout(r,i.delay)}i.timeout=setTimeout(r,i.delay),i.hurry=function(){clearTimeout(i.timeout),i.timeout=setTimeout(r,50)},e.on(window,\"mouseup\",i.hurry),e.on(window,\"keyup\",i.hurry)}function n(t,n){clearTimeout(n.timeout),e.off(window,\"mouseup\",n.hurry),e.off(window,\"keyup\",n.hurry)}e.defineOption(\"autoRefresh\",!1,(function(e,i){e.state.autoRefresh&&(n(e,e.state.autoRefresh),e.state.autoRefresh=null),i&&0==e.display.wrapper.offsetHeight&&t(e,e.state.autoRefresh={delay:i.delay||250})}))}(n(565))},1257:function(e,t,n){!function(e){\"use strict\";function t(e){e.state.markedSelection&&e.operation((function(){u(e)}))}function n(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation((function(){l(e)}))}e.defineOption(\"styleSelectedText\",!1,(function(i,r,o){var a=o&&o!=e.Init;r&&!a?(i.state.markedSelection=[],i.state.markedSelectionStyle=\"string\"==typeof r?r:\"CodeMirror-selectedtext\",s(i),i.on(\"cursorActivity\",t),i.on(\"change\",n)):!r&&a&&(i.off(\"cursorActivity\",t),i.off(\"change\",n),l(i),i.state.markedSelection=i.state.markedSelectionStyle=null)}));var i=8,r=e.Pos,o=e.cmpPos;function a(e,t,n,a){if(0!=o(t,n))for(var l=e.state.markedSelection,s=e.state.markedSelectionStyle,u=t.line;;){var c=u==t.line?t:r(u,0),d=u+i,h=d>=n.line,f=h?n:r(d,0),p=e.markText(c,f,{className:s});if(null==a?l.push(p):l.splice(a++,0,p),h)break;u=d}}function l(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function s(e){l(e);for(var t=e.listSelections(),n=0;n<t.length;n++)a(e,t[n].from(),t[n].to())}function u(e){if(!e.somethingSelected())return l(e);if(e.listSelections().length>1)return s(e);var t=e.getCursor(\"start\"),n=e.getCursor(\"end\"),r=e.state.markedSelection;if(!r.length)return a(e,t,n);var u=r[0].find(),c=r[r.length-1].find();if(!u||!c||n.line-t.line<=i||o(t,c.to)>=0||o(n,u.from)<=0)return s(e);for(;o(t,u.from)>0;)r.shift().clear(),u=r[0].find();for(o(t,u.from)<0&&(u.to.line-t.line<i?(r.shift().clear(),a(e,t,u.to,0)):a(e,t,u.from,0));o(n,c.to)<0;)r.pop().clear(),c=r[r.length-1].find();o(n,c.to)>0&&(n.line-c.from.line<i?(r.pop().clear(),a(e,c.from,n)):a(e,c.to,n))}}(n(565))},1258:function(e,t,n){!function(e){\"use strict\";var t,n,i=e.Pos;function r(e){var t=e.flags;return null!=t?t:(e.ignoreCase?\"i\":\"\")+(e.global?\"g\":\"\")+(e.multiline?\"m\":\"\")}function o(e,t){for(var n=r(e),i=n,o=0;o<t.length;o++)-1==i.indexOf(t.charAt(o))&&(i+=t.charAt(o));return n==i?e:new RegExp(e.source,i)}function a(e){return/\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(e.source)}function l(e,t,n){t=o(t,\"g\");for(var r=n.line,a=n.ch,l=e.lastLine();r<=l;r++,a=0){t.lastIndex=a;var s=e.getLine(r),u=t.exec(s);if(u)return{from:i(r,u.index),to:i(r,u.index+u[0].length),match:u}}}function s(e,t,n){if(!a(t))return l(e,t,n);t=o(t,\"gm\");for(var r,s=1,u=n.line,c=e.lastLine();u<=c;){for(var d=0;d<s&&!(u>c);d++){var h=e.getLine(u++);r=null==r?h:r+\"\\n\"+h}s*=2,t.lastIndex=n.ch;var f=t.exec(r);if(f){var p=r.slice(0,f.index).split(\"\\n\"),m=f[0].split(\"\\n\"),g=n.line+p.length-1,v=p[p.length-1].length;return{from:i(g,v),to:i(g+m.length-1,1==m.length?v+m[0].length:m[m.length-1].length),match:f}}}}function u(e,t,n){for(var i,r=0;r<=e.length;){t.lastIndex=r;var o=t.exec(e);if(!o)break;var a=o.index+o[0].length;if(a>e.length-n)break;(!i||a>i.index+i[0].length)&&(i=o),r=o.index+1}return i}function c(e,t,n){t=o(t,\"g\");for(var r=n.line,a=n.ch,l=e.firstLine();r>=l;r--,a=-1){var s=e.getLine(r),c=u(s,t,a<0?0:s.length-a);if(c)return{from:i(r,c.index),to:i(r,c.index+c[0].length),match:c}}}function d(e,t,n){if(!a(t))return c(e,t,n);t=o(t,\"gm\");for(var r,l=1,s=e.getLine(n.line).length-n.ch,d=n.line,h=e.firstLine();d>=h;){for(var f=0;f<l&&d>=h;f++){var p=e.getLine(d--);r=null==r?p:p+\"\\n\"+r}l*=2;var m=u(r,t,s);if(m){var g=r.slice(0,m.index).split(\"\\n\"),v=m[0].split(\"\\n\"),x=d+g.length,y=g[g.length-1].length;return{from:i(x,y),to:i(x+v.length-1,1==v.length?y+v[0].length:v[v.length-1].length),match:m}}}}function h(e,t,n,i){if(e.length==t.length)return n;for(var r=0,o=n+Math.max(0,e.length-t.length);;){if(r==o)return r;var a=r+o>>1,l=i(e.slice(0,a)).length;if(l==n)return a;l>n?o=a:r=a+1}}function f(e,r,o,a){if(!r.length)return null;var l=a?t:n,s=l(r).split(/\\r|\\n\\r?/);e:for(var u=o.line,c=o.ch,d=e.lastLine()+1-s.length;u<=d;u++,c=0){var f=e.getLine(u).slice(c),p=l(f);if(1==s.length){var m=p.indexOf(s[0]);if(-1==m)continue e;return o=h(f,p,m,l)+c,{from:i(u,h(f,p,m,l)+c),to:i(u,h(f,p,m+s[0].length,l)+c)}}var g=p.length-s[0].length;if(p.slice(g)==s[0]){for(var v=1;v<s.length-1;v++)if(l(e.getLine(u+v))!=s[v])continue e;var x=e.getLine(u+s.length-1),y=l(x),b=s[s.length-1];if(y.slice(0,b.length)==b)return{from:i(u,h(f,p,g,l)+c),to:i(u+s.length-1,h(x,y,b.length,l))}}}}function p(e,r,o,a){if(!r.length)return null;var l=a?t:n,s=l(r).split(/\\r|\\n\\r?/);e:for(var u=o.line,c=o.ch,d=e.firstLine()-1+s.length;u>=d;u--,c=-1){var f=e.getLine(u);c>-1&&(f=f.slice(0,c));var p=l(f);if(1==s.length){var m=p.lastIndexOf(s[0]);if(-1==m)continue e;return{from:i(u,h(f,p,m,l)),to:i(u,h(f,p,m+s[0].length,l))}}var g=s[s.length-1];if(p.slice(0,g.length)==g){var v=1;for(o=u-s.length+1;v<s.length-1;v++)if(l(e.getLine(o+v))!=s[v])continue e;var x=e.getLine(u+1-s.length),y=l(x);if(y.slice(y.length-s[0].length)==s[0])return{from:i(u+1-s.length,h(x,y,x.length-s[0].length,l)),to:i(u,h(f,p,g.length,l))}}}}function m(e,t,n,r){var a;this.atOccurrence=!1,this.doc=e,n=n?e.clipPos(n):i(0,0),this.pos={from:n,to:n},\"object\"==typeof r?a=r.caseFold:(a=r,r=null),\"string\"==typeof t?(null==a&&(a=!1),this.matches=function(n,i){return(n?p:f)(e,t,i,a)}):(t=o(t,\"gm\"),r&&!1===r.multiline?this.matches=function(n,i){return(n?c:l)(e,t,i)}:this.matches=function(n,i){return(n?d:s)(e,t,i)})}String.prototype.normalize?(t=function(e){return e.normalize(\"NFD\").toLowerCase()},n=function(e){return e.normalize(\"NFD\")}):(t=function(e){return e.toLowerCase()},n=function(e){return e}),m.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var n=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));n&&0==e.cmpPos(n.from,n.to);)t?n.from.ch?n.from=i(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(i(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=i(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(t,i(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var r=i(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:r,to:r},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var r=e.splitLines(t);this.doc.replaceRange(r,this.pos.from,this.pos.to,n),this.pos.to=i(this.pos.from.line+r.length-1,r[r.length-1].length+(1==r.length?this.pos.from.ch:0))}}},e.defineExtension(\"getSearchCursor\",(function(e,t,n){return new m(this.doc,e,t,n)})),e.defineDocExtension(\"getSearchCursor\",(function(e,t,n){return new m(this,e,t,n)})),e.defineExtension(\"selectMatches\",(function(t,n){for(var i=[],r=this.getSearchCursor(t,this.getCursor(\"from\"),n);r.findNext()&&!(e.cmpPos(r.to(),this.getCursor(\"to\"))>0);)i.push({anchor:r.from(),head:r.to()});i.length&&this.setSelections(i,0)}))}(n(565))},1259:function(e,t,n){!function(e){\"use strict\";var t=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\\.beep|\\.lwz|\\.xpc|\\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\\.beeps?|xmpp|xri|ymsgr|z39\\.50[rs]?):(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`*!()\\[\\]{};:'\".,<>?\\xab\\xbb\\u201c\\u201d\\u2018\\u2019]))/i;e.defineMode(\"gfm\",(function(n,i){var r=0;function o(e){return e.code=!1,null}var a={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,n){if(n.combineTokens=null,n.codeBlock)return e.match(/^```+/)?(n.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(n.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),n.codeBlock=!0,null;if(\"`\"===e.peek()){e.next();var o=e.pos;e.eatWhile(\"`\");var a=1+e.pos-o;return n.code?a===r&&(n.code=!1):(r=a,n.code=!0),null}if(n.code)return e.next(),null;if(e.eatSpace())return n.ateSpace=!0,null;if((e.sol()||n.ateSpace)&&(n.ateSpace=!1,!1!==i.gitHubSpice)){if(e.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+@)?(?=.{0,6}\\d)(?:[a-f0-9]{7,40}\\b)/))return n.combineTokens=!0,\"link\";if(e.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+)?#[0-9]+\\b/))return n.combineTokens=!0,\"link\"}return e.match(t)&&\"](\"!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\\W/.test(e.string.charAt(e.start-1)))?(n.combineTokens=!0,\"link\"):(e.next(),null)},blankLine:o},l={taskLists:!0,strikethrough:!0,emoji:!0};for(var s in i)l[s]=i[s];return l.name=\"markdown\",e.overlayMode(e.getMode(n,l),a)}),\"markdown\"),e.defineMIME(\"text/x-gfm\",\"gfm\")}(n(565),n(833),n(835))},1260:function(e,t,n){\"use strict\";var i=n(1261);function r(e){\"function\"===typeof(e=e||{}).codeMirrorInstance&&\"function\"===typeof e.codeMirrorInstance.defineMode?(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),e.codeMirrorInstance.defineMode(\"spell-checker\",(function(t){if(!r.aff_loading){r.aff_loading=!0;var n=new XMLHttpRequest;n.open(\"GET\",\"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff\",!0),n.onload=function(){4===n.readyState&&200===n.status&&(r.aff_data=n.responseText,r.num_loaded++,2==r.num_loaded&&(r.typo=new i(\"en_US\",r.aff_data,r.dic_data,{platform:\"any\"})))},n.send(null)}if(!r.dic_loading){r.dic_loading=!0;var o=new XMLHttpRequest;o.open(\"GET\",\"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic\",!0),o.onload=function(){4===o.readyState&&200===o.status&&(r.dic_data=o.responseText,r.num_loaded++,2==r.num_loaded&&(r.typo=new i(\"en_US\",r.aff_data,r.dic_data,{platform:\"any\"})))},o.send(null)}var a='!\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~ ',l={token:function(e){var t=e.peek(),n=\"\";if(a.includes(t))return e.next(),null;for(;null!=(t=e.peek())&&!a.includes(t);)n+=t,e.next();return r.typo&&!r.typo.check(n)?\"spell-error\":null}},s=e.codeMirrorInstance.getMode(t,t.backdrop||\"text/plain\");return e.codeMirrorInstance.overlayMode(s,l,!0)}))):console.log(\"CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`\")}r.num_loaded=0,r.aff_loading=!1,r.dic_loading=!1,r.aff_data=\"\",r.dic_data=\"\",r.typo,e.exports=r},1261:function(e,t,n){(function(t){var i;!function(){\"use strict\";(i=function(e,n,i,r){r=r||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=r.flags||{},this.memoized={},this.loaded=!1;var o,a,l,s,u,c=this;function d(e,t){var n=c._readFile(e,null,r.asyncLoad);r.asyncLoad?n.then((function(e){t(e)})):t(n)}function h(e){n=e,i&&p()}function f(e){i=e,n&&p()}function p(){for(c.rules=c._parseAFF(n),c.compoundRuleCodes={},a=0,s=c.compoundRules.length;a<s;a++){var e=c.compoundRules[a];for(l=0,u=e.length;l<u;l++)c.compoundRuleCodes[e[l]]=[]}for(a in\"ONLYINCOMPOUND\"in c.flags&&(c.compoundRuleCodes[c.flags.ONLYINCOMPOUND]=[]),c.dictionaryTable=c._parseDIC(i),c.compoundRuleCodes)0===c.compoundRuleCodes[a].length&&delete c.compoundRuleCodes[a];for(a=0,s=c.compoundRules.length;a<s;a++){var t=c.compoundRules[a],o=\"\";for(l=0,u=t.length;l<u;l++){var d=t[l];d in c.compoundRuleCodes?o+=\"(\"+c.compoundRuleCodes[d].join(\"|\")+\")\":o+=d}c.compoundRules[a]=new RegExp(o,\"i\")}c.loaded=!0,r.asyncLoad&&r.loadedCallback&&r.loadedCallback(c)}return e&&(c.dictionary=e,n&&i?p():\"undefined\"!==typeof window&&\"chrome\"in window&&\"extension\"in window.chrome&&\"getURL\"in window.chrome.extension?(o=r.dictionaryPath?r.dictionaryPath:\"typo/dictionaries\",n||d(chrome.extension.getURL(o+\"/\"+e+\"/\"+e+\".aff\"),h),i||d(chrome.extension.getURL(o+\"/\"+e+\"/\"+e+\".dic\"),f)):(o=r.dictionaryPath?r.dictionaryPath:t+\"/dictionaries\",n||d(o+\"/\"+e+\"/\"+e+\".aff\",h),i||d(o+\"/\"+e+\"/\"+e+\".dic\",f))),this}).prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(e,t,i){if(t=t||\"utf8\",\"undefined\"!==typeof XMLHttpRequest){var r,o=new XMLHttpRequest;return o.open(\"GET\",e,i),i&&(r=new Promise((function(e,t){o.onload=function(){200===o.status?e(o.responseText):t(o.statusText)},o.onerror=function(){t(o.statusText)}}))),o.overrideMimeType&&o.overrideMimeType(\"text/plain; charset=\"+t),o.send(null),i?r:o.responseText}var a=n(1262);try{if(a.existsSync(e))return a.readFileSync(e,t);console.log(\"Path \"+e+\" does not exist.\")}catch(l){return console.log(l),\"\"}},_parseAFF:function(e){var t,n,i,r,o,a,l,s={},u=(e=this._removeAffixComments(e)).split(/\\r?\\n/);for(r=0,a=u.length;r<a;r++){var c=(t=u[r]).split(/\\s+/),d=c[0];if(\"PFX\"==d||\"SFX\"==d){var h=c[1],f=c[2],p=[];for(o=r+1,l=r+1+(n=parseInt(c[3],10));o<l;o++){var m=(i=u[o].split(/\\s+/))[2],g=i[3].split(\"/\"),v=g[0];\"0\"===v&&(v=\"\");var x=this.parseRuleCodes(g[1]),y=i[4],b={};b.add=v,x.length>0&&(b.continuationClasses=x),\".\"!==y&&(b.match=\"SFX\"===d?new RegExp(y+\"$\"):new RegExp(\"^\"+y)),\"0\"!=m&&(b.remove=\"SFX\"===d?new RegExp(m+\"$\"):m),p.push(b)}s[h]={type:d,combineable:\"Y\"==f,entries:p},r+=n}else if(\"COMPOUNDRULE\"===d){for(o=r+1,l=r+1+(n=parseInt(c[1],10));o<l;o++)i=(t=u[o]).split(/\\s+/),this.compoundRules.push(i[1]);r+=n}else\"REP\"===d?3===(i=t.split(/\\s+/)).length&&this.replacementTable.push([i[1],i[2]]):this.flags[d]=c[1]}return s},_removeAffixComments:function(e){return e=(e=(e=(e=e.replace(/^\\s*#.*$/gm,\"\")).replace(/^\\s\\s*/m,\"\").replace(/\\s\\s*$/m,\"\")).replace(/\\n{2,}/g,\"\\n\")).replace(/^\\s\\s*/,\"\").replace(/\\s\\s*$/,\"\")},_parseDIC:function(e){var t=(e=this._removeDicComments(e)).split(/\\r?\\n/),n={};function i(e,t){n.hasOwnProperty(e)||(n[e]=null),t.length>0&&(null===n[e]&&(n[e]=[]),n[e].push(t))}for(var r=1,o=t.length;r<o;r++){var a=t[r];if(a){var l=a.split(\"/\",2),s=l[0];if(l.length>1){var u=this.parseRuleCodes(l[1]);\"NEEDAFFIX\"in this.flags&&-1!=u.indexOf(this.flags.NEEDAFFIX)||i(s,u);for(var c=0,d=u.length;c<d;c++){var h=u[c],f=this.rules[h];if(f)for(var p=this._applyRule(s,f),m=0,g=p.length;m<g;m++){var v=p[m];if(i(v,[]),f.combineable)for(var x=c+1;x<d;x++){var y=u[x],b=this.rules[y];if(b&&b.combineable&&f.type!=b.type)for(var D=this._applyRule(v,b),C=0,w=D.length;C<w;C++){i(D[C],[])}}}h in this.compoundRuleCodes&&this.compoundRuleCodes[h].push(s)}}else i(s.trim(),[])}}return n},_removeDicComments:function(e){return e=e.replace(/^\\t.*$/gm,\"\")},parseRuleCodes:function(e){if(!e)return[];if(!(\"FLAG\"in this.flags))return e.split(\"\");if(\"long\"===this.flags.FLAG){for(var t=[],n=0,i=e.length;n<i;n+=2)t.push(e.substr(n,2));return t}return\"num\"===this.flags.FLAG?e.split(\",\"):void 0},_applyRule:function(e,t){for(var n=t.entries,i=[],r=0,o=n.length;r<o;r++){var a=n[r];if(!a.match||e.match(a.match)){var l=e;if(a.remove&&(l=l.replace(a.remove,\"\")),\"SFX\"===t.type?l+=a.add:l=a.add+l,i.push(l),\"continuationClasses\"in a)for(var s=0,u=a.continuationClasses.length;s<u;s++){var c=this.rules[a.continuationClasses[s]];c&&(i=i.concat(this._applyRule(l,c)))}}}return i},check:function(e){if(!this.loaded)throw\"Dictionary not loaded.\";var t=e.replace(/^\\s\\s*/,\"\").replace(/\\s\\s*$/,\"\");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var n=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(n,\"KEEPCASE\"))return!1;if(this.checkExact(n))return!0;if(this.checkExact(t.toLowerCase()))return!0}var i=t[0].toLowerCase()+t.substring(1);if(i!==t){if(this.hasFlag(i,\"KEEPCASE\"))return!1;if(this.checkExact(i))return!0}return!1},checkExact:function(e){if(!this.loaded)throw\"Dictionary not loaded.\";var t,n,i=this.dictionaryTable[e];if(\"undefined\"===typeof i){if(\"COMPOUNDMIN\"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(t=0,n=this.compoundRules.length;t<n;t++)if(e.match(this.compoundRules[t]))return!0}else{if(null===i)return!0;if(\"object\"===typeof i)for(t=0,n=i.length;t<n;t++)if(!this.hasFlag(e,\"ONLYINCOMPOUND\",i[t]))return!0}return!1},hasFlag:function(e,t,n){if(!this.loaded)throw\"Dictionary not loaded.\";return!(!(t in this.flags)||(\"undefined\"===typeof n&&(n=Array.prototype.concat.apply([],this.dictionaryTable[e])),!n||-1===n.indexOf(this.flags[t])))},alphabet:\"\",suggest:function(e,t){if(!this.loaded)throw\"Dictionary not loaded.\";if(t=t||5,this.memoized.hasOwnProperty(e)){var n=this.memoized[e].limit;if(t<=n||this.memoized[e].suggestions.length<n)return this.memoized[e].suggestions.slice(0,t)}if(this.check(e))return[];for(var i=0,r=this.replacementTable.length;i<r;i++){var o=this.replacementTable[i];if(-1!==e.indexOf(o[0])){var a=e.replace(o[0],o[1]);if(this.check(a))return[a]}}var l=this;function s(e,t){var n,i,r,o,a={},s=l.alphabet.length;if(\"string\"==typeof e){var u=e;(e={})[u]=!0}for(var u in e)for(n=0,r=u.length+1;n<r;n++){var c=[u.substring(0,n),u.substring(n)];if(c[1]&&(o=c[0]+c[1].substring(1),t&&!l.check(o)||(o in a?a[o]+=1:a[o]=1)),c[1].length>1&&c[1][1]!==c[1][0]&&(o=c[0]+c[1][1]+c[1][0]+c[1].substring(2),t&&!l.check(o)||(o in a?a[o]+=1:a[o]=1)),c[1]){var d=c[1].substring(0,1).toUpperCase()===c[1].substring(0,1)?\"uppercase\":\"lowercase\";for(i=0;i<s;i++){var h=l.alphabet[i];\"uppercase\"===d&&(h=h.toUpperCase()),h!=c[1].substring(0,1)&&(o=c[0]+h+c[1].substring(1),t&&!l.check(o)||(o in a?a[o]+=1:a[o]=1))}}if(c[1])for(i=0;i<s;i++){d=c[0].substring(-1).toUpperCase()===c[0].substring(-1)&&c[1].substring(0,1).toUpperCase()===c[1].substring(0,1)?\"uppercase\":\"lowercase\",h=l.alphabet[i];\"uppercase\"===d&&(h=h.toUpperCase()),o=c[0]+h+c[1],t&&!l.check(o)||(o in a?a[o]+=1:a[o]=1)}}return a}return l.alphabet=\"abcdefghijklmnopqrstuvwxyz\",this.memoized[e]={suggestions:function(e){var n,i=s(e),r=s(i,!0);for(var o in i)l.check(o)&&(o in r?r[o]+=i[o]:r[o]=i[o]);var a=[];for(n in r)r.hasOwnProperty(n)&&a.push([n,r[n]]);a.sort((function(e,t){var n=e[1],i=t[1];return n<i?-1:n>i?1:t[0].localeCompare(e[0])})).reverse();var u=[],c=\"lowercase\";e.toUpperCase()===e?c=\"uppercase\":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(c=\"capitalized\");var d=t;for(n=0;n<Math.min(d,a.length);n++)\"uppercase\"===c?a[n][0]=a[n][0].toUpperCase():\"capitalized\"===c&&(a[n][0]=a[n][0].substr(0,1).toUpperCase()+a[n][0].substr(1)),l.hasFlag(a[n][0],\"NOSUGGEST\")||-1!=u.indexOf(a[n][0])?d++:u.push(a[n][0]);return u}(e),limit:t},this.memoized[e].suggestions}}}(),e.exports=i}).call(this,\"/\")},1263:function(e,t,n){e.exports=function(){\"use strict\";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function n(e,t){if(e){if(\"string\"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){var i=\"undefined\"!==typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=n(e))||t&&e&&\"number\"===typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:\"\",highlight:null,langPrefix:\"language-\",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function l(e){o.exports.defaults=e}o.exports={defaults:a(),getDefaults:a,changeDefaults:l};var s=/[&<>\"']/,u=/[&<>\"']/g,c=/[<>\"']|&(?!#?\\w+;)/,d=/[<>\"']|&(?!#?\\w+;)/g,h={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"},f=function(e){return h[e]};function p(e,t){if(t){if(s.test(e))return e.replace(u,f)}else if(c.test(e))return e.replace(d,f);return e}var m=/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/gi;function g(e){return e.replace(m,(function(e,t){return\"colon\"===(t=t.toLowerCase())?\":\":\"#\"===t.charAt(0)?\"x\"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):\"\"}))}var v=/(^|[^\\[])\\^/g;function x(e,t){e=e.source||e,t=t||\"\";var n={replace:function(t,i){return i=(i=i.source||i).replace(v,\"$1\"),e=e.replace(t,i),n},getRegex:function(){return new RegExp(e,t)}};return n}var y=/[^\\w:]/g,b=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function D(e,t,n){if(e){var i;try{i=decodeURIComponent(g(n)).replace(y,\"\").toLowerCase()}catch(r){return null}if(0===i.indexOf(\"javascript:\")||0===i.indexOf(\"vbscript:\")||0===i.indexOf(\"data:\"))return null}t&&!b.test(n)&&(n=F(t,n));try{n=encodeURI(n).replace(/%25/g,\"%\")}catch(r){return null}return n}var C={},w=/^[^:]+:\\/*[^/]*$/,k=/^([^:]+:)[\\s\\S]*$/,S=/^([^:]+:\\/*[^/]*)[\\s\\S]*$/;function F(e,t){C[\" \"+e]||(w.test(e)?C[\" \"+e]=e+\"/\":C[\" \"+e]=T(e,\"/\",!0));var n=-1===(e=C[\" \"+e]).indexOf(\":\");return\"//\"===t.substring(0,2)?n?t:e.replace(k,\"$1\")+t:\"/\"===t.charAt(0)?n?t:e.replace(S,\"$1\")+t:e+t}function A(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function E(e,t){var n=e.replace(/\\|/g,(function(e,t,n){for(var i=!1,r=t;--r>=0&&\"\\\\\"===n[r];)i=!i;return i?\"|\":\" |\"})).split(/ \\|/),i=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push(\"\");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\\\\|/g,\"|\");return n}function T(e,t,n){var i=e.length;if(0===i)return\"\";for(var r=0;r<i;){var o=e.charAt(i-r-1);if(o!==t||n){if(o===t||!n)break;r++}else r++}return e.substr(0,i-r)}function L(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,i=0,r=0;r<n;r++)if(\"\\\\\"===e[r])r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&--i<0)return r;return-1}function M(e){e&&e.sanitize&&!e.silent&&console.warn(\"marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options\")}function B(e,t){if(t<1)return\"\";for(var n=\"\";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}var N={escape:p,unescape:g,edit:x,cleanUrl:D,resolveUrl:F,noopTest:{exec:function(){}},merge:A,splitCells:E,rtrim:T,findClosingBracket:L,checkSanitizeDeprecation:M,repeatString:B},O=o.exports.defaults,I=N.rtrim,z=N.splitCells,H=N.escape,R=N.findClosingBracket;function P(e,t,n){var i=t.href,r=t.title?H(t.title):null,o=e[1].replace(/\\\\([\\[\\]])/g,\"$1\");return\"!\"!==e[0].charAt(0)?{type:\"link\",raw:n,href:i,title:r,text:o}:{type:\"image\",raw:n,href:i,title:r,text:H(o)}}function _(e,t){var n=e.match(/^(\\s+)(?:```)/);if(null===n)return t;var i=n[1];return t.split(\"\\n\").map((function(e){var t=e.match(/^\\s+/);return null===t?e:t[0].length>=i.length?e.slice(i.length):e})).join(\"\\n\")}var W=function(){function e(e){this.options=e||O}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:\"space\",raw:t[0]}:{raw:\"\\n\"}},t.code=function(e){var t=this.rules.block.code.exec(e);if(t){var n=t[0].replace(/^ {1,4}/gm,\"\");return{type:\"code\",raw:t[0],codeBlockStyle:\"indented\",text:this.options.pedantic?n:I(n,\"\\n\")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],i=_(n,t[3]||\"\");return{type:\"code\",raw:n,lang:t[2]?t[2].trim():t[2],text:i}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var i=I(n,\"#\");this.options.pedantic?n=i.trim():i&&!/ $/.test(i)||(n=i.trim())}return{type:\"heading\",raw:t[0],depth:t[1].length,text:n}}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:\"table\",header:z(t[1].replace(/^ *| *\\| *$/g,\"\")),align:t[2].replace(/^ *|\\| *$/g,\"\").split(/ *\\| */),cells:t[3]?t[3].replace(/\\n$/,\"\").split(\"\\n\"):[],raw:t[0]};if(n.header.length===n.align.length){var i,r=n.align.length;for(i=0;i<r;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]=\"right\":/^ *:-+: *$/.test(n.align[i])?n.align[i]=\"center\":/^ *:-+ *$/.test(n.align[i])?n.align[i]=\"left\":n.align[i]=null;for(r=n.cells.length,i=0;i<r;i++)n.cells[i]=z(n.cells[i],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:\"hr\",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,\"\");return{type:\"blockquote\",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,i,r,o,a,l,s,u,c,d=t[0],h=t[2],f=h.length>1,p={type:\"list\",raw:d,ordered:f,start:f?+h.slice(0,-1):\"\",loose:!1,items:[]},m=t[0].match(this.rules.block.item),g=!1,v=m.length;r=this.rules.block.listItemStart.exec(m[0]);for(var x=0;x<v;x++){if(d=n=m[x],this.options.pedantic||(c=n.match(new RegExp(\"\\\\n\\\\s*\\\\n {0,\"+(r[0].length-1)+\"}\\\\S\")))&&(a=n.length-c.index+m.slice(x+1).join(\"\\n\").length,p.raw=p.raw.substring(0,p.raw.length-a),d=n=n.substring(0,c.index),v=x+1),x!==v-1){if(o=this.rules.block.listItemStart.exec(m[x+1]),this.options.pedantic?o[1].length>r[1].length:o[1].length>=r[0].length||o[1].length>3){m.splice(x,2,m[x]+(!this.options.pedantic&&o[1].length<r[0].length&&!m[x].match(/\\n$/)?\"\":\"\\n\")+m[x+1]),x--,v--;continue}(!this.options.pedantic||this.options.smartLists?o[2][o[2].length-1]!==h[h.length-1]:f===(1===o[2].length))&&(a=m.slice(x+1).join(\"\\n\").length,p.raw=p.raw.substring(0,p.raw.length-a),x=v-1),r=o}i=n.length,~(n=n.replace(/^ *([*+-]|\\d+[.)]) ?/,\"\")).indexOf(\"\\n \")&&(i-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,\"\"):n.replace(new RegExp(\"^ {1,\"+i+\"}\",\"gm\"),\"\")),n=I(n,\"\\n\"),x!==v-1&&(d+=\"\\n\"),l=g||/\\n\\n(?!\\s*$)/.test(d),x!==v-1&&(g=\"\\n\\n\"===d.slice(-2),l||(l=g)),l&&(p.loose=!0),this.options.gfm&&(u=void 0,(s=/^\\[[ xX]\\] /.test(n))&&(u=\" \"!==n[1],n=n.replace(/^\\[[ xX]\\] +/,\"\"))),p.items.push({type:\"list_item\",raw:d,task:s,checked:u,loose:l,text:n})}return p}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?\"paragraph\":\"html\",raw:t[0],pre:!this.options.sanitizer&&(\"pre\"===t[1]||\"script\"===t[1]||\"style\"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):H(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:\"def\",tag:t[1].toLowerCase().replace(/\\s+/g,\" \"),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:\"table\",header:z(t[1].replace(/^ *| *\\| *$/g,\"\")),align:t[2].replace(/^ *|\\| *$/g,\"\").split(/ *\\| */),cells:t[3]?t[3].replace(/\\n$/,\"\").split(\"\\n\"):[]};if(n.header.length===n.align.length){n.raw=t[0];var i,r=n.align.length;for(i=0;i<r;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]=\"right\":/^ *:-+: *$/.test(n.align[i])?n.align[i]=\"center\":/^ *:-+ *$/.test(n.align[i])?n.align[i]=\"left\":n.align[i]=null;for(r=n.cells.length,i=0;i<r;i++)n.cells[i]=z(n.cells[i].replace(/^ *\\| *| *\\| *$/g,\"\"),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:\"heading\",raw:t[0],depth:\"=\"===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:\"paragraph\",raw:t[0],text:\"\\n\"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:\"text\",raw:t[0],text:t[0]}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:\"escape\",raw:t[0],text:H(t[1])}},t.tag=function(e,t,n){var i=this.rules.inline.tag.exec(e);if(i)return!t&&/^<a /i.test(i[0])?t=!0:t&&/^<\\/a>/i.test(i[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\\s|>)/i.test(i[0])?n=!0:n&&/^<\\/(pre|code|kbd|script)(\\s|>)/i.test(i[0])&&(n=!1),{type:this.options.sanitize?\"text\":\"html\",raw:i[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):H(i[0]):i[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var i=I(n.slice(0,-1),\"\\\\\");if((n.length-i.length)%2===0)return}else{var r=R(t[2],\"()\");if(r>-1){var o=(0===t[0].indexOf(\"!\")?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,o).trim(),t[3]=\"\"}}var a=t[2],l=\"\";if(this.options.pedantic){var s=/^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(a);s&&(a=s[1],l=s[3])}else l=t[3]?t[3].slice(1,-1):\"\";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),P(t,{href:a?a.replace(this.rules.inline._escapes,\"$1\"):a,title:l?l.replace(this.rules.inline._escapes,\"$1\"):l},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var i=(n[2]||n[1]).replace(/\\s+/g,\" \");if(!(i=t[i.toLowerCase()])||!i.href){var r=n[0].charAt(0);return{type:\"text\",raw:r,text:r}}return P(n,i,n[0])}},t.emStrong=function(e,t,n){void 0===n&&(n=\"\");var i=this.rules.inline.emStrong.lDelim.exec(e);if(i&&(!i[3]||!n.match(/(?:[0-9A-Za-z\\xAA\\xB2\\xB3\\xB5\\xB9\\xBA\\xBC-\\xBE\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05D0-\\u05EA\\u05EF-\\u05F2\\u0620-\\u064A\\u0660-\\u0669\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07C0-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u08A0-\\u08B4\\u08B6-\\u08C7\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0966-\\u096F\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09F9\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A6F\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AE6-\\u0AEF\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B66-\\u0B6F\\u0B71-\\u0B77\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0BE6-\\u0BF2\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D04-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D58-\\u0D61\\u0D66-\\u0D78\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DE6-\\u0DEF\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F20-\\u0F33\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F-\\u1049\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u1090-\\u1099\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1369-\\u137C\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B50-\\u1B59\\u1B83-\\u1BA0\\u1BAE-\\u1BE5\\u1C00-\\u1C23\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1C80-\\u1C88\\u1C90-\\u1CBA\\u1CBD-\\u1CBF\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2070\\u2071\\u2074-\\u2079\\u207F-\\u2089\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2150-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2CFD\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u3192-\\u3195\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\u3400-\\u4DBF\\u4E00-\\u9FFC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7BF\\uA7C2-\\uA7CA\\uA7F5-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA830-\\uA835\\uA840-\\uA873\\uA882-\\uA8B3\\uA8D0-\\uA8D9\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA8FE\\uA900-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF-\\uA9D9\\uA9E0-\\uA9E4\\uA9E6-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB69\\uAB70-\\uABE2\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD07-\\uDD33\\uDD40-\\uDD78\\uDD8A\\uDD8B\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDEE1-\\uDEFB\\uDF00-\\uDF23\\uDF2D-\\uDF4A\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCA0-\\uDCA9\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC58-\\uDC76\\uDC79-\\uDC9E\\uDCA7-\\uDCAF\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDCFB-\\uDD1B\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBC-\\uDDCF\\uDDD2-\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE35\\uDE40-\\uDE48\\uDE60-\\uDE7E\\uDE80-\\uDE9F\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDEEB-\\uDEEF\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF58-\\uDF72\\uDF78-\\uDF91\\uDFA9-\\uDFAF]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2\\uDCFA-\\uDD23\\uDD30-\\uDD39\\uDE60-\\uDE7E\\uDE80-\\uDEA9\\uDEB0\\uDEB1\\uDF00-\\uDF27\\uDF30-\\uDF45\\uDF51-\\uDF54\\uDFB0-\\uDFCB\\uDFE0-\\uDFF6]|\\uD804[\\uDC03-\\uDC37\\uDC52-\\uDC6F\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDCF0-\\uDCF9\\uDD03-\\uDD26\\uDD36-\\uDD3F\\uDD44\\uDD47\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDD0-\\uDDDA\\uDDDC\\uDDE1-\\uDDF4\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDEF0-\\uDEF9\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC50-\\uDC59\\uDC5F-\\uDC61\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDCD0-\\uDCD9\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE50-\\uDE59\\uDE80-\\uDEAA\\uDEB8\\uDEC0-\\uDEC9\\uDF00-\\uDF1A\\uDF30-\\uDF3B]|\\uD806[\\uDC00-\\uDC2B\\uDCA0-\\uDCF2\\uDCFF-\\uDD06\\uDD09\\uDD0C-\\uDD13\\uDD15\\uDD16\\uDD18-\\uDD2F\\uDD3F\\uDD41\\uDD50-\\uDD59\\uDDA0-\\uDDA7\\uDDAA-\\uDDD0\\uDDE1\\uDDE3\\uDE00\\uDE0B-\\uDE32\\uDE3A\\uDE50\\uDE5C-\\uDE89\\uDE9D\\uDEC0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC50-\\uDC6C\\uDC72-\\uDC8F\\uDD00-\\uDD06\\uDD08\\uDD09\\uDD0B-\\uDD30\\uDD46\\uDD50-\\uDD59\\uDD60-\\uDD65\\uDD67\\uDD68\\uDD6A-\\uDD89\\uDD98\\uDDA0-\\uDDA9\\uDEE0-\\uDEF2\\uDFB0\\uDFC0-\\uDFD4]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|[\\uD80C\\uD81C-\\uD820\\uD822\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872\\uD874-\\uD879\\uD880-\\uD883][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDE60-\\uDE69\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF50-\\uDF59\\uDF5B-\\uDF61\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDE40-\\uDE96\\uDF00-\\uDF4A\\uDF50\\uDF93-\\uDF9F\\uDFE0\\uDFE1\\uDFE3]|\\uD821[\\uDC00-\\uDFF7]|\\uD823[\\uDC00-\\uDCD5\\uDD00-\\uDD08]|\\uD82C[\\uDC00-\\uDD1E\\uDD50-\\uDD52\\uDD64-\\uDD67\\uDD70-\\uDEFB]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD834[\\uDEE0-\\uDEF3\\uDF60-\\uDF78]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB\\uDFCE-\\uDFFF]|\\uD838[\\uDD00-\\uDD2C\\uDD37-\\uDD3D\\uDD40-\\uDD49\\uDD4E\\uDEC0-\\uDEEB\\uDEF0-\\uDEF9]|\\uD83A[\\uDC00-\\uDCC4\\uDCC7-\\uDCCF\\uDD00-\\uDD43\\uDD4B\\uDD50-\\uDD59]|\\uD83B[\\uDC71-\\uDCAB\\uDCAD-\\uDCAF\\uDCB1-\\uDCB4\\uDD01-\\uDD2D\\uDD2F-\\uDD3D\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD83C[\\uDD00-\\uDD0C]|\\uD83E[\\uDFF0-\\uDFF9]|\\uD869[\\uDC00-\\uDEDD\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1\\uDEB0-\\uDFFF]|\\uD87A[\\uDC00-\\uDFE0]|\\uD87E[\\uDC00-\\uDE1D]|\\uD884[\\uDC00-\\uDF4A])/))){var r=i[1]||i[2]||\"\";if(!r||r&&(\"\"===n||this.rules.inline.punctuation.exec(n))){var o,a,l=i[0].length-1,s=l,u=0,c=\"*\"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+l);null!=(i=c.exec(t));)if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6])if(a=o.length,i[3]||i[4])s+=a;else if(!((i[5]||i[6])&&l%3)||(l+a)%3){if(!((s-=a)>0))return a=Math.min(a,a+s+u),Math.min(l,a)%2?{type:\"em\",raw:e.slice(0,l+i.index+a+1),text:e.slice(1,l+i.index+a)}:{type:\"strong\",raw:e.slice(0,l+i.index+a+1),text:e.slice(2,l+i.index+a-1)}}else u+=a}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\\n/g,\" \"),i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=H(n,!0),{type:\"codespan\",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:\"br\",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:\"del\",raw:t[0],text:t[2]}},t.autolink=function(e,t){var n,i,r=this.rules.inline.autolink.exec(e);if(r)return i=\"@\"===r[2]?\"mailto:\"+(n=H(this.options.mangle?t(r[1]):r[1])):n=H(r[1]),{type:\"link\",raw:r[0],text:n,href:i,tokens:[{type:\"text\",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var i,r;if(\"@\"===n[2])r=\"mailto:\"+(i=H(this.options.mangle?t(n[0]):n[0]));else{var o;do{o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(o!==n[0]);i=H(n[0]),r=\"www.\"===n[1]?\"http://\"+i:i}return{type:\"link\",raw:n[0],text:i,href:r,tokens:[{type:\"text\",raw:i,text:i}]}}},t.inlineText=function(e,t,n){var i,r=this.rules.inline.text.exec(e);if(r)return i=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):H(r[0]):r[0]:H(this.options.smartypants?n(r[0]):r[0]),{type:\"text\",raw:r[0],text:i}},e}(),j=N.noopTest,q=N.edit,U=N.merge,$={newline:/^(?: *(?:\\n|$))+/,code:/^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,list:/^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?! {0,3}bull )\\n*|\\s*$)/,html:\"^ {0,3}(?:<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)|comment[^\\\\n]*(\\\\n+|$)|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$))\",def:/^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,nptable:j,table:j,lheading:/^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,_paragraph:/^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html| +\\n)[^\\n]+)*)/,text:/^[^\\n]+/,_label:/(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/,_title:/(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/};$.def=q($.def).replace(\"label\",$._label).replace(\"title\",$._title).getRegex(),$.bullet=/(?:[*+-]|\\d{1,9}[.)])/,$.item=/^( *)(bull) ?[^\\n]*(?:\\n(?! *bull ?)[^\\n]*)*/,$.item=q($.item,\"gm\").replace(/bull/g,$.bullet).getRegex(),$.listItemStart=q(/^( *)(bull) */).replace(\"bull\",$.bullet).getRegex(),$.list=q($.list).replace(/bull/g,$.bullet).replace(\"hr\",\"\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))\").replace(\"def\",\"\\\\n+(?=\"+$.def.source+\")\").getRegex(),$._tag=\"address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul\",$._comment=/<!--(?!-?>)[\\s\\S]*?(?:-->|$)/,$.html=q($.html,\"i\").replace(\"comment\",$._comment).replace(\"tag\",$._tag).replace(\"attribute\",/ +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex(),$.paragraph=q($._paragraph).replace(\"hr\",$.hr).replace(\"heading\",\" {0,3}#{1,6} \").replace(\"|lheading\",\"\").replace(\"blockquote\",\" {0,3}>\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\",$._tag).getRegex(),$.blockquote=q($.blockquote).replace(\"paragraph\",$.paragraph).getRegex(),$.normal=U({},$),$.gfm=U({},$.normal,{nptable:\"^ *([^|\\\\n ].*\\\\|.*)\\\\n {0,3}([-:]+ *\\\\|[-| :]*)(?:\\\\n((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)\",table:\"^ *\\\\|(.+)\\\\n {0,3}\\\\|?( *[-:]+[-| :]*)(?:\\\\n *((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)\"}),$.gfm.nptable=q($.gfm.nptable).replace(\"hr\",$.hr).replace(\"heading\",\" {0,3}#{1,6} \").replace(\"blockquote\",\" {0,3}>\").replace(\"code\",\" {4}[^\\\\n]\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\",$._tag).getRegex(),$.gfm.table=q($.gfm.table).replace(\"hr\",$.hr).replace(\"heading\",\" {0,3}#{1,6} \").replace(\"blockquote\",\" {0,3}>\").replace(\"code\",\" {4}[^\\\\n]\").replace(\"fences\",\" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\",\" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\",\"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\",$._tag).getRegex(),$.pedantic=U({},$.normal,{html:q(\"^ *(?:comment *(?:\\\\n|\\\\s*$)|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)|<tag(?:\\\"[^\\\"]*\\\"|'[^']*'|\\\\s[^'\\\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))\").replace(\"comment\",$._comment).replace(/tag/g,\"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b\").getRegex(),def:/^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,heading:/^(#{1,6})(.*)(?:\\n+|$)/,fences:j,paragraph:q($.normal._paragraph).replace(\"hr\",$.hr).replace(\"heading\",\" *#{1,6} *[^\\n]\").replace(\"lheading\",$.lheading).replace(\"blockquote\",\" {0,3}>\").replace(\"|fences\",\"\").replace(\"|list\",\"\").replace(\"|html\",\"\").getRegex()});var G={escape:/^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,autolink:/^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,url:j,tag:\"^comment|^</[a-zA-Z][\\\\w:-]*\\\\s*>|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>|^<\\\\?[\\\\s\\\\S]*?\\\\?>|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\",link:/^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,reflink:/^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,nolink:/^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,reflinkSearch:\"reflink|nolink(?!\\\\()\",emStrong:{lDelim:/^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,rDelimAst:/\\_\\_[^_*]*?\\*[^_*]*?\\_\\_|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,rDelimUnd:/\\*\\*[^_*]*?\\_[^_*]*?\\*\\*|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,br:/^( {2,}|\\\\)\\n(?!\\s*$)/,del:j,text:/^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,punctuation:/^([\\spunctuation])/,_punctuation:\"!\\\"#$%&'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~\"};G.punctuation=q(G.punctuation).replace(/punctuation/g,G._punctuation).getRegex(),G.blockSkip=/\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g,G.escapedEmSt=/\\\\\\*|\\\\_/g,G._comment=q($._comment).replace(\"(?:--\\x3e|$)\",\"--\\x3e\").getRegex(),G.emStrong.lDelim=q(G.emStrong.lDelim).replace(/punct/g,G._punctuation).getRegex(),G.emStrong.rDelimAst=q(G.emStrong.rDelimAst,\"g\").replace(/punct/g,G._punctuation).getRegex(),G.emStrong.rDelimUnd=q(G.emStrong.rDelimUnd,\"g\").replace(/punct/g,G._punctuation).getRegex(),G._escapes=/\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g,G._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,G._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,G.autolink=q(G.autolink).replace(\"scheme\",G._scheme).replace(\"email\",G._email).getRegex(),G._attribute=/\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/,G.tag=q(G.tag).replace(\"comment\",G._comment).replace(\"attribute\",G._attribute).getRegex(),G._label=/(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/,G._href=/<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/,G._title=/\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/,G.link=q(G.link).replace(\"label\",G._label).replace(\"href\",G._href).replace(\"title\",G._title).getRegex(),G.reflink=q(G.reflink).replace(\"label\",G._label).getRegex(),G.reflinkSearch=q(G.reflinkSearch,\"g\").replace(\"reflink\",G.reflink).replace(\"nolink\",G.nolink).getRegex(),G.normal=U({},G),G.pedantic=U({},G.normal,{strong:{start:/^__|\\*\\*/,middle:/^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,endAst:/\\*\\*(?!\\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\\*/,middle:/^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,endAst:/\\*(?!\\*)/g,endUnd:/_(?!_)/g},link:q(/^!?\\[(label)\\]\\((.*?)\\)/).replace(\"label\",G._label).getRegex(),reflink:q(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace(\"label\",G._label).getRegex()}),G.gfm=U({},G.normal,{escape:q(G.escape).replace(\"])\",\"~|])\").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/}),G.gfm.url=q(G.gfm.url,\"i\").replace(\"email\",G.gfm._extended_email).getRegex(),G.breaks=U({},G.gfm,{br:q(G.br).replace(\"{2,}\",\"*\").getRegex(),text:q(G.gfm.text).replace(\"\\\\b_\",\"\\\\b_| {2,}\\\\n\").replace(/\\{2,\\}/g,\"*\").getRegex()});var V={block:$,inline:G},K=W,X=o.exports.defaults,Z=V.block,Y=V.inline,J=N.repeatString;function Q(e){return e.replace(/---/g,\"\\u2014\").replace(/--/g,\"\\u2013\").replace(/(^|[-\\u2014/(\\[{\"\\s])'/g,\"$1\\u2018\").replace(/'/g,\"\\u2019\").replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g,\"$1\\u201c\").replace(/\"/g,\"\\u201d\").replace(/\\.{3}/g,\"\\u2026\")}function ee(e){var t,n,i=\"\",r=e.length;for(t=0;t<r;t++)n=e.charCodeAt(t),Math.random()>.5&&(n=\"x\"+n.toString(16)),i+=\"&#\"+n+\";\";return i}var te=function(){function e(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||X,this.options.tokenizer=this.options.tokenizer||new K,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:Z.normal,inline:Y.normal};this.options.pedantic?(t.block=Z.pedantic,t.inline=Y.pedantic):this.options.gfm&&(t.block=Z.gfm,this.options.breaks?t.inline=Y.breaks:t.inline=Y.gfm),this.tokenizer.rules=t}e.lex=function(t,n){return new e(n).lex(t)},e.lexInline=function(t,n){return new e(n).inlineTokens(t)};var n=e.prototype;return n.lex=function(e){return e=e.replace(/\\r\\n|\\r/g,\"\\n\").replace(/\\t/g,\"    \"),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},n.blockTokens=function(e,t,n){var i,r,o,a,l,s,u=this;for(void 0===t&&(t=[]),void 0===n&&(n=!0),this.options.pedantic&&(e=e.replace(/^ +$/gm,\"\"));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(n){return!!(i=n.call(u,e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)}))))if(i=this.tokenizer.space(e))e=e.substring(i.raw.length),i.type&&t.push(i);else if(i=this.tokenizer.code(e))e=e.substring(i.raw.length),(a=t[t.length-1])&&\"paragraph\"===a.type?(a.raw+=\"\\n\"+i.raw,a.text+=\"\\n\"+i.text):t.push(i);else if(i=this.tokenizer.fences(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.heading(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.nptable(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.hr(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.blockquote(e))e=e.substring(i.raw.length),i.tokens=this.blockTokens(i.text,[],n),t.push(i);else if(i=this.tokenizer.list(e)){for(e=e.substring(i.raw.length),o=i.items.length,r=0;r<o;r++)i.items[r].tokens=this.blockTokens(i.items[r].text,[],!1);t.push(i)}else if(i=this.tokenizer.html(e))e=e.substring(i.raw.length),t.push(i);else if(n&&(i=this.tokenizer.def(e)))e=e.substring(i.raw.length),this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});else if(i=this.tokenizer.table(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.lheading(e))e=e.substring(i.raw.length),t.push(i);else if(l=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,n=e.slice(1),i=void 0;u.options.extensions.startBlock.forEach((function(e){\"number\"===typeof(i=e.call(this,n))&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(l=e.substring(0,t+1))}(),n&&(i=this.tokenizer.paragraph(l)))a=t[t.length-1],s&&\"paragraph\"===a.type?(a.raw+=\"\\n\"+i.raw,a.text+=\"\\n\"+i.text):t.push(i),s=l.length!==e.length,e=e.substring(i.raw.length);else if(i=this.tokenizer.text(e))e=e.substring(i.raw.length),(a=t[t.length-1])&&\"text\"===a.type?(a.raw+=\"\\n\"+i.raw,a.text+=\"\\n\"+i.text):t.push(i);else if(e){var c=\"Infinite loop on byte: \"+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}return t},n.inline=function(e){var t,n,i,r,o,a,l=e.length;for(t=0;t<l;t++)switch((a=e[t]).type){case\"paragraph\":case\"text\":case\"heading\":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case\"table\":for(a.tokens={header:[],cells:[]},r=a.header.length,n=0;n<r;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(r=a.cells.length,n=0;n<r;n++)for(o=a.cells[n],a.tokens.cells[n]=[],i=0;i<o.length;i++)a.tokens.cells[n][i]=[],this.inlineTokens(o[i],a.tokens.cells[n][i]);break;case\"blockquote\":this.inline(a.tokens);break;case\"list\":for(r=a.items.length,n=0;n<r;n++)this.inline(a.items[n].tokens)}return e},n.inlineTokens=function(e,t,n,i){var r,o,a,l=this;void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===i&&(i=!1);var s,u,c,d=e;if(this.tokens.links){var h=Object.keys(this.tokens.links);if(h.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(d));)h.includes(s[0].slice(s[0].lastIndexOf(\"[\")+1,-1))&&(d=d.slice(0,s.index)+\"[\"+J(\"a\",s[0].length-2)+\"]\"+d.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(d));)d=d.slice(0,s.index)+\"[\"+J(\"a\",s[0].length-2)+\"]\"+d.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(s=this.tokenizer.rules.inline.escapedEmSt.exec(d));)d=d.slice(0,s.index)+\"++\"+d.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(u||(c=\"\"),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(n){return!!(r=n.call(l,e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)}))))if(r=this.tokenizer.escape(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.tag(e,n,i))e=e.substring(r.raw.length),n=r.inLink,i=r.inRawBlock,(o=t[t.length-1])&&\"text\"===r.type&&\"text\"===o.type?(o.raw+=r.raw,o.text+=r.text):t.push(r);else if(r=this.tokenizer.link(e))e=e.substring(r.raw.length),\"link\"===r.type&&(r.tokens=this.inlineTokens(r.text,[],!0,i)),t.push(r);else if(r=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(r.raw.length),o=t[t.length-1],\"link\"===r.type?(r.tokens=this.inlineTokens(r.text,[],!0,i),t.push(r)):o&&\"text\"===r.type&&\"text\"===o.type?(o.raw+=r.raw,o.text+=r.text):t.push(r);else if(r=this.tokenizer.emStrong(e,d,c))e=e.substring(r.raw.length),r.tokens=this.inlineTokens(r.text,[],n,i),t.push(r);else if(r=this.tokenizer.codespan(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.br(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.del(e))e=e.substring(r.raw.length),r.tokens=this.inlineTokens(r.text,[],n,i),t.push(r);else if(r=this.tokenizer.autolink(e,ee))e=e.substring(r.raw.length),t.push(r);else if(n||!(r=this.tokenizer.url(e,ee))){if(a=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,n=e.slice(1),i=void 0;l.options.extensions.startInline.forEach((function(e){\"number\"===typeof(i=e.call(this,n))&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(a=e.substring(0,t+1))}(),r=this.tokenizer.inlineText(a,i,Q))e=e.substring(r.raw.length),\"_\"!==r.raw.slice(-1)&&(c=r.raw.slice(-1)),u=!0,(o=t[t.length-1])&&\"text\"===o.type?(o.raw+=r.raw,o.text+=r.text):t.push(r);else if(e){var f=\"Infinite loop on byte: \"+e.charCodeAt(0);if(this.options.silent){console.error(f);break}throw new Error(f)}}else e=e.substring(r.raw.length),t.push(r);return t},t(e,null,[{key:\"rules\",get:function(){return{block:Z,inline:Y}}}]),e}(),ne=o.exports.defaults,ie=N.cleanUrl,re=N.escape,oe=function(){function e(e){this.options=e||ne}var t=e.prototype;return t.code=function(e,t,n){var i=(t||\"\").match(/\\S*/)[0];if(this.options.highlight){var r=this.options.highlight(e,i);null!=r&&r!==e&&(n=!0,e=r)}return e=e.replace(/\\n$/,\"\")+\"\\n\",i?'<pre><code class=\"'+this.options.langPrefix+re(i,!0)+'\">'+(n?e:re(e,!0))+\"</code></pre>\\n\":\"<pre><code>\"+(n?e:re(e,!0))+\"</code></pre>\\n\"},t.blockquote=function(e){return\"<blockquote>\\n\"+e+\"</blockquote>\\n\"},t.html=function(e){return e},t.heading=function(e,t,n,i){return this.options.headerIds?\"<h\"+t+' id=\"'+this.options.headerPrefix+i.slug(n)+'\">'+e+\"</h\"+t+\">\\n\":\"<h\"+t+\">\"+e+\"</h\"+t+\">\\n\"},t.hr=function(){return this.options.xhtml?\"<hr/>\\n\":\"<hr>\\n\"},t.list=function(e,t,n){var i=t?\"ol\":\"ul\";return\"<\"+i+(t&&1!==n?' start=\"'+n+'\"':\"\")+\">\\n\"+e+\"</\"+i+\">\\n\"},t.listitem=function(e){return\"<li>\"+e+\"</li>\\n\"},t.checkbox=function(e){return\"<input \"+(e?'checked=\"\" ':\"\")+'disabled=\"\" type=\"checkbox\"'+(this.options.xhtml?\" /\":\"\")+\"> \"},t.paragraph=function(e){return\"<p>\"+e+\"</p>\\n\"},t.table=function(e,t){return t&&(t=\"<tbody>\"+t+\"</tbody>\"),\"<table>\\n<thead>\\n\"+e+\"</thead>\\n\"+t+\"</table>\\n\"},t.tablerow=function(e){return\"<tr>\\n\"+e+\"</tr>\\n\"},t.tablecell=function(e,t){var n=t.header?\"th\":\"td\";return(t.align?\"<\"+n+' align=\"'+t.align+'\">':\"<\"+n+\">\")+e+\"</\"+n+\">\\n\"},t.strong=function(e){return\"<strong>\"+e+\"</strong>\"},t.em=function(e){return\"<em>\"+e+\"</em>\"},t.codespan=function(e){return\"<code>\"+e+\"</code>\"},t.br=function(){return this.options.xhtml?\"<br/>\":\"<br>\"},t.del=function(e){return\"<del>\"+e+\"</del>\"},t.link=function(e,t,n){if(null===(e=ie(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<a href=\"'+re(e)+'\"';return t&&(i+=' title=\"'+t+'\"'),i+=\">\"+n+\"</a>\"},t.image=function(e,t,n){if(null===(e=ie(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<img src=\"'+e+'\" alt=\"'+n+'\"';return t&&(i+=' title=\"'+t+'\"'),i+=this.options.xhtml?\"/>\":\">\"},t.text=function(e){return e},e}(),ae=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return\"\"+n},t.image=function(e,t,n){return\"\"+n},t.br=function(){return\"\"},e}(),le=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\\/a-z].*?>/gi,\"\").replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g,\"\").replace(/\\s/g,\"-\")},t.getNextSafeSlug=function(e,t){var n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do{n=e+\"-\"+ ++i}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=i,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),se=oe,ue=ae,ce=le,de=o.exports.defaults,he=N.unescape,fe=te,pe=function(){function e(e){this.options=e||de,this.options.renderer=this.options.renderer||new se,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ue,this.slugger=new ce}e.parse=function(t,n){return new e(n).parse(t)},e.parseInline=function(t,n){return new e(n).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var n,i,r,o,a,l,s,u,c,d,h,f,p,m,g,v,x,y,b,D=\"\",C=e.length;for(n=0;n<C;n++)if(d=e[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type])||!1===(b=this.options.extensions.renderers[d.type].call(this,d))&&[\"space\",\"hr\",\"heading\",\"code\",\"table\",\"blockquote\",\"list\",\"html\",\"paragraph\",\"text\"].includes(d.type))switch(d.type){case\"space\":continue;case\"hr\":D+=this.renderer.hr();continue;case\"heading\":D+=this.renderer.heading(this.parseInline(d.tokens),d.depth,he(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case\"code\":D+=this.renderer.code(d.text,d.lang,d.escaped);continue;case\"table\":for(u=\"\",s=\"\",o=d.header.length,i=0;i<o;i++)s+=this.renderer.tablecell(this.parseInline(d.tokens.header[i]),{header:!0,align:d.align[i]});for(u+=this.renderer.tablerow(s),c=\"\",o=d.cells.length,i=0;i<o;i++){for(s=\"\",a=(l=d.tokens.cells[i]).length,r=0;r<a;r++)s+=this.renderer.tablecell(this.parseInline(l[r]),{header:!1,align:d.align[r]});c+=this.renderer.tablerow(s)}D+=this.renderer.table(u,c);continue;case\"blockquote\":c=this.parse(d.tokens),D+=this.renderer.blockquote(c);continue;case\"list\":for(h=d.ordered,f=d.start,p=d.loose,o=d.items.length,c=\"\",i=0;i<o;i++)v=(g=d.items[i]).checked,x=g.task,m=\"\",g.task&&(y=this.renderer.checkbox(v),p?g.tokens.length>0&&\"text\"===g.tokens[0].type?(g.tokens[0].text=y+\" \"+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&\"text\"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=y+\" \"+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:\"text\",text:y}):m+=y),m+=this.parse(g.tokens,p),c+=this.renderer.listitem(m,x,v);D+=this.renderer.list(c,h,f);continue;case\"html\":D+=this.renderer.html(d.text);continue;case\"paragraph\":D+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case\"text\":for(c=d.tokens?this.parseInline(d.tokens):d.text;n+1<C&&\"text\"===e[n+1].type;)c+=\"\\n\"+((d=e[++n]).tokens?this.parseInline(d.tokens):d.text);D+=t?this.renderer.paragraph(c):c;continue;default:var w='Token with \"'+d.type+'\" type was not found.';if(this.options.silent)return void console.error(w);throw new Error(w)}else D+=b||\"\";return D},t.parseInline=function(e,t){t=t||this.renderer;var n,i,r,o=\"\",a=e.length;for(n=0;n<a;n++)if(i=e[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type])||!1===(r=this.options.extensions.renderers[i.type].call(this,i))&&[\"escape\",\"html\",\"link\",\"image\",\"strong\",\"em\",\"codespan\",\"br\",\"del\",\"text\"].includes(i.type))switch(i.type){case\"escape\":o+=t.text(i.text);break;case\"html\":o+=t.html(i.text);break;case\"link\":o+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break;case\"image\":o+=t.image(i.href,i.title,i.text);break;case\"strong\":o+=t.strong(this.parseInline(i.tokens,t));break;case\"em\":o+=t.em(this.parseInline(i.tokens,t));break;case\"codespan\":o+=t.codespan(i.text);break;case\"br\":o+=t.br();break;case\"del\":o+=t.del(this.parseInline(i.tokens,t));break;case\"text\":o+=t.text(i.text);break;default:var l='Token with \"'+i.type+'\" type was not found.';if(this.options.silent)return void console.error(l);throw new Error(l)}else o+=r||\"\";return o},e}(),me=W,ge=oe,ve=ae,xe=le,ye=N.merge,be=N.checkSanitizeDeprecation,De=N.escape,Ce=o.exports.getDefaults,we=o.exports.changeDefaults,ke=o.exports.defaults;function Se(e,t,n){if(\"undefined\"===typeof e||null===e)throw new Error(\"marked(): input parameter is undefined or null\");if(\"string\"!==typeof e)throw new Error(\"marked(): input parameter is of type \"+Object.prototype.toString.call(e)+\", string expected\");if(\"function\"===typeof t&&(n=t,t=null),t=ye({},Se.defaults,t||{}),be(t),n){var i,r=t.highlight;try{i=fe.lex(e,t)}catch(s){return n(s)}var o=function(e){var o;if(!e)try{t.walkTokens&&Se.walkTokens(i,t.walkTokens),o=pe.parse(i,t)}catch(s){e=s}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return o();if(delete t.highlight,!i.length)return o();var a=0;return Se.walkTokens(i,(function(e){\"code\"===e.type&&(a++,setTimeout((function(){r(e.text,e.lang,(function(t,n){if(t)return o(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0===--a&&o()}))}),0))})),void(0===a&&o())}try{var l=fe.lex(e,t);return t.walkTokens&&Se.walkTokens(l,t.walkTokens),pe.parse(l,t)}catch(s){if(s.message+=\"\\nPlease report this to https://github.com/markedjs/marked.\",t.silent)return\"<p>An error occurred:</p><pre>\"+De(s.message+\"\",!0)+\"</pre>\";throw s}}return Se.options=Se.setOptions=function(e){return ye(Se.defaults,e),we(Se.defaults),Se},Se.getDefaults=Ce,Se.defaults=ke,Se.use=function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r,o=ye.apply(void 0,[{}].concat(n)),a=Se.defaults.extensions||{renderers:{},childTokens:{}};n.forEach((function(t){if(t.extensions&&(r=!0,t.extensions.forEach((function(e){if(!e.name)throw new Error(\"extension name required\");if(e.renderer){var t=a.renderers?a.renderers[e.name]:null;a.renderers[e.name]=t?function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=e.renderer.apply(this,i);return!1===o&&(o=t.apply(this,i)),o}:e.renderer}if(e.tokenizer){if(!e.level||\"block\"!==e.level&&\"inline\"!==e.level)throw new Error(\"extension level must be 'block' or 'inline'\");a[e.level]?a[e.level].unshift(e.tokenizer):a[e.level]=[e.tokenizer],e.start&&(\"block\"===e.level?a.startBlock?a.startBlock.push(e.start):a.startBlock=[e.start]:\"inline\"===e.level&&(a.startInline?a.startInline.push(e.start):a.startInline=[e.start]))}e.childTokens&&(a.childTokens[e.name]=e.childTokens)}))),t.renderer&&function(){var e=Se.defaults.renderer||new ge,n=function(n){var i=e[n];e[n]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var l=t.renderer[n].apply(e,o);return!1===l&&(l=i.apply(e,o)),l}};for(var i in t.renderer)n(i);o.renderer=e}(),t.tokenizer&&function(){var e=Se.defaults.tokenizer||new me,n=function(n){var i=e[n];e[n]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var l=t.tokenizer[n].apply(e,o);return!1===l&&(l=i.apply(e,o)),l}};for(var i in t.tokenizer)n(i);o.tokenizer=e}(),t.walkTokens){var n=Se.defaults.walkTokens;o.walkTokens=function(i){t.walkTokens.call(e,i),n&&n(i)}}r&&(o.extensions=a),Se.setOptions(o)}))},Se.walkTokens=function(e,t){for(var n,i=function(){var e=n.value;switch(t(e),e.type){case\"table\":for(var i,o=r(e.tokens.header);!(i=o()).done;){var a=i.value;Se.walkTokens(a,t)}for(var l,s=r(e.tokens.cells);!(l=s()).done;)for(var u,c=r(l.value);!(u=c()).done;){var d=u.value;Se.walkTokens(d,t)}break;case\"list\":Se.walkTokens(e.items,t);break;default:Se.defaults.extensions&&Se.defaults.extensions.childTokens&&Se.defaults.extensions.childTokens[e.type]?Se.defaults.extensions.childTokens[e.type].forEach((function(n){Se.walkTokens(e[n],t)})):e.tokens&&Se.walkTokens(e.tokens,t)}},o=r(e);!(n=o()).done;)i()},Se.parseInline=function(e,t){if(\"undefined\"===typeof e||null===e)throw new Error(\"marked.parseInline(): input parameter is undefined or null\");if(\"string\"!==typeof e)throw new Error(\"marked.parseInline(): input parameter is of type \"+Object.prototype.toString.call(e)+\", string expected\");t=ye({},Se.defaults,t||{}),be(t);try{var n=fe.lexInline(e,t);return t.walkTokens&&Se.walkTokens(n,t.walkTokens),pe.parseInline(n,t)}catch(i){if(i.message+=\"\\nPlease report this to https://github.com/markedjs/marked.\",t.silent)return\"<p>An error occurred:</p><pre>\"+De(i.message+\"\",!0)+\"</pre>\";throw i}},Se.Parser=pe,Se.parser=pe.parse,Se.Renderer=ge,Se.TextRenderer=ve,Se.Lexer=fe,Se.lexer=fe.lex,Se.Tokenizer=me,Se.Slugger=xe,Se.parse=Se,Se}()},1264:function(e,t,n){},565:function(e,t,n){e.exports=function(){\"use strict\";var e=navigator.userAgent,t=navigator.platform,n=/gecko\\/\\d/i.test(e),i=/MSIE \\d/.test(e),r=/Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(e),o=/Edge\\/(\\d+)/.exec(e),a=i||r||o,l=a&&(i?document.documentMode||6:+(o||r)[1]),s=!o&&/WebKit\\//.test(e),u=s&&/Qt\\/\\d+\\.\\d+/.test(e),c=!o&&/Chrome\\//.test(e),d=/Opera\\//.test(e),h=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(e),p=/PhantomJS/.test(e),m=h&&(/Mobile\\/\\w+/.test(e)||navigator.maxTouchPoints>2),g=/Android/.test(e),v=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),x=m||/Mac/.test(t),y=/\\bCrOS\\b/.test(e),b=/win/i.test(t),D=d&&e.match(/Version\\/(\\d*\\.\\d*)/);D&&(D=Number(D[1])),D&&D>=15&&(d=!1,s=!0);var C=x&&(u||d&&(null==D||D<12.11)),w=n||a&&l>=9;function k(e){return new RegExp(\"(^|\\\\s)\"+e+\"(?:$|\\\\s)\\\\s*\")}var S,F=function(e,t){var n=e.className,i=k(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:\"\")}};function A(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function E(e,t){return A(e).appendChild(t)}function T(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),\"string\"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function L(e,t,n,i){var r=T(e,t,n,i);return r.setAttribute(\"role\",\"presentation\"),r}function M(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function B(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function N(e,t){var n=e.className;k(t).test(n)||(e.className+=(n?\" \":\"\")+t)}function O(e,t){for(var n=e.split(\" \"),i=0;i<n.length;i++)n[i]&&!k(n[i]).test(t)&&(t+=\" \"+n[i]);return t}S=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(r){return i}return i.collapse(!0),i.moveEnd(\"character\",n),i.moveStart(\"character\",t),i};var I=function(e){e.select()};function z(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function H(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function R(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\\s\\u00a0]/))&&(t=e.length);for(var o=i||0,a=r||0;;){var l=e.indexOf(\"\\t\",o);if(l<0||l>=t)return a+(t-o);a+=l-o,a+=n-a%n,o=l+1}}m?I=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(I=function(e){try{e.select()}catch(t){}});var P=function(){this.id=null,this.f=null,this.time=0,this.handler=z(this.onTimeout,this)};function _(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}P.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},P.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var W=50,j={toString:function(){return\"CodeMirror.Pass\"}},q={scroll:!1},U={origin:\"*mouse\"},$={origin:\"+move\"};function G(e,t,n){for(var i=0,r=0;;){var o=e.indexOf(\"\\t\",i);-1==o&&(o=e.length);var a=o-i;if(o==e.length||r+a>=t)return i+Math.min(a,t-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=t)return i}}var V=[\"\"];function K(e){for(;V.length<=e;)V.push(X(V)+\" \");return V[e]}function X(e){return e[e.length-1]}function Z(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function Y(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}function J(){}function Q(e,t){var n;return Object.create?n=Object.create(e):(J.prototype=e,n=new J),t&&H(t,n),n}var ee=/[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;function te(e){return/\\w/.test(e)||e>\"\\x80\"&&(e.toUpperCase()!=e.toLowerCase()||ee.test(e))}function ne(e,t){return t?!!(t.source.indexOf(\"\\\\w\")>-1&&te(e))||t.test(e):te(e)}function ie(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;function oe(e){return e.charCodeAt(0)>=768&&re.test(e)}function ae(e,t,n){for(;(n<0?t>0:t<e.length)&&oe(e.charAt(t));)t+=n;return t}function le(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+i}}function se(e,t,n,i){if(!e)return i(t,n,\"ltr\",0);for(var r=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(i(Math.max(a.from,t),Math.min(a.to,n),1==a.level?\"rtl\":\"ltr\",o),r=!0)}r||i(t,n,\"ltr\")}var ue=null;function ce(e,t,n){var i;ue=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&\"before\"==n?i=r:ue=r),o.from==t&&(o.from!=o.to&&\"before\"!=n?i=r:ue=r)}return null!=i?i:ue}var de=function(){var e=\"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\",t=\"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?\"R\":1536<=n&&n<=1785?t.charAt(n-1536):1774<=n&&n<=2220?\"r\":8192<=n&&n<=8203?\"w\":8204==n?\"b\":\"L\"}var i=/[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/,r=/[stwN]/,o=/[LRr]/,a=/[Lb1n]/,l=/[1n]/;function s(e,t,n){this.level=e,this.from=t,this.to=n}return function(e,t){var u=\"ltr\"==t?\"L\":\"R\";if(0==e.length||\"ltr\"==t&&!i.test(e))return!1;for(var c=e.length,d=[],h=0;h<c;++h)d.push(n(e.charCodeAt(h)));for(var f=0,p=u;f<c;++f){var m=d[f];\"m\"==m?d[f]=p:p=m}for(var g=0,v=u;g<c;++g){var x=d[g];\"1\"==x&&\"r\"==v?d[g]=\"n\":o.test(x)&&(v=x,\"r\"==x&&(d[g]=\"R\"))}for(var y=1,b=d[0];y<c-1;++y){var D=d[y];\"+\"==D&&\"1\"==b&&\"1\"==d[y+1]?d[y]=\"1\":\",\"!=D||b!=d[y+1]||\"1\"!=b&&\"n\"!=b||(d[y]=b),b=D}for(var C=0;C<c;++C){var w=d[C];if(\",\"==w)d[C]=\"N\";else if(\"%\"==w){var k=void 0;for(k=C+1;k<c&&\"%\"==d[k];++k);for(var S=C&&\"!\"==d[C-1]||k<c&&\"1\"==d[k]?\"1\":\"N\",F=C;F<k;++F)d[F]=S;C=k-1}}for(var A=0,E=u;A<c;++A){var T=d[A];\"L\"==E&&\"1\"==T?d[A]=\"L\":o.test(T)&&(E=T)}for(var L=0;L<c;++L)if(r.test(d[L])){var M=void 0;for(M=L+1;M<c&&r.test(d[M]);++M);for(var B=\"L\"==(L?d[L-1]:u),N=B==(\"L\"==(M<c?d[M]:u))?B?\"L\":\"R\":u,O=L;O<M;++O)d[O]=N;L=M-1}for(var I,z=[],H=0;H<c;)if(a.test(d[H])){var R=H;for(++H;H<c&&a.test(d[H]);++H);z.push(new s(0,R,H))}else{var P=H,_=z.length,W=\"rtl\"==t?1:0;for(++H;H<c&&\"L\"!=d[H];++H);for(var j=P;j<H;)if(l.test(d[j])){P<j&&(z.splice(_,0,new s(1,P,j)),_+=W);var q=j;for(++j;j<H&&l.test(d[j]);++j);z.splice(_,0,new s(2,q,j)),_+=W,P=j}else++j;P<H&&z.splice(_,0,new s(1,P,H))}return\"ltr\"==t&&(1==z[0].level&&(I=e.match(/^\\s+/))&&(z[0].from=I[0].length,z.unshift(new s(0,0,I[0].length))),1==X(z).level&&(I=e.match(/\\s+$/))&&(X(z).to-=I[0].length,z.push(new s(0,c-I[0].length,c)))),\"rtl\"==t?z.reverse():z}}();function he(e,t){var n=e.order;return null==n&&(n=e.order=de(e.text,t)),n}var fe=[],pe=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent(\"on\"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||fe).concat(n)}};function me(e,t){return e._handlers&&e._handlers[t]||fe}function ge(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent(\"on\"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=_(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function ve(e,t){var n=me(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function xe(e,t,n){return\"string\"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ve(e,n||t.type,e,t),ke(t)||t.codemirrorIgnore}function ye(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==_(n,t[i])&&n.push(t[i])}function be(e,t){return me(e,t).length>0}function De(e){e.prototype.on=function(e,t){pe(this,e,t)},e.prototype.off=function(e,t){ge(this,e,t)}}function Ce(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function we(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ke(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Se(e){Ce(e),we(e)}function Fe(e){return e.target||e.srcElement}function Ae(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),x&&e.ctrlKey&&1==t&&(t=3),t}var Ee,Te,Le=function(){if(a&&l<9)return!1;var e=T(\"div\");return\"draggable\"in e||\"dragDrop\"in e}();function Me(e){if(null==Ee){var t=T(\"span\",\"\\u200b\");E(e,T(\"span\",[t,document.createTextNode(\"x\")])),0!=e.firstChild.offsetHeight&&(Ee=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&l<8))}var n=Ee?T(\"span\",\"\\u200b\"):T(\"span\",\"\\xa0\",null,\"display: inline-block; width: 1px; margin-right: -1px\");return n.setAttribute(\"cm-text\",\"\"),n}function Be(e){if(null!=Te)return Te;var t=E(e,document.createTextNode(\"A\\u062eA\")),n=S(t,0,1).getBoundingClientRect(),i=S(t,1,2).getBoundingClientRect();return A(e),!(!n||n.left==n.right)&&(Te=i.right-n.right<3)}var Ne=3!=\"\\n\\nb\".split(/\\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf(\"\\n\",t);-1==r&&(r=e.length);var o=e.slice(t,\"\\r\"==e.charAt(r-1)?r-1:r),a=o.indexOf(\"\\r\");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\\r\\n?|\\n/)},Oe=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints(\"StartToEnd\",t)},Ie=function(){var e=T(\"div\");return\"oncopy\"in e||(e.setAttribute(\"oncopy\",\"return;\"),\"function\"==typeof e.oncopy)}(),ze=null;function He(e){if(null!=ze)return ze;var t=E(e,T(\"span\",\"x\")),n=t.getBoundingClientRect(),i=S(t,0,1).getBoundingClientRect();return ze=Math.abs(n.left-i.left)>1}var Re={},Pe={};function _e(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Re[e]=t}function We(e,t){Pe[e]=t}function je(e){if(\"string\"==typeof e&&Pe.hasOwnProperty(e))e=Pe[e];else if(e&&\"string\"==typeof e.name&&Pe.hasOwnProperty(e.name)){var t=Pe[e.name];\"string\"==typeof t&&(t={name:t}),(e=Q(t,e)).name=t.name}else{if(\"string\"==typeof e&&/^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(e))return je(\"application/xml\");if(\"string\"==typeof e&&/^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(e))return je(\"application/json\")}return\"string\"==typeof e?{name:e}:e||{name:\"null\"}}function qe(e,t){t=je(t);var n=Re[t.name];if(!n)return qe(e,\"text/plain\");var i=n(e,t);if(Ue.hasOwnProperty(t.name)){var r=Ue[t.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i[\"_\"+o]=i[o]),i[o]=r[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)i[a]=t.modeProps[a];return i}var Ue={};function $e(e,t){H(t,Ue.hasOwnProperty(e)?Ue[e]:Ue[e]={})}function Ge(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Ve(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ke(e,t,n){return!e.startState||e.startState(t,n)}var Xe=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Ze(e,t){if((t-=e.first)<0||t>=e.size)throw new Error(\"There is no line \"+(t+e.first)+\" in the document.\");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function Ye(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r})),i}function Je(e,t,n){var i=[];return e.iter(t,n,(function(e){i.push(e.text)})),i}function Qe(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function et(e){if(null==e.parent)return null;for(var t=e.parent,n=_(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function tt(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var l=e.lines[a].height;if(t<l)break;t-=l}return n+a}function nt(e,t){return t>=e.first&&t<e.first+e.size}function it(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function rt(e,t,n){if(void 0===n&&(n=null),!(this instanceof rt))return new rt(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ot(e,t){return e.line-t.line||e.ch-t.ch}function at(e,t){return e.sticky==t.sticky&&0==ot(e,t)}function lt(e){return rt(e.line,e.ch)}function st(e,t){return ot(e,t)<0?t:e}function ut(e,t){return ot(e,t)<0?e:t}function ct(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function dt(e,t){if(t.line<e.first)return rt(e.first,0);var n=e.first+e.size-1;return t.line>n?rt(n,Ze(e,n).text.length):ht(t,Ze(e,t.line).text.length)}function ht(e,t){var n=e.ch;return null==n||n>t?rt(e.line,t):n<0?rt(e.line,0):e}function ft(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=dt(e,t[i]);return n}Xe.prototype.eol=function(){return this.pos>=this.string.length},Xe.prototype.sol=function(){return this.pos==this.lineStart},Xe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xe.prototype.eat=function(e){var t=this.string.charAt(this.pos);if(\"string\"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Xe.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Xe.prototype.eatSpace=function(){for(var e=this.pos;/[\\s\\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Xe.prototype.skipToEnd=function(){this.pos=this.string.length},Xe.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Xe.prototype.backUp=function(e){this.pos-=e},Xe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Xe.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},Xe.prototype.match=function(e,t,n){if(\"string\"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},Xe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xe.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Xe.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Xe.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var pt=function(e,t){this.state=e,this.lookAhead=t},mt=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function gt(e,t,n,i){var r=[e.state.modeGen],o={};St(e,t.text,e.doc.mode,n,(function(e,t){return r.push(e,t)}),o,i);for(var a=n.state,l=function(i){n.baseTokens=r;var l=e.state.overlays[i],s=1,u=0;n.state=!0,St(e,t.text,l.mode,n,(function(e,t){for(var n=s;u<e;){var i=r[s];i>e&&r.splice(s,1,e,r[s+1],i),s+=2,u=Math.min(e,i)}if(t)if(l.opaque)r.splice(n,s-n,e,\"overlay \"+t),s=n+2;else for(;n<s;n+=2){var o=r[n+1];r[n+1]=(o?o+\" \":\"\")+\"overlay \"+t}}),o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},s=0;s<e.state.overlays.length;++s)l(s);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function vt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=xt(e,et(t)),r=t.text.length>e.options.maxHighlightLength&&Ge(e.doc.mode,i.state),o=gt(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function xt(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new mt(i,!0,t);var o=Ft(e,t,n),a=o>i.first&&Ze(i,o-1).stateAfter,l=a?mt.fromSaved(i,a,o):new mt(i,Ke(i.mode),o);return i.iter(o,t,(function(n){yt(e,n.text,l);var i=l.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?l.save():null,l.nextLine()})),n&&(i.modeFrontier=l.line),l}function yt(e,t,n,i){var r=e.doc.mode,o=new Xe(t,e.options.tabSize,n);for(o.start=o.pos=i||0,\"\"==t&&bt(r,n.state);!o.eol();)Dt(r,o,n.state),o.start=o.pos}function bt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ve(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Dt(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=Ve(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error(\"Mode \"+e.name+\" failed to advance stream.\")}mt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},mt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,\"\"),size:this.baseTokens[this.baseTokenPos]-e}},mt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},mt.fromSaved=function(e,t,n){return t instanceof pt?new mt(e,Ge(e.mode,t.state),n,t.lookAhead):new mt(e,Ge(e.mode,t),n)},mt.prototype.save=function(e){var t=!1!==e?Ge(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new pt(t,this.maxLookAhead):t};var Ct=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function wt(e,t,n,i){var r,o,a=e.doc,l=a.mode,s=Ze(a,(t=dt(a,t)).line),u=xt(e,t.line,n),c=new Xe(s.text,e.options.tabSize,u);for(i&&(o=[]);(i||c.pos<t.ch)&&!c.eol();)c.start=c.pos,r=Dt(l,c,u.state),i&&o.push(new Ct(c,r,Ge(a.mode,u.state)));return i?o:new Ct(c,r,u.state)}function kt(e,t){if(e)for(;;){var n=e.match(/(?:^|\\s+)line-(background-)?(\\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?\"bgClass\":\"textClass\";null==t[i]?t[i]=n[2]:new RegExp(\"(?:^|\\\\s)\"+n[2]+\"(?:$|\\\\s)\").test(t[i])||(t[i]+=\" \"+n[2])}return e}function St(e,t,n,i,r,o,a){var l=n.flattenSpans;null==l&&(l=e.options.flattenSpans);var s,u=0,c=null,d=new Xe(t,e.options.tabSize,i),h=e.options.addModeClass&&[null];for(\"\"==t&&kt(bt(n,i.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(l=!1,a&&yt(e,t,i,d.pos),d.pos=t.length,s=null):s=kt(Dt(n,d,i.state,h),o),h){var f=h[0].name;f&&(s=\"m-\"+(s?f+\" \"+s:f))}if(!l||c!=s){for(;u<d.start;)r(u=Math.min(d.start,u+5e3),c);c=s}d.start=d.pos}for(;u<d.pos;){var p=Math.min(d.pos,u+5e3);r(p,c),u=p}}function Ft(e,t,n){for(var i,r,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;l>a;--l){if(l<=o.first)return o.first;var s=Ze(o,l-1),u=s.stateAfter;if(u&&(!n||l+(u instanceof pt?u.lookAhead:0)<=o.modeFrontier))return l;var c=R(s.text,null,e.options.tabSize);(null==r||i>c)&&(r=l-1,i=c)}return r}function At(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=Ze(e,i).stateAfter;if(r&&(!(r instanceof pt)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}var Et=!1,Tt=!1;function Lt(){Et=!0}function Mt(){Tt=!0}function Bt(e,t,n){this.marker=e,this.from=t,this.to=n}function Nt(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Ot(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function It(e,t,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&i.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],i&&i.add(e.markedSpans)),t.marker.attachLine(e)}function zt(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&\"bookmark\"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new Bt(a,o.from,l?null:o.to))}}return i}function Ht(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&\"bookmark\"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new Bt(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return i}function Rt(e,t){if(t.full)return null;var n=nt(e,t.from.line)&&Ze(e,t.from.line).markedSpans,i=nt(e,t.to.line)&&Ze(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,a=0==ot(t.from,t.to),l=zt(n,r,a),s=Ht(i,o,a),u=1==t.text.length,c=X(t.text).length+(u?r:0);if(l)for(var d=0;d<l.length;++d){var h=l[d];if(null==h.to){var f=Nt(s,h.marker);f?u&&(h.to=null==f.to?null:f.to+c):h.to=r}}if(s)for(var p=0;p<s.length;++p){var m=s[p];null!=m.to&&(m.to+=c),null==m.from?Nt(l,m.marker)||(m.from=c,u&&(l||(l=[])).push(m)):(m.from+=c,u&&(l||(l=[])).push(m))}l&&(l=Pt(l)),s&&s!=l&&(s=Pt(s));var g=[l];if(!u){var v,x=t.text.length-2;if(x>0&&l)for(var y=0;y<l.length;++y)null==l[y].to&&(v||(v=[])).push(new Bt(l[y].marker,null,null));for(var b=0;b<x;++b)g.push(v);g.push(s)}return g}function Pt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function _t(e,t,n){var i=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=_(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var a=i[o],l=a.find(0),s=0;s<r.length;++s){var u=r[s];if(!(ot(u.to,l.from)<0||ot(u.from,l.to)>0)){var c=[s,1],d=ot(u.from,l.from),h=ot(u.to,l.to);(d<0||!a.inclusiveLeft&&!d)&&c.push({from:u.from,to:l.from}),(h>0||!a.inclusiveRight&&!h)&&c.push({from:l.to,to:u.to}),r.splice.apply(r,c),s+=c.length-3}}return r}function Wt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function jt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function qt(e){return e.inclusiveLeft?-1:0}function Ut(e){return e.inclusiveRight?1:0}function $t(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=ot(i.from,r.from)||qt(e)-qt(t);if(o)return-o;var a=ot(i.to,r.to)||Ut(e)-Ut(t);return a||t.id-e.id}function Gt(e,t){var n,i=Tt&&e.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||$t(n,r.marker)<0)&&(n=r.marker);return n}function Vt(e){return Gt(e,!0)}function Kt(e){return Gt(e,!1)}function Xt(e,t){var n,i=Tt&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||$t(n,o.marker)<0)&&(n=o.marker)}return n}function Zt(e,t,n,i,r){var o=Ze(e,t),a=Tt&&o.markedSpans;if(a)for(var l=0;l<a.length;++l){var s=a[l];if(s.marker.collapsed){var u=s.marker.find(0),c=ot(u.from,n)||qt(s.marker)-qt(r),d=ot(u.to,i)||Ut(s.marker)-Ut(r);if(!(c>=0&&d<=0||c<=0&&d>=0)&&(c<=0&&(s.marker.inclusiveRight&&r.inclusiveLeft?ot(u.to,n)>=0:ot(u.to,n)>0)||c>=0&&(s.marker.inclusiveRight&&r.inclusiveLeft?ot(u.from,i)<=0:ot(u.from,i)<0)))return!0}}}function Yt(e){for(var t;t=Vt(e);)e=t.find(-1,!0).line;return e}function Jt(e){for(var t;t=Kt(e);)e=t.find(1,!0).line;return e}function Qt(e){for(var t,n;t=Kt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function en(e,t){var n=Ze(e,t),i=Yt(n);return n==i?t:et(i)}function tn(e,t){if(t>e.lastLine())return t;var n,i=Ze(e,t);if(!nn(e,i))return t;for(;n=Kt(i);)i=n.find(1,!0).line;return et(i)+1}function nn(e,t){var n=Tt&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&rn(e,t,i))return!0}}function rn(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return rn(e,i.line,Nt(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&rn(e,t,r))return!0}function on(e){for(var t=0,n=(e=Yt(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var l=o.children[a];if(l==n)break;t+=l.height}return t}function an(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Vt(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=Kt(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function ln(e){var t=e.display,n=e.doc;t.maxLine=Ze(n,n.first),t.maxLineLength=an(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=an(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var sn=function(e,t,n){this.text=e,jt(this,t),this.height=n?n(this):1};function un(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Wt(e),jt(e,n);var r=i?i(e):1;r!=e.height&&Qe(e,r)}function cn(e){e.parent=null,Wt(e)}sn.prototype.lineNo=function(){return et(this)},De(sn);var dn={},hn={};function fn(e,t){if(!e||/^\\s*$/.test(e))return null;var n=t.addModeClass?hn:dn;return n[e]||(n[e]=e.replace(/\\S+/g,\"cm-$&\"))}function pn(e,t){var n=L(\"span\",null,null,s?\"padding-right: .1px\":null),i={pre:L(\"pre\",[n],\"CodeMirror-line\"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption(\"lineWrapping\")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,a=void 0;i.pos=0,i.addToken=gn,Be(e.display.measure)&&(a=he(o,e.doc.direction))&&(i.addToken=xn(i.addToken,a)),i.map=[],bn(o,i,vt(e,o,t!=e.display.externalMeasured&&et(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=O(o.styleClasses.bgClass,i.bgClass||\"\")),o.styleClasses.textClass&&(i.textClass=O(o.styleClasses.textClass,i.textClass||\"\"))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Me(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(s){var l=i.content.lastChild;(/\\bcm-tab\\b/.test(l.className)||l.querySelector&&l.querySelector(\".cm-tab\"))&&(i.content.className=\"cm-tab-wrap-hack\")}return ve(e,\"renderLine\",e,t.line,i.pre),i.pre.className&&(i.textClass=O(i.pre.className,i.textClass||\"\")),i}function mn(e){var t=T(\"span\",\"\\u2022\",\"cm-invalidchar\");return t.title=\"\\\\u\"+e.charCodeAt(0).toString(16),t.setAttribute(\"aria-label\",t.title),t}function gn(e,t,n,i,r,o,s){if(t){var u,c=e.splitSpaces?vn(t,e.trailingSpace):t,d=e.cm.state.specialChars,h=!1;if(d.test(t)){u=document.createDocumentFragment();for(var f=0;;){d.lastIndex=f;var p=d.exec(t),m=p?p.index-f:t.length-f;if(m){var g=document.createTextNode(c.slice(f,f+m));a&&l<9?u.appendChild(T(\"span\",[g])):u.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!p)break;f+=m+1;var v=void 0;if(\"\\t\"==p[0]){var x=e.cm.options.tabSize,y=x-e.col%x;(v=u.appendChild(T(\"span\",K(y),\"cm-tab\"))).setAttribute(\"role\",\"presentation\"),v.setAttribute(\"cm-text\",\"\\t\"),e.col+=y}else\"\\r\"==p[0]||\"\\n\"==p[0]?((v=u.appendChild(T(\"span\",\"\\r\"==p[0]?\"\\u240d\":\"\\u2424\",\"cm-invalidchar\"))).setAttribute(\"cm-text\",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute(\"cm-text\",p[0]),a&&l<9?u.appendChild(T(\"span\",[v])):u.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,u=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,u),a&&l<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),n||i||r||h||o||s){var b=n||\"\";i&&(b+=i),r&&(b+=r);var D=T(\"span\",[u],b,o);if(s)for(var C in s)s.hasOwnProperty(C)&&\"style\"!=C&&\"class\"!=C&&D.setAttribute(C,s[C]);return e.content.appendChild(D)}e.content.appendChild(u)}}function vn(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i=\"\",r=0;r<e.length;r++){var o=e.charAt(r);\" \"!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o=\"\\xa0\"),i+=o,n=\" \"==o}return i}function xn(e,t){return function(n,i,r,o,a,l,s){r=r?r+\" cm-force-border\":\"cm-force-border\";for(var u=n.pos,c=u+i.length;;){for(var d=void 0,h=0;h<t.length&&!((d=t[h]).to>u&&d.from<=u);h++);if(d.to>=c)return e(n,i,r,o,a,l,s);e(n,i.slice(0,d.to-u),r,o,null,l,s),o=null,i=i.slice(d.to-u),u=d.to}}}function yn(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement(\"span\"))),r.setAttribute(\"cm-marker\",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function bn(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var a,l,s,u,c,d,h,f=r.length,p=0,m=1,g=\"\",v=0;;){if(v==p){s=u=c=l=\"\",h=null,d=null,v=1/0;for(var x=[],y=void 0,b=0;b<i.length;++b){var D=i[b],C=D.marker;if(\"bookmark\"==C.type&&D.from==p&&C.widgetNode)x.push(C);else if(D.from<=p&&(null==D.to||D.to>p||C.collapsed&&D.to==p&&D.from==p)){if(null!=D.to&&D.to!=p&&v>D.to&&(v=D.to,u=\"\"),C.className&&(s+=\" \"+C.className),C.css&&(l=(l?l+\";\":\"\")+C.css),C.startStyle&&D.from==p&&(c+=\" \"+C.startStyle),C.endStyle&&D.to==v&&(y||(y=[])).push(C.endStyle,D.to),C.title&&((h||(h={})).title=C.title),C.attributes)for(var w in C.attributes)(h||(h={}))[w]=C.attributes[w];C.collapsed&&(!d||$t(d.marker,C)<0)&&(d=D)}else D.from>p&&v>D.from&&(v=D.from)}if(y)for(var k=0;k<y.length;k+=2)y[k+1]==v&&(u+=\" \"+y[k]);if(!d||d.from==p)for(var S=0;S<x.length;++S)yn(t,0,x[S]);if(d&&(d.from||0)==p){if(yn(t,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=f)break;for(var F=Math.min(f,v);;){if(g){var A=p+g.length;if(!d){var E=A>F?g.slice(0,F-p):g;t.addToken(t,E,a?a+s:s,c,p+E.length==v?u:\"\",l,h)}if(A>=F){g=g.slice(F-p),p=F;break}p=A,c=\"\"}g=r.slice(o,o=n[m++]),a=fn(n[m++],t.cm.options)}}else for(var T=1;T<n.length;T+=2)t.addToken(t,r.slice(o,o=n[T]),fn(n[T+1],t.cm.options))}function Dn(e,t,n){this.line=t,this.rest=Qt(t),this.size=this.rest?et(X(this.rest))-n+1:1,this.node=this.text=null,this.hidden=nn(e,t)}function Cn(e,t,n){for(var i,r=[],o=t;o<n;o=i){var a=new Dn(e.doc,Ze(e.doc,o),o);i=o+a.size,r.push(a)}return r}var wn=null;function kn(e){wn?wn.ops.push(e):e.ownsGroup=wn={ops:[e],delayedCallbacks:[]}}function Sn(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}function Fn(e,t){var n=e.ownsGroup;if(n)try{Sn(n)}finally{wn=null,t(n)}}var An=null;function En(e,t){var n=me(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);wn?i=wn.delayedCallbacks:An?i=An:(i=An=[],setTimeout(Tn,0));for(var o=function(e){i.push((function(){return n[e].apply(null,r)}))},a=0;a<n.length;++a)o(a)}}function Tn(){var e=An;An=null;for(var t=0;t<e.length;++t)e[t]()}function Ln(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];\"text\"==o?On(e,t):\"gutter\"==o?zn(e,t,n,i):\"class\"==o?In(e,t):\"widget\"==o&&Hn(e,t,i)}t.changes=null}function Mn(e){return e.node==e.text&&(e.node=T(\"div\",null,null,\"position: relative\"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&l<8&&(e.node.style.zIndex=2)),e.node}function Bn(e,t){var n=t.bgClass?t.bgClass+\" \"+(t.line.bgClass||\"\"):t.line.bgClass;if(n&&(n+=\" CodeMirror-linebackground\"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=Mn(t);t.background=i.insertBefore(T(\"div\",null,n),i.firstChild),e.display.input.setUneditable(t.background)}}function Nn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):pn(e,t)}function On(e,t){var n=t.text.className,i=Nn(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,In(e,t)):n&&(t.text.className=n)}function In(e,t){Bn(e,t),t.line.wrapClass?Mn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=\"\");var n=t.textClass?t.textClass+\" \"+(t.line.textClass||\"\"):t.line.textClass;t.text.className=n||\"\"}function zn(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=Mn(t);t.gutterBackground=T(\"div\",null,\"CodeMirror-gutter-background \"+t.line.gutterClass,\"left: \"+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+\"px; width: \"+i.gutterTotalWidth+\"px\"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=Mn(t),l=t.gutter=T(\"div\",null,\"CodeMirror-gutter-wrapper\",\"left: \"+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+\"px\");if(l.setAttribute(\"aria-hidden\",\"true\"),e.display.input.setUneditable(l),a.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=\" \"+t.line.gutterClass),!e.options.lineNumbers||o&&o[\"CodeMirror-linenumbers\"]||(t.lineNumber=l.appendChild(T(\"div\",it(e.options,n),\"CodeMirror-linenumber CodeMirror-gutter-elt\",\"left: \"+i.gutterLeft[\"CodeMirror-linenumbers\"]+\"px; width: \"+e.display.lineNumInnerWidth+\"px\"))),o)for(var s=0;s<e.display.gutterSpecs.length;++s){var u=e.display.gutterSpecs[s].className,c=o.hasOwnProperty(u)&&o[u];c&&l.appendChild(T(\"div\",[c],\"CodeMirror-gutter-elt\",\"left: \"+i.gutterLeft[u]+\"px; width: \"+i.gutterWidth[u]+\"px\"))}}}function Hn(e,t,n){t.alignable&&(t.alignable=null);for(var i=k(\"CodeMirror-linewidget\"),r=t.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,i.test(r.className)&&t.node.removeChild(r);Pn(e,t,n)}function Rn(e,t,n,i){var r=Nn(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),In(e,t),zn(e,t,n,i),Pn(e,t,i),t.node}function Pn(e,t,n){if(_n(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)_n(e,t.rest[i],t,n,!1)}function _n(e,t,n,i,r){if(t.widgets)for(var o=Mn(n),a=0,l=t.widgets;a<l.length;++a){var s=l[a],u=T(\"div\",[s.node],\"CodeMirror-linewidget\"+(s.className?\" \"+s.className:\"\"));s.handleMouseEvents||u.setAttribute(\"cm-ignore-events\",\"true\"),Wn(s,u,n,i),e.display.input.setUneditable(u),r&&s.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),En(s,\"redraw\")}}function Wn(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+\"px\",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+\"px\"),t.style.width=r+\"px\"}e.coverGutter&&(t.style.zIndex=5,t.style.position=\"relative\",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+\"px\"))}function jn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!M(document.body,e.node)){var n=\"position: relative;\";e.coverGutter&&(n+=\"margin-left: -\"+t.display.gutters.offsetWidth+\"px;\"),e.noHScroll&&(n+=\"width: \"+t.display.wrapper.clientWidth+\"px;\"),E(t.display.measure,T(\"div\",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function qn(e,t){for(var n=Fe(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&\"true\"==n.getAttribute(\"cm-ignore-events\")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Un(e){return e.lineSpace.offsetTop}function $n(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Gn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=E(e.measure,T(\"pre\",\"x\",\"CodeMirror-line-like\")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Vn(e){return W-e.display.nativeBarWidth}function Kn(e){return e.display.scroller.clientWidth-Vn(e)-e.display.barWidth}function Xn(e){return e.display.scroller.clientHeight-Vn(e)-e.display.barHeight}function Zn(e,t,n){var i=e.options.lineWrapping,r=i&&Kn(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var a=t.text.firstChild.getClientRects(),l=0;l<a.length-1;l++){var s=a[l],u=a[l+1];Math.abs(s.bottom-u.bottom)>2&&o.push((s.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Yn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(et(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Jn(e,t){var n=et(t=Yt(t)),i=e.display.externalMeasured=new Dn(e.doc,t,n);i.lineN=n;var r=i.built=pn(e,i);return i.text=r.pre,E(e.display.lineMeasure,r.pre),i}function Qn(e,t,n,i){return ni(e,ti(e,t),n,i)}function ei(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Ii(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function ti(e,t){var n=et(t),i=ei(e,n);i&&!i.text?i=null:i&&i.changes&&(Ln(e,i,n,Li(e)),e.curOp.forceUpdate=!0),i||(i=Jn(e,t));var r=Yn(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function ni(e,t,n,i,r){t.before&&(n=-1);var o,a=n+(i||\"\");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Zn(e,t.view,t.rect),t.hasHeights=!0),(o=li(e,t,n,i)).bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var ii,ri={left:0,right:0,top:0,bottom:0};function oi(e,t,n){for(var i,r,o,a,l,s,u=0;u<e.length;u+=3)if(l=e[u],s=e[u+1],t<l?(r=0,o=1,a=\"left\"):t<s?o=1+(r=t-l):(u==e.length-3||t==s&&e[u+3]>t)&&(r=(o=s-l)-1,t>=s&&(a=\"right\")),null!=r){if(i=e[u+2],l==s&&n==(i.insertLeft?\"left\":\"right\")&&(a=n),\"left\"==n&&0==r)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)i=e[2+(u-=3)],a=\"left\";if(\"right\"==n&&r==s-l)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)i=e[(u+=3)+2],a=\"right\";break}return{node:i,start:r,end:o,collapse:a,coverStart:l,coverEnd:s}}function ai(e,t){var n=ri;if(\"left\"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function li(e,t,n,i){var r,o=oi(t.map,n,i),s=o.node,u=o.start,c=o.end,d=o.collapse;if(3==s.nodeType){for(var h=0;h<4;h++){for(;u&&oe(t.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&oe(t.line.text.charAt(o.coverStart+c));)++c;if((r=a&&l<9&&0==u&&c==o.coverEnd-o.coverStart?s.parentNode.getBoundingClientRect():ai(S(s,u,c).getClientRects(),i)).left||r.right||0==u)break;c=u,u-=1,d=\"right\"}a&&l<11&&(r=si(e.display.measure,r))}else{var f;u>0&&(d=i=\"right\"),r=e.options.lineWrapping&&(f=s.getClientRects()).length>1?f[\"right\"==i?f.length-1:0]:s.getBoundingClientRect()}if(a&&l<9&&!u&&(!r||!r.left&&!r.right)){var p=s.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+Ti(e.display),top:p.top,bottom:p.bottom}:ri}for(var m=r.top-t.rect.top,g=r.bottom-t.rect.top,v=(m+g)/2,x=t.view.measure.heights,y=0;y<x.length-1&&!(v<x[y]);y++);var b=y?x[y-1]:0,D=x[y],C={left:(\"right\"==d?r.right:r.left)-t.rect.left,right:(\"left\"==d?r.left:r.right)-t.rect.left,top:b,bottom:D};return r.left||r.right||(C.bogus=!0),e.options.singleCursorHeightPerLine||(C.rtop=m,C.rbottom=g),C}function si(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!He(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}function ui(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ci(e){e.display.externalMeasure=null,A(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ui(e.display.view[t])}function di(e){ci(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function hi(){return c&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function fi(){return c&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function pi(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=jn(e.widgets[n]));return t}function mi(e,t,n,i,r){if(!r){var o=pi(t);n.top+=o,n.bottom+=o}if(\"line\"==i)return n;i||(i=\"local\");var a=on(t);if(\"local\"==i?a+=Un(e.display):a-=e.display.viewOffset,\"page\"==i||\"window\"==i){var l=e.display.lineSpace.getBoundingClientRect();a+=l.top+(\"window\"==i?0:fi());var s=l.left+(\"window\"==i?0:hi());n.left+=s,n.right+=s}return n.top+=a,n.bottom+=a,n}function gi(e,t,n){if(\"div\"==n)return t;var i=t.left,r=t.top;if(\"page\"==n)i-=hi(),r-=fi();else if(\"local\"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:r-a.top}}function vi(e,t,n,i,r){return i||(i=Ze(e.doc,t.line)),mi(e,i,Qn(e,i,t.ch,r),n)}function xi(e,t,n,i,r,o){function a(t,a){var l=ni(e,r,t,a?\"right\":\"left\",o);return a?l.left=l.right:l.right=l.left,mi(e,i,l,n)}i=i||Ze(e.doc,t.line),r||(r=ti(e,i));var l=he(i,e.doc.direction),s=t.ch,u=t.sticky;if(s>=i.text.length?(s=i.text.length,u=\"before\"):s<=0&&(s=0,u=\"after\"),!l)return a(\"before\"==u?s-1:s,\"before\"==u);function c(e,t,n){return a(n?e-1:e,1==l[t].level!=n)}var d=ce(l,s,u),h=ue,f=c(s,d,\"before\"==u);return null!=h&&(f.other=c(s,h,\"before\"!=u)),f}function yi(e,t){var n=0;t=dt(e.doc,t),e.options.lineWrapping||(n=Ti(e.display)*t.ch);var i=Ze(e.doc,t.line),r=on(i)+Un(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function bi(e,t,n,i,r){var o=rt(e,t,n);return o.xRel=r,i&&(o.outside=i),o}function Di(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return bi(i.first,0,null,-1,-1);var r=tt(i,n),o=i.first+i.size-1;if(r>o)return bi(i.first+i.size-1,Ze(i,o).text.length,null,1,1);t<0&&(t=0);for(var a=Ze(i,r);;){var l=Si(e,a,r,t,n),s=Xt(a,l.ch+(l.xRel>0||l.outside>0?1:0));if(!s)return l;var u=s.find(1);if(u.line==r)return u;a=Ze(i,r=u.line)}}function Ci(e,t,n,i){i-=pi(t);var r=t.text.length,o=le((function(t){return ni(e,n,t-1).bottom<=i}),r,0);return{begin:o,end:r=le((function(t){return ni(e,n,t).top>i}),o,r)}}function wi(e,t,n,i){return n||(n=ti(e,t)),Ci(e,t,n,mi(e,t,ni(e,n,i),\"line\").top)}function ki(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function Si(e,t,n,i,r){r-=on(t);var o=ti(e,t),a=pi(t),l=0,s=t.text.length,u=!0,c=he(t,e.doc.direction);if(c){var d=(e.options.lineWrapping?Ai:Fi)(e,t,n,o,c,i,r);l=(u=1!=d.level)?d.from:d.to-1,s=u?d.to:d.from-1}var h,f,p=null,m=null,g=le((function(t){var n=ni(e,o,t);return n.top+=a,n.bottom+=a,!!ki(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(p=t,m=n),!0)}),l,s),v=!1;if(m){var x=i-m.left<m.right-i,y=x==u;g=p+(y?0:1),f=y?\"after\":\"before\",h=x?m.left:m.right}else{u||g!=s&&g!=l||g++,f=0==g?\"after\":g==t.text.length?\"before\":ni(e,o,g-(u?1:0)).bottom+a<=r==u?\"after\":\"before\";var b=xi(e,rt(n,g,f),\"line\",t,o);h=b.left,v=r<b.top?-1:r>=b.bottom?1:0}return bi(n,g=ae(t.text,g,1),f,v,i-h)}function Fi(e,t,n,i,r,o,a){var l=le((function(l){var s=r[l],u=1!=s.level;return ki(xi(e,rt(n,u?s.to:s.from,u?\"before\":\"after\"),\"line\",t,i),o,a,!0)}),0,r.length-1),s=r[l];if(l>0){var u=1!=s.level,c=xi(e,rt(n,u?s.from:s.to,u?\"after\":\"before\"),\"line\",t,i);ki(c,o,a,!0)&&c.top>a&&(s=r[l-1])}return s}function Ai(e,t,n,i,r,o,a){var l=Ci(e,t,i,a),s=l.begin,u=l.end;/\\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,d=null,h=0;h<r.length;h++){var f=r[h];if(!(f.from>=u||f.to<=s)){var p=ni(e,i,1!=f.level?Math.min(u,f.to)-1:Math.max(s,f.from)).right,m=p<o?o-p+1e9:p-o;(!c||d>m)&&(c=f,d=m)}}return c||(c=r[r.length-1]),c.from<s&&(c={from:s,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function Ei(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==ii){ii=T(\"pre\",null,\"CodeMirror-line-like\");for(var t=0;t<49;++t)ii.appendChild(document.createTextNode(\"x\")),ii.appendChild(T(\"br\"));ii.appendChild(document.createTextNode(\"x\"))}E(e.measure,ii);var n=ii.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),A(e.measure),n||1}function Ti(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=T(\"span\",\"xxxxxxxxxx\"),n=T(\"pre\",[t],\"CodeMirror-line-like\");E(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function Li(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var l=e.display.gutterSpecs[a].className;n[l]=o.offsetLeft+o.clientLeft+r,i[l]=o.clientWidth}return{fixedPos:Mi(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function Mi(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Bi(e){var t=Ei(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/Ti(e.display)-3);return function(r){if(nn(e.doc,r))return 0;var o=0;if(r.widgets)for(var a=0;a<r.widgets.length;a++)r.widgets[a].height&&(o+=r.widgets[a].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function Ni(e){var t=e.doc,n=Bi(e);t.iter((function(e){var t=n(e);t!=e.height&&Qe(e,t)}))}function Oi(e,t,n,i){var r=e.display;if(!n&&\"true\"==Fe(t).getAttribute(\"cm-not-content\"))return null;var o,a,l=r.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left,a=t.clientY-l.top}catch(d){return null}var s,u=Di(e,o,a);if(i&&u.xRel>0&&(s=Ze(e.doc,u.line).text).length==u.ch){var c=R(s,s.length,e.options.tabSize)-s.length;u=rt(u.line,Math.max(0,Math.round((o-Gn(e.display).left)/Ti(e.display))-c))}return u}function Ii(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function zi(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)Tt&&en(e.doc,t)<r.viewTo&&Ri(e);else if(n<=r.viewFrom)Tt&&tn(e.doc,n+i)>r.viewFrom?Ri(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)Ri(e);else if(t<=r.viewFrom){var o=Pi(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):Ri(e)}else if(n>=r.viewTo){var a=Pi(e,t,t,-1);a?(r.view=r.view.slice(0,a.index),r.viewTo=a.lineN):Ri(e)}else{var l=Pi(e,t,t,-1),s=Pi(e,n,n+i,1);l&&s?(r.view=r.view.slice(0,l.index).concat(Cn(e,l.lineN,s.lineN)).concat(r.view.slice(s.index)),r.viewTo+=i):Ri(e)}var u=r.externalMeasured;u&&(n<u.lineN?u.lineN+=i:t<u.lineN+u.size&&(r.externalMeasured=null))}function Hi(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[Ii(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==_(a,n)&&a.push(n)}}}function Ri(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Pi(e,t,n,i){var r,o=Ii(e,t),a=e.display.view;if(!Tt||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var l=e.display.viewFrom,s=0;s<o;s++)l+=a[s].size;if(l!=t){if(i>0){if(o==a.length-1)return null;r=l+a[o].size-t,o++}else r=l-t;t+=r,n+=r}for(;en(e.doc,n)!=n;){if(o==(i<0?0:a.length-1))return null;n+=i*a[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function _i(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=Cn(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=Cn(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Ii(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(Cn(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Ii(e,n)))),i.viewTo=n}function Wi(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function ji(e){e.display.input.showSelection(e.display.input.prepareSelection())}function qi(e,t){void 0===t&&(t=!0);for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var l=n.sel.ranges[a];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var s=l.empty();(s||e.options.showCursorWhenSelecting)&&Ui(e,l.head,r),s||Gi(e,l,o)}}return i}function Ui(e,t,n){var i=xi(e,t,\"div\",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(T(\"div\",\"\\xa0\",\"CodeMirror-cursor\"));if(r.style.left=i.left+\"px\",r.style.top=i.top+\"px\",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+\"px\",i.other){var o=n.appendChild(T(\"div\",\"\\xa0\",\"CodeMirror-cursor CodeMirror-secondarycursor\"));o.style.display=\"\",o.style.left=i.other.left+\"px\",o.style.top=i.other.top+\"px\",o.style.height=.85*(i.other.bottom-i.other.top)+\"px\"}}function $i(e,t){return e.top-t.top||e.left-t.left}function Gi(e,t,n){var i=e.display,r=e.doc,o=document.createDocumentFragment(),a=Gn(e.display),l=a.left,s=Math.max(i.sizerWidth,Kn(e)-i.sizer.offsetLeft)-a.right,u=\"ltr\"==r.direction;function c(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild(T(\"div\",null,\"CodeMirror-selected\",\"position: absolute; left: \"+e+\"px;\\n                             top: \"+t+\"px; width: \"+(null==n?s-e:n)+\"px;\\n                             height: \"+(i-t)+\"px\"))}function d(t,n,i){var o,a,d=Ze(r,t),h=d.text.length;function f(n,i){return vi(e,rt(t,n),\"div\",d,i)}function p(t,n,i){var r=wi(e,d,null,t),o=\"ltr\"==n==(\"after\"==i)?\"left\":\"right\";return f(\"after\"==i?r.begin:r.end-(/\\s/.test(d.text.charAt(r.end-1))?2:1),o)[o]}var m=he(d,r.direction);return se(m,n||0,null==i?h:i,(function(e,t,r,d){var g=\"ltr\"==r,v=f(e,g?\"left\":\"right\"),x=f(t-1,g?\"right\":\"left\"),y=null==n&&0==e,b=null==i&&t==h,D=0==d,C=!m||d==m.length-1;if(x.top-v.top<=3){var w=(u?b:y)&&C,k=(u?y:b)&&D?l:(g?v:x).left,S=w?s:(g?x:v).right;c(k,v.top,S-k,v.bottom)}else{var F,A,E,T;g?(F=u&&y&&D?l:v.left,A=u?s:p(e,r,\"before\"),E=u?l:p(t,r,\"after\"),T=u&&b&&C?s:x.right):(F=u?p(e,r,\"before\"):l,A=!u&&y&&D?s:v.right,E=!u&&b&&C?l:x.left,T=u?p(t,r,\"after\"):s),c(F,v.top,A-F,v.bottom),v.bottom<x.top&&c(l,v.bottom,null,x.top),c(E,x.top,T-E,x.bottom)}(!o||$i(v,o)<0)&&(o=v),$i(x,o)<0&&(o=x),(!a||$i(v,a)<0)&&(a=v),$i(x,a)<0&&(a=x)})),{start:o,end:a}}var h=t.from(),f=t.to();if(h.line==f.line)d(h.line,h.ch,f.ch);else{var p=Ze(r,h.line),m=Ze(r,f.line),g=Yt(p)==Yt(m),v=d(h.line,h.ch,g?p.text.length+1:null).end,x=d(f.line,g?0:null,f.ch).start;g&&(v.top<x.top-2?(c(v.right,v.top,null,v.bottom),c(l,x.top,x.left,x.bottom)):c(v.right,v.top,x.left-v.right,v.bottom)),v.bottom<x.top&&c(l,v.bottom,null,x.top)}n.appendChild(o)}function Vi(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility=\"\",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||Yi(e),t.cursorDiv.style.visibility=(n=!n)?\"\":\"hidden\"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility=\"hidden\")}}function Ki(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Zi(e))}function Xi(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Yi(e))}),100)}function Zi(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),\"nocursor\"!=e.options.readOnly&&(e.state.focused||(ve(e,\"focus\",e,t),e.state.focused=!0,N(e.display.wrapper,\"CodeMirror-focused\"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),s&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Vi(e))}function Yi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ve(e,\"blur\",e,t),e.state.focused=!1,F(e.display.wrapper,\"CodeMirror-focused\")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Ji(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],o=e.options.lineWrapping,s=void 0,u=0;if(!r.hidden){if(a&&l<8){var c=r.node.offsetTop+r.node.offsetHeight;s=c-n,n=c}else{var d=r.node.getBoundingClientRect();s=d.bottom-d.top,!o&&r.text.firstChild&&(u=r.text.firstChild.getBoundingClientRect().right-d.left-1)}var h=r.line.height-s;if((h>.005||h<-.005)&&(Qe(r.line,s),Qi(r.line),r.rest))for(var f=0;f<r.rest.length;f++)Qi(r.rest[f]);if(u>e.display.sizerWidth){var p=Math.ceil(u/Ti(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=r.line,e.display.maxLineChanged=!0)}}}}function Qi(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function er(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-Un(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=tt(t,i),a=tt(t,r);if(n&&n.ensure){var l=n.ensure.from.line,s=n.ensure.to.line;l<o?(o=l,a=tt(t,on(Ze(t,l))+e.wrapper.clientHeight)):Math.min(s,t.lastLine())>=a&&(o=tt(t,on(Ze(t,s))-e.wrapper.clientHeight),a=s)}return{from:o,to:Math.max(a,o+1)}}function tr(e,t){if(!xe(e,\"scrollCursorIntoView\")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!p){var o=T(\"div\",\"\\u200b\",null,\"position: absolute;\\n                         top: \"+(t.top-n.viewOffset-Un(e.display))+\"px;\\n                         height: \"+(t.bottom-t.top+Vn(e)+n.barHeight)+\"px;\\n                         left: \"+t.left+\"px; width: \"+Math.max(2,t.right-t.left)+\"px;\");e.display.lineSpace.appendChild(o),o.scrollIntoView(r),e.display.lineSpace.removeChild(o)}}}function nr(e,t,n,i){var r;null==i&&(i=0),e.options.lineWrapping||t!=n||(n=\"before\"==t.sticky?rt(t.line,t.ch+1,\"before\"):t,t=t.ch?rt(t.line,\"before\"==t.sticky?t.ch-1:t.ch,\"after\"):t);for(var o=0;o<5;o++){var a=!1,l=xi(e,t),s=n&&n!=t?xi(e,n):l,u=rr(e,r={left:Math.min(l.left,s.left),top:Math.min(l.top,s.top)-i,right:Math.max(l.left,s.left),bottom:Math.max(l.bottom,s.bottom)+i}),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=u.scrollTop&&(dr(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(a=!0)),null!=u.scrollLeft&&(fr(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(a=!0)),!a)break}return r}function ir(e,t){var n=rr(e,t);null!=n.scrollTop&&dr(e,n.scrollTop),null!=n.scrollLeft&&fr(e,n.scrollLeft)}function rr(e,t){var n=e.display,i=Ei(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Xn(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var l=e.doc.height+$n(n),s=t.top<i,u=t.bottom>l-i;if(t.top<r)a.scrollTop=s?0:t.top;else if(t.bottom>r+o){var c=Math.min(t.top,(u?l:t.bottom)-o);c!=r&&(a.scrollTop=c)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,f=Kn(e)-n.gutters.offsetWidth,p=t.right-t.left>f;return p&&(t.right=t.left+f),t.left<10?a.scrollLeft=0:t.left<h?a.scrollLeft=Math.max(0,t.left+d-(p?0:10)):t.right>f+h-3&&(a.scrollLeft=t.right+(p?0:10)-f),a}function or(e,t){null!=t&&(ur(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function ar(e){ur(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function lr(e,t,n){null==t&&null==n||ur(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function sr(e,t){ur(e),e.curOp.scrollToPos=t}function ur(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,cr(e,yi(e,t.from),yi(e,t.to),t.margin))}function cr(e,t,n,i){var r=rr(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});lr(e,r.scrollLeft,r.scrollTop)}function dr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||jr(e,{top:t}),hr(e,t,!0),n&&jr(e),Or(e,100))}function hr(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function fr(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,Gr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function pr(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+$n(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Vn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var mr=function(e,t,n){this.cm=n;var i=this.vert=T(\"div\",[T(\"div\",null,null,\"min-width: 1px\")],\"CodeMirror-vscrollbar\"),r=this.horiz=T(\"div\",[T(\"div\",null,null,\"height: 100%; min-height: 1px\")],\"CodeMirror-hscrollbar\");i.tabIndex=r.tabIndex=-1,e(i),e(r),pe(i,\"scroll\",(function(){i.clientHeight&&t(i.scrollTop,\"vertical\")})),pe(r,\"scroll\",(function(){r.clientWidth&&t(r.scrollLeft,\"horizontal\")})),this.checkedZeroWidth=!1,a&&l<8&&(this.horiz.style.minHeight=this.vert.style.minWidth=\"18px\")};mr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display=\"block\",this.vert.style.bottom=t?i+\"px\":\"0\";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+\"px\"}else this.vert.style.display=\"\",this.vert.firstChild.style.height=\"0\";if(t){this.horiz.style.display=\"block\",this.horiz.style.right=n?i+\"px\":\"0\",this.horiz.style.left=e.barLeft+\"px\";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+\"px\"}else this.horiz.style.display=\"\",this.horiz.firstChild.style.width=\"0\";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},mr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,\"horiz\")},mr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,\"vert\")},mr.prototype.zeroWidthHack=function(){var e=x&&!f?\"12px\":\"18px\";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents=\"none\",this.disableHoriz=new P,this.disableVert=new P},mr.prototype.enableZeroWidthBar=function(e,t,n){function i(){var r=e.getBoundingClientRect();(\"vert\"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.pointerEvents=\"none\":t.set(1e3,i)}e.style.pointerEvents=\"auto\",t.set(1e3,i)},mr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var gr=function(){};function vr(e,t){t||(t=pr(e));var n=e.display.barWidth,i=e.display.barHeight;xr(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&Ji(e),xr(e,pr(e)),n=e.display.barWidth,i=e.display.barHeight}function xr(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+\"px\",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+\"px\",n.heightForcer.style.borderBottom=i.bottom+\"px solid transparent\",i.right&&i.bottom?(n.scrollbarFiller.style.display=\"block\",n.scrollbarFiller.style.height=i.bottom+\"px\",n.scrollbarFiller.style.width=i.right+\"px\"):n.scrollbarFiller.style.display=\"\",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display=\"block\",n.gutterFiller.style.height=i.bottom+\"px\",n.gutterFiller.style.width=t.gutterWidth+\"px\"):n.gutterFiller.style.display=\"\"}gr.prototype.update=function(){return{bottom:0,right:0}},gr.prototype.setScrollLeft=function(){},gr.prototype.setScrollTop=function(){},gr.prototype.clear=function(){};var yr={native:mr,null:gr};function br(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&F(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new yr[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),pe(t,\"mousedown\",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute(\"cm-not-content\",\"true\")}),(function(t,n){\"horizontal\"==n?fr(e,t):dr(e,t)}),e),e.display.scrollbars.addClass&&N(e.display.wrapper,e.display.scrollbars.addClass)}var Dr=0;function Cr(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Dr,markArrays:null},kn(e.curOp)}function wr(e){var t=e.curOp;t&&Fn(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;kr(e)}))}function kr(e){for(var t=e.ops,n=0;n<t.length;n++)Sr(t[n]);for(var i=0;i<t.length;i++)Fr(t[i]);for(var r=0;r<t.length;r++)Ar(t[r]);for(var o=0;o<t.length;o++)Er(t[o]);for(var a=0;a<t.length;a++)Tr(t[a])}function Sr(e){var t=e.cm,n=t.display;Hr(t),e.updateMaxLine&&ln(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new zr(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Fr(e){e.updatedDisplay=e.mustUpdate&&_r(e.cm,e.update)}function Ar(e){var t=e.cm,n=t.display;e.updatedDisplay&&Ji(t),e.barMeasure=pr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Qn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Vn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Kn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Er(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+\"px\",e.maxScrollLeft<t.doc.scrollLeft&&fr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==B();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&vr(t,e.barMeasure),e.updatedDisplay&&$r(t,e.barMeasure),e.selectionChanged&&Vi(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Ki(e.cm)}function Tr(e){var t=e.cm,n=t.display,i=t.doc;e.updatedDisplay&&Wr(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&hr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&fr(t,e.scrollLeft,!0,!0),e.scrollToPos&&tr(t,nr(t,dt(i,e.scrollToPos.from),dt(i,e.scrollToPos.to),e.scrollToPos.margin));var r=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(r)for(var a=0;a<r.length;++a)r[a].lines.length||ve(r[a],\"hide\");if(o)for(var l=0;l<o.length;++l)o[l].lines.length&&ve(o[l],\"unhide\");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ve(t,\"changes\",t,e.changeObjs),e.update&&e.update.finish()}function Lr(e,t){if(e.curOp)return t();Cr(e);try{return t()}finally{wr(e)}}function Mr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Cr(e);try{return t.apply(e,arguments)}finally{wr(e)}}}function Br(e){return function(){if(this.curOp)return e.apply(this,arguments);Cr(this);try{return e.apply(this,arguments)}finally{wr(this)}}}function Nr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Cr(t);try{return e.apply(this,arguments)}finally{wr(t)}}}function Or(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,z(Ir,e))}function Ir(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=xt(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(i.line>=e.display.viewFrom){var a=o.styles,l=o.text.length>e.options.maxHighlightLength?Ge(t.mode,i.state):null,s=gt(e,o,i,!0);l&&(i.state=l),o.styles=s.styles;var u=o.styleClasses,c=s.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var d=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),h=0;!d&&h<a.length;++h)d=a[h]!=o.styles[h];d&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&yt(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Or(e,e.options.workDelay),!0})),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&Lr(e,(function(){for(var t=0;t<r.length;t++)Hi(e,r[t],\"text\")}))}}var zr=function(e,t,n){var i=e.display;this.viewport=t,this.visible=er(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Kn(e),this.force=n,this.dims=Li(e),this.events=[]};function Hr(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Vn(e)+\"px\",t.sizer.style.marginBottom=-t.nativeBarWidth+\"px\",t.sizer.style.borderRightWidth=Vn(e)+\"px\",t.scrollbarsClipped=!0)}function Rr(e){if(e.hasFocus())return null;var t=B();if(!t||!M(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&M(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}function Pr(e){if(e&&e.activeElt&&e.activeElt!=B()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&M(document.body,e.anchorNode)&&M(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}function _r(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return Ri(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Wi(e))return!1;Vr(e)&&(Ri(e),t.dims=Li(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),a=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(r,n.viewTo)),Tt&&(o=en(e.doc,o),a=tn(e.doc,a));var l=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;_i(e,o,a),n.viewOffset=on(Ze(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+\"px\";var s=Wi(e);if(!l&&0==s&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=Rr(e);return s>4&&(n.lineDiv.style.display=\"none\"),qr(e,n.updateLineNumbers,t.dims),s>4&&(n.lineDiv.style.display=\"\"),n.renderedView=n.view,Pr(u),A(n.cursorDiv),A(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,l&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Or(e,400)),n.updateLineNumbers=null,!0}function Wr(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Kn(e))i&&(t.visible=er(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+$n(e.display)-Xn(e),n.top)}),t.visible=er(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!_r(e,t))break;Ji(e);var r=pr(e);ji(e),vr(e,r),$r(e,r),t.force=!1}t.signal(e,\"update\",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,\"viewportChange\",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function jr(e,t){var n=new zr(e,t);if(_r(e,n)){Ji(e),Wr(e,n);var i=pr(e);ji(e),vr(e,i),$r(e,i),n.finish()}}function qr(e,t,n){var i=e.display,r=e.options.lineNumbers,o=i.lineDiv,a=o.firstChild;function l(t){var n=t.nextSibling;return s&&x&&e.display.currentWheelTarget==t?t.style.display=\"none\":t.parentNode.removeChild(t),n}for(var u=i.view,c=i.viewFrom,d=0;d<u.length;d++){var h=u[d];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;a!=h.node;)a=l(a);var f=r&&null!=t&&t<=c&&h.lineNumber;h.changes&&(_(h.changes,\"gutter\")>-1&&(f=!1),Ln(e,h,c,n)),f&&(A(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(it(e.options,c)))),a=h.node.nextSibling}else{var p=Rn(e,h,c,n);o.insertBefore(p,a)}c+=h.size}for(;a;)a=l(a)}function Ur(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+\"px\",En(e,\"gutterChanged\",e)}function $r(e,t){e.display.sizer.style.minHeight=t.docHeight+\"px\",e.display.heightForcer.style.top=t.docHeight+\"px\",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Vn(e)+\"px\"}function Gr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=Mi(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+\"px\",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var l=n[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+\"px\")}}function Vr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=it(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(T(\"div\",[T(\"div\",n)],\"CodeMirror-linenumber CodeMirror-gutter-elt\")),o=r.firstChild.offsetWidth,a=r.offsetWidth-o;return i.lineGutter.style.width=\"\",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-a)+1,i.lineNumWidth=i.lineNumInnerWidth+a,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+\"px\",Ur(e.display),!0}return!1}function Kr(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r],a=null;if(\"string\"!=typeof o&&(a=o.style,o=o.className),\"CodeMirror-linenumbers\"==o){if(!t)continue;i=!0}n.push({className:o,style:a})}return t&&!i&&n.push({className:\"CodeMirror-linenumbers\",style:null}),n}function Xr(e){var t=e.gutters,n=e.gutterSpecs;A(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,a=r.style,l=t.appendChild(T(\"div\",null,\"CodeMirror-gutter \"+o));a&&(l.style.cssText=a),\"CodeMirror-linenumbers\"==o&&(e.lineGutter=l,l.style.width=(e.lineNumWidth||1)+\"px\")}t.style.display=n.length?\"\":\"none\",Ur(e)}function Zr(e){Xr(e.display),zi(e),Gr(e)}function Yr(e,t,i,r){var o=this;this.input=i,o.scrollbarFiller=T(\"div\",null,\"CodeMirror-scrollbar-filler\"),o.scrollbarFiller.setAttribute(\"cm-not-content\",\"true\"),o.gutterFiller=T(\"div\",null,\"CodeMirror-gutter-filler\"),o.gutterFiller.setAttribute(\"cm-not-content\",\"true\"),o.lineDiv=L(\"div\",null,\"CodeMirror-code\"),o.selectionDiv=T(\"div\",null,null,\"position: relative; z-index: 1\"),o.cursorDiv=T(\"div\",null,\"CodeMirror-cursors\"),o.measure=T(\"div\",null,\"CodeMirror-measure\"),o.lineMeasure=T(\"div\",null,\"CodeMirror-measure\"),o.lineSpace=L(\"div\",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,\"position: relative; outline: none\");var u=L(\"div\",[o.lineSpace],\"CodeMirror-lines\");o.mover=T(\"div\",[u],null,\"position: relative\"),o.sizer=T(\"div\",[o.mover],\"CodeMirror-sizer\"),o.sizerWidth=null,o.heightForcer=T(\"div\",null,null,\"position: absolute; height: \"+W+\"px; width: 1px;\"),o.gutters=T(\"div\",null,\"CodeMirror-gutters\"),o.lineGutter=null,o.scroller=T(\"div\",[o.sizer,o.heightForcer,o.gutters],\"CodeMirror-scroll\"),o.scroller.setAttribute(\"tabIndex\",\"-1\"),o.wrapper=T(\"div\",[o.scrollbarFiller,o.gutterFiller,o.scroller],\"CodeMirror\"),a&&l<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),s||n&&v||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=Kr(r.gutters,r.lineNumbers),Xr(o),i.init(o)}zr.prototype.signal=function(e,t){be(e,t)&&this.events.push(arguments)},zr.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ve.apply(null,this.events[e])};var Jr=0,Qr=null;function eo(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function to(e){var t=eo(e);return t.x*=Qr,t.y*=Qr,t}function no(e,t){var i=eo(t),r=i.x,o=i.y,a=e.display,l=a.scroller,u=l.scrollWidth>l.clientWidth,c=l.scrollHeight>l.clientHeight;if(r&&u||o&&c){if(o&&x&&s)e:for(var h=t.target,f=a.view;h!=l;h=h.parentNode)for(var p=0;p<f.length;p++)if(f[p].node==h){e.display.currentWheelTarget=h;break e}if(r&&!n&&!d&&null!=Qr)return o&&c&&dr(e,Math.max(0,l.scrollTop+o*Qr)),fr(e,Math.max(0,l.scrollLeft+r*Qr)),(!o||o&&c)&&Ce(t),void(a.wheelStartX=null);if(o&&null!=Qr){var m=o*Qr,g=e.doc.scrollTop,v=g+a.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),jr(e,{top:g,bottom:v})}Jr<20&&(null==a.wheelStartX?(a.wheelStartX=l.scrollLeft,a.wheelStartY=l.scrollTop,a.wheelDX=r,a.wheelDY=o,setTimeout((function(){if(null!=a.wheelStartX){var e=l.scrollLeft-a.wheelStartX,t=l.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(Qr=(Qr*Jr+n)/(Jr+1),++Jr)}}),200)):(a.wheelDX+=r,a.wheelDY+=o))}}a?Qr=-.53:n?Qr=15:c?Qr=-.7:h&&(Qr=-1/3);var io=function(e,t){this.ranges=e,this.primIndex=t};io.prototype.primary=function(){return this.ranges[this.primIndex]},io.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!at(n.anchor,i.anchor)||!at(n.head,i.head))return!1}return!0},io.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new ro(lt(this.ranges[t].anchor),lt(this.ranges[t].head));return new io(e,this.primIndex)},io.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},io.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(ot(t,i.from())>=0&&ot(e,i.to())<=0)return n}return-1};var ro=function(e,t){this.anchor=e,this.head=t};function oo(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort((function(e,t){return ot(e.from(),t.from())})),n=_(t,r);for(var o=1;o<t.length;o++){var a=t[o],l=t[o-1],s=ot(l.to(),a.from());if(i&&!a.empty()?s>0:s>=0){var u=ut(l.from(),a.from()),c=st(l.to(),a.to()),d=l.empty()?a.from()==a.head:l.from()==l.head;o<=n&&--n,t.splice(--o,2,new ro(d?c:u,d?u:c))}}return new io(t,n)}function ao(e,t){return new io([new ro(e,t||e)],0)}function lo(e){return e.text?rt(e.from.line+e.text.length-1,X(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function so(e,t){if(ot(e,t.from)<0)return e;if(ot(e,t.to)<=0)return lo(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=lo(t).ch-t.to.ch),rt(n,i)}function uo(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new ro(so(r.anchor,t),so(r.head,t)))}return oo(e.cm,n,e.sel.primIndex)}function co(e,t,n){return e.line==t.line?rt(n.line,e.ch-t.ch+n.ch):rt(n.line+(e.line-t.line),e.ch)}function ho(e,t,n){for(var i=[],r=rt(e.first,0),o=r,a=0;a<t.length;a++){var l=t[a],s=co(l.from,r,o),u=co(lo(l),r,o);if(r=l.to,o=u,\"around\"==n){var c=e.sel.ranges[a],d=ot(c.head,c.anchor)<0;i[a]=new ro(d?u:s,d?s:u)}else i[a]=new ro(s,s)}return new io(i,e.sel.primIndex)}function fo(e){e.doc.mode=qe(e.options,e.doc.modeOption),po(e)}function po(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Or(e,100),e.state.modeGen++,e.curOp&&zi(e)}function mo(e,t){return 0==t.from.ch&&0==t.to.ch&&\"\"==X(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function go(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){un(e,n,r,i),En(e,\"change\",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new sn(u[o],r(o),i));return n}var l=t.from,s=t.to,u=t.text,c=Ze(e,l.line),d=Ze(e,s.line),h=X(u),f=r(u.length-1),p=s.line-l.line;if(t.full)e.insert(0,a(0,u.length)),e.remove(u.length,e.size-u.length);else if(mo(e,t)){var m=a(0,u.length-1);o(d,d.text,f),p&&e.remove(l.line,p),m.length&&e.insert(l.line,m)}else if(c==d)if(1==u.length)o(c,c.text.slice(0,l.ch)+h+c.text.slice(s.ch),f);else{var g=a(1,u.length-1);g.push(new sn(h+c.text.slice(s.ch),f,i)),o(c,c.text.slice(0,l.ch)+u[0],r(0)),e.insert(l.line+1,g)}else if(1==u.length)o(c,c.text.slice(0,l.ch)+u[0]+d.text.slice(s.ch),r(0)),e.remove(l.line+1,p);else{o(c,c.text.slice(0,l.ch)+u[0],r(0)),o(d,h+d.text.slice(s.ch),f);var v=a(1,u.length-1);p>1&&e.remove(l.line+1,p-1),e.insert(l.line+1,v)}En(e,\"change\",e,t)}function vo(e,t,n){function i(e,r,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var l=e.linked[a];if(l.doc!=r){var s=o&&l.sharedHist;n&&!s||(t(l.doc,s),i(l.doc,e,s))}}}i(e,null,!0)}function xo(e,t){if(t.cm)throw new Error(\"This document is already in use.\");e.doc=t,t.cm=e,Ni(e),fo(e),yo(e),e.options.direction=t.direction,e.options.lineWrapping||ln(e),e.options.mode=t.modeOption,zi(e)}function yo(e){(\"rtl\"==e.doc.direction?N:F)(e.display.lineDiv,\"CodeMirror-rtl\")}function bo(e){Lr(e,(function(){yo(e),zi(e)}))}function Do(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Co(e,t){var n={from:lt(t.from),to:lo(t),text:Ye(e,t.from,t.to)};return To(e,n,t.from.line,t.to.line+1),vo(e,(function(e){return To(e,n,t.from.line,t.to.line+1)}),!0),n}function wo(e){for(;e.length&&X(e).ranges;)e.pop()}function ko(e,t){return t?(wo(e.done),X(e.done)):e.done.length&&!X(e.done).ranges?X(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),X(e.done)):void 0}function So(e,t,n,i){var r=e.history;r.undone.length=0;var o,a,l=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&(\"+\"==t.origin.charAt(0)&&r.lastModTime>l-(e.cm?e.cm.options.historyEventDelay:500)||\"*\"==t.origin.charAt(0)))&&(o=ko(r,r.lastOp==i)))a=X(o.changes),0==ot(t.from,t.to)&&0==ot(t.from,a.to)?a.to=lo(t):o.changes.push(Co(e,t));else{var s=X(r.done);for(s&&s.ranges||Eo(e.sel,r.done),o={changes:[Co(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=l,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,a||ve(e,\"historyAdded\")}function Fo(e,t,n,i){var r=t.charAt(0);return\"*\"==r||\"+\"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ao(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||Fo(e,o,X(r.done),t))?r.done[r.done.length-1]=t:Eo(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&wo(r.undone)}function Eo(e,t){var n=X(t);n&&n.ranges&&n.equals(e)||t.push(e)}function To(e,t,n,i){var r=t[\"spans_\"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),(function(n){n.markedSpans&&((r||(r=t[\"spans_\"+e.id]={}))[o]=n.markedSpans),++o}))}function Lo(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Mo(e,t){var n=t[\"spans_\"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(Lo(n[r]));return i}function Bo(e,t){var n=Mo(e,t),i=Rt(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],a=i[r];if(o&&a)e:for(var l=0;l<a.length;++l){for(var s=a[l],u=0;u<o.length;++u)if(o[u].marker==s.marker)continue e;o.push(s)}else a&&(n[r]=a)}return n}function No(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?io.prototype.deepCopy.call(o):o);else{var a=o.changes,l=[];i.push({changes:l});for(var s=0;s<a.length;++s){var u=a[s],c=void 0;if(l.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\\d+)$/))&&_(t,Number(c[1]))>-1&&(X(l)[d]=u[d],delete u[d])}}}return i}function Oo(e,t,n,i){if(i){var r=e.anchor;if(n){var o=ot(t,r)<0;o!=ot(n,r)<0?(r=t,t=n):o!=ot(t,n)<0&&(t=n)}return new ro(r,t)}return new ro(n||t,t)}function Io(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),Wo(e,new io([Oo(e.sel.primary(),t,n,r)],0),i)}function zo(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=Oo(e.sel.ranges[o],t[o],null,r);Wo(e,oo(e.cm,i,e.sel.primIndex),n)}function Ho(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,Wo(e,oo(e.cm,r,e.sel.primIndex),i)}function Ro(e,t,n,i){Wo(e,ao(t,n),i)}function Po(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new ro(dt(e,t[n].anchor),dt(e,t[n].head))},origin:n&&n.origin};return ve(e,\"beforeSelectionChange\",e,i),e.cm&&ve(e.cm,\"beforeSelectionChange\",e.cm,i),i.ranges!=t.ranges?oo(e.cm,i.ranges,i.ranges.length-1):t}function _o(e,t,n){var i=e.history.done,r=X(i);r&&r.ranges?(i[i.length-1]=t,jo(e,t,n)):Wo(e,t,n)}function Wo(e,t,n){jo(e,t,n),Ao(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function jo(e,t,n){(be(e,\"beforeSelectionChange\")||e.cm&&be(e.cm,\"beforeSelectionChange\"))&&(t=Po(e,t,n));var i=n&&n.bias||(ot(t.primary().head,e.sel.primary().head)<0?-1:1);qo(e,$o(e,t,i,!0)),n&&!1===n.scroll||!e.cm||\"nocursor\"==e.cm.getOption(\"readOnly\")||ar(e.cm)}function qo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ye(e.cm)),En(e,\"cursorActivity\",e))}function Uo(e){qo(e,$o(e,e.sel,null,!1))}function $o(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var a=t.ranges[o],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],s=Vo(e,a.anchor,l&&l.anchor,n,i),u=Vo(e,a.head,l&&l.head,n,i);(r||s!=a.anchor||u!=a.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new ro(s,u))}return r?oo(e.cm,r,t.primIndex):t}function Go(e,t,n,i,r){var o=Ze(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var l=o.markedSpans[a],s=l.marker,u=\"selectLeft\"in s?!s.selectLeft:s.inclusiveLeft,c=\"selectRight\"in s?!s.selectRight:s.inclusiveRight;if((null==l.from||(u?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(c?l.to>=t.ch:l.to>t.ch))){if(r&&(ve(s,\"beforeCursorEnter\"),s.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!s.atomic)continue;if(n){var d=s.find(i<0?1:-1),h=void 0;if((i<0?c:u)&&(d=Ko(e,d,-i,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(h=ot(d,n))&&(i<0?h<0:h>0))return Go(e,d,t,i,r)}var f=s.find(i<0?-1:1);return(i<0?u:c)&&(f=Ko(e,f,i,f.line==t.line?o:null)),f?Go(e,f,t,i,r):null}}return t}function Vo(e,t,n,i,r){var o=i||1,a=Go(e,t,n,o,r)||!r&&Go(e,t,n,o,!0)||Go(e,t,n,-o,r)||!r&&Go(e,t,n,-o,!0);return a||(e.cantEdit=!0,rt(e.first,0))}function Ko(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?dt(e,rt(t.line-1)):null:n>0&&t.ch==(i||Ze(e,t.line)).text.length?t.line<e.first+e.size-1?rt(t.line+1,0):null:new rt(t.line,t.ch+n)}function Xo(e){e.setSelection(rt(e.firstLine(),0),rt(e.lastLine()),q)}function Zo(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,o){t&&(i.from=dt(e,t)),n&&(i.to=dt(e,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),ve(e,\"beforeChange\",e,i),e.cm&&ve(e.cm,\"beforeChange\",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Yo(e,t,n){if(e.cm){if(!e.cm.curOp)return Mr(e.cm,Yo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(be(e,\"beforeChange\")||e.cm&&be(e.cm,\"beforeChange\"))||(t=Zo(e,t,!0))){var i=Et&&!n&&_t(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)Jo(e,{from:i[r].from,to:i[r].to,text:r?[\"\"]:t.text,origin:t.origin});else Jo(e,t)}}function Jo(e,t){if(1!=t.text.length||\"\"!=t.text[0]||0!=ot(t.from,t.to)){var n=uo(e,t);So(e,t,n,e.cm?e.cm.curOp.id:NaN),ta(e,t,n,Rt(e,t));var i=[];vo(e,(function(e,n){n||-1!=_(i,e.history)||(aa(e.history,t),i.push(e.history)),ta(e,t,null,Rt(e,t))}))}}function Qo(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,o=e.history,a=e.sel,l=\"undo\"==t?o.done:o.undone,s=\"undo\"==t?o.undone:o.done,u=0;u<l.length&&(r=l[u],n?!r.ranges||r.equals(e.sel):r.ranges);u++);if(u!=l.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=l.pop()).ranges){if(i)return void l.push(r);break}if(Eo(r,s),n&&!r.equals(e.sel))return void Wo(e,r,{clearRedo:!1});a=r}var c=[];Eo(a,s),s.push({changes:c,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var d=be(e,\"beforeChange\")||e.cm&&be(e.cm,\"beforeChange\"),h=function(n){var i=r.changes[n];if(i.origin=t,d&&!Zo(e,i,!1))return l.length=0,{};c.push(Co(e,i));var o=n?uo(e,i):X(l);ta(e,i,o,Bo(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:lo(i)});var a=[];vo(e,(function(e,t){t||-1!=_(a,e.history)||(aa(e.history,i),a.push(e.history)),ta(e,i,null,Bo(e,i))}))},f=r.changes.length-1;f>=0;--f){var p=h(f);if(p)return p.v}}}}function ea(e,t){if(0!=t&&(e.first+=t,e.sel=new io(Z(e.sel.ranges,(function(e){return new ro(rt(e.anchor.line+t,e.anchor.ch),rt(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){zi(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Hi(e.cm,i,\"gutter\")}}function ta(e,t,n,i){if(e.cm&&!e.cm.curOp)return Mr(e.cm,ta)(e,t,n,i);if(t.to.line<e.first)ea(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);ea(e,r),t={from:rt(e.first,0),to:rt(t.to.line+r,t.to.ch),text:[X(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:rt(o,Ze(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ye(e,t.from,t.to),n||(n=uo(e,t)),e.cm?na(e.cm,t,i):go(e,t,i),jo(e,n,q),e.cantEdit&&Vo(e,rt(e.firstLine(),0))&&(e.cantEdit=!1)}}function na(e,t,n){var i=e.doc,r=e.display,o=t.from,a=t.to,l=!1,s=o.line;e.options.lineWrapping||(s=et(Yt(Ze(i,o.line))),i.iter(s,a.line+1,(function(e){if(e==r.maxLine)return l=!0,!0}))),i.sel.contains(t.from,t.to)>-1&&ye(e),go(i,t,n,Bi(e)),e.options.lineWrapping||(i.iter(s,o.line+t.text.length,(function(e){var t=an(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,l=!1)})),l&&(e.curOp.updateMaxLine=!0)),At(i,o.line),Or(e,400);var u=t.text.length-(a.line-o.line)-1;t.full?zi(e):o.line!=a.line||1!=t.text.length||mo(e.doc,t)?zi(e,o.line,a.line+1,u):Hi(e,o.line,\"text\");var c=be(e,\"changes\"),d=be(e,\"change\");if(d||c){var h={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};d&&En(e,\"change\",e,h),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function ia(e,t,n,i,r){var o;i||(i=n),ot(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),\"string\"==typeof t&&(t=e.splitLines(t)),Yo(e,{from:n,to:i,text:t,origin:r})}function ra(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function oa(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],a=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var l=0;l<o.ranges.length;l++)ra(o.ranges[l].anchor,t,n,i),ra(o.ranges[l].head,t,n,i)}else{for(var s=0;s<o.changes.length;++s){var u=o.changes[s];if(n<u.from.line)u.from=rt(u.from.line+i,u.from.ch),u.to=rt(u.to.line+i,u.to.ch);else if(t<=u.to.line){a=!1;break}}a||(e.splice(0,r+1),r=0)}}}function aa(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;oa(e.done,n,i,r),oa(e.undone,n,i,r)}function la(e,t,n,i){var r=t,o=t;return\"number\"==typeof t?o=Ze(e,ct(e,t)):r=et(t),null==r?null:(i(o,r)&&e.cm&&Hi(e.cm,r,n),o)}function sa(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function ua(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}ro.prototype.from=function(){return ut(this.anchor,this.head)},ro.prototype.to=function(){return st(this.anchor,this.head)},ro.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},sa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,cn(r),En(r,\"delete\")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},ua.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),a=i.height;if(i.removeInner(e,o),this.height-=a-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof sa))){var l=[];this.collapse(l),this.children=[new sa(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var a=r.lines.length%25+25,l=a;l<r.lines.length;){var s=new sa(r.lines.slice(l,l+=25));r.height-=s.height,this.children.splice(++i,0,s),s.parent=this}r.lines=r.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new ua(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=_(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new ua(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var a=Math.min(t,o-e);if(r.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var ca=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function da(e,t,n){on(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&or(e,n)}function ha(e,t,n,i){var r=new ca(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),la(e,t,\"widget\",(function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!nn(e,t)){var i=on(t)<e.scrollTop;Qe(t,t.height+jn(r)),i&&or(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&En(o,\"lineWidgetAdded\",o,r,\"number\"==typeof t?t:et(t)),r}ca.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=et(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=jn(this);Qe(n,Math.max(0,n.height-o)),e&&(Lr(e,(function(){da(e,n,-o),Hi(e,i,\"widget\")})),En(e,\"lineWidgetCleared\",e,this,i))}},ca.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=jn(this)-t;r&&(nn(this.doc,i)||Qe(i,i.height+r),n&&Lr(n,(function(){n.curOp.forceUpdate=!0,da(n,i,r),En(n,\"lineWidgetChanged\",n,e,et(i))})))},De(ca);var fa=0,pa=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++fa};function ma(e,t,n,i,r){if(i&&i.shared)return va(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return Mr(e.cm,ma)(e,t,n,i,r);var o=new pa(e,r),a=ot(t,n);if(i&&H(i,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=L(\"span\",[o.replacedWith],\"CodeMirror-widget\"),i.handleMouseEvents||o.widgetNode.setAttribute(\"cm-ignore-events\",\"true\"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Zt(e,t.line,t,n,o)||t.line!=n.line&&Zt(e,n.line,t,n,o))throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");Mt()}o.addToHistory&&So(e,{from:t,to:n,origin:\"markText\"},e.sel,NaN);var l,s=t.line,u=e.cm;if(e.iter(s,n.line+1,(function(i){u&&o.collapsed&&!u.options.lineWrapping&&Yt(i)==u.display.maxLine&&(l=!0),o.collapsed&&s!=t.line&&Qe(i,0),It(i,new Bt(o,s==t.line?t.ch:null,s==n.line?n.ch:null),e.cm&&e.cm.curOp),++s})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){nn(e,t)&&Qe(t,0)})),o.clearOnEnter&&pe(o,\"beforeCursorEnter\",(function(){return o.clear()})),o.readOnly&&(Lt(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++fa,o.atomic=!0),u){if(l&&(u.curOp.updateMaxLine=!0),o.collapsed)zi(u,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=t.line;c<=n.line;c++)Hi(u,c,\"text\");o.atomic&&Uo(u.doc),En(u,\"markerAdded\",u,o)}return o}pa.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Cr(e),be(this,\"clear\")){var n=this.find();n&&En(this,\"clear\",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var a=this.lines[o],l=Nt(a.markedSpans,this);e&&!this.collapsed?Hi(e,et(a),\"text\"):e&&(null!=l.to&&(r=et(a)),null!=l.from&&(i=et(a))),a.markedSpans=Ot(a.markedSpans,l),null==l.from&&this.collapsed&&!nn(this.doc,a)&&e&&Qe(a,Ei(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var u=Yt(this.lines[s]),c=an(u);c>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&zi(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Uo(e.doc)),e&&En(e,\"markerCleared\",e,this,i,r),t&&wr(e),this.parent&&this.parent.clear()}},pa.prototype.find=function(e,t){var n,i;null==e&&\"bookmark\"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],a=Nt(o.markedSpans,this);if(null!=a.from&&(n=rt(t?o:et(o),a.from),-1==e))return n;if(null!=a.to&&(i=rt(t?o:et(o),a.to),1==e))return i}return n&&{from:n,to:i}},pa.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&Lr(i,(function(){var r=t.line,o=et(t.line),a=ei(i,o);if(a&&(ui(a),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!nn(n.doc,r)&&null!=n.height){var l=n.height;n.height=null;var s=jn(n)-l;s&&Qe(r,r.height+s)}En(i,\"markerChanged\",i,e)}))},pa.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=_(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},pa.prototype.detachLine=function(e){if(this.lines.splice(_(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},De(pa);var ga=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function va(e,t,n,i,r){(i=H(i)).shared=!1;var o=[ma(e,t,n,i,r)],a=o[0],l=i.widgetNode;return vo(e,(function(e){l&&(i.widgetNode=l.cloneNode(!0)),o.push(ma(e,dt(e,t),dt(e,n),i,r));for(var s=0;s<e.linked.length;++s)if(e.linked[s].isParent)return;a=X(o)})),new ga(o,a)}function xa(e){return e.findMarks(rt(e.first,0),e.clipPos(rt(e.lastLine())),(function(e){return e.parent}))}function ya(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),a=e.clipPos(r.to);if(ot(o,a)){var l=ma(e,o,a,i.primary,i.primary.type);i.markers.push(l),l.parent=i}}}function ba(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];vo(n.primary.doc,(function(e){return i.push(e)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==_(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}ga.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();En(this,\"clear\")}},ga.prototype.find=function(e,t){return this.primary.find(e,t)},De(ga);var Da=0,Ca=function e(t,n,i,r,o){if(!(this instanceof e))return new e(t,n,i,r,o);null==i&&(i=0),ua.call(this,[new sa([new sn(\"\",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var a=rt(i,0);this.sel=ao(a),this.history=new Do(null),this.id=++Da,this.modeOption=n,this.lineSep=r,this.direction=\"rtl\"==o?\"rtl\":\"ltr\",this.extend=!1,\"string\"==typeof t&&(t=this.splitLines(t)),go(this,{from:a,to:a,text:t}),Wo(this,ao(a),q)};Ca.prototype=Q(ua.prototype,{constructor:Ca,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Je(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Nr((function(e){var t=rt(this.first,0),n=this.first+this.size-1;Yo(this,{from:t,to:rt(n,Ze(this,n).text.length),text:this.splitLines(e),origin:\"setValue\",full:!0},!0),this.cm&&lr(this.cm,0,0),Wo(this,ao(t),q)})),replaceRange:function(e,t,n,i){ia(this,e,t=dt(this,t),n=n?dt(this,n):t,i)},getRange:function(e,t,n){var i=Ye(this,dt(this,e),dt(this,t));return!1===n?i:\"\"===n?i.join(\"\"):i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(nt(this,e))return Ze(this,e)},getLineNumber:function(e){return et(e)},getLineHandleVisualStart:function(e){return\"number\"==typeof e&&(e=Ze(this,e)),Yt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return dt(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||\"head\"==e?t.head:\"anchor\"==e?t.anchor:\"end\"==e||\"to\"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Nr((function(e,t,n){Ro(this,dt(this,\"number\"==typeof e?rt(e,t||0):e),null,n)})),setSelection:Nr((function(e,t,n){Ro(this,dt(this,e),dt(this,t||e),n)})),extendSelection:Nr((function(e,t,n){Io(this,dt(this,e),t&&dt(this,t),n)})),extendSelections:Nr((function(e,t){zo(this,ft(this,e),t)})),extendSelectionsBy:Nr((function(e,t){zo(this,ft(this,Z(this.sel.ranges,e)),t)})),setSelections:Nr((function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new ro(dt(this,e[r].anchor),dt(this,e[r].head||e[r].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Wo(this,oo(this.cm,i,t),n)}})),addSelection:Nr((function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new ro(dt(this,e),dt(this,t||e))),Wo(this,oo(this.cm,i,i.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=Ye(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Ye(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||\"+input\")},replaceSelections:Nr((function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var a=r.ranges[o];i[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var l=t&&\"end\"!=t&&ho(this,i,t),s=i.length-1;s>=0;s--)Yo(this,i[s]);l?_o(this,l):this.cm&&ar(this.cm)})),undo:Nr((function(){Qo(this,\"undo\")})),redo:Nr((function(){Qo(this,\"redo\")})),undoSelection:Nr((function(){Qo(this,\"undo\",!0)})),redoSelection:Nr((function(){Qo(this,\"redo\",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Do(this.history),vo(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:No(this.history.done),undone:No(this.history.undone)}},setHistory:function(e){var t=this.history=new Do(this.history);t.done=No(e.done.slice(0),null,!0),t.undone=No(e.undone.slice(0),null,!0)},setGutterMarker:Nr((function(e,t,n){return la(this,e,\"gutter\",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&ie(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:Nr((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&la(t,n,\"gutter\",(function(){return n.gutterMarkers[e]=null,ie(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if(\"number\"==typeof e){if(!nt(this,e))return null;if(t=e,!(e=Ze(this,e)))return null}else if(null==(t=et(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Nr((function(e,t,n){return la(this,e,\"gutter\"==t?\"gutter\":\"class\",(function(e){var i=\"text\"==t?\"textClass\":\"background\"==t?\"bgClass\":\"gutter\"==t?\"gutterClass\":\"wrapClass\";if(e[i]){if(k(n).test(e[i]))return!1;e[i]+=\" \"+n}else e[i]=n;return!0}))})),removeLineClass:Nr((function(e,t,n){return la(this,e,\"gutter\"==t?\"gutter\":\"class\",(function(e){var i=\"text\"==t?\"textClass\":\"background\"==t?\"bgClass\":\"gutter\"==t?\"gutterClass\":\"wrapClass\",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(k(n));if(!o)return!1;var a=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&a!=r.length?\" \":\"\")+r.slice(a)||null}return!0}))})),addLineWidget:Nr((function(e,t,n){return ha(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return ma(this,dt(this,e),dt(this,t),n,n&&n.type||\"range\")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return ma(this,e=dt(this,e),e,n,\"bookmark\")},findMarksAt:function(e){var t=[],n=Ze(this,(e=dt(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=dt(this,e),t=dt(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,(function(o){var a=o.markedSpans;if(a)for(var l=0;l<a.length;l++){var s=a[l];null!=s.to&&r==e.line&&e.ch>=s.to||null==s.from&&r!=e.line||null!=s.from&&r==t.line&&s.from>=t.ch||n&&!n(s.marker)||i.push(s.marker.parent||s.marker)}++r})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)})),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>e)return t=e,!0;e-=o,++n})),dt(this,rt(n,t))},indexFromPos:function(e){var t=(e=dt(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Ca(Je(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new Ca(Je(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],ya(i,xa(this)),i},unlinkDoc:function(e){if(e instanceof zl&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),ba(xa(this));break}if(e.history==this.history){var n=[e.id];vo(e,(function(e){return n.push(e.id)}),!0),e.history=new Do(null),e.history.done=No(this.history.done,n),e.history.undone=No(this.history.undone,n)}},iterLinkedDocs:function(e){vo(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ne(e)},lineSeparator:function(){return this.lineSep||\"\\n\"},setDirection:Nr((function(e){\"rtl\"!=e&&(e=\"ltr\"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&bo(this.cm))}))}),Ca.prototype.eachLine=Ca.prototype.iter;var wa=0;function ka(e){var t=this;if(Aa(t),!xe(t,e)&&!qn(t.display,e)){Ce(e),a&&(wa=+new Date);var n=Oi(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),l=0,s=function(){++l==r&&Mr(t,(function(){var e={from:n=dt(t.doc,n),to:n,text:t.doc.splitLines(o.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:\"paste\"};Yo(t.doc,e),_o(t.doc,ao(dt(t.doc,n),dt(t.doc,lo(e))))}))()},u=function(e,n){if(t.options.allowDropFileTypes&&-1==_(t.options.allowDropFileTypes,e.type))s();else{var i=new FileReader;i.onerror=function(){return s()},i.onload=function(){var e=i.result;/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(e)||(o[n]=e),s()},i.readAsText(e)}},c=0;c<i.length;c++)u(i[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var d=e.dataTransfer.getData(\"Text\");if(d){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),jo(t.doc,ao(n,n)),h)for(var f=0;f<h.length;++f)ia(t.doc,\"\",h[f].anchor,h[f].head,\"drag\");t.replaceSelection(d,\"around\",\"paste\"),t.display.input.focus()}}catch(p){}}}}function Sa(e,t){if(a&&(!e.state.draggingText||+new Date-wa<100))Se(t);else if(!xe(e,t)&&!qn(e.display,t)&&(t.dataTransfer.setData(\"Text\",e.getSelection()),t.dataTransfer.effectAllowed=\"copyMove\",t.dataTransfer.setDragImage&&!h)){var n=T(\"img\",null,null,\"position: fixed; left: 0; top: 0;\");n.src=\"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\",d&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),d&&n.parentNode.removeChild(n)}}function Fa(e,t){var n=Oi(e,t);if(n){var i=document.createDocumentFragment();Ui(e,n,i),e.display.dragCursor||(e.display.dragCursor=T(\"div\",null,\"CodeMirror-cursors CodeMirror-dragcursors\"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),E(e.display.dragCursor,i)}}function Aa(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ea(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName(\"CodeMirror\"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var Ta=!1;function La(){Ta||(Ma(),Ta=!0)}function Ma(){var e;pe(window,\"resize\",(function(){null==e&&(e=setTimeout((function(){e=null,Ea(Ba)}),100))})),pe(window,\"blur\",(function(){return Ea(Yi)}))}function Ba(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Na={3:\"Pause\",8:\"Backspace\",9:\"Tab\",13:\"Enter\",16:\"Shift\",17:\"Ctrl\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Esc\",32:\"Space\",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"Left\",38:\"Up\",39:\"Right\",40:\"Down\",44:\"PrintScrn\",45:\"Insert\",46:\"Delete\",59:\";\",61:\"=\",91:\"Mod\",92:\"Mod\",93:\"Mod\",106:\"*\",107:\"=\",109:\"-\",110:\".\",111:\"/\",145:\"ScrollLock\",173:\"-\",186:\";\",187:\"=\",188:\",\",189:\"-\",190:\".\",191:\"/\",192:\"`\",219:\"[\",220:\"\\\\\",221:\"]\",222:\"'\",224:\"Mod\",63232:\"Up\",63233:\"Down\",63234:\"Left\",63235:\"Right\",63272:\"Delete\",63273:\"Home\",63275:\"End\",63276:\"PageUp\",63277:\"PageDown\",63302:\"Insert\"},Oa=0;Oa<10;Oa++)Na[Oa+48]=Na[Oa+96]=String(Oa);for(var Ia=65;Ia<=90;Ia++)Na[Ia]=String.fromCharCode(Ia);for(var za=1;za<=12;za++)Na[za+111]=Na[za+63235]=\"F\"+za;var Ha={};function Ra(e){var t,n,i,r,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error(\"Unrecognized modifier name: \"+l);i=!0}}return t&&(e=\"Alt-\"+e),n&&(e=\"Ctrl-\"+e),r&&(e=\"Cmd-\"+e),i&&(e=\"Shift-\"+e),e}function Pa(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if(\"...\"==i){delete e[n];continue}for(var r=Z(n.split(\" \"),Ra),o=0;o<r.length;o++){var a=void 0,l=void 0;o==r.length-1?(l=r.join(\" \"),a=i):(l=r.slice(0,o+1).join(\" \"),a=\"...\");var s=t[l];if(s){if(s!=a)throw new Error(\"Inconsistent bindings for \"+l)}else t[l]=a}delete e[n]}for(var u in t)e[u]=t[u];return e}function _a(e,t,n,i){var r=(t=Ua(t)).call?t.call(e,i):t[e];if(!1===r)return\"nothing\";if(\"...\"===r)return\"multi\";if(null!=r&&n(r))return\"handled\";if(t.fallthrough){if(\"[object Array]\"!=Object.prototype.toString.call(t.fallthrough))return _a(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var a=_a(e,t.fallthrough[o],n,i);if(a)return a}}}function Wa(e){var t=\"string\"==typeof e?e:Na[e.keyCode];return\"Ctrl\"==t||\"Alt\"==t||\"Shift\"==t||\"Mod\"==t}function ja(e,t,n){var i=e;return t.altKey&&\"Alt\"!=i&&(e=\"Alt-\"+e),(C?t.metaKey:t.ctrlKey)&&\"Ctrl\"!=i&&(e=\"Ctrl-\"+e),(C?t.ctrlKey:t.metaKey)&&\"Mod\"!=i&&(e=\"Cmd-\"+e),!n&&t.shiftKey&&\"Shift\"!=i&&(e=\"Shift-\"+e),e}function qa(e,t){if(d&&34==e.keyCode&&e.char)return!1;var n=Na[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),ja(n,e,t))}function Ua(e){return\"string\"==typeof e?Ha[e]:e}function $a(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&ot(o.from,X(i).to)<=0;){var a=i.pop();if(ot(a.from,o.from)<0){o.from=a.from;break}}i.push(o)}Lr(e,(function(){for(var t=i.length-1;t>=0;t--)ia(e.doc,\"\",i[t].from,i[t].to,\"+delete\");ar(e)}))}function Ga(e,t,n){var i=ae(e.text,t+n,n);return i<0||i>e.text.length?null:i}function Va(e,t,n){var i=Ga(e,t.ch,n);return null==i?null:new rt(t.line,i,n<0?\"after\":\"before\")}function Ka(e,t,n,i,r){if(e){\"rtl\"==t.doc.direction&&(r=-r);var o=he(n,t.doc.direction);if(o){var a,l=r<0?X(o):o[0],s=r<0==(1==l.level)?\"after\":\"before\";if(l.level>0||\"rtl\"==t.doc.direction){var u=ti(t,n);a=r<0?n.text.length-1:0;var c=ni(t,u,a).top;a=le((function(e){return ni(t,u,e).top==c}),r<0==(1==l.level)?l.from:l.to-1,a),\"before\"==s&&(a=Ga(n,a,1))}else a=r<0?l.to:l.from;return new rt(i,a,s)}}return new rt(i,r<0?n.text.length:0,r<0?\"before\":\"after\")}function Xa(e,t,n,i){var r=he(t,e.doc.direction);if(!r)return Va(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky=\"before\"):n.ch<=0&&(n.ch=0,n.sticky=\"after\");var o=ce(r,n.ch,n.sticky),a=r[o];if(\"ltr\"==e.doc.direction&&a.level%2==0&&(i>0?a.to>n.ch:a.from<n.ch))return Va(t,n,i);var l,s=function(e,n){return Ga(t,e instanceof rt?e.ch:e,n)},u=function(n){return e.options.lineWrapping?(l=l||ti(e,t),wi(e,t,l,n)):{begin:0,end:t.text.length}},c=u(\"before\"==n.sticky?s(n,-1):n.ch);if(\"rtl\"==e.doc.direction||1==a.level){var d=1==a.level==i<0,h=s(n,d?1:-1);if(null!=h&&(d?h<=a.to&&h<=c.end:h>=a.from&&h>=c.begin)){var f=d?\"before\":\"after\";return new rt(n.line,h,f)}}var p=function(e,t,i){for(var o=function(e,t){return t?new rt(n.line,s(e,1),\"before\"):new rt(n.line,e,\"after\")};e>=0&&e<r.length;e+=t){var a=r[e],l=t>0==(1!=a.level),u=l?i.begin:s(i.end,-1);if(a.from<=u&&u<a.to)return o(u,l);if(u=l?a.from:s(a.to,-1),i.begin<=u&&u<i.end)return o(u,l)}},m=p(o+i,i,c);if(m)return m;var g=i>0?c.end:s(c.begin,-1);return null==g||i>0&&g==t.text.length||!(m=p(i>0?0:r.length-1,i,u(g)))?null:m}Ha.basic={Left:\"goCharLeft\",Right:\"goCharRight\",Up:\"goLineUp\",Down:\"goLineDown\",End:\"goLineEnd\",Home:\"goLineStartSmart\",PageUp:\"goPageUp\",PageDown:\"goPageDown\",Delete:\"delCharAfter\",Backspace:\"delCharBefore\",\"Shift-Backspace\":\"delCharBefore\",Tab:\"defaultTab\",\"Shift-Tab\":\"indentAuto\",Enter:\"newlineAndIndent\",Insert:\"toggleOverwrite\",Esc:\"singleSelection\"},Ha.pcDefault={\"Ctrl-A\":\"selectAll\",\"Ctrl-D\":\"deleteLine\",\"Ctrl-Z\":\"undo\",\"Shift-Ctrl-Z\":\"redo\",\"Ctrl-Y\":\"redo\",\"Ctrl-Home\":\"goDocStart\",\"Ctrl-End\":\"goDocEnd\",\"Ctrl-Up\":\"goLineUp\",\"Ctrl-Down\":\"goLineDown\",\"Ctrl-Left\":\"goGroupLeft\",\"Ctrl-Right\":\"goGroupRight\",\"Alt-Left\":\"goLineStart\",\"Alt-Right\":\"goLineEnd\",\"Ctrl-Backspace\":\"delGroupBefore\",\"Ctrl-Delete\":\"delGroupAfter\",\"Ctrl-S\":\"save\",\"Ctrl-F\":\"find\",\"Ctrl-G\":\"findNext\",\"Shift-Ctrl-G\":\"findPrev\",\"Shift-Ctrl-F\":\"replace\",\"Shift-Ctrl-R\":\"replaceAll\",\"Ctrl-[\":\"indentLess\",\"Ctrl-]\":\"indentMore\",\"Ctrl-U\":\"undoSelection\",\"Shift-Ctrl-U\":\"redoSelection\",\"Alt-U\":\"redoSelection\",fallthrough:\"basic\"},Ha.emacsy={\"Ctrl-F\":\"goCharRight\",\"Ctrl-B\":\"goCharLeft\",\"Ctrl-P\":\"goLineUp\",\"Ctrl-N\":\"goLineDown\",\"Ctrl-A\":\"goLineStart\",\"Ctrl-E\":\"goLineEnd\",\"Ctrl-V\":\"goPageDown\",\"Shift-Ctrl-V\":\"goPageUp\",\"Ctrl-D\":\"delCharAfter\",\"Ctrl-H\":\"delCharBefore\",\"Alt-Backspace\":\"delWordBefore\",\"Ctrl-K\":\"killLine\",\"Ctrl-T\":\"transposeChars\",\"Ctrl-O\":\"openLine\"},Ha.macDefault={\"Cmd-A\":\"selectAll\",\"Cmd-D\":\"deleteLine\",\"Cmd-Z\":\"undo\",\"Shift-Cmd-Z\":\"redo\",\"Cmd-Y\":\"redo\",\"Cmd-Home\":\"goDocStart\",\"Cmd-Up\":\"goDocStart\",\"Cmd-End\":\"goDocEnd\",\"Cmd-Down\":\"goDocEnd\",\"Alt-Left\":\"goGroupLeft\",\"Alt-Right\":\"goGroupRight\",\"Cmd-Left\":\"goLineLeft\",\"Cmd-Right\":\"goLineRight\",\"Alt-Backspace\":\"delGroupBefore\",\"Ctrl-Alt-Backspace\":\"delGroupAfter\",\"Alt-Delete\":\"delGroupAfter\",\"Cmd-S\":\"save\",\"Cmd-F\":\"find\",\"Cmd-G\":\"findNext\",\"Shift-Cmd-G\":\"findPrev\",\"Cmd-Alt-F\":\"replace\",\"Shift-Cmd-Alt-F\":\"replaceAll\",\"Cmd-[\":\"indentLess\",\"Cmd-]\":\"indentMore\",\"Cmd-Backspace\":\"delWrappedLineLeft\",\"Cmd-Delete\":\"delWrappedLineRight\",\"Cmd-U\":\"undoSelection\",\"Shift-Cmd-U\":\"redoSelection\",\"Ctrl-Up\":\"goDocStart\",\"Ctrl-Down\":\"goDocEnd\",fallthrough:[\"basic\",\"emacsy\"]},Ha.default=x?Ha.macDefault:Ha.pcDefault;var Za={selectAll:Xo,singleSelection:function(e){return e.setSelection(e.getCursor(\"anchor\"),e.getCursor(\"head\"),q)},killLine:function(e){return $a(e,(function(t){if(t.empty()){var n=Ze(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:rt(t.head.line+1,0)}:{from:t.head,to:rt(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return $a(e,(function(t){return{from:rt(t.from().line,0),to:dt(e.doc,rt(t.to().line+1,0))}}))},delLineLeft:function(e){return $a(e,(function(e){return{from:rt(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return $a(e,(function(t){var n=e.charCoords(t.head,\"div\").top+5;return{from:e.coordsChar({left:0,top:n},\"div\"),to:t.from()}}))},delWrappedLineRight:function(e){return $a(e,(function(t){var n=e.charCoords(t.head,\"div\").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},\"div\");return{from:t.from(),to:i}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(rt(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(rt(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return Ya(e,t.head.line)}),{origin:\"+move\",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return Qa(e,t.head)}),{origin:\"+move\",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return Ja(e,t.head.line)}),{origin:\"+move\",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,\"div\").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},\"div\")}),$)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,\"div\").top+5;return e.coordsChar({left:0,top:n},\"div\")}),$)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,\"div\").top+5,i=e.coordsChar({left:0,top:n},\"div\");return i.ch<e.getLine(i.line).search(/\\S/)?Qa(e,t.head):i}),$)},goLineUp:function(e){return e.moveV(-1,\"line\")},goLineDown:function(e){return e.moveV(1,\"line\")},goPageUp:function(e){return e.moveV(-1,\"page\")},goPageDown:function(e){return e.moveV(1,\"page\")},goCharLeft:function(e){return e.moveH(-1,\"char\")},goCharRight:function(e){return e.moveH(1,\"char\")},goColumnLeft:function(e){return e.moveH(-1,\"column\")},goColumnRight:function(e){return e.moveH(1,\"column\")},goWordLeft:function(e){return e.moveH(-1,\"word\")},goGroupRight:function(e){return e.moveH(1,\"group\")},goGroupLeft:function(e){return e.moveH(-1,\"group\")},goWordRight:function(e){return e.moveH(1,\"word\")},delCharBefore:function(e){return e.deleteH(-1,\"codepoint\")},delCharAfter:function(e){return e.deleteH(1,\"char\")},delWordBefore:function(e){return e.deleteH(-1,\"word\")},delWordAfter:function(e){return e.deleteH(1,\"word\")},delGroupBefore:function(e){return e.deleteH(-1,\"group\")},delGroupAfter:function(e){return e.deleteH(1,\"group\")},indentAuto:function(e){return e.indentSelection(\"smart\")},indentMore:function(e){return e.indentSelection(\"add\")},indentLess:function(e){return e.indentSelection(\"subtract\")},insertTab:function(e){return e.replaceSelection(\"\\t\")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),a=R(e.getLine(o.line),o.ch,i);t.push(K(i-a%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection(\"add\"):e.execCommand(\"insertTab\")},transposeChars:function(e){return Lr(e,(function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,o=Ze(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new rt(r.line,r.ch-1)),r.ch>0)r=new rt(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),rt(r.line,r.ch-2),r,\"+transpose\");else if(r.line>e.doc.first){var a=Ze(e.doc,r.line-1).text;a&&(r=new rt(r.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),rt(r.line-1,a.length-1),r,\"+transpose\"))}n.push(new ro(r,r))}e.setSelections(n)}))},newlineAndIndent:function(e){return Lr(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,\"+input\");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);ar(e)}))},openLine:function(e){return e.replaceSelection(\"\\n\",\"start\")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Ya(e,t){var n=Ze(e.doc,t),i=Yt(n);return i!=n&&(t=et(i)),Ka(!0,e,i,t,1)}function Ja(e,t){var n=Ze(e.doc,t),i=Jt(n);return i!=n&&(t=et(i)),Ka(!0,e,n,t,-1)}function Qa(e,t){var n=Ya(e,t.line),i=Ze(e.doc,n.line),r=he(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(n.ch,i.text.search(/\\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return rt(n.line,a?0:o,n.sticky)}return n}function el(e,t,n){if(\"string\"==typeof t&&!(t=Za[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=j}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}function tl(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=_a(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&_a(t,e.options.extraKeys,n,e)||_a(t,e.options.keyMap,n,e)}var nl=new P;function il(e,t,n,i){var r=e.state.keySeq;if(r){if(Wa(t))return\"handled\";if(/\\'$/.test(t)?e.state.keySeq=null:nl.set(50,(function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())})),rl(e,r+\" \"+t,n,i))return!0}return rl(e,t,n,i)}function rl(e,t,n,i){var r=tl(e,t,i);return\"multi\"==r&&(e.state.keySeq=t),\"handled\"==r&&En(e,\"keyHandled\",e,t,n),\"handled\"!=r&&\"multi\"!=r||(Ce(n),Vi(e)),!!r}function ol(e,t){var n=qa(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?il(e,\"Shift-\"+n,t,(function(t){return el(e,t,!0)}))||il(e,n,t,(function(t){if(\"string\"==typeof t?/^go[A-Z]/.test(t):t.motion)return el(e,t)})):il(e,n,t,(function(t){return el(e,t)})))}function al(e,t,n){return il(e,\"'\"+n+\"'\",t,(function(t){return el(e,t,!0)}))}var ll=null;function sl(e){var t=this;if((!e.target||e.target==t.display.input.getField())&&(t.curOp.focus=B(),!xe(t,e))){a&&l<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var r=ol(t,e);d&&(ll=r?i:null,r||88!=i||Ie||!(x?e.metaKey:e.ctrlKey)||t.replaceSelection(\"\",null,\"cut\")),n&&!x&&!r&&46==i&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand(\"cut\"),18!=i||/\\bCodeMirror-crosshair\\b/.test(t.display.lineDiv.className)||ul(t)}}function ul(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(F(t,\"CodeMirror-crosshair\"),ge(document,\"keyup\",n),ge(document,\"mouseover\",n))}N(t,\"CodeMirror-crosshair\"),pe(document,\"keyup\",n),pe(document,\"mouseover\",n)}function cl(e){16==e.keyCode&&(this.doc.sel.shift=!1),xe(this,e)}function dl(e){var t=this;if((!e.target||e.target==t.display.input.getField())&&!(qn(t.display,e)||xe(t,e)||e.ctrlKey&&!e.altKey||x&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(d&&n==ll)return ll=null,void Ce(e);if(!d||e.which&&!(e.which<10)||!ol(t,e)){var r=String.fromCharCode(null==i?n:i);\"\\b\"!=r&&(al(t,e,r)||t.display.input.onKeyPress(e))}}}var hl,fl,pl=400,ml=function(e,t,n){this.time=e,this.pos=t,this.button=n};function gl(e,t){var n=+new Date;return fl&&fl.compare(n,e,t)?(hl=fl=null,\"triple\"):hl&&hl.compare(n,e,t)?(fl=new ml(n,e,t),hl=null,\"double\"):(hl=new ml(n,e,t),fl=null,\"single\")}function vl(e){var t=this,n=t.display;if(!(xe(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,qn(n,e))s||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!Fl(t,e)){var i=Oi(t,e),r=Ae(e),o=i?gl(i,r):\"single\";window.focus(),1==r&&t.state.selectingText&&t.state.selectingText(e),i&&xl(t,r,i,o,e)||(1==r?i?bl(t,i,o,e):Fe(e)==n.scroller&&Ce(e):2==r?(i&&Io(t.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(w?t.display.input.onContextMenu(e):Xi(t)))}}function xl(e,t,n,i,r){var o=\"Click\";return\"double\"==i?o=\"Double\"+o:\"triple\"==i&&(o=\"Triple\"+o),il(e,ja(o=(1==t?\"Left\":2==t?\"Middle\":\"Right\")+o,r),r,(function(t){if(\"string\"==typeof t&&(t=Za[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=j}finally{e.state.suppressEdits=!1}return i}))}function yl(e,t,n){var i=e.getOption(\"configureMouse\"),r=i?i(e,t,n):{};if(null==r.unit){var o=y?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?\"rectangle\":\"single\"==t?\"char\":\"double\"==t?\"word\":\"line\"}return(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=x?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(x?n.altKey:n.ctrlKey)),r}function bl(e,t,n,i){a?setTimeout(z(Ki,e),0):e.curOp.focus=B();var r,o=yl(e,n,i),l=e.doc.sel;e.options.dragDrop&&Le&&!e.isReadOnly()&&\"single\"==n&&(r=l.contains(t))>-1&&(ot((r=l.ranges[r]).from(),t)<0||t.xRel>0)&&(ot(r.to(),t)>0||t.xRel<0)?Dl(e,i,t,o):wl(e,i,t,o)}function Dl(e,t,n,i){var r=e.display,o=!1,u=Mr(e,(function(t){s&&(r.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Xi(e)),ge(r.wrapper.ownerDocument,\"mouseup\",u),ge(r.wrapper.ownerDocument,\"mousemove\",c),ge(r.scroller,\"dragstart\",d),ge(r.scroller,\"drop\",u),o||(Ce(t),i.addNew||Io(e.doc,n,null,null,i.extend),s&&!h||a&&9==l?setTimeout((function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()}),20):r.input.focus())})),c=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};s&&(r.scroller.draggable=!0),e.state.draggingText=u,u.copy=!i.moveOnDrag,pe(r.wrapper.ownerDocument,\"mouseup\",u),pe(r.wrapper.ownerDocument,\"mousemove\",c),pe(r.scroller,\"dragstart\",d),pe(r.scroller,\"drop\",u),e.state.delayingBlurEvent=!0,setTimeout((function(){return r.input.focus()}),20),r.scroller.dragDrop&&r.scroller.dragDrop()}function Cl(e,t,n){if(\"char\"==n)return new ro(t,t);if(\"word\"==n)return e.findWordAt(t);if(\"line\"==n)return new ro(rt(t.line,0),dt(e.doc,rt(t.line+1,0)));var i=n(e,t);return new ro(i.from,i.to)}function wl(e,t,n,i){a&&Xi(e);var r=e.display,o=e.doc;Ce(t);var l,s,u=o.sel,c=u.ranges;if(i.addNew&&!i.extend?(s=o.sel.contains(n),l=s>-1?c[s]:new ro(n,n)):(l=o.sel.primary(),s=o.sel.primIndex),\"rectangle\"==i.unit)i.addNew||(l=new ro(n,n)),n=Oi(e,t,!0,!0),s=-1;else{var d=Cl(e,n,i.unit);l=i.extend?Oo(l,d.anchor,d.head,i.extend):d}i.addNew?-1==s?(s=c.length,Wo(o,oo(e,c.concat([l]),s),{scroll:!1,origin:\"*mouse\"})):c.length>1&&c[s].empty()&&\"char\"==i.unit&&!i.extend?(Wo(o,oo(e,c.slice(0,s).concat(c.slice(s+1)),0),{scroll:!1,origin:\"*mouse\"}),u=o.sel):Ho(o,s,l,U):(s=0,Wo(o,new io([l],0),U),u=o.sel);var h=n;function f(t){if(0!=ot(h,t))if(h=t,\"rectangle\"==i.unit){for(var r=[],a=e.options.tabSize,c=R(Ze(o,n.line).text,n.ch,a),d=R(Ze(o,t.line).text,t.ch,a),f=Math.min(c,d),p=Math.max(c,d),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=Ze(o,m).text,x=G(v,f,a);f==p?r.push(new ro(rt(m,x),rt(m,x))):v.length>x&&r.push(new ro(rt(m,x),rt(m,G(v,p,a))))}r.length||r.push(new ro(n,n)),Wo(o,oo(e,u.ranges.slice(0,s).concat(r),s),{origin:\"*mouse\",scroll:!1}),e.scrollIntoView(t)}else{var y,b=l,D=Cl(e,t,i.unit),C=b.anchor;ot(D.anchor,C)>0?(y=D.head,C=ut(b.from(),D.anchor)):(y=D.anchor,C=st(b.to(),D.head));var w=u.ranges.slice(0);w[s]=kl(e,new ro(dt(o,C),y)),Wo(o,oo(e,w,s),U)}}var p=r.wrapper.getBoundingClientRect(),m=0;function g(t){var n=++m,a=Oi(e,t,!0,\"rectangle\"==i.unit);if(a)if(0!=ot(a,h)){e.curOp.focus=B(),f(a);var l=er(r,o);(a.line>=l.to||a.line<l.from)&&setTimeout(Mr(e,(function(){m==n&&g(t)})),150)}else{var s=t.clientY<p.top?-20:t.clientY>p.bottom?20:0;s&&setTimeout(Mr(e,(function(){m==n&&(r.scroller.scrollTop+=s,g(t))})),50)}}function v(t){e.state.selectingText=!1,m=1/0,t&&(Ce(t),r.input.focus()),ge(r.wrapper.ownerDocument,\"mousemove\",x),ge(r.wrapper.ownerDocument,\"mouseup\",y),o.history.lastSelOrigin=null}var x=Mr(e,(function(e){0!==e.buttons&&Ae(e)?g(e):v(e)})),y=Mr(e,v);e.state.selectingText=y,pe(r.wrapper.ownerDocument,\"mousemove\",x),pe(r.wrapper.ownerDocument,\"mouseup\",y)}function kl(e,t){var n=t.anchor,i=t.head,r=Ze(e.doc,n.line);if(0==ot(n,i)&&n.sticky==i.sticky)return t;var o=he(r);if(!o)return t;var a=ce(o,n.ch,n.sticky),l=o[a];if(l.from!=n.ch&&l.to!=n.ch)return t;var s,u=a+(l.from==n.ch==(1!=l.level)?0:1);if(0==u||u==o.length)return t;if(i.line!=n.line)s=(i.line-n.line)*(\"ltr\"==e.doc.direction?1:-1)>0;else{var c=ce(o,i.ch,i.sticky),d=c-a||(i.ch-n.ch)*(1==l.level?-1:1);s=c==u-1||c==u?d<0:d>0}var h=o[u+(s?-1:0)],f=s==(1==h.level),p=f?h.from:h.to,m=f?\"after\":\"before\";return n.ch==p&&n.sticky==m?t:new ro(new rt(n.line,p,m),i)}function Sl(e,t,n,i){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(c){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&Ce(t);var a=e.display,l=a.lineDiv.getBoundingClientRect();if(o>l.bottom||!be(e,n))return ke(t);o-=l.top-a.viewOffset;for(var s=0;s<e.display.gutterSpecs.length;++s){var u=a.gutters.childNodes[s];if(u&&u.getBoundingClientRect().right>=r)return ve(e,n,e,tt(e.doc,o),e.display.gutterSpecs[s].className,t),ke(t)}}function Fl(e,t){return Sl(e,t,\"gutterClick\",!0)}function Al(e,t){qn(e.display,t)||El(e,t)||xe(e,t,\"contextmenu\")||w||e.display.input.onContextMenu(t)}function El(e,t){return!!be(e,\"gutterContextMenu\")&&Sl(e,t,\"gutterContextMenu\",!1)}function Tl(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\\s*cm-s-\\S+/g,\"\")+e.options.theme.replace(/(^|\\s)\\s*/g,\" cm-s-\"),di(e)}ml.prototype.compare=function(e,t,n){return this.time+pl>e&&0==ot(t,this.pos)&&n==this.button};var Ll={toString:function(){return\"CodeMirror.Init\"}},Ml={},Bl={};function Nl(e){var t=e.optionHandlers;function n(n,i,r,o){e.defaults[n]=i,r&&(t[n]=o?function(e,t,n){n!=Ll&&r(e,t,n)}:r)}e.defineOption=n,e.Init=Ll,n(\"value\",\"\",(function(e,t){return e.setValue(t)}),!0),n(\"mode\",null,(function(e,t){e.doc.modeOption=t,fo(e)}),!0),n(\"indentUnit\",2,fo,!0),n(\"indentWithTabs\",!1),n(\"smartIndent\",!0),n(\"tabSize\",4,(function(e){po(e),di(e),zi(e)}),!0),n(\"lineSeparator\",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter((function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push(rt(i,o))}i++}));for(var r=n.length-1;r>=0;r--)ia(e.doc,t,n[r],rt(n[r].line,n[r].ch+t.length))}})),n(\"specialChars\",/[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b\\u200e\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test(\"\\t\")?\"\":\"|\\t\"),\"g\"),n!=Ll&&e.refresh()})),n(\"specialCharPlaceholder\",mn,(function(e){return e.refresh()}),!0),n(\"electricChars\",!0),n(\"inputStyle\",v?\"contenteditable\":\"textarea\",(function(){throw new Error(\"inputStyle can not (yet) be changed in a running editor\")}),!0),n(\"spellcheck\",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n(\"autocorrect\",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n(\"autocapitalize\",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n(\"rtlMoveVisually\",!b),n(\"wholeLineUpdateBefore\",!0),n(\"theme\",\"default\",(function(e){Tl(e),Zr(e)}),!0),n(\"keyMap\",\"default\",(function(e,t,n){var i=Ua(t),r=n!=Ll&&Ua(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)})),n(\"extraKeys\",null),n(\"configureMouse\",null),n(\"lineWrapping\",!1,Il,!0),n(\"gutters\",[],(function(e,t){e.display.gutterSpecs=Kr(t,e.options.lineNumbers),Zr(e)}),!0),n(\"fixedGutter\",!0,(function(e,t){e.display.gutters.style.left=t?Mi(e.display)+\"px\":\"0\",e.refresh()}),!0),n(\"coverGutterNextToScrollbar\",!1,(function(e){return vr(e)}),!0),n(\"scrollbarStyle\",\"native\",(function(e){br(e),vr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n(\"lineNumbers\",!1,(function(e,t){e.display.gutterSpecs=Kr(e.options.gutters,t),Zr(e)}),!0),n(\"firstLineNumber\",1,Zr,!0),n(\"lineNumberFormatter\",(function(e){return e}),Zr,!0),n(\"showCursorWhenSelecting\",!1,ji,!0),n(\"resetSelectionOnContextMenu\",!0),n(\"lineWiseCopyCut\",!0),n(\"pasteLinesPerSelection\",!0),n(\"selectionsMayTouch\",!1),n(\"readOnly\",!1,(function(e,t){\"nocursor\"==t&&(Yi(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n(\"screenReaderLabel\",null,(function(e,t){t=\"\"===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n(\"disableInput\",!1,(function(e,t){t||e.display.input.reset()}),!0),n(\"dragDrop\",!0,Ol),n(\"allowDropFileTypes\",null),n(\"cursorBlinkRate\",530),n(\"cursorScrollMargin\",0),n(\"cursorHeight\",1,ji,!0),n(\"singleCursorHeightPerLine\",!0,ji,!0),n(\"workTime\",100),n(\"workDelay\",100),n(\"flattenSpans\",!0,po,!0),n(\"addModeClass\",!1,po,!0),n(\"pollInterval\",100),n(\"undoDepth\",200,(function(e,t){return e.doc.history.undoDepth=t})),n(\"historyEventDelay\",1250),n(\"viewportMargin\",10,(function(e){return e.refresh()}),!0),n(\"maxHighlightLength\",1e4,po,!0),n(\"moveInputWithCursor\",!0,(function(e,t){t||e.display.input.resetPosition()})),n(\"tabindex\",null,(function(e,t){return e.display.input.getField().tabIndex=t||\"\"})),n(\"autofocus\",null),n(\"direction\",\"ltr\",(function(e,t){return e.doc.setDirection(t)}),!0),n(\"phrases\",null)}function Ol(e,t,n){if(!t!=!(n&&n!=Ll)){var i=e.display.dragFunctions,r=t?pe:ge;r(e.display.scroller,\"dragstart\",i.start),r(e.display.scroller,\"dragenter\",i.enter),r(e.display.scroller,\"dragover\",i.over),r(e.display.scroller,\"dragleave\",i.leave),r(e.display.scroller,\"drop\",i.drop)}}function Il(e){e.options.lineWrapping?(N(e.display.wrapper,\"CodeMirror-wrap\"),e.display.sizer.style.minWidth=\"\",e.display.sizerWidth=null):(F(e.display.wrapper,\"CodeMirror-wrap\"),ln(e)),Ni(e),zi(e),di(e),setTimeout((function(){return vr(e)}),100)}function zl(e,t){var n=this;if(!(this instanceof zl))return new zl(e,t);this.options=t=t?H(t):{},H(Ml,t,!1);var i=t.value;\"string\"==typeof i?i=new Ca(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new zl.inputStyles[t.inputStyle](this),o=this.display=new Yr(e,i,r,t);for(var u in o.wrapper.CodeMirror=this,Tl(this),t.lineWrapping&&(this.display.wrapper.className+=\" CodeMirror-wrap\"),br(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new P,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),a&&l<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),Hl(this),La(),Cr(this),this.curOp.forceUpdate=!0,xo(this,i),t.autofocus&&!v||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&Zi(n)}),20):Yi(this),Bl)Bl.hasOwnProperty(u)&&Bl[u](this,t[u],Ll);Vr(this),t.finishInit&&t.finishInit(this);for(var c=0;c<Rl.length;++c)Rl[c](this);wr(this),s&&t.lineWrapping&&\"optimizelegibility\"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering=\"auto\")}function Hl(e){var t=e.display;pe(t.scroller,\"mousedown\",Mr(e,vl)),pe(t.scroller,\"dblclick\",a&&l<11?Mr(e,(function(t){if(!xe(e,t)){var n=Oi(e,t);if(n&&!Fl(e,t)&&!qn(e.display,t)){Ce(t);var i=e.findWordAt(n);Io(e.doc,i.anchor,i.head)}}})):function(t){return xe(e,t)||Ce(t)}),pe(t.scroller,\"contextmenu\",(function(t){return Al(e,t)})),pe(t.input.getField(),\"contextmenu\",(function(n){t.scroller.contains(n.target)||Al(e,n)}));var n,i={end:0};function r(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(i=t.activeTouch).end=+new Date)}function o(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function s(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}pe(t.scroller,\"touchstart\",(function(r){if(!xe(e,r)&&!o(r)&&!Fl(e,r)){t.input.ensurePolled(),clearTimeout(n);var a=+new Date;t.activeTouch={start:a,moved:!1,prev:a-i.end<=300?i:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}})),pe(t.scroller,\"touchmove\",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),pe(t.scroller,\"touchend\",(function(n){var i=t.activeTouch;if(i&&!qn(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,a=e.coordsChar(t.activeTouch,\"page\");o=!i.prev||s(i,i.prev)?new ro(a,a):!i.prev.prev||s(i,i.prev.prev)?e.findWordAt(a):new ro(rt(a.line,0),dt(e.doc,rt(a.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),Ce(n)}r()})),pe(t.scroller,\"touchcancel\",r),pe(t.scroller,\"scroll\",(function(){t.scroller.clientHeight&&(dr(e,t.scroller.scrollTop),fr(e,t.scroller.scrollLeft,!0),ve(e,\"scroll\",e))})),pe(t.scroller,\"mousewheel\",(function(t){return no(e,t)})),pe(t.scroller,\"DOMMouseScroll\",(function(t){return no(e,t)})),pe(t.wrapper,\"scroll\",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){xe(e,t)||Se(t)},over:function(t){xe(e,t)||(Fa(e,t),Se(t))},start:function(t){return Sa(e,t)},drop:Mr(e,ka),leave:function(t){xe(e,t)||Aa(e)}};var u=t.input.getField();pe(u,\"keyup\",(function(t){return cl.call(e,t)})),pe(u,\"keydown\",Mr(e,sl)),pe(u,\"keypress\",Mr(e,dl)),pe(u,\"focus\",(function(t){return Zi(e,t)})),pe(u,\"blur\",(function(t){return Yi(e,t)}))}zl.defaults=Ml,zl.optionHandlers=Bl;var Rl=[];function Pl(e,t,n,i){var r,o=e.doc;null==n&&(n=\"add\"),\"smart\"==n&&(o.mode.indent?r=xt(e,t).state:n=\"prev\");var a=e.options.tabSize,l=Ze(o,t),s=R(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var u,c=l.text.match(/^\\s*/)[0];if(i||/\\S/.test(l.text)){if(\"smart\"==n&&((u=o.mode.indent(r,l.text.slice(c.length),l.text))==j||u>150)){if(!i)return;n=\"prev\"}}else u=0,n=\"not\";\"prev\"==n?u=t>o.first?R(Ze(o,t-1).text,null,a):0:\"add\"==n?u=s+e.options.indentUnit:\"subtract\"==n?u=s-e.options.indentUnit:\"number\"==typeof n&&(u=s+n),u=Math.max(0,u);var d=\"\",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(u/a);f;--f)h+=a,d+=\"\\t\";if(h<u&&(d+=K(u-h)),d!=c)return ia(o,d,rt(t,0),rt(t,c.length),\"+input\"),l.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var m=o.sel.ranges[p];if(m.head.line==t&&m.head.ch<c.length){var g=rt(t,c.length);Ho(o,p,new ro(g,g));break}}}zl.defineInitHook=function(e){return Rl.push(e)};var _l=null;function Wl(e){_l=e}function jl(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var a=+new Date-200,l=\"paste\"==r||e.state.pasteIncoming>a,s=Ne(t),u=null;if(l&&i.ranges.length>1)if(_l&&_l.text.join(\"\\n\")==t){if(i.ranges.length%_l.text.length==0){u=[];for(var c=0;c<_l.text.length;c++)u.push(o.splitLines(_l.text[c]))}}else s.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(u=Z(s,(function(e){return[e]})));for(var d=e.curOp.updateInput,h=i.ranges.length-1;h>=0;h--){var f=i.ranges[h],p=f.from(),m=f.to();f.empty()&&(n&&n>0?p=rt(p.line,p.ch-n):e.state.overwrite&&!l?m=rt(m.line,Math.min(Ze(o,m.line).text.length,m.ch+X(s).length)):l&&_l&&_l.lineWise&&_l.text.join(\"\\n\")==s.join(\"\\n\")&&(p=m=rt(p.line,0)));var g={from:p,to:m,text:u?u[h%u.length]:s,origin:r||(l?\"paste\":e.state.cutIncoming>a?\"cut\":\"+input\")};Yo(e.doc,g),En(e,\"inputRead\",e,g)}t&&!l&&Ul(e,t),ar(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function ql(e,t){var n=e.clipboardData&&e.clipboardData.getData(\"Text\");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Lr(t,(function(){return jl(t,n,0,null,\"paste\")})),!0}function Ul(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),a=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(t.indexOf(o.electricChars.charAt(l))>-1){a=Pl(e,r.head.line,\"smart\");break}}else o.electricInput&&o.electricInput.test(Ze(e.doc,r.head.line).text.slice(0,r.head.ch))&&(a=Pl(e,r.head.line,\"smart\"));a&&En(e,\"electricInput\",e,r.head.line)}}}function $l(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:rt(r,0),head:rt(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Gl(e,t,n,i){e.setAttribute(\"autocorrect\",n?\"\":\"off\"),e.setAttribute(\"autocapitalize\",i?\"\":\"off\"),e.setAttribute(\"spellcheck\",!!t)}function Vl(){var e=T(\"textarea\",null,null,\"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\"),t=T(\"div\",[e],null,\"overflow: hidden; position: relative; width: 3px; height: 0px;\");return s?e.style.width=\"1000px\":e.setAttribute(\"wrap\",\"off\"),m&&(e.style.border=\"1px solid black\"),Gl(e),t}function Kl(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&\"mode\"!=e||(i[e]=n,t.hasOwnProperty(e)&&Mr(this,t[e])(this,n,r),ve(this,\"optionChange\",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?\"push\":\"unshift\"](Ua(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Br((function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error(\"Overlays may not be stateful.\");Y(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,zi(this)})),removeOverlay:Br((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||\"string\"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void zi(this)}})),indentLine:Br((function(e,t,n){\"string\"!=typeof t&&\"number\"!=typeof t&&(t=null==t?this.options.smartIndent?\"smart\":\"prev\":t?\"add\":\"subtract\"),nt(this.doc,e)&&Pl(this,e,t,n)})),indentSelection:Br((function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Pl(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&ar(this));else{var o=r.from(),a=r.to(),l=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=l;s<n;++s)Pl(this,s,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[i].from().ch>0&&Ho(this.doc,i,new ro(o,u[i].to()),q)}}})),getTokenAt:function(e,t){return wt(this,e,t)},getLineTokens:function(e,t){return wt(this,rt(e),t,!0)},getTokenTypeAt:function(e){e=dt(this.doc,e);var t,n=vt(this,Ze(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=i+r>>1;if((a?n[2*a-1]:0)>=o)r=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}i=a+1}}var l=t?t.indexOf(\"overlay \"):-1;return l<0?t:0==l?null:t.slice(0,l-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],o=this.getModeAt(e);if(\"string\"==typeof o[t])r[o[t]]&&i.push(r[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var l=r[o[t][a]];l&&i.push(l)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var s=0;s<r._global.length;s++){var u=r._global[s];u.pred(o,this)&&-1==_(i,u.val)&&i.push(u.val)}return i},getStateAfter:function(e,t){var n=this.doc;return xt(this,(e=ct(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return xi(this,null==e?n.head:\"object\"==typeof e?dt(this.doc,e):e?n.from():n.to(),t||\"page\")},charCoords:function(e,t){return vi(this,dt(this.doc,e),t||\"page\")},coordsChar:function(e,t){return Di(this,(e=gi(this,e,t||\"page\")).left,e.top)},lineAtHeight:function(e,t){return e=gi(this,{top:e,left:0},t||\"page\").top,tt(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if(\"number\"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,r=!0),i=Ze(this.doc,e)}else i=e;return mi(this,i,{top:0,left:0},t||\"page\",n||r).top+(r?this.doc.height-on(i):0)},defaultTextHeight:function(){return Ei(this.display)},defaultCharWidth:function(){return Ti(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o=this.display,a=(e=xi(this,dt(this.doc,e))).bottom,l=e.left;if(t.style.position=\"absolute\",t.setAttribute(\"cm-ignore-events\",\"true\"),this.display.input.setUneditable(t),o.sizer.appendChild(t),\"over\"==i)a=e.top;else if(\"above\"==i||\"near\"==i){var s=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);(\"above\"==i||e.bottom+t.offsetHeight>s)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=s&&(a=e.bottom),l+t.offsetWidth>u&&(l=u-t.offsetWidth)}t.style.top=a+\"px\",t.style.left=t.style.right=\"\",\"right\"==r?(l=o.sizer.clientWidth-t.offsetWidth,t.style.right=\"0px\"):(\"left\"==r?l=0:\"middle\"==r&&(l=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=l+\"px\"),n&&ir(this,{left:l,top:a,right:l+t.offsetWidth,bottom:a+t.offsetHeight})},triggerOnKeyDown:Br(sl),triggerOnKeyPress:Br(dl),triggerOnKeyUp:cl,triggerOnMouseDown:Br(vl),execCommand:function(e){if(Za.hasOwnProperty(e))return Za[e].call(null,this)},triggerElectric:Br((function(e){Ul(this,e)})),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var o=dt(this.doc,e),a=0;a<t&&!(o=Xl(this.doc,o,r,n,i)).hitSide;++a);return o},moveH:Br((function(e,t){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Xl(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()}),$)})),deleteH:Br((function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection(\"\",null,\"+delete\"):$a(this,(function(n){var r=Xl(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(e,t,n,i){var r=1,o=i;t<0&&(r=-1,t=-t);for(var a=dt(this.doc,e),l=0;l<t;++l){var s=xi(this,a,\"div\");if(null==o?o=s.left:s.left=o,(a=Zl(this,s,r,n)).hitSide)break}return a},moveV:Br((function(e,t){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(a){if(o)return e<0?a.from():a.to();var l=xi(n,a.head,\"div\");null!=a.goalColumn&&(l.left=a.goalColumn),r.push(l.left);var s=Zl(n,l,e,t);return\"page\"==t&&a==i.sel.primary()&&or(n,vi(n,s,\"div\").top-l.top),s}),$),r.length)for(var a=0;a<i.sel.ranges.length;a++)i.sel.ranges[a].goalColumn=r[a]})),findWordAt:function(e){var t=Ze(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,\"wordChars\");\"before\"!=e.sticky&&i!=t.length||!n?++i:--n;for(var o=t.charAt(n),a=ne(o,r)?function(e){return ne(e,r)}:/\\s/.test(o)?function(e){return/\\s/.test(e)}:function(e){return!/\\s/.test(e)&&!ne(e)};n>0&&a(t.charAt(n-1));)--n;for(;i<t.length&&a(t.charAt(i));)++i}return new ro(rt(e.line,n),rt(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?N(this.display.cursorDiv,\"CodeMirror-overwrite\"):F(this.display.cursorDiv,\"CodeMirror-overwrite\"),ve(this,\"overwriteToggle\",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==B()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Br((function(e,t){lr(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Vn(this)-this.display.barHeight,width:e.scrollWidth-Vn(this)-this.display.barWidth,clientHeight:Xn(this),clientWidth:Kn(this)}},scrollIntoView:Br((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):\"number\"==typeof e?e={from:rt(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?sr(this,e):cr(this,e.from,e.to,e.margin)})),setSize:Br((function(e,t){var n=this,i=function(e){return\"number\"==typeof e||/^\\d+$/.test(String(e))?e+\"px\":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&ci(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Hi(n,r,\"widget\");break}++r})),this.curOp.forceUpdate=!0,ve(this,\"refresh\",this)})),operation:function(e){return Lr(this,e)},startOperation:function(){return Cr(this)},endOperation:function(){return wr(this)},refresh:Br((function(){var e=this.display.cachedTextHeight;zi(this),this.curOp.forceUpdate=!0,di(this),lr(this,this.doc.scrollLeft,this.doc.scrollTop),Ur(this.display),(null==e||Math.abs(e-Ei(this.display))>.5||this.options.lineWrapping)&&Ni(this),ve(this,\"refresh\",this)})),swapDoc:Br((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),xo(this,e),di(this),this.display.input.reset(),lr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,En(this,\"swapDoc\",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},De(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,o){e.registerHelper(t,i,o),n[t]._global.push({pred:r,val:o})}}function Xl(e,t,n,i,r){var o=t,a=n,l=Ze(e,t.line),s=r&&\"rtl\"==e.direction?-n:n;function u(){var n=t.line+s;return!(n<e.first||n>=e.first+e.size)&&(t=new rt(n,t.ch,t.sticky),l=Ze(e,n))}function c(o){var a;if(\"codepoint\"==i){var c=l.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(c))a=null;else{var d=n>0?c>=55296&&c<56320:c>=56320&&c<57343;a=new rt(t.line,Math.max(0,Math.min(l.text.length,t.ch+n*(d?2:1))),-n)}}else a=r?Xa(e.cm,l,t,n):Va(l,t,n);if(null==a){if(o||!u())return!1;t=Ka(r,e.cm,l,t.line,s)}else t=a;return!0}if(\"char\"==i||\"codepoint\"==i)c();else if(\"column\"==i)c(!0);else if(\"word\"==i||\"group\"==i)for(var d=null,h=\"group\"==i,f=e.cm&&e.cm.getHelper(t,\"wordChars\"),p=!0;!(n<0)||c(!p);p=!1){var m=l.text.charAt(t.ch)||\"\\n\",g=ne(m,f)?\"w\":h&&\"\\n\"==m?\"n\":!h||/\\s/.test(m)?null:\"p\";if(!h||p||g||(g=\"s\"),d&&d!=g){n<0&&(n=1,c(),t.sticky=\"after\");break}if(g&&(d=g),n>0&&!c(!p))break}var v=Vo(e,t,o,a,!0);return at(o,v)&&(v.hitSide=!0),v}function Zl(e,t,n,i){var r,o,a=e.doc,l=t.left;if(\"page\"==i){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(s-.5*Ei(e.display),3);r=(n>0?t.bottom:t.top)+n*u}else\"line\"==i&&(r=n>0?t.bottom+3:t.top-3);for(;(o=Di(e,l,r)).outside;){if(n<0?r<=0:r>=a.height){o.hitSide=!0;break}r+=5*n}return o}var Yl=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new P,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Jl(e,t){var n=ei(e,t.line);if(!n||n.hidden)return null;var i=Ze(e.doc,t.line),r=Yn(n,i,t.line),o=he(i,e.doc.direction),a=\"left\";o&&(a=ce(o,t.ch)%2?\"right\":\"left\");var l=oi(r.map,t.ch,a);return l.offset=\"right\"==l.collapse?l.end:l.start,l}function Ql(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function es(e,t){return t&&(e.bad=!0),e}function ts(e,t,n,i,r){var o=\"\",a=!1,l=e.doc.lineSeparator(),s=!1;function u(e){return function(t){return t.id==e}}function c(){a&&(o+=l,s&&(o+=l),a=s=!1)}function d(e){e&&(c(),o+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute(\"cm-text\");if(n)return void d(n);var o,f=t.getAttribute(\"cm-marker\");if(f){var p=e.findMarks(rt(i,0),rt(r+1,0),u(+f));return void(p.length&&(o=p[0].find(0))&&d(Ye(e.doc,o.from,o.to).join(l)))}if(\"false\"==t.getAttribute(\"contenteditable\"))return;var m=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;m&&c();for(var g=0;g<t.childNodes.length;g++)h(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(s=!0),m&&(a=!0)}else 3==t.nodeType&&d(t.nodeValue.replace(/\\u200b/g,\"\").replace(/\\u00a0/g,\" \"))}for(;h(t),t!=n;)t=t.nextSibling,s=!1;return o}function ns(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return es(e.clipPos(rt(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return is(o,t,n)}}function is(e,t,n){var i=e.text.firstChild,r=!1;if(!t||!M(i,t))return es(rt(et(e.line),0),!0);if(t==i&&(r=!0,t=i.childNodes[n],n=0,!t)){var o=e.rest?X(e.rest):e.line;return es(rt(et(o),o.text.length),r)}var a=3==t.nodeType?t:null,l=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));l.parentNode!=i;)l=l.parentNode;var s=e.measure,u=s.maps;function c(t,n,i){for(var r=-1;r<(u?u.length:0);r++)for(var o=r<0?s.map:u[r],a=0;a<o.length;a+=3){var l=o[a+2];if(l==t||l==n){var c=et(r<0?e.line:e.rest[r]),d=o[a]+i;return(i<0||l!=t)&&(d=o[a+(i?1:0)]),rt(c,d)}}}var d=c(a,l,n);if(d)return es(d,r);for(var h=l.nextSibling,f=a?a.nodeValue.length-n:0;h;h=h.nextSibling){if(d=c(h,h.firstChild,0))return es(rt(d.line,d.ch-f),r);f+=h.textContent.length}for(var p=l.previousSibling,m=n;p;p=p.previousSibling){if(d=c(p,p.firstChild,-1))return es(rt(d.line,d.ch+m),r);m+=p.textContent.length}}Yl.prototype.init=function(e){var t=this,n=this,i=n.cm,r=n.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==r)return!0;if(/\\bCodeMirror-(?:line)?widget\\b/.test(t.className))break}return!1}function a(e){if(o(e)&&!xe(i,e)){if(i.somethingSelected())Wl({lineWise:!1,text:i.getSelections()}),\"cut\"==e.type&&i.replaceSelection(\"\",null,\"cut\");else{if(!i.options.lineWiseCopyCut)return;var t=$l(i);Wl({lineWise:!0,text:t.text}),\"cut\"==e.type&&i.operation((function(){i.setSelections(t.ranges,0,q),i.replaceSelection(\"\",null,\"cut\")}))}if(e.clipboardData){e.clipboardData.clearData();var a=_l.text.join(\"\\n\");if(e.clipboardData.setData(\"Text\",a),e.clipboardData.getData(\"Text\")==a)return void e.preventDefault()}var l=Vl(),s=l.firstChild;i.display.lineSpace.insertBefore(l,i.display.lineSpace.firstChild),s.value=_l.text.join(\"\\n\");var u=B();I(s),setTimeout((function(){i.display.lineSpace.removeChild(l),u.focus(),u==r&&n.showPrimarySelection()}),50)}}r.contentEditable=!0,Gl(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),pe(r,\"paste\",(function(e){!o(e)||xe(i,e)||ql(e,i)||l<=11&&setTimeout(Mr(i,(function(){return t.updateFromDOM()})),20)})),pe(r,\"compositionstart\",(function(e){t.composing={data:e.data,done:!1}})),pe(r,\"compositionupdate\",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),pe(r,\"compositionend\",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),pe(r,\"touchstart\",(function(){return n.forceCompositionEnd()})),pe(r,\"input\",(function(){t.composing||t.readFromDOMSoon()})),pe(r,\"copy\",a),pe(r,\"cut\",a)},Yl.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute(\"aria-label\",e):this.div.removeAttribute(\"aria-label\")},Yl.prototype.prepareSelection=function(){var e=qi(this.cm,!1);return e.focus=B()==this.div,e},Yl.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Yl.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Yl.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var a=ns(t,e.anchorNode,e.anchorOffset),l=ns(t,e.focusNode,e.focusOffset);if(!a||a.bad||!l||l.bad||0!=ot(ut(a,l),r)||0!=ot(st(a,l),o)){var s=t.display.view,u=r.line>=t.display.viewFrom&&Jl(t,r)||{node:s[0].measure.map[2],offset:0},c=o.line<t.display.viewTo&&Jl(t,o);if(!c){var d=s[s.length-1].measure,h=d.maps?d.maps[d.maps.length-1]:d.map;c={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(u&&c){var f,p=e.rangeCount&&e.getRangeAt(0);try{f=S(u.node,u.offset,c.offset,c.node)}catch(m){}f&&(!n&&t.state.focused?(e.collapse(u.node,u.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),p&&null==e.anchorNode?e.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Yl.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Yl.prototype.showMultipleSelections=function(e){E(this.cm.display.cursorDiv,e.cursors),E(this.cm.display.selectionDiv,e.selection)},Yl.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Yl.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return M(this.div,t)},Yl.prototype.focus=function(){\"nocursor\"!=this.cm.options.readOnly&&(this.selectionInEditor()&&B()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Yl.prototype.blur=function(){this.div.blur()},Yl.prototype.getField=function(){return this.div},Yl.prototype.supportsTouch=function(){return!0},Yl.prototype.receivedFocus=function(){var e=this;function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}this.selectionInEditor()?this.pollSelection():Lr(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,t)},Yl.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Yl.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&c&&this.cm.display.gutterSpecs.length&&Ql(e.anchorNode))return this.cm.triggerOnKeyDown({type:\"keydown\",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=ns(t,e.anchorNode,e.anchorOffset),i=ns(t,e.focusNode,e.focusOffset);n&&i&&Lr(t,(function(){Wo(t.doc,ao(n,i),q),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}}},Yl.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),a=o.from(),l=o.to();if(0==a.ch&&a.line>i.firstLine()&&(a=rt(a.line-1,Ze(i.doc,a.line-1).length)),l.ch==Ze(i.doc,l.line).text.length&&l.line<i.lastLine()&&(l=rt(l.line+1,0)),a.line<r.viewFrom||l.line>r.viewTo-1)return!1;a.line==r.viewFrom||0==(e=Ii(i,a.line))?(t=et(r.view[0].line),n=r.view[0].node):(t=et(r.view[e].line),n=r.view[e-1].node.nextSibling);var s,u,c=Ii(i,l.line);if(c==r.view.length-1?(s=r.viewTo-1,u=r.lineDiv.lastChild):(s=et(r.view[c+1].line)-1,u=r.view[c+1].node.previousSibling),!n)return!1;for(var d=i.doc.splitLines(ts(i,n,u,t,s)),h=Ye(i.doc,rt(t,0),rt(s,Ze(i.doc,s).text.length));d.length>1&&h.length>1;)if(X(d)==X(h))d.pop(),h.pop(),s--;else{if(d[0]!=h[0])break;d.shift(),h.shift(),t++}for(var f=0,p=0,m=d[0],g=h[0],v=Math.min(m.length,g.length);f<v&&m.charCodeAt(f)==g.charCodeAt(f);)++f;for(var x=X(d),y=X(h),b=Math.min(x.length-(1==d.length?f:0),y.length-(1==h.length?f:0));p<b&&x.charCodeAt(x.length-p-1)==y.charCodeAt(y.length-p-1);)++p;if(1==d.length&&1==h.length&&t==a.line)for(;f&&f>a.ch&&x.charCodeAt(x.length-p-1)==y.charCodeAt(y.length-p-1);)f--,p++;d[d.length-1]=x.slice(0,x.length-p).replace(/^\\u200b+/,\"\"),d[0]=d[0].slice(f).replace(/\\u200b+$/,\"\");var D=rt(t,f),C=rt(s,h.length?X(h).length-p:0);return d.length>1||d[0]||ot(D,C)?(ia(i.doc,d,D,C,\"+input\"),!0):void 0},Yl.prototype.ensurePolled=function(){this.forceCompositionEnd()},Yl.prototype.reset=function(){this.forceCompositionEnd()},Yl.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Yl.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Yl.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Lr(this.cm,(function(){return zi(e.cm)}))},Yl.prototype.setUneditable=function(e){e.contentEditable=\"false\"},Yl.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Mr(this.cm,jl)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Yl.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(\"nocursor\"!=e)},Yl.prototype.onContextMenu=function(){},Yl.prototype.resetPosition=function(){},Yl.prototype.needsContentAttribute=!0;var rs=function(e){this.cm=e,this.prevInput=\"\",this.pollingFast=!1,this.polling=new P,this.hasSelection=!1,this.composing=null};function os(e,t){if((t=t?H(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=B();t.autofocus=n==e||null!=e.getAttribute(\"autofocus\")&&n==document.body}function i(){e.value=l.getValue()}var r;if(e.form&&(pe(e.form,\"submit\",i),!t.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var a=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=a}}catch(s){}}t.finishInit=function(n){n.save=i,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,i(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display=\"\",e.form&&(ge(e.form,\"submit\",i),t.leaveSubmitMethodAlone||\"function\"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display=\"none\";var l=zl((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return l}function as(e){e.off=ge,e.on=pe,e.wheelEventPixels=to,e.Doc=Ca,e.splitLines=Ne,e.countColumn=R,e.findColumn=G,e.isWordChar=te,e.Pass=j,e.signal=ve,e.Line=sn,e.changeEnd=lo,e.scrollbarModel=yr,e.Pos=rt,e.cmpPos=ot,e.modes=Re,e.mimeModes=Pe,e.resolveMode=je,e.getMode=qe,e.modeExtensions=Ue,e.extendMode=$e,e.copyState=Ge,e.startState=Ke,e.innerMode=Ve,e.commands=Za,e.keyMap=Ha,e.keyName=qa,e.isModifierKey=Wa,e.lookupKey=_a,e.normalizeKeyMap=Pa,e.StringStream=Xe,e.SharedTextMarker=ga,e.TextMarker=pa,e.LineWidget=ca,e.e_preventDefault=Ce,e.e_stopPropagation=we,e.e_stop=Se,e.addClass=N,e.contains=M,e.rmClass=F,e.keyNames=Na}rs.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var r=this.textarea;function o(e){if(!xe(i,e)){if(i.somethingSelected())Wl({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=$l(i);Wl({lineWise:!0,text:t.text}),\"cut\"==e.type?i.setSelections(t.ranges,null,q):(n.prevInput=\"\",r.value=t.text.join(\"\\n\"),I(r))}\"cut\"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(r.style.width=\"0px\"),pe(r,\"input\",(function(){a&&l>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),pe(r,\"paste\",(function(e){xe(i,e)||ql(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),pe(r,\"cut\",o),pe(r,\"copy\",o),pe(e.scroller,\"paste\",(function(t){if(!qn(e,t)&&!xe(i,t)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event(\"paste\");o.clipboardData=t.clipboardData,r.dispatchEvent(o)}})),pe(e.lineSpace,\"selectstart\",(function(t){qn(e,t)||Ce(t)})),pe(r,\"compositionstart\",(function(){var e=i.getCursor(\"from\");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor(\"to\"),{className:\"CodeMirror-composing\"})}})),pe(r,\"compositionend\",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},rs.prototype.createField=function(e){this.wrapper=Vl(),this.textarea=this.wrapper.firstChild},rs.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute(\"aria-label\",e):this.textarea.removeAttribute(\"aria-label\")},rs.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=qi(e);if(e.options.moveInputWithCursor){var r=xi(e,n.sel.primary().head,\"div\"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+a.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+a.left-o.left))}return i},rs.prototype.showSelection=function(e){var t=this.cm.display;E(t.cursorDiv,e.cursors),E(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+\"px\",this.wrapper.style.left=e.teLeft+\"px\")},rs.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput=\"\";var n=t.getSelection();this.textarea.value=n,t.state.focused&&I(this.textarea),a&&l>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value=\"\",a&&l>=9&&(this.hasSelection=null))}},rs.prototype.getField=function(){return this.textarea},rs.prototype.supportsTouch=function(){return!1},rs.prototype.focus=function(){if(\"nocursor\"!=this.cm.options.readOnly&&(!v||B()!=this.textarea))try{this.textarea.focus()}catch(e){}},rs.prototype.blur=function(){this.textarea.blur()},rs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},rs.prototype.receivedFocus=function(){this.slowPoll()},rs.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},rs.prototype.fastPoll=function(){var e=!1,t=this;function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}t.pollingFast=!0,t.polling.set(20,n)},rs.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Oe(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(a&&l>=9&&this.hasSelection===r||x&&/[\\uf700-\\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i=\"\\u200b\"),8666==o)return this.reset(),this.cm.execCommand(\"undo\")}for(var s=0,u=Math.min(i.length,r.length);s<u&&i.charCodeAt(s)==r.charCodeAt(s);)++s;return Lr(t,(function(){jl(t,r.slice(s),i.length-s,null,e.composing?\"*compose\":null),r.length>1e3||r.indexOf(\"\\n\")>-1?n.value=e.prevInput=\"\":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor(\"to\"),{className:\"CodeMirror-composing\"}))})),!0},rs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},rs.prototype.onKeyPress=function(){a&&l>=9&&(this.hasSelection=null),this.fastPoll()},rs.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=Oi(n,e),u=i.scroller.scrollTop;if(o&&!d){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Mr(n,Wo)(n.doc,ao(o),q);var c,h=r.style.cssText,f=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText=\"position: static\",r.style.cssText=\"position: absolute; width: 30px; height: 30px;\\n      top: \"+(e.clientY-p.top-5)+\"px; left: \"+(e.clientX-p.left-5)+\"px;\\n      z-index: 1000; background: \"+(a?\"rgba(255, 255, 255, .05)\":\"transparent\")+\";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\",s&&(c=window.scrollY),i.input.focus(),s&&window.scrollTo(null,c),i.input.reset(),n.somethingSelected()||(r.value=t.prevInput=\" \"),t.contextMenuPending=g,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),a&&l>=9&&m(),w?(Se(e),pe(window,\"mouseup\",(function e(){ge(window,\"mouseup\",e),setTimeout(g,20)}))):setTimeout(g,50)}function m(){if(null!=r.selectionStart){var e=n.somethingSelected(),o=\"\\u200b\"+(e?r.value:\"\");r.value=\"\\u21da\",r.value=o,t.prevInput=e?\"\":\"\\u200b\",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function g(){if(t.contextMenuPending==g&&(t.contextMenuPending=!1,t.wrapper.style.cssText=f,r.style.cssText=h,a&&l<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=u),null!=r.selectionStart)){(!a||a&&l<9)&&m();var e=0,o=function o(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&\"\\u200b\"==t.prevInput?Mr(n,Xo)(n):e++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(o,200)}}},rs.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=\"nocursor\"==e,this.textarea.readOnly=!!e},rs.prototype.setUneditable=function(){},rs.prototype.needsContentAttribute=!1,Nl(zl),Kl(zl);var ls=\"iter insert remove copy getEditor constructor\".split(\" \");for(var ss in Ca.prototype)Ca.prototype.hasOwnProperty(ss)&&_(ls,ss)<0&&(zl.prototype[ss]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ca.prototype[ss]));return De(Ca),zl.inputStyles={textarea:rs,contenteditable:Yl},zl.defineMode=function(e){zl.defaults.mode||\"null\"==e||(zl.defaults.mode=e),_e.apply(this,arguments)},zl.defineMIME=We,zl.defineMode(\"null\",(function(){return{token:function(e){return e.skipToEnd()}}})),zl.defineMIME(\"text/plain\",\"null\"),zl.defineExtension=function(e,t){zl.prototype[e]=t},zl.defineDocExtension=function(e,t){Ca.prototype[e]=t},zl.fromTextArea=os,as(zl),zl.version=\"5.62.0\",zl}()},833:function(e,t,n){!function(e){\"use strict\";e.defineMode(\"markdown\",(function(t,n){var i=e.getMode(t,\"text/html\"),r=\"null\"==i.name;function o(n){if(e.findModeByName){var i=e.findModeByName(n);i&&(n=i.mime||i.mimes[0])}var r=e.getMode(t,n);return\"null\"==r.name?null:r}void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.emoji&&(n.emoji=!1),void 0===n.fencedCodeBlockHighlighting&&(n.fencedCodeBlockHighlighting=!0),void 0===n.fencedCodeBlockDefaultMode&&(n.fencedCodeBlockDefaultMode=\"text/plain\"),void 0===n.xml&&(n.xml=!0),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var a={header:\"header\",code:\"comment\",quote:\"quote\",list1:\"variable-2\",list2:\"variable-3\",list3:\"keyword\",hr:\"hr\",image:\"image\",imageAltText:\"image-alt-text\",imageMarker:\"image-marker\",formatting:\"formatting\",linkInline:\"link\",linkEmail:\"link\",linkText:\"link\",linkHref:\"string\",em:\"em\",strong:\"strong\",strikethrough:\"strikethrough\",emoji:\"builtin\"};for(var l in a)a.hasOwnProperty(l)&&n.tokenTypeOverrides[l]&&(a[l]=n.tokenTypeOverrides[l]);var s=/^([*\\-_])(?:\\s*\\1){2,}\\s*$/,u=/^(?:[*\\-+]|^[0-9]+([.)]))\\s+/,c=/^\\[(x| )\\](?=\\s)/i,d=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,h=/^ {0,3}(?:\\={1,}|-{2,})\\s*$/,f=/^[^#!\\[\\]*_\\\\<>` \"'(~:]+/,p=/^(~~~+|```+)[ \\t]*([\\w\\/+#-]*)[^\\n`]*$/,m=/^\\s*\\[[^\\]]+?\\]:.*$/,g=/[!\"#$%&'()*+,\\-.\\/:;<=>?@\\[\\\\\\]^_`{|}~\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDF3C-\\uDF3E]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]/,v=\"    \";function x(e,t,n){return t.f=t.inline=n,n(e,t)}function y(e,t,n){return t.f=t.block=n,n(e,t)}function b(e){return!e||!/\\S/.test(e.string)}function D(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==w){var n=r;if(!n){var o=e.innerMode(i,t.htmlState);n=\"xml\"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText}n&&(t.f=A,t.block=C,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function C(t,i){var r=t.column()===i.indentation,l=b(i.prevLine.stream),f=i.indentedCode,g=i.prevLine.hr,v=!1!==i.list,y=(i.listStack[i.listStack.length-1]||0)+3;i.indentedCode=!1;var D=i.indentation;if(null===i.indentationDiff&&(i.indentationDiff=i.indentation,v)){for(i.list=null;D<i.listStack[i.listStack.length-1];)i.listStack.pop(),i.listStack.length?i.indentation=i.listStack[i.listStack.length-1]:i.list=!1;!1!==i.list&&(i.indentationDiff=D-i.listStack[i.listStack.length-1])}var C=!l&&!g&&!i.prevLine.header&&(!v||!f)&&!i.prevLine.fencedCodeEnd,w=(!1===i.list||g||l)&&i.indentation<=y&&t.match(s),F=null;if(i.indentationDiff>=4&&(f||i.prevLine.fencedCodeEnd||i.prevLine.header||l))return t.skipToEnd(),i.indentedCode=!0,a.code;if(t.eatSpace())return null;if(r&&i.indentation<=y&&(F=t.match(d))&&F[1].length<=6)return i.quote=0,i.header=F[1].length,i.thisLine.header=!0,n.highlightFormatting&&(i.formatting=\"header\"),i.f=i.inline,S(i);if(i.indentation<=y&&t.eat(\">\"))return i.quote=r?1:i.quote+1,n.highlightFormatting&&(i.formatting=\"quote\"),t.eatSpace(),S(i);if(!w&&!i.setext&&r&&i.indentation<=y&&(F=t.match(u))){var A=F[1]?\"ol\":\"ul\";return i.indentation=D+t.current().length,i.list=!0,i.quote=0,i.listStack.push(i.indentation),i.em=!1,i.strong=!1,i.code=!1,i.strikethrough=!1,n.taskLists&&t.match(c,!1)&&(i.taskList=!0),i.f=i.inline,n.highlightFormatting&&(i.formatting=[\"list\",\"list-\"+A]),S(i)}return r&&i.indentation<=y&&(F=t.match(p,!0))?(i.quote=0,i.fencedEndRE=new RegExp(F[1]+\"+ *$\"),i.localMode=n.fencedCodeBlockHighlighting&&o(F[2]||n.fencedCodeBlockDefaultMode),i.localMode&&(i.localState=e.startState(i.localMode)),i.f=i.block=k,n.highlightFormatting&&(i.formatting=\"code-block\"),i.code=-1,S(i)):i.setext||!(C&&v||i.quote||!1!==i.list||i.code||w||m.test(t.string))&&(F=t.lookAhead(1))&&(F=F.match(h))?(i.setext?(i.header=i.setext,i.setext=0,t.skipToEnd(),n.highlightFormatting&&(i.formatting=\"header\")):(i.header=\"=\"==F[0].charAt(0)?1:2,i.setext=i.header),i.thisLine.header=!0,i.f=i.inline,S(i)):w?(t.skipToEnd(),i.hr=!0,i.thisLine.hr=!0,a.hr):\"[\"===t.peek()?x(t,i,B):x(t,i,i.inline)}function w(t,n){var o=i.token(t,n.htmlState);if(!r){var a=e.innerMode(i,n.htmlState);(\"xml\"==a.mode.name&&null===a.state.tagStart&&!a.state.context&&a.state.tokenize.isInText||n.md_inside&&t.current().indexOf(\">\")>-1)&&(n.f=A,n.block=C,n.htmlState=null)}return o}function k(e,t){var i,r=t.listStack[t.listStack.length-1]||0,o=t.indentation<r,l=r+3;return t.fencedEndRE&&t.indentation<=l&&(o||e.match(t.fencedEndRE))?(n.highlightFormatting&&(t.formatting=\"code-block\"),o||(i=S(t)),t.localMode=t.localState=null,t.block=C,t.f=A,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,o?y(e,t,t.block):i):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),a.code)}function S(e){var t=[];if(e.formatting){t.push(a.formatting),\"string\"===typeof e.formatting&&(e.formatting=[e.formatting]);for(var i=0;i<e.formatting.length;i++)t.push(a.formatting+\"-\"+e.formatting[i]),\"header\"===e.formatting[i]&&t.push(a.formatting+\"-\"+e.formatting[i]+\"-\"+e.header),\"quote\"===e.formatting[i]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(a.formatting+\"-\"+e.formatting[i]+\"-\"+e.quote):t.push(\"error\"))}if(e.taskOpen)return t.push(\"meta\"),t.length?t.join(\" \"):null;if(e.taskClosed)return t.push(\"property\"),t.length?t.join(\" \"):null;if(e.linkHref?t.push(a.linkHref,\"url\"):(e.strong&&t.push(a.strong),e.em&&t.push(a.em),e.strikethrough&&t.push(a.strikethrough),e.emoji&&t.push(a.emoji),e.linkText&&t.push(a.linkText),e.code&&t.push(a.code),e.image&&t.push(a.image),e.imageAltText&&t.push(a.imageAltText,\"link\"),e.imageMarker&&t.push(a.imageMarker)),e.header&&t.push(a.header,a.header+\"-\"+e.header),e.quote&&(t.push(a.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(a.quote+\"-\"+e.quote):t.push(a.quote+\"-\"+n.maxBlockquoteDepth)),!1!==e.list){var r=(e.listStack.length-1)%3;r?1===r?t.push(a.list2):t.push(a.list3):t.push(a.list1)}return e.trailingSpaceNewLine?t.push(\"trailing-space-new-line\"):e.trailingSpace&&t.push(\"trailing-space-\"+(e.trailingSpace%2?\"a\":\"b\")),t.length?t.join(\" \"):null}function F(e,t){if(e.match(f,!0))return S(t)}function A(t,r){var o=r.text(t,r);if(\"undefined\"!==typeof o)return o;if(r.list)return r.list=null,S(r);if(r.taskList)return\" \"===t.match(c,!0)[1]?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting=\"task\"),r.taskList=!1,S(r);if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting=\"header\"),S(r);var l=t.next();if(r.linkTitle){r.linkTitle=!1;var s=l;\"(\"===l&&(s=\")\");var u=\"^\\\\s*(?:[^\"+(s=(s+\"\").replace(/([.?*+^\\[\\]\\\\(){}|-])/g,\"\\\\$1\"))+\"\\\\\\\\]+|\\\\\\\\\\\\\\\\|\\\\\\\\.)\"+s;if(t.match(new RegExp(u),!0))return a.linkHref}if(\"`\"===l){var d=r.formatting;n.highlightFormatting&&(r.formatting=\"code\"),t.eatWhile(\"`\");var h=t.current().length;if(0!=r.code||r.quote&&1!=h){if(h==r.code){var f=S(r);return r.code=0,f}return r.formatting=d,S(r)}return r.code=h,S(r)}if(r.code)return S(r);if(\"\\\\\"===l&&(t.next(),n.highlightFormatting)){var p=S(r),m=a.formatting+\"-escape\";return p?p+\" \"+m:m}if(\"!\"===l&&t.match(/\\[[^\\]]*\\] ?(?:\\(|\\[)/,!1))return r.imageMarker=!0,r.image=!0,n.highlightFormatting&&(r.formatting=\"image\"),S(r);if(\"[\"===l&&r.imageMarker&&t.match(/[^\\]]*\\](\\(.*?\\)| ?\\[.*?\\])/,!1))return r.imageMarker=!1,r.imageAltText=!0,n.highlightFormatting&&(r.formatting=\"image\"),S(r);if(\"]\"===l&&r.imageAltText){n.highlightFormatting&&(r.formatting=\"image\");var p=S(r);return r.imageAltText=!1,r.image=!1,r.inline=r.f=T,p}if(\"[\"===l&&!r.image)return r.linkText&&t.match(/^.*?\\]/)||(r.linkText=!0,n.highlightFormatting&&(r.formatting=\"link\")),S(r);if(\"]\"===l&&r.linkText){n.highlightFormatting&&(r.formatting=\"link\");var p=S(r);return r.linkText=!1,r.inline=r.f=t.match(/\\(.*?\\)| ?\\[.*?\\]/,!1)?T:A,p}if(\"<\"===l&&t.match(/^(https?|ftps?):\\/\\/(?:[^\\\\>]|\\\\.)+>/,!1))return r.f=r.inline=E,n.highlightFormatting&&(r.formatting=\"link\"),(p=S(r))?p+=\" \":p=\"\",p+a.linkInline;if(\"<\"===l&&t.match(/^[^> \\\\]+@(?:[^\\\\>]|\\\\.)+>/,!1))return r.f=r.inline=E,n.highlightFormatting&&(r.formatting=\"link\"),(p=S(r))?p+=\" \":p=\"\",p+a.linkEmail;if(n.xml&&\"<\"===l&&t.match(/^(!--|\\?|!\\[CDATA\\[|[a-z][a-z0-9-]*(?:\\s+[a-z_:.\\-]+(?:\\s*=\\s*[^>]+)?)*\\s*(?:>|$))/i,!1)){var v=t.string.indexOf(\">\",t.pos);if(-1!=v){var x=t.string.substring(t.start,v);/markdown\\s*=\\s*('|\"){0,1}1('|\"){0,1}/.test(x)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(i),y(t,r,w)}if(n.xml&&\"<\"===l&&t.match(/^\\/\\w*?>/))return r.md_inside=!1,\"tag\";if(\"*\"===l||\"_\"===l){for(var b=1,D=1==t.pos?\" \":t.string.charAt(t.pos-2);b<3&&t.eat(l);)b++;var C=t.peek()||\" \",k=!/\\s/.test(C)&&(!g.test(C)||/\\s/.test(D)||g.test(D)),F=!/\\s/.test(D)&&(!g.test(D)||/\\s/.test(C)||g.test(C)),L=null,M=null;if(b%2&&(r.em||!k||\"*\"!==l&&F&&!g.test(D)?r.em!=l||!F||\"*\"!==l&&k&&!g.test(C)||(L=!1):L=!0),b>1&&(r.strong||!k||\"*\"!==l&&F&&!g.test(D)?r.strong!=l||!F||\"*\"!==l&&k&&!g.test(C)||(M=!1):M=!0),null!=M||null!=L)return n.highlightFormatting&&(r.formatting=null==L?\"strong\":null==M?\"em\":\"strong em\"),!0===L&&(r.em=l),!0===M&&(r.strong=l),f=S(r),!1===L&&(r.em=!1),!1===M&&(r.strong=!1),f}else if(\" \"===l&&(t.eat(\"*\")||t.eat(\"_\"))){if(\" \"===t.peek())return S(r);t.backUp(1)}if(n.strikethrough)if(\"~\"===l&&t.eatWhile(l)){if(r.strikethrough)return n.highlightFormatting&&(r.formatting=\"strikethrough\"),f=S(r),r.strikethrough=!1,f;if(t.match(/^[^\\s]/,!1))return r.strikethrough=!0,n.highlightFormatting&&(r.formatting=\"strikethrough\"),S(r)}else if(\" \"===l&&t.match(\"~~\",!0)){if(\" \"===t.peek())return S(r);t.backUp(2)}if(n.emoji&&\":\"===l&&t.match(/^(?:[a-z_\\d+][a-z_\\d+-]*|\\-[a-z_\\d+][a-z_\\d+-]*):/)){r.emoji=!0,n.highlightFormatting&&(r.formatting=\"emoji\");var B=S(r);return r.emoji=!1,B}return\" \"===l&&(t.match(/^ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),S(r)}function E(e,t){if(\">\"===e.next()){t.f=t.inline=A,n.highlightFormatting&&(t.formatting=\"link\");var i=S(t);return i?i+=\" \":i=\"\",i+a.linkInline}return e.match(/^[^>]+/,!0),a.linkInline}function T(e,t){if(e.eatSpace())return null;var i=e.next();return\"(\"===i||\"[\"===i?(t.f=t.inline=M(\"(\"===i?\")\":\"]\"),n.highlightFormatting&&(t.formatting=\"link-string\"),t.linkHref=!0,S(t)):\"error\"}var L={\")\":/^(?:[^\\\\\\(\\)]|\\\\.|\\((?:[^\\\\\\(\\)]|\\\\.)*\\))*?(?=\\))/,\"]\":/^(?:[^\\\\\\[\\]]|\\\\.|\\[(?:[^\\\\\\[\\]]|\\\\.)*\\])*?(?=\\])/};function M(e){return function(t,i){if(t.next()===e){i.f=i.inline=A,n.highlightFormatting&&(i.formatting=\"link-string\");var r=S(i);return i.linkHref=!1,r}return t.match(L[e]),i.linkHref=!0,S(i)}}function B(e,t){return e.match(/^([^\\]\\\\]|\\\\.)*\\]:/,!1)?(t.f=N,e.next(),n.highlightFormatting&&(t.formatting=\"link\"),t.linkText=!0,S(t)):x(e,t,A)}function N(e,t){if(e.match(\"]:\",!0)){t.f=t.inline=O,n.highlightFormatting&&(t.formatting=\"link\");var i=S(t);return t.linkText=!1,i}return e.match(/^([^\\]\\\\]|\\\\.)+/,!0),a.linkText}function O(e,t){return e.eatSpace()?null:(e.match(/^[^\\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\\s+(?:\"(?:[^\"\\\\]|\\\\.)+\"|'(?:[^'\\\\]|\\\\.)+'|\\((?:[^)\\\\]|\\\\.)+\\)))?/,!0),t.f=t.inline=A,a.linkHref+\" url\")}var I={startState:function(){return{f:C,prevLine:{stream:null},thisLine:{stream:null},block:C,htmlState:null,indentation:0,inline:A,text:F,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(i,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\\s*$/,!0))return D(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=w)){var n=e.match(/^\\s*/,!0)[0].replace(/\\t/g,v).length;if(t.indentation=n,t.indentationDiff=null,n>0)return null}}return t.f(e,t)},innerMode:function(e){return e.block==w?{state:e.htmlState,mode:i}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:I}},indent:function(t,n,r){return t.block==w&&i.indent?i.indent(t.htmlState,n,r):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,n,r):e.Pass},blankLine:D,getType:S,blockCommentStart:\"\\x3c!--\",blockCommentEnd:\"--\\x3e\",closeBrackets:\"()[]{}''\\\"\\\"``\",fold:\"markdown\"};return I}),\"xml\"),e.defineMIME(\"text/markdown\",\"markdown\"),e.defineMIME(\"text/x-markdown\",\"markdown\")}(n(565),n(834),n(1254))},834:function(e,t,n){!function(e){\"use strict\";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode(\"xml\",(function(i,r){var o,a,l=i.indentUnit,s={},u=r.htmlMode?t:n;for(var c in u)s[c]=u[c];for(var c in r)s[c]=r[c];function d(e,t){function n(n){return t.tokenize=n,n(e,t)}var i=e.next();return\"<\"==i?e.eat(\"!\")?e.eat(\"[\")?e.match(\"CDATA[\")?n(p(\"atom\",\"]]>\")):null:e.match(\"--\")?n(p(\"comment\",\"--\\x3e\")):e.match(\"DOCTYPE\",!0,!0)?(e.eatWhile(/[\\w\\._\\-]/),n(m(1))):null:e.eat(\"?\")?(e.eatWhile(/[\\w\\._\\-]/),t.tokenize=p(\"meta\",\"?>\"),\"meta\"):(o=e.eat(\"/\")?\"closeTag\":\"openTag\",t.tokenize=h,\"tag bracket\"):\"&\"==i?(e.eat(\"#\")?e.eat(\"x\")?e.eatWhile(/[a-fA-F\\d]/)&&e.eat(\";\"):e.eatWhile(/[\\d]/)&&e.eat(\";\"):e.eatWhile(/[\\w\\.\\-:]/)&&e.eat(\";\"))?\"atom\":\"error\":(e.eatWhile(/[^&<]/),null)}function h(e,t){var n=e.next();if(\">\"==n||\"/\"==n&&e.eat(\">\"))return t.tokenize=d,o=\">\"==n?\"endTag\":\"selfcloseTag\",\"tag bracket\";if(\"=\"==n)return o=\"equals\",null;if(\"<\"==n){t.tokenize=d,t.state=y,t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+\" tag error\":\"tag error\"}return/[\\'\\\"]/.test(n)?(t.tokenize=f(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/),\"word\")}function f(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=h;break}return\"string\"};return t.isInAttribute=!0,t}function p(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=d;break}n.next()}return e}}function m(e){return function(t,n){for(var i;null!=(i=t.next());){if(\"<\"==i)return n.tokenize=m(e+1),n.tokenize(t,n);if(\">\"==i){if(1==e){n.tokenize=d;break}return n.tokenize=m(e-1),n.tokenize(t,n)}}return\"meta\"}}function g(e,t,n){this.prev=e.context,this.tagName=t||\"\",this.indent=e.indented,this.startOfLine=n,(s.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function v(e){e.context&&(e.context=e.context.prev)}function x(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!s.contextGrabbers.hasOwnProperty(n)||!s.contextGrabbers[n].hasOwnProperty(t))return;v(e)}}function y(e,t,n){return\"openTag\"==e?(n.tagStart=t.column(),b):\"closeTag\"==e?D:y}function b(e,t,n){return\"word\"==e?(n.tagName=t.current(),a=\"tag\",k):s.allowMissingTagName&&\"endTag\"==e?(a=\"tag bracket\",k(e,t,n)):(a=\"error\",b)}function D(e,t,n){if(\"word\"==e){var i=t.current();return n.context&&n.context.tagName!=i&&s.implicitlyClosed.hasOwnProperty(n.context.tagName)&&v(n),n.context&&n.context.tagName==i||!1===s.matchClosing?(a=\"tag\",C):(a=\"tag error\",w)}return s.allowMissingTagName&&\"endTag\"==e?(a=\"tag bracket\",C(e,t,n)):(a=\"error\",w)}function C(e,t,n){return\"endTag\"!=e?(a=\"error\",C):(v(n),y)}function w(e,t,n){return a=\"error\",C(e,t,n)}function k(e,t,n){if(\"word\"==e)return a=\"attribute\",S;if(\"endTag\"==e||\"selfcloseTag\"==e){var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,\"selfcloseTag\"==e||s.autoSelfClosers.hasOwnProperty(i)?x(n,i):(x(n,i),n.context=new g(n,i,r==n.indented)),y}return a=\"error\",k}function S(e,t,n){return\"equals\"==e?F:(s.allowMissing||(a=\"error\"),k(e,t,n))}function F(e,t,n){return\"string\"==e?A:\"word\"==e&&s.allowUnquoted?(a=\"string\",k):(a=\"error\",k(e,t,n))}function A(e,t,n){return\"string\"==e?A:k(e,t,n)}return d.isInText=!0,{startState:function(e){var t={tokenize:d,state:y,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var n=t.tokenize(e,t);return(n||o)&&\"comment\"!=n&&(a=null,t.state=t.state(o||n,e,t),a&&(n=\"error\"==a?n+\" error\":a)),n},indent:function(t,n,i){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+l;if(r&&r.noIndent)return e.Pass;if(t.tokenize!=h&&t.tokenize!=d)return i?i.match(/^(\\s*)/)[0].length:0;if(t.tagName)return!1!==s.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+l*(s.multilineTagIndentFactor||1);if(s.alignCDATA&&/<!\\[CDATA\\[/.test(n))return 0;var o=n&&/^<(\\/)?([\\w_:\\.-]*)/.exec(n);if(o&&o[1])for(;r;){if(r.tagName==o[2]){r=r.prev;break}if(!s.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(o)for(;r;){var a=s.contextGrabbers[r.tagName];if(!a||!a.hasOwnProperty(o[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+l:t.baseIndent||0},electricInput:/<\\/[\\s\\w:]+>$/,blockCommentStart:\"\\x3c!--\",blockCommentEnd:\"--\\x3e\",configuration:s.htmlMode?\"html\":\"xml\",helperType:s.htmlMode?\"html\":\"xml\",skipAttribute:function(e){e.state==F&&(e.state=k)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:\"closeTag\"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)t.push(n.tagName);return t.reverse()}}})),e.defineMIME(\"text/xml\",\"xml\"),e.defineMIME(\"application/xml\",\"xml\"),e.mimeModes.hasOwnProperty(\"text/html\")||e.defineMIME(\"text/html\",{name:\"xml\",htmlMode:!0})}(n(565))},835:function(e,t,n){!function(e){\"use strict\";e.overlayMode=function(t,n,i){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(i){return{base:e.copyState(t,i.base),overlay:e.copyState(n,i.overlay),basePos:i.basePos,baseCur:null,overlayPos:i.overlayPos,overlayCur:null}},token:function(e,r){return(e!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<e.start)&&(r.streamSeen=e,r.basePos=r.overlayPos=e.start),e.start==r.basePos&&(r.baseCur=t.token(e,r.base),r.basePos=e.pos),e.start==r.overlayPos&&(e.pos=e.start,r.overlayCur=n.token(e,r.overlay),r.overlayPos=e.pos),e.pos=Math.min(r.basePos,r.overlayPos),null==r.overlayCur?r.baseCur:null!=r.baseCur&&r.overlay.combineTokens||i&&null==r.overlay.combineTokens?r.baseCur+\" \"+r.overlayCur:r.overlayCur},indent:t.indent&&function(e,n,i){return t.indent(e.base,n,i)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var r,o;return t.blankLine&&(r=t.blankLine(e.base)),n.blankLine&&(o=n.blankLine(e.overlay)),null==o?r:i&&null!=r?r+\" \"+o:o}}}}(n(565))}}]);","name":"static/js/5.8870661b.chunk.js","map":{"version":3,"sources":["static/js/5.8870661b.chunk.js"],"names":["this","push","module","exports","__webpack_require__","CodeMirror","CodeMirrorSpellChecker","marked","isMac","test","navigator","platform","anchorToExternalRegex","RegExp","bindings","toggleBold","toggleItalic","drawLink","toggleHeadingSmaller","toggleHeadingBigger","drawImage","toggleBlockquote","toggleOrderedList","toggleUnorderedList","toggleCodeBlock","togglePreview","toggleStrikethrough","toggleHeading1","toggleHeading2","toggleHeading3","cleanBlock","drawTable","drawHorizontalRule","undo","redo","toggleSideBySide","toggleFullScreen","shortcuts","isMobile","a","check","userAgent","vendor","window","opera","substr","fixShortcut","name","replace","CLASS_REGEX","getClassRegex","className","addClass","el","classRegex","match","removeClass","createToolbarDropdown","options","enableTooltips","parent","createToolbarButton","content","document","createElement","childrenIndex","children","length","childElement","child","toolbarBuiltInButtons","appendChild","enableActions","markup","setAttribute","undefined","action","title","actionName","tooltip","f","key","getBindingName","createTooltip","noDisable","classList","add","noMobile","classNameParts","split","iconClasses","classNameIndex","classNamePart","tabIndex","icon","iconClassIndex","iconClass","innerHTML","onclick","e","preventDefault","open","createSep","getState","cm","pos","getCursor","stat","getTokenAt","type","data","text","types","ret","i","bold","getLine","line","quote","italic","strikethrough","code","link","image","saved_overflow","editor","codemirror","setOption","getOption","body","style","overflow","wrapper","getWrapperElement","sidebyside","nextSibling","sideBySideFullscreen","easyMDEContainer","parentNode","onToggleFullScreen","maxHeight","getScrollerElement","removeProperty","height","setPreviewMaxHeight","toolbar_div","toolbarElements","fullscreen","toolbarButton","_toggleBlock","blockStyles","fenceCharsToInsert","fencing_line","styles","indexOf","token_state","token","state","base","code_type","line_num","firstTok","lastTok","getLineHandle","ch","indentedCode","fencedChars","block_start","block_end","lineCount","cur_start","cur_end","tok","is_code","start","slice","end","replaceRange","setSelection","focus","start_text","start_line","end_text","end_line","fence_chars","operation","search_from","next_line","next_line_last_tok","indentLine","no_sel_and_starting_of_line","sel_multi","start_line_sel","end_line_sel","repl_start","repl_end","_replaceSelection","insertFencingAtSelection","_toggleLine","_toggleHeading","lastChild","startPoint","endPoint","_cleanBlock","url","promptURLs","prompt","promptTexts","insertTexts","drawUploadedImage","openBrowseFileWindow","afterImageUploaded","imageName","lastIndexOf","ext","substring","includes","uploadedImage","text_link","updateStatusBar","imageTexts","sbOnUploaded","setTimeout","sbInit","table","horizontalRule","preview","useSideBySideListener","previewNormal","toolbar","sideBySideRenderingFunction","newValue","previewRender","value","on","off","refresh","previewClass","Array","isArray","active","startEnd","Object","assign","getSelection","replaceSelection","direction","size","currHeadingLevel","search","listRegexp","whitespacesRegexp","repl","_toggle","untoggleOnly","arr","exec","char","_getChar","rt","_checkChar","start_chars","end_chars","join","humanFileSize","bytes","units","Math","abs","u","toFixed","_mergeProperties","target","source","property","prototype","hasOwnProperty","call","concat","constructor","extend","arguments","wordCount","m","count","charCodeAt","default","heading","guide","timeFormat","locale","format","hour","minute","sbOnDragEnter","sbOnDrop","sbProgress","sizeUnits","errorMessages","noFileGiven","typeNotAllowed","fileTooLarge","importError","EasyMDE","autoDownloadFA","autoDownloadFontAwesome","styleSheets","href","rel","getElementsByTagName","element","console","log","showIcons","status","uploadImage","unshift","plainText","markdown","parsingConfig","highlightFormatting","autosave","minHeight","errorCallback","errorMessage","alert","imageMaxSize","imageAccept","unique_id","uniqueId","overlayMode","combine","render","initialValue","foundSavedValue","self","event","stopPropagation","imageUploadFunction","uploadImagesUsingCustomFunction","dataTransfer","files","uploadImages","clipboardData","isLocalStorageAvailable","localStorage","setItem","removeItem","onSuccess","onError","names","uploadImageUsingCustomFunction","itemName","gui","statusbar","matchingClasses","getElementsByClassName","textContent","markedOptions","renderingConfig","singleLineBreaks","breaks","codeSyntaxHighlighting","hljs","highlight","language","getLanguage","highlightAuto","setOptions","htmlText","sanitizerFunction","htmlDoc","DOMParser","parseFromString","listItems","listItem","j","listItemChild","HTMLInputElement","marginLeft","listStyleType","documentElement","removeListStyleWhenCheckbox","linkString","fixedLinkString","addAnchorTargetBlank","_rendered","mode","backdrop","keyMaps","documentOnKeyDown","keyCode","addEventListener","defineMode","config","getMode","spellChecker","gitHubSpice","codeMirrorInstance","fromTextArea","theme","tabSize","indentUnit","indentWithTabs","lineNumbers","autofocus","extraKeys","lineWrapping","allowDropFileTypes","placeholder","getAttribute","styleSelectedText","scrollbarStyle","configureMouse","repeat","addNew","inputStyle","spellcheck","nativeSpellcheck","autoRefresh","forceSync","save","cmWrapper","insertBefore","createToolbar","createStatusbar","enabled","clearTimeout","_autosave_timeout","submit_delay","delay","_vm","previewImagesInEditor","querySelectorAll","forEach","parentEl","parentElement","innerText","hasAttribute","srcAttr","EMDEimagesCache","keySrc","assignImageBlockAttributes","img","onload","naturalWidth","naturalHeight","src","sideBySide","createSideBySide","temp_cm","bind","getComputedStyle","querySelector","width","setSize","cleanup","removeEventListener","easyMDE","binded","form","autosaveTimeoutId","loaded","getItem","setValue","getElementById","d","Date","dd","Intl","DateTimeFormat","clearAutosavedValue","imageInput","click","onChange","file","onErrorSup","fillErrorMessage","imageUrl","formData","FormData","append","imageCSRFToken","request","XMLHttpRequest","upload","onprogress","lengthComputable","progress","round","total","imageUploadEndpoint","response","JSON","parse","responseText","error","filePath","imagePathAbsolute","location","origin","statusText","onerror","send","apply","filledErrorMessage","paddingTop","parseInt","borderTopWidth","previewMaxHeight","toString","syncSideBySidePreviewScroll","cScroll","pScroll","v","getScrollInfo","clientHeight","ratio","parseFloat","top","move","scrollHeight","scrollTop","onscroll","scrollTo","items","bar","toolbarData","toolbarGuideIcon","hideIcons","nonSeparatorIconsFollow","x","item","toolbarTips","multiple","accept","display","opacity","onUpdate","onActivity","defaultValue","getValue","val","getDoc","isPreviewActive","isSideBySideActive","isFullscreenActive","toTextArea","removeChild","remove","listRE","emptyListRE","unorderedListRE","incrementRemainingMarkdownListNumbers","startLine","lookAhead","skipCount","startItem","startIndent","nextLineNumber","nextLine","nextItem","nextIndent","newNumber","nextNumber","itemNumber","isNaN","commands","newlineAndIndentContinueMarkdownList","Pass","ranges","listSelections","replacements","head","eolState","getStateAfter","inner","innerMode","execCommand","inList","list","inQuote","cursorBeforeBullet","empty","endOfQuote","endOfList","indent","after","numbered","bullet","replaceSelections","mod","tabAndIndentMarkdownList","spaces","shiftTabAndUnindentMarkdownList","setFullscreen","wrap","fullScreenRestore","pageYOffset","scrollLeft","pageXOffset","setNormal","info","defineOption","old","Init","modeInfo","mime","mimes","alias","findModeByMIME","toLowerCase","findModeByExtension","findModeByFileName","filename","dot","findModeByName","clearPlaceholder","setPlaceholder","elt","cssText","placeHolder","createTextNode","lineSpace","firstChild","onComposition","input","getInputField","nodeName","onBlur","isEmpty","prev","placeholderCompose","hasFocus","startListening","offsetHeight","stopListening","lastWrapHeight","timeout","hurry","_cm","onCursorActivity","markedSelection","update","clear","markedSelectionStyle","reset","CHUNK_SIZE","Pos","cmp","cmpPos","coverRange","from","to","addAt","array","cls","endLine","atEnd","mark","markText","splice","somethingSelected","coverStart","find","coverEnd","shift","pop","doFold","noFold","regexpFlags","regexp","flags","ignoreCase","global","multiline","ensureFlags","current","charAt","maybeMultiline","searchRegexpForward","doc","last","lastLine","lastIndex","string","index","searchRegexpForwardMultiline","chunk","curLine","before","inside","startCh","lastMatchIn","endMargin","newMatch","searchRegexpBackward","first","firstLine","searchRegexpBackwardMultiline","chunkSize","adjustPos","orig","folded","foldFunc","min","max","mid","len","searchStringForward","query","caseFold","fold","lines","found","cutFrom","endString","searchStringBackward","topString","SearchCursor","atOccurrence","clipPos","matches","reverse","String","normalize","str","findNext","findPrevious","result","newText","splitLines","defineExtension","defineDocExtension","cur","getSearchCursor","anchor","setSelections","urlRE","modeConfig","codeDepth","blankLine","gfmOverlay","startState","codeBlock","ateSpace","copyState","s","stream","combineTokens","skipToEnd","sol","peek","next","eatWhile","difference","eatSpace","markdownConfig","taskLists","emoji","attr","defineMIME","Typo","aff_loading","xhr_aff","readyState","aff_data","num_loaded","typo","dic_data","dic_loading","xhr_dic","rx_word","overlay","word","__dirname","dictionary","affData","wordsData","settings","rules","dictionaryTable","compoundRules","compoundRuleCodes","replacementTable","memoized","path","_len","_jlen","readDataFile","setFunc","_readFile","asyncLoad","then","setAffData","setup","setWordsData","_parseAFF","rule","ONLYINCOMPOUND","_parseDIC","ruleText","expressionText","character","loadedCallback","chrome","extension","dictionaryPath","getURL","load","obj","charset","async","promise","req","Promise","resolve","reject","overrideMimeType","fs","existsSync","readFileSync","numEntries","lineParts","_removeAffixComments","definitionParts","ruleType","ruleCode","combineable","entries","charactersToRemove","additionParts","charactersToAdd","continuationClasses","parseRuleCodes","regexToMatch","entry","_removeDicComments","addWord","parts","ruleCodesArray","NEEDAFFIX","newWords","_applyRule","ii","_iilen","newWord","k","combineCode","combineRule","otherNewWords","iii","_iiilen","trim","textCodes","FLAG","continuationRule","aWord","trimmedWord","checkExact","toUpperCase","capitalizedWord","hasFlag","uncapitalizedWord","ruleCodes","COMPOUNDMIN","flag","wordFlags","alphabet","suggest","limit","memoizedLimit","replacementEntry","correctedWord","edits1","words","known_only","_edit","rv","alphabetLength","lettercase","replacementLetter","suggestions","ed1","weighted_corrections","ed1word","sorted_corrections","sort","b","a_val","b_val","localeCompare","capitalization_scheme","working_limit","correct","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","Constructor","protoProps","staticProps","_unsupportedIterableToArray","o","minLen","_arrayLikeToArray","n","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","Symbol","iterator","done","TypeError","defaults$5","getDefaults$1","baseUrl","extensions","gfm","headerIds","headerPrefix","langPrefix","mangle","pedantic","renderer","sanitize","sanitizer","silent","smartLists","smartypants","tokenizer","walkTokens","xhtml","changeDefaults$1","newDefaults","defaults","getDefaults","changeDefaults","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","getEscapeReplacement","escape$2","html","encode","unescapeTest","unescape$1","_","fromCharCode","caret","edit$1","regex","opt","getRegex","nonWordAndColonTest","originIndependentUrl","cleanUrl$1","prot","decodeURIComponent","resolveUrl","encodeURI","baseUrls","justDomain","protocol","domain","rtrim$1","relativeBase","merge$2","splitCells$1","tableRow","cells","offset","escaped","curr","c","invert","l","suffLen","currChar","findClosingBracket$1","level","checkSanitizeDeprecation$1","warn","repeatString$1","pattern","helpers","escape","unescape","edit","cleanUrl","noopTest","merge","splitCells","rtrim","findClosingBracket","checkSanitizeDeprecation","repeatString","defaults$4","_escape","outputLink","cap","raw","indentCodeCompensation","matchIndentToCode","indentToCode","map","node","matchIndentInNode","Tokenizer_1","Tokenizer","_proto","space","block","newline","codeBlockStyle","fences","lang","trimmed","depth","nptable","header","align","hr","blockquote","bcurr","bnext","addBack","loose","istask","ischecked","endMatch","bull","isordered","ordered","itemMatch","listItemStart","task","checked","pre","def","tag","lheading","paragraph","inline","inLink","inRawBlock","trimmedUrl","rtrimSlash","lastParenIndex","linkLen","_escapes","reflink","links","nolink","emStrong","maskedSrc","prevChar","lDelim","nextChar","punctuation","rDelim","rLength","lLength","delimTotal","midDelimTotal","endReg","rDelimAst","rDelimUnd","codespan","hasNonSpaceChars","hasSpaceCharsOnBothEnds","br","del","autolink","tokens","prevCapZero","_backpedal","inlineText","merge$1","block$1","_paragraph","_label","_title","_tag","_comment","normal","inline$1","reflinkSearch","_punctuation","blockSkip","escapedEmSt","_scheme","_email","_attribute","_href","strong","middle","endAst","endUnd","em","_extended_email","Tokenizer$1","defaults$3","out","random","Lexer_1","Lexer","create","lex","lexInline","inlineTokens","blockTokens","lastToken","cutSrc","lastParagraphClipped","_this","some","extTokenizer","startBlock","startIndex","Infinity","tempSrc","tempStart","getStartIndex","errMsg","Error","l2","row","_this2","keepPrevChar","keys","startInline","get","defaults$2","escape$1","Renderer_1","Renderer","_code","infostring","_html","slugger","slug","listitem","checkbox","tablerow","tablecell","_text","TextRenderer_1","TextRenderer","Slugger_1","Slugger","seen","serialize","getNextSafeSlug","originalSlug","isDryRun","occurenceAccumulator","dryrun","Renderer$1","TextRenderer$1","Slugger$1","defaults$1","Parser","textRenderer","parseInline","l3","cell","itemBody","renderers","callback","err","pending","_tokens","message","use","args","_key","hasExtensions","opts","childTokens","pack","prevRenderer","_len2","_key2","_loop","prop","_len3","_key3","_loop2","prevTokenizer","_len4","_key4","_step","_loop3","_step2","_iterator2","_step3","_iterator3","_step4","_iterator4","_cell","_iterator","parser","lexer","factory","gecko","ie_upto10","ie_11up","edge","ie","ie_version","documentMode","webkit","qtwebkit","presto","safari","mac_geMountainLion","phantom","ios","maxTouchPoints","android","mobile","mac","chromeOS","windows","presto_version","Number","flipCtrlCmd","captureRightClick","classTest","range","rmClass","removeChildren","childNodes","removeChildrenAndAdd","eltP","contains","nodeType","host","activeElt","activeElement","shadowRoot","joinClasses","as","createRange","endNode","r","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","select","copyObj","overwrite","countColumn","startValue","nextTab","selectionStart","selectionEnd","_e","Delayed","id","time","handler","onTimeout","set","ms","scrollerGap","sel_dontScroll","scroll","sel_mouse","sel_move","findColumn","goal","col","skipped","spaceStrs","spaceStr","lst","insertSorted","score","priority","nothing","createObj","inst","nonASCIISingleCaseWordChar","isWordCharBasic","isWordChar","helper","extendingChars","isExtendingChar","skipExtendingChars","dir","findFirst","pred","midF","ceil","floor","iterateBidiSections","order","part","bidiOther","getBidiPartAt","sticky","bidiOrdering","lowTypes","arabicTypes","charType","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","outerType","i$1","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","i$5","cur$1","type$4","i$6","end$1","replace$1","j$1","i$7","at","isRTL","j$2","nstart","getOrder","noHandlers","emitter","attachEvent","_handlers","getHandlers","detachEvent","signal","handlers","signalDOMEvent","override","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","offsetWidth","hasBadBidiRects","txt","r0","getBoundingClientRect","r1","left","right","splitLinesAuto","nl","hasSelection","te","ownerDocument","selection","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","hasBadZoomedRects","fromRange","modes","mimeModes","dependencies","spec","resolveMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","nstate","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","sz","getBetween","iter","getLines","updateLineHeight","diff","lineNo","no","_lineAtHeight","h","outer","lh","isLine","lineNumberFor","lineNumberFormatter","firstLineNumber","equalCursorPos","copyPos","maxPos","minPos","clipLine","_clipPos","clipToLen","linelen","clipPosArray","eol","eat","skipTo","backUp","column","indentation","consume","caseInsensitive","cased","hideFirstChars","oracle","baseToken","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","overlays","i_end","opaque","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","styleClasses","highlightFrontier","modeFrontier","precise","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","startAt","callBlankLine","readToken","copy","Token","takeToken","asArray","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","indented","retreatFrontier","sawReadOnlySpans","sawCollapsedSpans","seeReadOnlySpans","seeCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","op","inThisOp","WeakSet","markedSpans","has","attachLine","markedSpansBefore","isInsert","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","endCh","startsBefore","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","removeReadOnlyRanges","markers","readOnly","mk","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lineIsHidden","widgetNode","lineIsHiddenInner","_heightAtLine","lineObj","lineLength","found$1","findMaxLine","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","updateLine","estHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","trailingSpace","splitSpaces","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","defaultSpecialCharPlaceholder","startStyle","endStyle","css","attributes","displayText","special","specialChars","mustWrap","createDocumentFragment","txt$1","tabWidth","specialCharPlaceholder","fullStyle","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","foundBookmarks","endStyles","upto","tokenText","LineView","hidden","buildViewArray","nextPos","view","operationGroup","pushOperation","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","callbacks","cursorActivityCalled","finishOperation","endCb","orphanDelayedCallbacks","signalLater","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","updateLineBackground","background","getLineContent","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","wrap$1","gutterWrap","lineNumber","gutterLeft","lineNumInnerWidth","gutterSpecs","gutterWidth","alignable","isWidget","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","position","widgetHeight","parentStyle","gutters","clientWidth","eventInWidget","sizer","mover","offsetTop","paddingVert","paddingH","cachedPaddingH","currentStyle","paddingRight","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","barHeight","ensureLineHeights","rect","wrapping","curWidth","heights","rects","getClientRects","bottom","mapFromLineView","updateExternalMeasurement","lineMeasure","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","measureCharInner","bogus","rtop","rbottom","measureText","nullRect","nodeAndOffsetInLineMap","mStart","mEnd","getUsefulRect","place","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageScrollY","marginTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","_charCoords","_cursorCoords","preparedMeasure","getBidi","partPos","other","estimateCoords","PosWithInfo","outside","xRel","_coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","ref","closestDist","endX","dist","textHeight","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","clientX","clientY","e$1","colDiff","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","primIndex","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","sizerWidth","docLTR","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","fromPos","toPos","openStart","openEnd","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","ensureFocus","onFocus","delayBlurEvent","delayingBlurEvent","draggingText","selForContextMenu","receivedFocus","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","maybeScrollWindow","doScroll","innerHeight","scrollNode","scrollIntoView","scrollPosIntoView","margin","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","gutterSpace","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollbars","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","checkedZeroWidth","minWidth","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","maybeDisable","elementFromPoint","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","native","null","initScrollbars","axis","nextOpId","_startOperation","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","markArrays","_endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","methodOp","docMethodOp","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","scrollbarsClipped","marginBottom","borderRightWidth","selectionSnapshot","anchorNode","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","removeAllRanges","addRange","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapWidth","toUpdate","selSnapshot","patchDisplay","selectionDiv","reportedViewFrom","reportedViewTo","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","updateGutterSpace","alignWidgets","comp","innerW","lineGutter","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","normalizeSelection","mayTouch","selectionsMayTouch","prim","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","linesFor","lastText","lastSpans","nlines","insert","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","shared","attachDoc","setDirectionClass","directionChanged","History","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","newChanges","extendRange","posBefore","extendSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","filter","returned","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","_replaceRange","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","sibling","myIndex","used","LineWidget","adjustScrollWhenAboveVisible","addLineWidget","insertAt","aboveVisible","this$1","oldH","nextMarkerId","TextMarker","_markText","markTextShared","replacedWith","addToHistory","clearOnEnter","clearHistory","withOp","visual","dHeight","SharedTextMarker","cloneNode","isParent","findSharedMarkers","findMarks","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","lineSeparator","getRange","getLineNumber","getLineHandleVisualStart","setCursor","extendSelectionsBy","addSelection","getSelections","dup","newSel","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","isReadOnly","FileReader","File","read","markAsReadAndPasteIfAllFilesAreRead","t","readTextFromFile","reader","readAsText","text$1","getData","selected","onDragStart","setData","effectAllowed","setDragImage","_top","onDragOver","frag","dragCursor","forEachCodeMirror","byClass","editors","globalsRegistered","ensureGlobalHandlers","registerGlobalHandlers","resizeTimer","onResize","keyNames","keyMap","normalizeKeyName","alt","ctrl","cmd","normalizeKeyMap","keymap","keyname","lookupKey","getKeyMap","fallthrough","isModifierKey","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","prep","targetTop","moveVisually","bidi","mv","getWrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","res","nextCh","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Tab","Enter","Insert","Esc","pcDefault","emacsy","macDefault","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","charCoords","coordsChar","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","lineEnd","goLineRight","cursorCoords","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","defaultTab","transposeChars","newlineAndIndent","sels","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","lookupKeyForEditor","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","handleKeyBinding","motion","handleCharBinding","lastStoppedKey","onKeyDown","getField","handled","showCrossHair","up","onKeyUp","onKeyPress","charCode","lastClick","lastDoubleClick","DOUBLECLICK_DELAY","PastClick","clickRepeat","now","compare","onMouseDown","supportsTouch","clickInGutter","selectingText","handleMappedButton","leftButtonDown","onContextMenu","option","unit","moveOnDrag","contained","behavior","dragDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","preventScroll","e2","rangeForUnit","findWordAt","ourRange","ourIndex","startSel","lastPos","extendTo","startCol","posCol","leftPos","oldRange","ranges$1","bidiSimplify","editorSize","counter","curCount","buttons","anchorLine","boundary","headIndex","usePart","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","optionHandlers","defineOptions","deflt","notOnInit","newBreaks","autocorrect","autocapitalize","detach","attach","wrappingChanged","integer","blur","readOnlyChanged","screenReaderLabelChanged","dragDropChanged","resetPosition","funcs","dragFunctions","toggle","enter","over","leave","drop","inputStyles","pasteIncoming","cutIncoming","registerEventHandlers","finishInit","initHooks","textRendering","touchFinished","prevTouch","finishTouch","isMouseLikeTouchEvent","touch","radiusX","radiusY","farAway","pageX","pageY","inp","how","aggressive","curSpace","curSpaceString","indentString","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","hiddenTextarea","border","addEditorMethods","addKeyMap","removeKeyMap","addOverlay","modeSpec","removeOverlay","newRanges","getLineTokens","getTokenTypeAt","getHelper","getHelpers","help","_global","lineAtHeight","heightAtLine","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","_findPosH","hitSide","rtlMoveVisually","findPosV","goalColumn","_findPosV","goals","headPos","startChar","interpret","startOperation","endOperation","swapDoc","phrase","phraseText","phrases","getGutterElement","registerHelper","registerGlobalHelper","predicate","origDir","lineDir","findNextLine","moveOnce","boundToLine","astral","sawType","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","isInGutter","scan","badPos","bad","domTextBetween","closing","extraLinebreak","recognizeMarker","close","addText","walk","cmText","markerID","isBlock","nodeValue","domToPos","lineNode","locateNodeInLineView","textNode","topNode","curNode","previousSibling","dist$1","belongsToInput","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","contentEditable","updateFromDOM","readFromDOMSoon","forceCompositionEnd","label","removeAttribute","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","poll","pollSelection","pollInterval","pollContent","fromIndex","fromNode","toNode","toIndex","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","TextareaInput","prevInput","pollingFast","textarea","tabindex","realSubmit","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","addLegacyProps","createField","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","moveInputWithCursor","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","scrollY","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","dontDelegate","method","contenteditable","func","version","cmCfg","modeCfg","htmlMode","htmlModeMissing","maxBlockquoteDepth","fencedCodeBlockHighlighting","fencedCodeBlockDefaultMode","xml","tokenTypeOverrides","tokenTypes","list1","list2","list3","imageAltText","imageMarker","formatting","linkInline","linkEmail","linkText","linkHref","tokenType","hrRE","taskListRE","atxHeaderRE","allowAtxHeaderWithoutSpace","setextHeaderRE","textRE","fencedCodeRE","linkDefRE","expandedTab","switchInline","switchBlock","lineIsEmpty","linkTitle","htmlBlock","exit","htmlState","tagStart","tokenize","isInText","inlineNormal","blockNormal","trailingSpaceNewLine","prevLine","thisLine","firstTokenOnLine","prevLineLineIsEmpty","prevLineIsIndentedCode","prevLineIsHr","prevLineIsList","maxNonCodeIndentation","listStack","lineIndentation","indentationDiff","allowsInlineContinuation","fencedCodeEnd","isHr","getType","setext","listType","taskList","fencedEndRE","localMode","localState","local","footnoteLink","md_inside","returnType","currListInd","hasExitedList","maxFencedEndInd","taskOpen","taskClosed","listMod","handleText","matchCh","previousFormatting","formattingEscape","atts","leftFlanking","rightFlanking","setEm","setStrong","retType","getLinkHrefInside","linkRE","endChar","returnState","footnoteLinkInside","footnoteUrl","textAfter","blockCommentStart","blockCommentEnd","closeBrackets","htmlConfig","autoSelfClosers","area","command","embed","frame","keygen","meta","param","track","wbr","menuitem","implicitlyClosed","li","optgroup","rp","tbody","td","tfoot","tr","contextGrabbers","dt","address","article","aside","dl","fieldset","footer","h1","h2","h3","h4","h5","h6","hgroup","menu","nav","ol","section","ul","thead","doNotIndent","allowUnquoted","allowMissing","xmlConfig","allowMissingTagName","editorConf","config_","setStyle","inText","chain","inBlock","doctype","inTag","baseState","tagName","inAttribute","stringStartCol","closure","isInAttribute","terminator","startOfLine","noIndent","popContext","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","attrState","matchClosing","closeState","closeStateErr","_stream","attrEqState","attrValueState","attrContinuedState","baseIndent","fullLine","multilineTagIndentPastTag","multilineTagIndentFactor","alignCDATA","tagAfter","grabbers","configuration","skipAttribute","xmlCurrentTag","xmlCurrentContext","cx","basePos","baseCur","overlayPos","overlayCur","streamSeen","overlayToken"],"mappings":"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"},"input":"(this[\"webpackJsonppancake-frontend\"] = this[\"webpackJsonppancake-frontend\"] || []).push([[5],{\n\n/***/ 1250:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar CodeMirror = __webpack_require__(565);\n\n__webpack_require__(1251);\n\n__webpack_require__(1252);\n\n__webpack_require__(1253);\n\n__webpack_require__(833);\n\n__webpack_require__(835);\n\n__webpack_require__(1255);\n\n__webpack_require__(1256);\n\n__webpack_require__(1257);\n\n__webpack_require__(1258);\n\n__webpack_require__(1259);\n\n__webpack_require__(834);\n\nvar CodeMirrorSpellChecker = __webpack_require__(1260);\n\nvar marked = __webpack_require__(1263); // Some variables\n\n\nvar isMac = /Mac/.test(navigator.platform);\nvar anchorToExternalRegex = new RegExp(/(<a.*?https?:\\/\\/.*?[^a]>)+?/g); // Mapping of actions that can be bound to keyboard shortcuts or toolbar buttons\n\nvar bindings = {\n  'toggleBold': toggleBold,\n  'toggleItalic': toggleItalic,\n  'drawLink': drawLink,\n  'toggleHeadingSmaller': toggleHeadingSmaller,\n  'toggleHeadingBigger': toggleHeadingBigger,\n  'drawImage': drawImage,\n  'toggleBlockquote': toggleBlockquote,\n  'toggleOrderedList': toggleOrderedList,\n  'toggleUnorderedList': toggleUnorderedList,\n  'toggleCodeBlock': toggleCodeBlock,\n  'togglePreview': togglePreview,\n  'toggleStrikethrough': toggleStrikethrough,\n  'toggleHeading1': toggleHeading1,\n  'toggleHeading2': toggleHeading2,\n  'toggleHeading3': toggleHeading3,\n  'cleanBlock': cleanBlock,\n  'drawTable': drawTable,\n  'drawHorizontalRule': drawHorizontalRule,\n  'undo': undo,\n  'redo': redo,\n  'toggleSideBySide': toggleSideBySide,\n  'toggleFullScreen': toggleFullScreen\n};\nvar shortcuts = {\n  'toggleBold': 'Cmd-B',\n  'toggleItalic': 'Cmd-I',\n  'drawLink': 'Cmd-K',\n  'toggleHeadingSmaller': 'Cmd-H',\n  'toggleHeadingBigger': 'Shift-Cmd-H',\n  'cleanBlock': 'Cmd-E',\n  'drawImage': 'Cmd-Alt-I',\n  'toggleBlockquote': 'Cmd-\\'',\n  'toggleOrderedList': 'Cmd-Alt-L',\n  'toggleUnorderedList': 'Cmd-L',\n  'toggleCodeBlock': 'Cmd-Alt-C',\n  'togglePreview': 'Cmd-P',\n  'toggleSideBySide': 'F9',\n  'toggleFullScreen': 'F11'\n};\n\nvar getBindingName = function getBindingName(f) {\n  for (var key in bindings) {\n    if (bindings[key] === f) {\n      return key;\n    }\n  }\n\n  return null;\n};\n\nvar isMobile = function isMobile() {\n  var check = false;\n\n  (function (a) {\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0, 4))) check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n\n  return check;\n};\n/**\n * Modify HTML to add 'target=\"_blank\"' to links so they open in new tabs by default.\n * @param {string} htmlText - HTML to be modified.\n * @return {string} The modified HTML text.\n */\n\n\nfunction addAnchorTargetBlank(htmlText) {\n  var match;\n\n  while ((match = anchorToExternalRegex.exec(htmlText)) !== null) {\n    // With only one capture group in the RegExp, we can safely take the first index from the match.\n    var linkString = match[0];\n\n    if (linkString.indexOf('target=') === -1) {\n      var fixedLinkString = linkString.replace(/>$/, ' target=\"_blank\">');\n      htmlText = htmlText.replace(linkString, fixedLinkString);\n    }\n  }\n\n  return htmlText;\n}\n/**\n * Modify HTML to remove the list-style when rendering checkboxes.\n * @param {string} htmlText - HTML to be modified.\n * @return {string} The modified HTML text.\n */\n\n\nfunction removeListStyleWhenCheckbox(htmlText) {\n  var parser = new DOMParser();\n  var htmlDoc = parser.parseFromString(htmlText, 'text/html');\n  var listItems = htmlDoc.getElementsByTagName('li');\n\n  for (var i = 0; i < listItems.length; i++) {\n    var listItem = listItems[i];\n\n    for (var j = 0; j < listItem.children.length; j++) {\n      var listItemChild = listItem.children[j];\n\n      if (listItemChild instanceof HTMLInputElement && listItemChild.type === 'checkbox') {\n        // From Github: margin: 0 .2em .25em -1.6em;\n        listItem.style.marginLeft = '-1.5em';\n        listItem.style.listStyleType = 'none';\n      }\n    }\n  }\n\n  return htmlDoc.documentElement.innerHTML;\n}\n/**\n * Fix shortcut. Mac use Command, others use Ctrl.\n */\n\n\nfunction fixShortcut(name) {\n  if (isMac) {\n    name = name.replace('Ctrl', 'Cmd');\n  } else {\n    name = name.replace('Cmd', 'Ctrl');\n  }\n\n  return name;\n}\n/**\n * Class handling utility methods.\n */\n\n\nvar CLASS_REGEX = {};\n/**\n * Convert a className string into a regex for matching (and cache).\n * Note that the RegExp includes trailing spaces for replacement\n * (to ensure that removing a class from the middle of the string will retain\n *  spacing between other classes.)\n * @param {String} className Class name to convert to regex for matching.\n * @returns {RegExp} Regular expression option that will match className.\n */\n\nfunction getClassRegex(className) {\n  return CLASS_REGEX[className] || (CLASS_REGEX[className] = new RegExp('\\\\s*' + className + '(\\\\s*)', 'g'));\n}\n/**\n * Add a class string to an element.\n * @param {Element} el DOM element on which to add className.\n * @param {String} className Class string to apply\n * @returns {void}\n */\n\n\nfunction addClass(el, className) {\n  if (!el || !className) return;\n  var classRegex = getClassRegex(className);\n  if (el.className.match(classRegex)) return; // already applied\n\n  el.className += ' ' + className;\n}\n/**\n * Remove a class string from an element.\n * @param {Element} el DOM element from which to remove className.\n * @param {String} className Class string to remove\n * @returns {void}\n */\n\n\nfunction removeClass(el, className) {\n  if (!el || !className) return;\n  var classRegex = getClassRegex(className);\n  if (!el.className.match(classRegex)) return; // not available to remove\n\n  el.className = el.className.replace(classRegex, '$1');\n}\n/**\n * Create dropdown block\n */\n\n\nfunction createToolbarDropdown(options, enableTooltips, shortcuts, parent) {\n  var el = createToolbarButton(options, false, enableTooltips, shortcuts, 'button', parent);\n  el.className += ' easymde-dropdown';\n  var content = document.createElement('div');\n  content.className = 'easymde-dropdown-content';\n\n  for (var childrenIndex = 0; childrenIndex < options.children.length; childrenIndex++) {\n    var child = options.children[childrenIndex];\n    var childElement;\n\n    if (typeof child === 'string' && child in toolbarBuiltInButtons) {\n      childElement = createToolbarButton(toolbarBuiltInButtons[child], true, enableTooltips, shortcuts, 'button', parent);\n    } else {\n      childElement = createToolbarButton(child, true, enableTooltips, shortcuts, 'button', parent);\n    }\n\n    content.appendChild(childElement);\n  }\n\n  el.appendChild(content);\n  return el;\n}\n/**\n * Create button element for toolbar.\n */\n\n\nfunction createToolbarButton(options, enableActions, enableTooltips, shortcuts, markup, parent) {\n  options = options || {};\n  var el = document.createElement(markup);\n  el.className = options.name;\n  el.setAttribute('type', markup);\n  enableTooltips = enableTooltips == undefined ? true : enableTooltips; // Properly hande custom shortcuts\n\n  if (options.name && options.name in shortcuts) {\n    bindings[options.name] = options.action;\n  }\n\n  if (options.title && enableTooltips) {\n    el.title = createTooltip(options.title, options.action, shortcuts);\n\n    if (isMac) {\n      el.title = el.title.replace('Ctrl', '⌘');\n      el.title = el.title.replace('Alt', '⌥');\n    }\n  }\n\n  if (options.noDisable) {\n    el.classList.add('no-disable');\n  }\n\n  if (options.noMobile) {\n    el.classList.add('no-mobile');\n  } // Prevent errors if there is no class name in custom options\n\n\n  var classNameParts = [];\n\n  if (typeof options.className !== 'undefined') {\n    classNameParts = options.className.split(' ');\n  } // Provide backwards compatibility with simple-markdown-editor by adding custom classes to the button.\n\n\n  var iconClasses = [];\n\n  for (var classNameIndex = 0; classNameIndex < classNameParts.length; classNameIndex++) {\n    var classNamePart = classNameParts[classNameIndex]; // Split icon classes from the button.\n    // Regex will detect \"fa\", \"fas\", \"fa-something\" and \"fa-some-icon-1\", but not \"fanfare\".\n\n    if (classNamePart.match(/^fa([srlb]|(-[\\w-]*)|$)/)) {\n      iconClasses.push(classNamePart);\n    } else {\n      el.classList.add(classNamePart);\n    }\n  }\n\n  el.tabIndex = -1; // Create icon element and append as a child to the button\n\n  var icon = document.createElement('i');\n\n  for (var iconClassIndex = 0; iconClassIndex < iconClasses.length; iconClassIndex++) {\n    var iconClass = iconClasses[iconClassIndex];\n    icon.classList.add(iconClass);\n  }\n\n  el.appendChild(icon); // If there is a custom icon markup set, use that\n\n  if (typeof options.icon !== 'undefined') {\n    el.innerHTML = options.icon;\n  }\n\n  if (options.action && enableActions) {\n    if (typeof options.action === 'function') {\n      el.onclick = function (e) {\n        e.preventDefault();\n        options.action(parent);\n      };\n    } else if (typeof options.action === 'string') {\n      el.onclick = function (e) {\n        e.preventDefault();\n        window.open(options.action, '_blank');\n      };\n    }\n  }\n\n  return el;\n}\n\nfunction createSep() {\n  var el = document.createElement('i');\n  el.className = 'separator';\n  el.innerHTML = '|';\n  return el;\n}\n\nfunction createTooltip(title, action, shortcuts) {\n  var actionName;\n  var tooltip = title;\n\n  if (action) {\n    actionName = getBindingName(action);\n\n    if (shortcuts[actionName]) {\n      tooltip += ' (' + fixShortcut(shortcuts[actionName]) + ')';\n    }\n  }\n\n  return tooltip;\n}\n/**\n * The state of CodeMirror at the given position.\n */\n\n\nfunction getState(cm, pos) {\n  pos = pos || cm.getCursor('start');\n  var stat = cm.getTokenAt(pos);\n  if (!stat.type) return {};\n  var types = stat.type.split(' ');\n  var ret = {},\n      data,\n      text;\n\n  for (var i = 0; i < types.length; i++) {\n    data = types[i];\n\n    if (data === 'strong') {\n      ret.bold = true;\n    } else if (data === 'variable-2') {\n      text = cm.getLine(pos.line);\n\n      if (/^\\s*\\d+\\.\\s/.test(text)) {\n        ret['ordered-list'] = true;\n      } else {\n        ret['unordered-list'] = true;\n      }\n    } else if (data === 'atom') {\n      ret.quote = true;\n    } else if (data === 'em') {\n      ret.italic = true;\n    } else if (data === 'quote') {\n      ret.quote = true;\n    } else if (data === 'strikethrough') {\n      ret.strikethrough = true;\n    } else if (data === 'comment') {\n      ret.code = true;\n    } else if (data === 'link') {\n      ret.link = true;\n    } else if (data === 'tag') {\n      ret.image = true;\n    } else if (data.match(/^header(-[1-6])?$/)) {\n      ret[data.replace('header', 'heading')] = true;\n    }\n  }\n\n  return ret;\n} // Saved overflow setting\n\n\nvar saved_overflow = '';\n/**\n * Toggle full screen of the editor.\n */\n\nfunction toggleFullScreen(editor) {\n  // Set fullscreen\n  var cm = editor.codemirror;\n  cm.setOption('fullScreen', !cm.getOption('fullScreen')); // Prevent scrolling on body during fullscreen active\n\n  if (cm.getOption('fullScreen')) {\n    saved_overflow = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n  } else {\n    document.body.style.overflow = saved_overflow;\n  }\n\n  var wrapper = cm.getWrapperElement();\n  var sidebyside = wrapper.nextSibling;\n\n  if (/editor-preview-active-side/.test(sidebyside.className)) {\n    if (editor.options.sideBySideFullscreen === false) {\n      // if side-by-side not-fullscreen ok, apply classes as needed\n      var easyMDEContainer = wrapper.parentNode;\n\n      if (cm.getOption('fullScreen')) {\n        removeClass(easyMDEContainer, 'sided--no-fullscreen');\n      } else {\n        addClass(easyMDEContainer, 'sided--no-fullscreen');\n      }\n    } else {\n      toggleSideBySide(editor);\n    }\n  }\n\n  if (editor.options.onToggleFullScreen) {\n    editor.options.onToggleFullScreen(cm.getOption('fullScreen') || false);\n  } // Remove or set maxHeight\n\n\n  if (typeof editor.options.maxHeight !== 'undefined') {\n    if (cm.getOption('fullScreen')) {\n      cm.getScrollerElement().style.removeProperty('height');\n      sidebyside.style.removeProperty('height');\n    } else {\n      cm.getScrollerElement().style.height = editor.options.maxHeight;\n      editor.setPreviewMaxHeight();\n    }\n  } // Update toolbar class\n\n\n  if (!/fullscreen/.test(editor.toolbar_div.className)) {\n    editor.toolbar_div.className += ' fullscreen';\n  } else {\n    editor.toolbar_div.className = editor.toolbar_div.className.replace(/\\s*fullscreen\\b/, '');\n  } // Update toolbar button\n\n\n  if (editor.toolbarElements && editor.toolbarElements.fullscreen) {\n    var toolbarButton = editor.toolbarElements.fullscreen;\n\n    if (!/active/.test(toolbarButton.className)) {\n      toolbarButton.className += ' active';\n    } else {\n      toolbarButton.className = toolbarButton.className.replace(/\\s*active\\s*/g, '');\n    }\n  }\n}\n/**\n * Action for toggling bold.\n */\n\n\nfunction toggleBold(editor) {\n  _toggleBlock(editor, 'bold', editor.options.blockStyles.bold);\n}\n/**\n * Action for toggling italic.\n */\n\n\nfunction toggleItalic(editor) {\n  _toggleBlock(editor, 'italic', editor.options.blockStyles.italic);\n}\n/**\n * Action for toggling strikethrough.\n */\n\n\nfunction toggleStrikethrough(editor) {\n  _toggleBlock(editor, 'strikethrough', '~~');\n}\n/**\n * Action for toggling code block.\n */\n\n\nfunction toggleCodeBlock(editor) {\n  var fenceCharsToInsert = editor.options.blockStyles.code;\n\n  function fencing_line(line) {\n    /* return true, if this is a ``` or ~~~ line */\n    if (typeof line !== 'object') {\n      throw 'fencing_line() takes a \\'line\\' object (not a line number, or line text).  Got: ' + typeof line + ': ' + line;\n    }\n\n    return line.styles && line.styles[2] && line.styles[2].indexOf('formatting-code-block') !== -1;\n  }\n\n  function token_state(token) {\n    // base goes an extra level deep when mode backdrops are used, e.g. spellchecker on\n    return token.state.base.base || token.state.base;\n  }\n\n  function code_type(cm, line_num, line, firstTok, lastTok) {\n    /*\n     * Return \"single\", \"indented\", \"fenced\" or false\n     *\n     * cm and line_num are required.  Others are optional for efficiency\n     *   To check in the middle of a line, pass in firstTok yourself.\n     */\n    line = line || cm.getLineHandle(line_num);\n    firstTok = firstTok || cm.getTokenAt({\n      line: line_num,\n      ch: 1\n    });\n    lastTok = lastTok || !!line.text && cm.getTokenAt({\n      line: line_num,\n      ch: line.text.length - 1\n    });\n    var types = firstTok.type ? firstTok.type.split(' ') : [];\n\n    if (lastTok && token_state(lastTok).indentedCode) {\n      // have to check last char, since first chars of first line aren\"t marked as indented\n      return 'indented';\n    } else if (types.indexOf('comment') === -1) {\n      // has to be after \"indented\" check, since first chars of first indented line aren\"t marked as such\n      return false;\n    } else if (token_state(firstTok).fencedChars || token_state(lastTok).fencedChars || fencing_line(line)) {\n      return 'fenced';\n    } else {\n      return 'single';\n    }\n  }\n\n  function insertFencingAtSelection(cm, cur_start, cur_end, fenceCharsToInsert) {\n    var start_line_sel = cur_start.line + 1,\n        end_line_sel = cur_end.line + 1,\n        sel_multi = cur_start.line !== cur_end.line,\n        repl_start = fenceCharsToInsert + '\\n',\n        repl_end = '\\n' + fenceCharsToInsert;\n\n    if (sel_multi) {\n      end_line_sel++;\n    } // handle last char including \\n or not\n\n\n    if (sel_multi && cur_end.ch === 0) {\n      repl_end = fenceCharsToInsert + '\\n';\n      end_line_sel--;\n    }\n\n    _replaceSelection(cm, false, [repl_start, repl_end]);\n\n    cm.setSelection({\n      line: start_line_sel,\n      ch: 0\n    }, {\n      line: end_line_sel,\n      ch: 0\n    });\n  }\n\n  var cm = editor.codemirror,\n      cur_start = cm.getCursor('start'),\n      cur_end = cm.getCursor('end'),\n      tok = cm.getTokenAt({\n    line: cur_start.line,\n    ch: cur_start.ch || 1\n  }),\n      // avoid ch 0 which is a cursor pos but not token\n  line = cm.getLineHandle(cur_start.line),\n      is_code = code_type(cm, cur_start.line, line, tok);\n  var block_start, block_end, lineCount;\n\n  if (is_code === 'single') {\n    // similar to some EasyMDE _toggleBlock logic\n    var start = line.text.slice(0, cur_start.ch).replace('`', ''),\n        end = line.text.slice(cur_start.ch).replace('`', '');\n    cm.replaceRange(start + end, {\n      line: cur_start.line,\n      ch: 0\n    }, {\n      line: cur_start.line,\n      ch: 99999999999999\n    });\n    cur_start.ch--;\n\n    if (cur_start !== cur_end) {\n      cur_end.ch--;\n    }\n\n    cm.setSelection(cur_start, cur_end);\n    cm.focus();\n  } else if (is_code === 'fenced') {\n    if (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n      // use selection\n      // find the fenced line so we know what type it is (tilde, backticks, number of them)\n      for (block_start = cur_start.line; block_start >= 0; block_start--) {\n        line = cm.getLineHandle(block_start);\n\n        if (fencing_line(line)) {\n          break;\n        }\n      }\n\n      var fencedTok = cm.getTokenAt({\n        line: block_start,\n        ch: 1\n      });\n      var fence_chars = token_state(fencedTok).fencedChars;\n      var start_text, start_line;\n      var end_text, end_line; // check for selection going up against fenced lines, in which case we don't want to add more fencing\n\n      if (fencing_line(cm.getLineHandle(cur_start.line))) {\n        start_text = '';\n        start_line = cur_start.line;\n      } else if (fencing_line(cm.getLineHandle(cur_start.line - 1))) {\n        start_text = '';\n        start_line = cur_start.line - 1;\n      } else {\n        start_text = fence_chars + '\\n';\n        start_line = cur_start.line;\n      }\n\n      if (fencing_line(cm.getLineHandle(cur_end.line))) {\n        end_text = '';\n        end_line = cur_end.line;\n\n        if (cur_end.ch === 0) {\n          end_line += 1;\n        }\n      } else if (cur_end.ch !== 0 && fencing_line(cm.getLineHandle(cur_end.line + 1))) {\n        end_text = '';\n        end_line = cur_end.line + 1;\n      } else {\n        end_text = fence_chars + '\\n';\n        end_line = cur_end.line + 1;\n      }\n\n      if (cur_end.ch === 0) {\n        // full last line selected, putting cursor at beginning of next\n        end_line -= 1;\n      }\n\n      cm.operation(function () {\n        // end line first, so that line numbers don't change\n        cm.replaceRange(end_text, {\n          line: end_line,\n          ch: 0\n        }, {\n          line: end_line + (end_text ? 0 : 1),\n          ch: 0\n        });\n        cm.replaceRange(start_text, {\n          line: start_line,\n          ch: 0\n        }, {\n          line: start_line + (start_text ? 0 : 1),\n          ch: 0\n        });\n      });\n      cm.setSelection({\n        line: start_line + (start_text ? 1 : 0),\n        ch: 0\n      }, {\n        line: end_line + (start_text ? 1 : -1),\n        ch: 0\n      });\n      cm.focus();\n    } else {\n      // no selection, search for ends of this fenced block\n      var search_from = cur_start.line;\n\n      if (fencing_line(cm.getLineHandle(cur_start.line))) {\n        // gets a little tricky if cursor is right on a fenced line\n        if (code_type(cm, cur_start.line + 1) === 'fenced') {\n          block_start = cur_start.line;\n          search_from = cur_start.line + 1; // for searching for \"end\"\n        } else {\n          block_end = cur_start.line;\n          search_from = cur_start.line - 1; // for searching for \"start\"\n        }\n      }\n\n      if (block_start === undefined) {\n        for (block_start = search_from; block_start >= 0; block_start--) {\n          line = cm.getLineHandle(block_start);\n\n          if (fencing_line(line)) {\n            break;\n          }\n        }\n      }\n\n      if (block_end === undefined) {\n        lineCount = cm.lineCount();\n\n        for (block_end = search_from; block_end < lineCount; block_end++) {\n          line = cm.getLineHandle(block_end);\n\n          if (fencing_line(line)) {\n            break;\n          }\n        }\n      }\n\n      cm.operation(function () {\n        cm.replaceRange('', {\n          line: block_start,\n          ch: 0\n        }, {\n          line: block_start + 1,\n          ch: 0\n        });\n        cm.replaceRange('', {\n          line: block_end - 1,\n          ch: 0\n        }, {\n          line: block_end,\n          ch: 0\n        });\n      });\n      cm.focus();\n    }\n  } else if (is_code === 'indented') {\n    if (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n      // use selection\n      block_start = cur_start.line;\n      block_end = cur_end.line;\n\n      if (cur_end.ch === 0) {\n        block_end--;\n      }\n    } else {\n      // no selection, search for ends of this indented block\n      for (block_start = cur_start.line; block_start >= 0; block_start--) {\n        line = cm.getLineHandle(block_start);\n\n        if (line.text.match(/^\\s*$/)) {\n          // empty or all whitespace - keep going\n          continue;\n        } else {\n          if (code_type(cm, block_start, line) !== 'indented') {\n            block_start += 1;\n            break;\n          }\n        }\n      }\n\n      lineCount = cm.lineCount();\n\n      for (block_end = cur_start.line; block_end < lineCount; block_end++) {\n        line = cm.getLineHandle(block_end);\n\n        if (line.text.match(/^\\s*$/)) {\n          // empty or all whitespace - keep going\n          continue;\n        } else {\n          if (code_type(cm, block_end, line) !== 'indented') {\n            block_end -= 1;\n            break;\n          }\n        }\n      }\n    } // if we are going to un-indent based on a selected set of lines, and the next line is indented too, we need to\n    // insert a blank line so that the next line(s) continue to be indented code\n\n\n    var next_line = cm.getLineHandle(block_end + 1),\n        next_line_last_tok = next_line && cm.getTokenAt({\n      line: block_end + 1,\n      ch: next_line.text.length - 1\n    }),\n        next_line_indented = next_line_last_tok && token_state(next_line_last_tok).indentedCode;\n\n    if (next_line_indented) {\n      cm.replaceRange('\\n', {\n        line: block_end + 1,\n        ch: 0\n      });\n    }\n\n    for (var i = block_start; i <= block_end; i++) {\n      cm.indentLine(i, 'subtract'); // TODO: this doesn't get tracked in the history, so can't be undone :(\n    }\n\n    cm.focus();\n  } else {\n    // insert code formatting\n    var no_sel_and_starting_of_line = cur_start.line === cur_end.line && cur_start.ch === cur_end.ch && cur_start.ch === 0;\n    var sel_multi = cur_start.line !== cur_end.line;\n\n    if (no_sel_and_starting_of_line || sel_multi) {\n      insertFencingAtSelection(cm, cur_start, cur_end, fenceCharsToInsert);\n    } else {\n      _replaceSelection(cm, false, ['`', '`']);\n    }\n  }\n}\n/**\n * Action for toggling blockquote.\n */\n\n\nfunction toggleBlockquote(editor) {\n  var cm = editor.codemirror;\n\n  _toggleLine(cm, 'quote');\n}\n/**\n * Action for toggling heading size: normal -> h1 -> h2 -> h3 -> h4 -> h5 -> h6 -> normal\n */\n\n\nfunction toggleHeadingSmaller(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, 'smaller');\n}\n/**\n * Action for toggling heading size: normal -> h6 -> h5 -> h4 -> h3 -> h2 -> h1 -> normal\n */\n\n\nfunction toggleHeadingBigger(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, 'bigger');\n}\n/**\n * Action for toggling heading size 1\n */\n\n\nfunction toggleHeading1(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, undefined, 1);\n}\n/**\n * Action for toggling heading size 2\n */\n\n\nfunction toggleHeading2(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, undefined, 2);\n}\n/**\n * Action for toggling heading size 3\n */\n\n\nfunction toggleHeading3(editor) {\n  var cm = editor.codemirror;\n\n  _toggleHeading(cm, undefined, 3);\n}\n/**\n * Action for toggling ul.\n */\n\n\nfunction toggleUnorderedList(editor) {\n  var cm = editor.codemirror;\n\n  _toggleLine(cm, 'unordered-list');\n}\n/**\n * Action for toggling ol.\n */\n\n\nfunction toggleOrderedList(editor) {\n  var cm = editor.codemirror;\n\n  _toggleLine(cm, 'ordered-list');\n}\n/**\n * Action for clean block (remove headline, list, blockquote code, markers)\n */\n\n\nfunction cleanBlock(editor) {\n  var cm = editor.codemirror;\n\n  _cleanBlock(cm);\n}\n/**\n * Action for drawing a link.\n */\n\n\nfunction drawLink(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n  var url = 'https://';\n\n  if (options.promptURLs) {\n    url = prompt(options.promptTexts.link, 'https://');\n\n    if (!url) {\n      return false;\n    }\n  }\n\n  _replaceSelection(cm, stat.link, options.insertTexts.link, url);\n}\n/**\n * Action for drawing an img.\n */\n\n\nfunction drawImage(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n  var url = 'https://';\n\n  if (options.promptURLs) {\n    url = prompt(options.promptTexts.image, 'https://');\n\n    if (!url) {\n      return false;\n    }\n  }\n\n  _replaceSelection(cm, stat.image, options.insertTexts.image, url);\n}\n/**\n * Action for opening the browse-file window to upload an image to a server.\n * @param editor {EasyMDE} The EasyMDE object\n */\n\n\nfunction drawUploadedImage(editor) {\n  // TODO: Draw the image template with a fake url? ie: '![](importing foo.png...)'\n  editor.openBrowseFileWindow();\n}\n/**\n * Action executed after an image have been successfully imported on the server.\n * @param editor {EasyMDE} The EasyMDE object\n * @param url {string} The url of the uploaded image\n */\n\n\nfunction afterImageUploaded(editor, url) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n  var imageName = url.substr(url.lastIndexOf('/') + 1);\n  var ext = imageName.substring(imageName.lastIndexOf('.') + 1).replace(/\\?.*$/, ''); // Check if media is an image\n\n  if (['png', 'jpg', 'jpeg', 'gif', 'svg'].includes(ext)) {\n    _replaceSelection(cm, stat.image, options.insertTexts.uploadedImage, url);\n  } else {\n    var text_link = options.insertTexts.link;\n    text_link[0] = '[' + imageName;\n\n    _replaceSelection(cm, stat.link, text_link, url);\n  } // show uploaded image filename for 1000ms\n\n\n  editor.updateStatusBar('upload-image', editor.options.imageTexts.sbOnUploaded.replace('#image_name#', imageName));\n  setTimeout(function () {\n    editor.updateStatusBar('upload-image', editor.options.imageTexts.sbInit);\n  }, 1000);\n}\n/**\n * Action for drawing a table.\n */\n\n\nfunction drawTable(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n\n  _replaceSelection(cm, stat.table, options.insertTexts.table);\n}\n/**\n * Action for drawing a horizontal rule.\n */\n\n\nfunction drawHorizontalRule(editor) {\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var options = editor.options;\n\n  _replaceSelection(cm, stat.image, options.insertTexts.horizontalRule);\n}\n/**\n * Undo action.\n */\n\n\nfunction undo(editor) {\n  var cm = editor.codemirror;\n  cm.undo();\n  cm.focus();\n}\n/**\n * Redo action.\n */\n\n\nfunction redo(editor) {\n  var cm = editor.codemirror;\n  cm.redo();\n  cm.focus();\n}\n/**\n * Toggle side by side preview\n */\n\n\nfunction toggleSideBySide(editor) {\n  var cm = editor.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.nextSibling;\n  var toolbarButton = editor.toolbarElements && editor.toolbarElements['side-by-side'];\n  var useSideBySideListener = false;\n  var easyMDEContainer = wrapper.parentNode;\n\n  if (/editor-preview-active-side/.test(preview.className)) {\n    if (editor.options.sideBySideFullscreen === false) {\n      // if side-by-side not-fullscreen ok, remove classes when hiding side\n      removeClass(easyMDEContainer, 'sided--no-fullscreen');\n    }\n\n    preview.className = preview.className.replace(/\\s*editor-preview-active-side\\s*/g, '');\n    if (toolbarButton) toolbarButton.className = toolbarButton.className.replace(/\\s*active\\s*/g, '');\n    wrapper.className = wrapper.className.replace(/\\s*CodeMirror-sided\\s*/g, ' ');\n  } else {\n    // When the preview button is clicked for the first time,\n    // give some time for the transition from editor.css to fire and the view to slide from right to left,\n    // instead of just appearing.\n    setTimeout(function () {\n      if (!cm.getOption('fullScreen')) {\n        if (editor.options.sideBySideFullscreen === false) {\n          // if side-by-side not-fullscreen ok, add classes when not fullscreen and showing side\n          addClass(easyMDEContainer, 'sided--no-fullscreen');\n        } else {\n          toggleFullScreen(editor);\n        }\n      }\n\n      preview.className += ' editor-preview-active-side';\n    }, 1);\n    if (toolbarButton) toolbarButton.className += ' active';\n    wrapper.className += ' CodeMirror-sided';\n    useSideBySideListener = true;\n  } // Hide normal preview if active\n\n\n  var previewNormal = wrapper.lastChild;\n\n  if (/editor-preview-active/.test(previewNormal.className)) {\n    previewNormal.className = previewNormal.className.replace(/\\s*editor-preview-active\\s*/g, '');\n    var toolbar = editor.toolbarElements.preview;\n    var toolbar_div = editor.toolbar_div;\n    toolbar.className = toolbar.className.replace(/\\s*active\\s*/g, '');\n    toolbar_div.className = toolbar_div.className.replace(/\\s*disabled-for-preview*/g, '');\n  }\n\n  var sideBySideRenderingFunction = function sideBySideRenderingFunction() {\n    var newValue = editor.options.previewRender(editor.value(), preview);\n\n    if (newValue != null) {\n      preview.innerHTML = newValue;\n    }\n  };\n\n  if (!cm.sideBySideRenderingFunction) {\n    cm.sideBySideRenderingFunction = sideBySideRenderingFunction;\n  }\n\n  if (useSideBySideListener) {\n    var newValue = editor.options.previewRender(editor.value(), preview);\n\n    if (newValue != null) {\n      preview.innerHTML = newValue;\n    }\n\n    cm.on('update', cm.sideBySideRenderingFunction);\n  } else {\n    cm.off('update', cm.sideBySideRenderingFunction);\n  } // Refresh to fix selection being off (#309)\n\n\n  cm.refresh();\n}\n/**\n * Preview action.\n */\n\n\nfunction togglePreview(editor) {\n  var cm = editor.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var toolbar_div = editor.toolbar_div;\n  var toolbar = editor.options.toolbar ? editor.toolbarElements.preview : false;\n  var preview = wrapper.lastChild; // Turn off side by side if needed\n\n  var sidebyside = cm.getWrapperElement().nextSibling;\n  if (/editor-preview-active-side/.test(sidebyside.className)) toggleSideBySide(editor);\n\n  if (!preview || !/editor-preview-full/.test(preview.className)) {\n    preview = document.createElement('div');\n    preview.className = 'editor-preview-full';\n\n    if (editor.options.previewClass) {\n      if (Array.isArray(editor.options.previewClass)) {\n        for (var i = 0; i < editor.options.previewClass.length; i++) {\n          preview.className += ' ' + editor.options.previewClass[i];\n        }\n      } else if (typeof editor.options.previewClass === 'string') {\n        preview.className += ' ' + editor.options.previewClass;\n      }\n    }\n\n    wrapper.appendChild(preview);\n  }\n\n  if (/editor-preview-active/.test(preview.className)) {\n    preview.className = preview.className.replace(/\\s*editor-preview-active\\s*/g, '');\n\n    if (toolbar) {\n      toolbar.className = toolbar.className.replace(/\\s*active\\s*/g, '');\n      toolbar_div.className = toolbar_div.className.replace(/\\s*disabled-for-preview*/g, '');\n    }\n  } else {\n    // When the preview button is clicked for the first time,\n    // give some time for the transition from editor.css to fire and the view to slide from right to left,\n    // instead of just appearing.\n    setTimeout(function () {\n      preview.className += ' editor-preview-active';\n    }, 1);\n\n    if (toolbar) {\n      toolbar.className += ' active';\n      toolbar_div.className += ' disabled-for-preview';\n    }\n  }\n\n  preview.innerHTML = editor.options.previewRender(editor.value(), preview);\n}\n\nfunction _replaceSelection(cm, active, startEnd, url) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var text;\n  var start = startEnd[0];\n  var end = startEnd[1];\n  var startPoint = {},\n      endPoint = {};\n  Object.assign(startPoint, cm.getCursor('start'));\n  Object.assign(endPoint, cm.getCursor('end'));\n\n  if (url) {\n    start = start.replace('#url#', url); // url is in start for upload-image\n\n    end = end.replace('#url#', url);\n  }\n\n  if (active) {\n    text = cm.getLine(startPoint.line);\n    start = text.slice(0, startPoint.ch);\n    end = text.slice(startPoint.ch);\n    cm.replaceRange(start + end, {\n      line: startPoint.line,\n      ch: 0\n    });\n  } else {\n    text = cm.getSelection();\n    cm.replaceSelection(start + text + end);\n    startPoint.ch += start.length;\n\n    if (startPoint !== endPoint) {\n      endPoint.ch += start.length;\n    }\n  }\n\n  cm.setSelection(startPoint, endPoint);\n  cm.focus();\n}\n\nfunction _toggleHeading(cm, direction, size) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n\n  for (var i = startPoint.line; i <= endPoint.line; i++) {\n    (function (i) {\n      var text = cm.getLine(i);\n      var currHeadingLevel = text.search(/[^#]/);\n\n      if (direction !== undefined) {\n        if (currHeadingLevel <= 0) {\n          if (direction == 'bigger') {\n            text = '###### ' + text;\n          } else {\n            text = '# ' + text;\n          }\n        } else if (currHeadingLevel == 6 && direction == 'smaller') {\n          text = text.substr(7);\n        } else if (currHeadingLevel == 1 && direction == 'bigger') {\n          text = text.substr(2);\n        } else {\n          if (direction == 'bigger') {\n            text = text.substr(1);\n          } else {\n            text = '#' + text;\n          }\n        }\n      } else {\n        if (size == 1) {\n          if (currHeadingLevel <= 0) {\n            text = '# ' + text;\n          } else if (currHeadingLevel == size) {\n            text = text.substr(currHeadingLevel + 1);\n          } else {\n            text = '# ' + text.substr(currHeadingLevel + 1);\n          }\n        } else if (size == 2) {\n          if (currHeadingLevel <= 0) {\n            text = '## ' + text;\n          } else if (currHeadingLevel == size) {\n            text = text.substr(currHeadingLevel + 1);\n          } else {\n            text = '## ' + text.substr(currHeadingLevel + 1);\n          }\n        } else {\n          if (currHeadingLevel <= 0) {\n            text = '### ' + text;\n          } else if (currHeadingLevel == size) {\n            text = text.substr(currHeadingLevel + 1);\n          } else {\n            text = '### ' + text.substr(currHeadingLevel + 1);\n          }\n        }\n      }\n\n      cm.replaceRange(text, {\n        line: i,\n        ch: 0\n      }, {\n        line: i,\n        ch: 99999999999999\n      });\n    })(i);\n  }\n\n  cm.focus();\n}\n\nfunction _toggleLine(cm, name) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var listRegexp = /^(\\s*)(\\*|-|\\+|\\d*\\.)(\\s+)/;\n  var whitespacesRegexp = /^\\s*/;\n  var stat = getState(cm);\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n  var repl = {\n    'quote': /^(\\s*)>\\s+/,\n    'unordered-list': listRegexp,\n    'ordered-list': listRegexp\n  };\n\n  var _getChar = function _getChar(name, i) {\n    var map = {\n      'quote': '>',\n      'unordered-list': '*',\n      'ordered-list': '%%i.'\n    };\n    return map[name].replace('%%i', i);\n  };\n\n  var _checkChar = function _checkChar(name, char) {\n    var map = {\n      'quote': '>',\n      'unordered-list': '*',\n      'ordered-list': '\\\\d+.'\n    };\n    var rt = new RegExp(map[name]);\n    return char && rt.test(char);\n  };\n\n  var _toggle = function _toggle(name, text, untoggleOnly) {\n    var arr = listRegexp.exec(text);\n\n    var char = _getChar(name, line);\n\n    if (arr !== null) {\n      if (_checkChar(name, arr[2])) {\n        char = '';\n      }\n\n      text = arr[1] + char + arr[3] + text.replace(whitespacesRegexp, '').replace(repl[name], '$1');\n    } else if (untoggleOnly == false) {\n      text = char + ' ' + text;\n    }\n\n    return text;\n  };\n\n  var line = 1;\n\n  for (var i = startPoint.line; i <= endPoint.line; i++) {\n    (function (i) {\n      var text = cm.getLine(i);\n\n      if (stat[name]) {\n        text = text.replace(repl[name], '$1');\n      } else {\n        // If we're toggling unordered-list formatting, check if the current line\n        // is part of an ordered-list, and if so, untoggle that first.\n        // Workaround for https://github.com/Ionaru/easy-markdown-editor/issues/92\n        if (name == 'unordered-list') {\n          text = _toggle('ordered-list', text, true);\n        }\n\n        text = _toggle(name, text, false);\n        line += 1;\n      }\n\n      cm.replaceRange(text, {\n        line: i,\n        ch: 0\n      }, {\n        line: i,\n        ch: 99999999999999\n      });\n    })(i);\n  }\n\n  cm.focus();\n}\n\nfunction _toggleBlock(editor, type, start_chars, end_chars) {\n  if (/editor-preview-active/.test(editor.codemirror.getWrapperElement().lastChild.className)) return;\n  end_chars = typeof end_chars === 'undefined' ? start_chars : end_chars;\n  var cm = editor.codemirror;\n  var stat = getState(cm);\n  var text;\n  var start = start_chars;\n  var end = end_chars;\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n\n  if (stat[type]) {\n    text = cm.getLine(startPoint.line);\n    start = text.slice(0, startPoint.ch);\n    end = text.slice(startPoint.ch);\n\n    if (type == 'bold') {\n      start = start.replace(/(\\*\\*|__)(?![\\s\\S]*(\\*\\*|__))/, '');\n      end = end.replace(/(\\*\\*|__)/, '');\n    } else if (type == 'italic') {\n      start = start.replace(/(\\*|_)(?![\\s\\S]*(\\*|_))/, '');\n      end = end.replace(/(\\*|_)/, '');\n    } else if (type == 'strikethrough') {\n      start = start.replace(/(\\*\\*|~~)(?![\\s\\S]*(\\*\\*|~~))/, '');\n      end = end.replace(/(\\*\\*|~~)/, '');\n    }\n\n    cm.replaceRange(start + end, {\n      line: startPoint.line,\n      ch: 0\n    }, {\n      line: startPoint.line,\n      ch: 99999999999999\n    });\n\n    if (type == 'bold' || type == 'strikethrough') {\n      startPoint.ch -= 2;\n\n      if (startPoint !== endPoint) {\n        endPoint.ch -= 2;\n      }\n    } else if (type == 'italic') {\n      startPoint.ch -= 1;\n\n      if (startPoint !== endPoint) {\n        endPoint.ch -= 1;\n      }\n    }\n  } else {\n    text = cm.getSelection();\n\n    if (type == 'bold') {\n      text = text.split('**').join('');\n      text = text.split('__').join('');\n    } else if (type == 'italic') {\n      text = text.split('*').join('');\n      text = text.split('_').join('');\n    } else if (type == 'strikethrough') {\n      text = text.split('~~').join('');\n    }\n\n    cm.replaceSelection(start + text + end);\n    startPoint.ch += start_chars.length;\n    endPoint.ch = startPoint.ch + text.length;\n  }\n\n  cm.setSelection(startPoint, endPoint);\n  cm.focus();\n}\n\nfunction _cleanBlock(cm) {\n  if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className)) return;\n  var startPoint = cm.getCursor('start');\n  var endPoint = cm.getCursor('end');\n  var text;\n\n  for (var line = startPoint.line; line <= endPoint.line; line++) {\n    text = cm.getLine(line);\n    text = text.replace(/^[ ]*([# ]+|\\*|-|[> ]+|[0-9]+(.|\\)))[ ]*/, '');\n    cm.replaceRange(text, {\n      line: line,\n      ch: 0\n    }, {\n      line: line,\n      ch: 99999999999999\n    });\n  }\n}\n/**\n * Convert a number of bytes to a human-readable file size. If you desire\n * to add a space between the value and the unit, you need to add this space\n * to the given units.\n * @param bytes {integer} A number of bytes, as integer. Ex: 421137\n * @param units {number[]} An array of human-readable units, ie. [' B', ' K', ' MB']\n * @returns string A human-readable file size. Ex: '412 KB'\n */\n\n\nfunction humanFileSize(bytes, units) {\n  if (Math.abs(bytes) < 1024) {\n    return '' + bytes + units[0];\n  }\n\n  var u = 0;\n\n  do {\n    bytes /= 1024;\n    ++u;\n  } while (Math.abs(bytes) >= 1024 && u < units.length);\n\n  return '' + bytes.toFixed(1) + units[u];\n} // Merge the properties of one object into another.\n\n\nfunction _mergeProperties(target, source) {\n  for (var property in source) {\n    if (Object.prototype.hasOwnProperty.call(source, property)) {\n      if (source[property] instanceof Array) {\n        target[property] = source[property].concat(target[property] instanceof Array ? target[property] : []);\n      } else if (source[property] !== null && typeof source[property] === 'object' && source[property].constructor === Object) {\n        target[property] = _mergeProperties(target[property] || {}, source[property]);\n      } else {\n        target[property] = source[property];\n      }\n    }\n  }\n\n  return target;\n} // Merge an arbitrary number of objects into one.\n\n\nfunction extend(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    target = _mergeProperties(target, arguments[i]);\n  }\n\n  return target;\n}\n/* The right word count in respect for CJK. */\n\n\nfunction wordCount(data) {\n  var pattern = /[a-zA-Z0-9_\\u00A0-\\u02AF\\u0392-\\u03c9\\u0410-\\u04F9]+|[\\u4E00-\\u9FFF\\u3400-\\u4dbf\\uf900-\\ufaff\\u3040-\\u309f\\uac00-\\ud7af]+/g;\n  var m = data.match(pattern);\n  var count = 0;\n  if (m === null) return count;\n\n  for (var i = 0; i < m.length; i++) {\n    if (m[i].charCodeAt(0) >= 0x4E00) {\n      count += m[i].length;\n    } else {\n      count += 1;\n    }\n  }\n\n  return count;\n}\n\nvar toolbarBuiltInButtons = {\n  'bold': {\n    name: 'bold',\n    action: toggleBold,\n    className: 'fa fa-bold',\n    title: 'Bold',\n    default: true\n  },\n  'italic': {\n    name: 'italic',\n    action: toggleItalic,\n    className: 'fa fa-italic',\n    title: 'Italic',\n    default: true\n  },\n  'strikethrough': {\n    name: 'strikethrough',\n    action: toggleStrikethrough,\n    className: 'fa fa-strikethrough',\n    title: 'Strikethrough'\n  },\n  'heading': {\n    name: 'heading',\n    action: toggleHeadingSmaller,\n    className: 'fa fa-header fa-heading',\n    title: 'Heading',\n    default: true\n  },\n  'heading-smaller': {\n    name: 'heading-smaller',\n    action: toggleHeadingSmaller,\n    className: 'fa fa-header fa-heading header-smaller',\n    title: 'Smaller Heading'\n  },\n  'heading-bigger': {\n    name: 'heading-bigger',\n    action: toggleHeadingBigger,\n    className: 'fa fa-header fa-heading header-bigger',\n    title: 'Bigger Heading'\n  },\n  'heading-1': {\n    name: 'heading-1',\n    action: toggleHeading1,\n    className: 'fa fa-header fa-heading header-1',\n    title: 'Big Heading'\n  },\n  'heading-2': {\n    name: 'heading-2',\n    action: toggleHeading2,\n    className: 'fa fa-header fa-heading header-2',\n    title: 'Medium Heading'\n  },\n  'heading-3': {\n    name: 'heading-3',\n    action: toggleHeading3,\n    className: 'fa fa-header fa-heading header-3',\n    title: 'Small Heading'\n  },\n  'separator-1': {\n    name: 'separator-1'\n  },\n  'code': {\n    name: 'code',\n    action: toggleCodeBlock,\n    className: 'fa fa-code',\n    title: 'Code'\n  },\n  'quote': {\n    name: 'quote',\n    action: toggleBlockquote,\n    className: 'fa fa-quote-left',\n    title: 'Quote',\n    default: true\n  },\n  'unordered-list': {\n    name: 'unordered-list',\n    action: toggleUnorderedList,\n    className: 'fa fa-list-ul',\n    title: 'Generic List',\n    default: true\n  },\n  'ordered-list': {\n    name: 'ordered-list',\n    action: toggleOrderedList,\n    className: 'fa fa-list-ol',\n    title: 'Numbered List',\n    default: true\n  },\n  'clean-block': {\n    name: 'clean-block',\n    action: cleanBlock,\n    className: 'fa fa-eraser',\n    title: 'Clean block'\n  },\n  'separator-2': {\n    name: 'separator-2'\n  },\n  'link': {\n    name: 'link',\n    action: drawLink,\n    className: 'fa fa-link',\n    title: 'Create Link',\n    default: true\n  },\n  'image': {\n    name: 'image',\n    action: drawImage,\n    className: 'fa fa-image',\n    title: 'Insert Image',\n    default: true\n  },\n  'upload-image': {\n    name: 'upload-image',\n    action: drawUploadedImage,\n    className: 'fa fa-image',\n    title: 'Import an image'\n  },\n  'table': {\n    name: 'table',\n    action: drawTable,\n    className: 'fa fa-table',\n    title: 'Insert Table'\n  },\n  'horizontal-rule': {\n    name: 'horizontal-rule',\n    action: drawHorizontalRule,\n    className: 'fa fa-minus',\n    title: 'Insert Horizontal Line'\n  },\n  'separator-3': {\n    name: 'separator-3'\n  },\n  'preview': {\n    name: 'preview',\n    action: togglePreview,\n    className: 'fa fa-eye',\n    noDisable: true,\n    title: 'Toggle Preview',\n    default: true\n  },\n  'side-by-side': {\n    name: 'side-by-side',\n    action: toggleSideBySide,\n    className: 'fa fa-columns',\n    noDisable: true,\n    noMobile: true,\n    title: 'Toggle Side by Side',\n    default: true\n  },\n  'fullscreen': {\n    name: 'fullscreen',\n    action: toggleFullScreen,\n    className: 'fa fa-arrows-alt',\n    noDisable: true,\n    noMobile: true,\n    title: 'Toggle Fullscreen',\n    default: true\n  },\n  'separator-4': {\n    name: 'separator-4'\n  },\n  'guide': {\n    name: 'guide',\n    action: 'https://www.markdownguide.org/basic-syntax/',\n    className: 'fa fa-question-circle',\n    noDisable: true,\n    title: 'Markdown Guide',\n    default: true\n  },\n  'separator-5': {\n    name: 'separator-5'\n  },\n  'undo': {\n    name: 'undo',\n    action: undo,\n    className: 'fa fa-undo',\n    noDisable: true,\n    title: 'Undo'\n  },\n  'redo': {\n    name: 'redo',\n    action: redo,\n    className: 'fa fa-repeat fa-redo',\n    noDisable: true,\n    title: 'Redo'\n  }\n};\nvar insertTexts = {\n  link: ['[', '](#url#)'],\n  image: ['![](', '#url#)'],\n  uploadedImage: ['![](#url#)', ''],\n  // uploadedImage: ['![](#url#)\\n', ''], // TODO: New line insertion doesn't work here.\n  table: ['', '\\n\\n| Column 1 | Column 2 | Column 3 |\\n| -------- | -------- | -------- |\\n| Text     | Text     | Text     |\\n\\n'],\n  horizontalRule: ['', '\\n\\n-----\\n\\n']\n};\nvar promptTexts = {\n  link: 'URL for the link:',\n  image: 'URL of the image:'\n};\nvar timeFormat = {\n  locale: 'en-US',\n  format: {\n    hour: '2-digit',\n    minute: '2-digit'\n  }\n};\nvar blockStyles = {\n  'bold': '**',\n  'code': '```',\n  'italic': '*'\n};\n/**\n * Texts displayed to the user (mainly on the status bar) for the import image\n * feature. Can be used for customization or internationalization.\n */\n\nvar imageTexts = {\n  sbInit: 'Attach files by drag and dropping or pasting from clipboard.',\n  sbOnDragEnter: 'Drop image to upload it.',\n  sbOnDrop: 'Uploading image #images_names#...',\n  sbProgress: 'Uploading #file_name#: #progress#%',\n  sbOnUploaded: 'Uploaded #image_name#',\n  sizeUnits: ' B, KB, MB'\n};\n/**\n * Errors displayed to the user, using the `errorCallback` option. Can be used for\n * customization or internationalization.\n */\n\nvar errorMessages = {\n  noFileGiven: 'You must select a file.',\n  typeNotAllowed: 'This image type is not allowed.',\n  fileTooLarge: 'Image #image_name# is too big (#image_size#).\\n' + 'Maximum file size is #image_max_size#.',\n  importError: 'Something went wrong when uploading the image #image_name#.'\n};\n/**\n * Interface of EasyMDE.\n */\n\nfunction EasyMDE(options) {\n  // Handle options parameter\n  options = options || {}; // Used later to refer to it\"s parent\n\n  options.parent = this; // Check if Font Awesome needs to be auto downloaded\n\n  var autoDownloadFA = true;\n\n  if (options.autoDownloadFontAwesome === false) {\n    autoDownloadFA = false;\n  }\n\n  if (options.autoDownloadFontAwesome !== true) {\n    var styleSheets = document.styleSheets;\n\n    for (var i = 0; i < styleSheets.length; i++) {\n      if (!styleSheets[i].href) continue;\n\n      if (styleSheets[i].href.indexOf('//maxcdn.bootstrapcdn.com/font-awesome/') > -1) {\n        autoDownloadFA = false;\n      }\n    }\n  }\n\n  if (autoDownloadFA) {\n    var link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = 'https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css';\n    document.getElementsByTagName('head')[0].appendChild(link);\n  } // Find the textarea to use\n\n\n  if (options.element) {\n    this.element = options.element;\n  } else if (options.element === null) {\n    // This means that the element option was specified, but no element was found\n    console.log('EasyMDE: Error. No element was found.');\n    return;\n  } // Handle toolbar\n\n\n  if (options.toolbar === undefined) {\n    // Initialize\n    options.toolbar = []; // Loop over the built in buttons, to get the preferred order\n\n    for (var key in toolbarBuiltInButtons) {\n      if (Object.prototype.hasOwnProperty.call(toolbarBuiltInButtons, key)) {\n        if (key.indexOf('separator-') != -1) {\n          options.toolbar.push('|');\n        }\n\n        if (toolbarBuiltInButtons[key].default === true || options.showIcons && options.showIcons.constructor === Array && options.showIcons.indexOf(key) != -1) {\n          options.toolbar.push(key);\n        }\n      }\n    }\n  } // Editor preview styling class.\n\n\n  if (!Object.prototype.hasOwnProperty.call(options, 'previewClass')) {\n    options.previewClass = 'editor-preview';\n  } // Handle status bar\n\n\n  if (!Object.prototype.hasOwnProperty.call(options, 'status')) {\n    options.status = ['autosave', 'lines', 'words', 'cursor'];\n\n    if (options.uploadImage) {\n      options.status.unshift('upload-image');\n    }\n  } // Add default preview rendering function\n\n\n  if (!options.previewRender) {\n    options.previewRender = function (plainText) {\n      // Note: \"this\" refers to the options object\n      return this.parent.markdown(plainText);\n    };\n  } // Set default options for parsing config\n\n\n  options.parsingConfig = extend({\n    highlightFormatting: true // needed for toggleCodeBlock to detect types of code\n\n  }, options.parsingConfig || {}); // Merging the insertTexts, with the given options\n\n  options.insertTexts = extend({}, insertTexts, options.insertTexts || {}); // Merging the promptTexts, with the given options\n\n  options.promptTexts = extend({}, promptTexts, options.promptTexts || {}); // Merging the blockStyles, with the given options\n\n  options.blockStyles = extend({}, blockStyles, options.blockStyles || {});\n\n  if (options.autosave != undefined) {\n    // Merging the Autosave timeFormat, with the given options\n    options.autosave.timeFormat = extend({}, timeFormat, options.autosave.timeFormat || {});\n  } // Merging the shortcuts, with the given options\n\n\n  options.shortcuts = extend({}, shortcuts, options.shortcuts || {});\n  options.maxHeight = options.maxHeight || undefined;\n\n  if (typeof options.maxHeight !== 'undefined') {\n    // Min and max height are equal if maxHeight is set\n    options.minHeight = options.maxHeight;\n  } else {\n    options.minHeight = options.minHeight || '300px';\n  }\n\n  options.errorCallback = options.errorCallback || function (errorMessage) {\n    alert(errorMessage);\n  }; // Import-image default configuration\n\n\n  options.uploadImage = options.uploadImage || false;\n  options.imageMaxSize = options.imageMaxSize || 2097152; // 1024 * 1024 * 2\n\n  options.imageAccept = options.imageAccept || 'image/png, image/jpeg';\n  options.imageTexts = extend({}, imageTexts, options.imageTexts || {});\n  options.errorMessages = extend({}, errorMessages, options.errorMessages || {}); // Change unique_id to uniqueId for backwards compatibility\n\n  if (options.autosave != undefined && options.autosave.unique_id != undefined && options.autosave.unique_id != '') options.autosave.uniqueId = options.autosave.unique_id; // If overlay mode is specified and combine is not provided, default it to true\n\n  if (options.overlayMode && options.overlayMode.combine === undefined) {\n    options.overlayMode.combine = true;\n  } // Update this options\n\n\n  this.options = options; // Auto render\n\n  this.render(); // The codemirror component is only available after rendering\n  // so, the setter for the initialValue can only run after\n  // the element has been rendered\n\n  if (options.initialValue && (!this.options.autosave || this.options.autosave.foundSavedValue !== true)) {\n    this.value(options.initialValue);\n  }\n\n  if (options.uploadImage) {\n    var self = this;\n    this.codemirror.on('dragenter', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbOnDragEnter);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('dragend', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('dragleave', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('dragover', function (cm, event) {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbOnDragEnter);\n      event.stopPropagation();\n      event.preventDefault();\n    });\n    this.codemirror.on('drop', function (cm, event) {\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (options.imageUploadFunction) {\n        self.uploadImagesUsingCustomFunction(options.imageUploadFunction, event.dataTransfer.files);\n      } else {\n        self.uploadImages(event.dataTransfer.files);\n      }\n    });\n    this.codemirror.on('paste', function (cm, event) {\n      if (options.imageUploadFunction) {\n        self.uploadImagesUsingCustomFunction(options.imageUploadFunction, event.clipboardData.files);\n      } else {\n        self.uploadImages(event.clipboardData.files);\n      }\n    });\n  }\n}\n/**\n * Upload asynchronously a list of images to a server.\n *\n * Can be triggered by:\n * - drag&drop;\n * - copy-paste;\n * - the browse-file window (opened when the user clicks on the *upload-image* icon).\n * @param {FileList} files The files to upload the the server.\n * @param [onSuccess] {function} see EasyMDE.prototype.uploadImage\n * @param [onError] {function} see EasyMDE.prototype.uploadImage\n */\n\n\nEasyMDE.prototype.uploadImages = function (files, onSuccess, onError) {\n  if (files.length === 0) {\n    return;\n  }\n\n  var names = [];\n\n  for (var i = 0; i < files.length; i++) {\n    names.push(files[i].name);\n    this.uploadImage(files[i], onSuccess, onError);\n  }\n\n  this.updateStatusBar('upload-image', this.options.imageTexts.sbOnDrop.replace('#images_names#', names.join(', ')));\n};\n/**\n * Upload asynchronously a list of images to a server.\n *\n * Can be triggered by:\n * - drag&drop;\n * - copy-paste;\n * - the browse-file window (opened when the user clicks on the *upload-image* icon).\n * @param imageUploadFunction {Function} The custom function to upload the image passed in options.\n * @param {FileList} files The files to upload the the server.\n */\n\n\nEasyMDE.prototype.uploadImagesUsingCustomFunction = function (imageUploadFunction, files) {\n  if (files.length === 0) {\n    return;\n  }\n\n  var names = [];\n\n  for (var i = 0; i < files.length; i++) {\n    names.push(files[i].name);\n    this.uploadImageUsingCustomFunction(imageUploadFunction, files[i]);\n  }\n\n  this.updateStatusBar('upload-image', this.options.imageTexts.sbOnDrop.replace('#images_names#', names.join(', ')));\n};\n/**\n * Update an item in the status bar.\n * @param itemName {string} The name of the item to update (ie. 'upload-image', 'autosave', etc.).\n * @param content {string} the new content of the item to write in the status bar.\n */\n\n\nEasyMDE.prototype.updateStatusBar = function (itemName, content) {\n  if (!this.gui.statusbar) {\n    return;\n  }\n\n  var matchingClasses = this.gui.statusbar.getElementsByClassName(itemName);\n\n  if (matchingClasses.length === 1) {\n    this.gui.statusbar.getElementsByClassName(itemName)[0].textContent = content;\n  } else if (matchingClasses.length === 0) {\n    console.log('EasyMDE: status bar item ' + itemName + ' was not found.');\n  } else {\n    console.log('EasyMDE: Several status bar items named ' + itemName + ' was found.');\n  }\n};\n/**\n * Default markdown render.\n */\n\n\nEasyMDE.prototype.markdown = function (text) {\n  if (marked) {\n    // Initialize\n    var markedOptions;\n\n    if (this.options && this.options.renderingConfig && this.options.renderingConfig.markedOptions) {\n      markedOptions = this.options.renderingConfig.markedOptions;\n    } else {\n      markedOptions = {};\n    } // Update options\n\n\n    if (this.options && this.options.renderingConfig && this.options.renderingConfig.singleLineBreaks === false) {\n      markedOptions.breaks = false;\n    } else {\n      markedOptions.breaks = true;\n    }\n\n    if (this.options && this.options.renderingConfig && this.options.renderingConfig.codeSyntaxHighlighting === true) {\n      /* Get HLJS from config or window */\n      var hljs = this.options.renderingConfig.hljs || window.hljs;\n      /* Check if HLJS loaded */\n\n      if (hljs) {\n        markedOptions.highlight = function (code, language) {\n          if (language && hljs.getLanguage(language)) {\n            return hljs.highlight(language, code).value;\n          } else {\n            return hljs.highlightAuto(code).value;\n          }\n        };\n      }\n    } // Set options\n\n\n    marked.setOptions(markedOptions); // Convert the markdown to HTML\n\n    var htmlText = marked(text); // Sanitize HTML\n\n    if (this.options.renderingConfig && typeof this.options.renderingConfig.sanitizerFunction === 'function') {\n      htmlText = this.options.renderingConfig.sanitizerFunction.call(this, htmlText);\n    } // Edit the HTML anchors to add 'target=\"_blank\"' by default.\n\n\n    htmlText = addAnchorTargetBlank(htmlText); // Remove list-style when rendering checkboxes\n\n    htmlText = removeListStyleWhenCheckbox(htmlText);\n    return htmlText;\n  }\n};\n/**\n * Render editor to the given element.\n */\n\n\nEasyMDE.prototype.render = function (el) {\n  if (!el) {\n    el = this.element || document.getElementsByTagName('textarea')[0];\n  }\n\n  if (this._rendered && this._rendered === el) {\n    // Already rendered.\n    return;\n  }\n\n  this.element = el;\n  var options = this.options;\n  var self = this;\n  var keyMaps = {};\n\n  for (var key in options.shortcuts) {\n    // null stands for \"do not bind this command\"\n    if (options.shortcuts[key] !== null && bindings[key] !== null) {\n      (function (key) {\n        keyMaps[fixShortcut(options.shortcuts[key])] = function () {\n          var action = bindings[key];\n\n          if (typeof action === 'function') {\n            action(self);\n          } else if (typeof action === 'string') {\n            window.open(action, '_blank');\n          }\n        };\n      })(key);\n    }\n  }\n\n  keyMaps['Enter'] = 'newlineAndIndentContinueMarkdownList';\n  keyMaps['Tab'] = 'tabAndIndentMarkdownList';\n  keyMaps['Shift-Tab'] = 'shiftTabAndUnindentMarkdownList';\n\n  keyMaps['Esc'] = function (cm) {\n    if (cm.getOption('fullScreen')) toggleFullScreen(self);\n  };\n\n  this.documentOnKeyDown = function (e) {\n    e = e || window.event;\n\n    if (e.keyCode == 27) {\n      if (self.codemirror.getOption('fullScreen')) toggleFullScreen(self);\n    }\n  };\n\n  document.addEventListener('keydown', this.documentOnKeyDown, false);\n  var mode, backdrop; // CodeMirror overlay mode\n\n  if (options.overlayMode) {\n    CodeMirror.defineMode('overlay-mode', function (config) {\n      return CodeMirror.overlayMode(CodeMirror.getMode(config, options.spellChecker !== false ? 'spell-checker' : 'gfm'), options.overlayMode.mode, options.overlayMode.combine);\n    });\n    mode = 'overlay-mode';\n    backdrop = options.parsingConfig;\n    backdrop.gitHubSpice = false;\n  } else {\n    mode = options.parsingConfig;\n    mode.name = 'gfm';\n    mode.gitHubSpice = false;\n  }\n\n  if (options.spellChecker !== false) {\n    mode = 'spell-checker';\n    backdrop = options.parsingConfig;\n    backdrop.name = 'gfm';\n    backdrop.gitHubSpice = false;\n    CodeMirrorSpellChecker({\n      codeMirrorInstance: CodeMirror\n    });\n  } // eslint-disable-next-line no-unused-vars\n\n\n  function configureMouse(cm, repeat, event) {\n    return {\n      addNew: false\n    };\n  }\n\n  this.codemirror = CodeMirror.fromTextArea(el, {\n    mode: mode,\n    backdrop: backdrop,\n    theme: options.theme != undefined ? options.theme : 'easymde',\n    tabSize: options.tabSize != undefined ? options.tabSize : 2,\n    indentUnit: options.tabSize != undefined ? options.tabSize : 2,\n    indentWithTabs: options.indentWithTabs === false ? false : true,\n    lineNumbers: options.lineNumbers === true ? true : false,\n    autofocus: options.autofocus === true ? true : false,\n    extraKeys: keyMaps,\n    lineWrapping: options.lineWrapping === false ? false : true,\n    allowDropFileTypes: ['text/plain'],\n    placeholder: options.placeholder || el.getAttribute('placeholder') || '',\n    styleSelectedText: options.styleSelectedText != undefined ? options.styleSelectedText : !isMobile(),\n    scrollbarStyle: options.scrollbarStyle != undefined ? options.scrollbarStyle : 'native',\n    configureMouse: configureMouse,\n    inputStyle: options.inputStyle != undefined ? options.inputStyle : isMobile() ? 'contenteditable' : 'textarea',\n    spellcheck: options.nativeSpellcheck != undefined ? options.nativeSpellcheck : true,\n    autoRefresh: options.autoRefresh != undefined ? options.autoRefresh : false\n  });\n  this.codemirror.getScrollerElement().style.minHeight = options.minHeight;\n\n  if (typeof options.maxHeight !== 'undefined') {\n    this.codemirror.getScrollerElement().style.height = options.maxHeight;\n  }\n\n  if (options.forceSync === true) {\n    var cm = this.codemirror;\n    cm.on('change', function () {\n      cm.save();\n    });\n  }\n\n  this.gui = {}; // Wrap Codemirror with container before create toolbar, etc,\n  // to use with sideBySideFullscreen option.\n\n  var easyMDEContainer = document.createElement('div');\n  easyMDEContainer.classList.add('EasyMDEContainer');\n  var cmWrapper = this.codemirror.getWrapperElement();\n  cmWrapper.parentNode.insertBefore(easyMDEContainer, cmWrapper);\n  easyMDEContainer.appendChild(cmWrapper);\n\n  if (options.toolbar !== false) {\n    this.gui.toolbar = this.createToolbar();\n  }\n\n  if (options.status !== false) {\n    this.gui.statusbar = this.createStatusbar();\n  }\n\n  if (options.autosave != undefined && options.autosave.enabled === true) {\n    this.autosave(); // use to load localstorage content\n\n    this.codemirror.on('change', function () {\n      clearTimeout(self._autosave_timeout);\n      self._autosave_timeout = setTimeout(function () {\n        self.autosave();\n      }, self.options.autosave.submit_delay || self.options.autosave.delay || 1000);\n    });\n  }\n\n  function calcHeight(naturalWidth, naturalHeight) {\n    var height;\n    var viewportWidth = window.getComputedStyle(document.querySelector('.CodeMirror-sizer')).width.replace('px', '');\n\n    if (naturalWidth < viewportWidth) {\n      height = naturalHeight + 'px';\n    } else {\n      height = naturalHeight / naturalWidth * 100 + '%';\n    }\n\n    return height;\n  }\n\n  var _vm = this;\n\n  function assignImageBlockAttributes(parentEl, img) {\n    parentEl.setAttribute('data-img-src', img.url);\n    parentEl.setAttribute('style', '--bg-image:url(' + img.url + ');--width:' + img.naturalWidth + 'px;--height:' + calcHeight(img.naturalWidth, img.naturalHeight));\n\n    _vm.codemirror.setSize();\n  }\n\n  function handleImages() {\n    if (!options.previewImagesInEditor) {\n      return;\n    }\n\n    easyMDEContainer.querySelectorAll('.cm-image-marker').forEach(function (e) {\n      var parentEl = e.parentElement;\n\n      if (!parentEl.innerText.match(/^!\\[.*?\\]\\(.*\\)/g)) {\n        // if img pasted on the same line with other text, don't preview, preview only images on separate line\n        return;\n      }\n\n      if (!parentEl.hasAttribute('data-img-src')) {\n        var srcAttr = parentEl.innerText.match('\\\\((.*)\\\\)'); // might require better parsing according to markdown spec\n\n        if (!window.EMDEimagesCache) {\n          window.EMDEimagesCache = {};\n        }\n\n        if (srcAttr && srcAttr.length >= 2) {\n          var keySrc = srcAttr[1];\n\n          if (!window.EMDEimagesCache[keySrc]) {\n            var img = document.createElement('img');\n\n            img.onload = function () {\n              window.EMDEimagesCache[keySrc] = {\n                naturalWidth: img.naturalWidth,\n                naturalHeight: img.naturalHeight,\n                url: keySrc\n              };\n              assignImageBlockAttributes(parentEl, window.EMDEimagesCache[keySrc]);\n            };\n\n            img.src = keySrc;\n          } else {\n            assignImageBlockAttributes(parentEl, window.EMDEimagesCache[keySrc]);\n          }\n        }\n      }\n    });\n  }\n\n  this.codemirror.on('update', function () {\n    handleImages();\n  });\n  this.gui.sideBySide = this.createSideBySide();\n  this._rendered = this.element; // Fixes CodeMirror bug (#344)\n\n  var temp_cm = this.codemirror;\n  setTimeout(function () {\n    temp_cm.refresh();\n  }.bind(temp_cm), 0);\n};\n\nEasyMDE.prototype.cleanup = function () {\n  document.removeEventListener('keydown', this.documentOnKeyDown);\n}; // Safari, in Private Browsing Mode, looks like it supports localStorage but all calls to setItem throw QuotaExceededError. We're going to detect this and set a variable accordingly.\n\n\nfunction isLocalStorageAvailable() {\n  if (typeof localStorage === 'object') {\n    try {\n      localStorage.setItem('smde_localStorage', 1);\n      localStorage.removeItem('smde_localStorage');\n    } catch (e) {\n      return false;\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n}\n\nEasyMDE.prototype.autosave = function () {\n  if (isLocalStorageAvailable()) {\n    var easyMDE = this;\n\n    if (this.options.autosave.uniqueId == undefined || this.options.autosave.uniqueId == '') {\n      console.log('EasyMDE: You must set a uniqueId to use the autosave feature');\n      return;\n    }\n\n    if (this.options.autosave.binded !== true) {\n      if (easyMDE.element.form != null && easyMDE.element.form != undefined) {\n        easyMDE.element.form.addEventListener('submit', function () {\n          clearTimeout(easyMDE.autosaveTimeoutId);\n          easyMDE.autosaveTimeoutId = undefined;\n          localStorage.removeItem('smde_' + easyMDE.options.autosave.uniqueId);\n        });\n      }\n\n      this.options.autosave.binded = true;\n    }\n\n    if (this.options.autosave.loaded !== true) {\n      if (typeof localStorage.getItem('smde_' + this.options.autosave.uniqueId) == 'string' && localStorage.getItem('smde_' + this.options.autosave.uniqueId) != '') {\n        this.codemirror.setValue(localStorage.getItem('smde_' + this.options.autosave.uniqueId));\n        this.options.autosave.foundSavedValue = true;\n      }\n\n      this.options.autosave.loaded = true;\n    }\n\n    var value = easyMDE.value();\n\n    if (value !== '') {\n      localStorage.setItem('smde_' + this.options.autosave.uniqueId, value);\n    } else {\n      localStorage.removeItem('smde_' + this.options.autosave.uniqueId);\n    }\n\n    var el = document.getElementById('autosaved');\n\n    if (el != null && el != undefined && el != '') {\n      var d = new Date();\n      var dd = new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale, 'en-US'], this.options.autosave.timeFormat.format).format(d);\n      var save = this.options.autosave.text == undefined ? 'Autosaved: ' : this.options.autosave.text;\n      el.innerHTML = save + dd;\n    }\n  } else {\n    console.log('EasyMDE: localStorage not available, cannot autosave');\n  }\n};\n\nEasyMDE.prototype.clearAutosavedValue = function () {\n  if (isLocalStorageAvailable()) {\n    if (this.options.autosave == undefined || this.options.autosave.uniqueId == undefined || this.options.autosave.uniqueId == '') {\n      console.log('EasyMDE: You must set a uniqueId to clear the autosave value');\n      return;\n    }\n\n    localStorage.removeItem('smde_' + this.options.autosave.uniqueId);\n  } else {\n    console.log('EasyMDE: localStorage not available, cannot autosave');\n  }\n};\n/**\n * Open the browse-file window to upload an image to a server.\n * @param [onSuccess] {function} see EasyMDE.prototype.uploadImage\n * @param [onError] {function} see EasyMDE.prototype.uploadImage\n */\n\n\nEasyMDE.prototype.openBrowseFileWindow = function (onSuccess, onError) {\n  var self = this;\n  var imageInput = this.gui.toolbar.getElementsByClassName('imageInput')[0];\n  imageInput.click(); //dispatchEvent(new MouseEvent('click'));  // replaced with click() for IE11 compatibility.\n\n  function onChange(event) {\n    if (self.options.imageUploadFunction) {\n      self.uploadImagesUsingCustomFunction(self.options.imageUploadFunction, event.target.files);\n    } else {\n      self.uploadImages(event.target.files, onSuccess, onError);\n    }\n\n    imageInput.removeEventListener('change', onChange);\n  }\n\n  imageInput.addEventListener('change', onChange);\n};\n/**\n * Upload an image to the server.\n *\n * @param file {File} The image to upload, as a HTML5 File object (https://developer.mozilla.org/en-US/docs/Web/API/File)\n * @param [onSuccess] {function} A callback function to execute after the image has been successfully uploaded, with one parameter:\n * - url (string): The URL of the uploaded image.\n * @param [onError] {function} A callback function to execute when the image upload fails, with one parameter:\n * - error (string): the detailed error to display to the user (based on messages from options.errorMessages).\n */\n\n\nEasyMDE.prototype.uploadImage = function (file, onSuccess, onError) {\n  var self = this;\n\n  onSuccess = onSuccess || function onSuccess(imageUrl) {\n    afterImageUploaded(self, imageUrl);\n  };\n\n  function onErrorSup(errorMessage) {\n    // show error on status bar and reset after 10000ms\n    self.updateStatusBar('upload-image', errorMessage);\n    setTimeout(function () {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n    }, 10000); // run custom error handler\n\n    if (onError && typeof onError === 'function') {\n      onError(errorMessage);\n    } // run error handler from options, this alerts the message.\n\n\n    self.options.errorCallback(errorMessage);\n  }\n\n  function fillErrorMessage(errorMessage) {\n    var units = self.options.imageTexts.sizeUnits.split(',');\n    return errorMessage.replace('#image_name#', file.name).replace('#image_size#', humanFileSize(file.size, units)).replace('#image_max_size#', humanFileSize(self.options.imageMaxSize, units));\n  }\n\n  if (file.size > this.options.imageMaxSize) {\n    onErrorSup(fillErrorMessage(this.options.errorMessages.fileTooLarge));\n    return;\n  }\n\n  var formData = new FormData();\n  formData.append('image', file); // insert CSRF token if provided in config.\n\n  if (self.options.imageCSRFToken) {\n    formData.append('csrfmiddlewaretoken', self.options.imageCSRFToken);\n  }\n\n  var request = new XMLHttpRequest();\n\n  request.upload.onprogress = function (event) {\n    if (event.lengthComputable) {\n      var progress = '' + Math.round(event.loaded * 100 / event.total);\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbProgress.replace('#file_name#', file.name).replace('#progress#', progress));\n    }\n  };\n\n  request.open('POST', this.options.imageUploadEndpoint);\n\n  request.onload = function () {\n    try {\n      var response = JSON.parse(this.responseText);\n    } catch (error) {\n      console.error('EasyMDE: The server did not return a valid json.');\n      onErrorSup(fillErrorMessage(self.options.errorMessages.importError));\n      return;\n    }\n\n    if (this.status === 200 && response && !response.error && response.data && response.data.filePath) {\n      onSuccess((self.options.imagePathAbsolute ? '' : window.location.origin + '/') + response.data.filePath);\n    } else {\n      if (response.error && response.error in self.options.errorMessages) {\n        // preformatted error message\n        onErrorSup(fillErrorMessage(self.options.errorMessages[response.error]));\n      } else if (response.error) {\n        // server side generated error message\n        onErrorSup(fillErrorMessage(response.error));\n      } else {\n        //unknown error\n        console.error('EasyMDE: Received an unexpected response after uploading the image.' + this.status + ' (' + this.statusText + ')');\n        onErrorSup(fillErrorMessage(self.options.errorMessages.importError));\n      }\n    }\n  };\n\n  request.onerror = function (event) {\n    console.error('EasyMDE: An unexpected error occurred when trying to upload the image.' + event.target.status + ' (' + event.target.statusText + ')');\n    onErrorSup(self.options.errorMessages.importError);\n  };\n\n  request.send(formData);\n};\n/**\n * Upload an image to the server using a custom upload function.\n *\n * @param imageUploadFunction {Function} The custom function to upload the image passed in options\n * @param file {File} The image to upload, as a HTML5 File object (https://developer.mozilla.org/en-US/docs/Web/API/File).\n */\n\n\nEasyMDE.prototype.uploadImageUsingCustomFunction = function (imageUploadFunction, file) {\n  var self = this;\n\n  function onSuccess(imageUrl) {\n    afterImageUploaded(self, imageUrl);\n  }\n\n  function onError(errorMessage) {\n    var filledErrorMessage = fillErrorMessage(errorMessage); // show error on status bar and reset after 10000ms\n\n    self.updateStatusBar('upload-image', filledErrorMessage);\n    setTimeout(function () {\n      self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n    }, 10000); // run error handler from options, this alerts the message.\n\n    self.options.errorCallback(filledErrorMessage);\n  }\n\n  function fillErrorMessage(errorMessage) {\n    var units = self.options.imageTexts.sizeUnits.split(',');\n    return errorMessage.replace('#image_name#', file.name).replace('#image_size#', humanFileSize(file.size, units)).replace('#image_max_size#', humanFileSize(self.options.imageMaxSize, units));\n  }\n\n  imageUploadFunction.apply(this, [file, onSuccess, onError]);\n};\n\nEasyMDE.prototype.setPreviewMaxHeight = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.nextSibling; // Calc preview max height\n\n  var paddingTop = parseInt(window.getComputedStyle(wrapper).paddingTop);\n  var borderTopWidth = parseInt(window.getComputedStyle(wrapper).borderTopWidth);\n  var optionsMaxHeight = parseInt(this.options.maxHeight);\n  var wrapperMaxHeight = optionsMaxHeight + paddingTop * 2 + borderTopWidth * 2;\n  var previewMaxHeight = wrapperMaxHeight.toString() + 'px';\n  preview.style.height = previewMaxHeight;\n};\n\nEasyMDE.prototype.createSideBySide = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.nextSibling;\n\n  if (!preview || !/editor-preview-side/.test(preview.className)) {\n    preview = document.createElement('div');\n    preview.className = 'editor-preview-side';\n\n    if (this.options.previewClass) {\n      if (Array.isArray(this.options.previewClass)) {\n        for (var i = 0; i < this.options.previewClass.length; i++) {\n          preview.className += ' ' + this.options.previewClass[i];\n        }\n      } else if (typeof this.options.previewClass === 'string') {\n        preview.className += ' ' + this.options.previewClass;\n      }\n    }\n\n    wrapper.parentNode.insertBefore(preview, wrapper.nextSibling);\n  }\n\n  if (typeof this.options.maxHeight !== 'undefined') {\n    this.setPreviewMaxHeight();\n  }\n\n  if (this.options.syncSideBySidePreviewScroll === false) return preview; // Syncs scroll  editor -> preview\n\n  var cScroll = false;\n  var pScroll = false;\n  cm.on('scroll', function (v) {\n    if (cScroll) {\n      cScroll = false;\n      return;\n    }\n\n    pScroll = true;\n    var height = v.getScrollInfo().height - v.getScrollInfo().clientHeight;\n    var ratio = parseFloat(v.getScrollInfo().top) / height;\n    var move = (preview.scrollHeight - preview.clientHeight) * ratio;\n    preview.scrollTop = move;\n  }); // Syncs scroll  preview -> editor\n\n  preview.onscroll = function () {\n    if (pScroll) {\n      pScroll = false;\n      return;\n    }\n\n    cScroll = true;\n    var height = preview.scrollHeight - preview.clientHeight;\n    var ratio = parseFloat(preview.scrollTop) / height;\n    var move = (cm.getScrollInfo().height - cm.getScrollInfo().clientHeight) * ratio;\n    cm.scrollTo(0, move);\n  };\n\n  return preview;\n};\n\nEasyMDE.prototype.createToolbar = function (items) {\n  items = items || this.options.toolbar;\n\n  if (!items || items.length === 0) {\n    return;\n  }\n\n  var i;\n\n  for (i = 0; i < items.length; i++) {\n    if (toolbarBuiltInButtons[items[i]] != undefined) {\n      items[i] = toolbarBuiltInButtons[items[i]];\n    }\n  }\n\n  var bar = document.createElement('div');\n  bar.className = 'editor-toolbar';\n  var self = this;\n  var toolbarData = {};\n  self.toolbar = items;\n\n  for (i = 0; i < items.length; i++) {\n    if (items[i].name == 'guide' && self.options.toolbarGuideIcon === false) continue;\n    if (self.options.hideIcons && self.options.hideIcons.indexOf(items[i].name) != -1) continue; // Fullscreen does not work well on mobile devices (even tablets)\n    // In the future, hopefully this can be resolved\n\n    if ((items[i].name == 'fullscreen' || items[i].name == 'side-by-side') && isMobile()) continue; // Don't include trailing separators\n\n    if (items[i] === '|') {\n      var nonSeparatorIconsFollow = false;\n\n      for (var x = i + 1; x < items.length; x++) {\n        if (items[x] !== '|' && (!self.options.hideIcons || self.options.hideIcons.indexOf(items[x].name) == -1)) {\n          nonSeparatorIconsFollow = true;\n        }\n      }\n\n      if (!nonSeparatorIconsFollow) continue;\n    } // Create the icon and append to the toolbar\n\n\n    (function (item) {\n      var el;\n\n      if (item === '|') {\n        el = createSep();\n      } else if (item.children) {\n        el = createToolbarDropdown(item, self.options.toolbarTips, self.options.shortcuts, self);\n      } else {\n        el = createToolbarButton(item, true, self.options.toolbarTips, self.options.shortcuts, 'button', self);\n      }\n\n      toolbarData[item.name || item] = el;\n      bar.appendChild(el); // Create the input element (ie. <input type='file'>), used among\n      // with the 'import-image' icon to open the browse-file window.\n\n      if (item.name === 'upload-image') {\n        var imageInput = document.createElement('input');\n        imageInput.className = 'imageInput';\n        imageInput.type = 'file';\n        imageInput.multiple = true;\n        imageInput.name = 'image';\n        imageInput.accept = self.options.imageAccept;\n        imageInput.style.display = 'none';\n        imageInput.style.opacity = 0;\n        bar.appendChild(imageInput);\n      }\n    })(items[i]);\n  }\n\n  self.toolbar_div = bar;\n  self.toolbarElements = toolbarData;\n  var cm = this.codemirror;\n  cm.on('cursorActivity', function () {\n    var stat = getState(cm);\n\n    for (var key in toolbarData) {\n      (function (key) {\n        var el = toolbarData[key];\n\n        if (stat[key]) {\n          el.className += ' active';\n        } else if (key != 'fullscreen' && key != 'side-by-side') {\n          el.className = el.className.replace(/\\s*active\\s*/g, '');\n        }\n      })(key);\n    }\n  });\n  var cmWrapper = cm.getWrapperElement();\n  cmWrapper.parentNode.insertBefore(bar, cmWrapper);\n  return bar;\n};\n\nEasyMDE.prototype.createStatusbar = function (status) {\n  // Initialize\n  status = status || this.options.status;\n  var options = this.options;\n  var cm = this.codemirror; // Make sure the status variable is valid\n\n  if (!status || status.length === 0) {\n    return;\n  } // Set up the built-in items\n\n\n  var items = [];\n  var i, onUpdate, onActivity, defaultValue;\n\n  for (i = 0; i < status.length; i++) {\n    // Reset some values\n    onUpdate = undefined;\n    onActivity = undefined;\n    defaultValue = undefined; // Handle if custom or not\n\n    if (typeof status[i] === 'object') {\n      items.push({\n        className: status[i].className,\n        defaultValue: status[i].defaultValue,\n        onUpdate: status[i].onUpdate,\n        onActivity: status[i].onActivity\n      });\n    } else {\n      var name = status[i];\n\n      if (name === 'words') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = wordCount(cm.getValue());\n        };\n\n        onUpdate = function onUpdate(el) {\n          el.innerHTML = wordCount(cm.getValue());\n        };\n      } else if (name === 'lines') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = cm.lineCount();\n        };\n\n        onUpdate = function onUpdate(el) {\n          el.innerHTML = cm.lineCount();\n        };\n      } else if (name === 'cursor') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = '0:0';\n        };\n\n        onActivity = function onActivity(el) {\n          var pos = cm.getCursor();\n          el.innerHTML = pos.line + ':' + pos.ch;\n        };\n      } else if (name === 'autosave') {\n        defaultValue = function defaultValue(el) {\n          if (options.autosave != undefined && options.autosave.enabled === true) {\n            el.setAttribute('id', 'autosaved');\n          }\n        };\n      } else if (name === 'upload-image') {\n        defaultValue = function defaultValue(el) {\n          el.innerHTML = options.imageTexts.sbInit;\n        };\n      }\n\n      items.push({\n        className: name,\n        defaultValue: defaultValue,\n        onUpdate: onUpdate,\n        onActivity: onActivity\n      });\n    }\n  } // Create element for the status bar\n\n\n  var bar = document.createElement('div');\n  bar.className = 'editor-statusbar'; // Create a new span for each item\n\n  for (i = 0; i < items.length; i++) {\n    // Store in temporary variable\n    var item = items[i]; // Create span element\n\n    var el = document.createElement('span');\n    el.className = item.className; // Ensure the defaultValue is a function\n\n    if (typeof item.defaultValue === 'function') {\n      item.defaultValue(el);\n    } // Ensure the onUpdate is a function\n\n\n    if (typeof item.onUpdate === 'function') {\n      // Create a closure around the span of the current action, then execute the onUpdate handler\n      this.codemirror.on('update', function (el, item) {\n        return function () {\n          item.onUpdate(el);\n        };\n      }(el, item));\n    }\n\n    if (typeof item.onActivity === 'function') {\n      // Create a closure around the span of the current action, then execute the onActivity handler\n      this.codemirror.on('cursorActivity', function (el, item) {\n        return function () {\n          item.onActivity(el);\n        };\n      }(el, item));\n    } // Append the item to the status bar\n\n\n    bar.appendChild(el);\n  } // Insert the status bar into the DOM\n\n\n  var cmWrapper = this.codemirror.getWrapperElement();\n  cmWrapper.parentNode.insertBefore(bar, cmWrapper.nextSibling);\n  return bar;\n};\n/**\n * Get or set the text content.\n */\n\n\nEasyMDE.prototype.value = function (val) {\n  var cm = this.codemirror;\n\n  if (val === undefined) {\n    return cm.getValue();\n  } else {\n    cm.getDoc().setValue(val);\n\n    if (this.isPreviewActive()) {\n      var wrapper = cm.getWrapperElement();\n      var preview = wrapper.lastChild;\n      preview.innerHTML = this.options.previewRender(val, preview);\n    }\n\n    return this;\n  }\n};\n/**\n * Bind static methods for exports.\n */\n\n\nEasyMDE.toggleBold = toggleBold;\nEasyMDE.toggleItalic = toggleItalic;\nEasyMDE.toggleStrikethrough = toggleStrikethrough;\nEasyMDE.toggleBlockquote = toggleBlockquote;\nEasyMDE.toggleHeadingSmaller = toggleHeadingSmaller;\nEasyMDE.toggleHeadingBigger = toggleHeadingBigger;\nEasyMDE.toggleHeading1 = toggleHeading1;\nEasyMDE.toggleHeading2 = toggleHeading2;\nEasyMDE.toggleHeading3 = toggleHeading3;\nEasyMDE.toggleCodeBlock = toggleCodeBlock;\nEasyMDE.toggleUnorderedList = toggleUnorderedList;\nEasyMDE.toggleOrderedList = toggleOrderedList;\nEasyMDE.cleanBlock = cleanBlock;\nEasyMDE.drawLink = drawLink;\nEasyMDE.drawImage = drawImage;\nEasyMDE.drawUploadedImage = drawUploadedImage;\nEasyMDE.drawTable = drawTable;\nEasyMDE.drawHorizontalRule = drawHorizontalRule;\nEasyMDE.undo = undo;\nEasyMDE.redo = redo;\nEasyMDE.togglePreview = togglePreview;\nEasyMDE.toggleSideBySide = toggleSideBySide;\nEasyMDE.toggleFullScreen = toggleFullScreen;\n/**\n * Bind instance methods for exports.\n */\n\nEasyMDE.prototype.toggleBold = function () {\n  toggleBold(this);\n};\n\nEasyMDE.prototype.toggleItalic = function () {\n  toggleItalic(this);\n};\n\nEasyMDE.prototype.toggleStrikethrough = function () {\n  toggleStrikethrough(this);\n};\n\nEasyMDE.prototype.toggleBlockquote = function () {\n  toggleBlockquote(this);\n};\n\nEasyMDE.prototype.toggleHeadingSmaller = function () {\n  toggleHeadingSmaller(this);\n};\n\nEasyMDE.prototype.toggleHeadingBigger = function () {\n  toggleHeadingBigger(this);\n};\n\nEasyMDE.prototype.toggleHeading1 = function () {\n  toggleHeading1(this);\n};\n\nEasyMDE.prototype.toggleHeading2 = function () {\n  toggleHeading2(this);\n};\n\nEasyMDE.prototype.toggleHeading3 = function () {\n  toggleHeading3(this);\n};\n\nEasyMDE.prototype.toggleCodeBlock = function () {\n  toggleCodeBlock(this);\n};\n\nEasyMDE.prototype.toggleUnorderedList = function () {\n  toggleUnorderedList(this);\n};\n\nEasyMDE.prototype.toggleOrderedList = function () {\n  toggleOrderedList(this);\n};\n\nEasyMDE.prototype.cleanBlock = function () {\n  cleanBlock(this);\n};\n\nEasyMDE.prototype.drawLink = function () {\n  drawLink(this);\n};\n\nEasyMDE.prototype.drawImage = function () {\n  drawImage(this);\n};\n\nEasyMDE.prototype.drawUploadedImage = function () {\n  drawUploadedImage(this);\n};\n\nEasyMDE.prototype.drawTable = function () {\n  drawTable(this);\n};\n\nEasyMDE.prototype.drawHorizontalRule = function () {\n  drawHorizontalRule(this);\n};\n\nEasyMDE.prototype.undo = function () {\n  undo(this);\n};\n\nEasyMDE.prototype.redo = function () {\n  redo(this);\n};\n\nEasyMDE.prototype.togglePreview = function () {\n  togglePreview(this);\n};\n\nEasyMDE.prototype.toggleSideBySide = function () {\n  toggleSideBySide(this);\n};\n\nEasyMDE.prototype.toggleFullScreen = function () {\n  toggleFullScreen(this);\n};\n\nEasyMDE.prototype.isPreviewActive = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.lastChild;\n  return /editor-preview-active/.test(preview.className);\n};\n\nEasyMDE.prototype.isSideBySideActive = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var preview = wrapper.nextSibling;\n  return /editor-preview-active-side/.test(preview.className);\n};\n\nEasyMDE.prototype.isFullscreenActive = function () {\n  var cm = this.codemirror;\n  return cm.getOption('fullScreen');\n};\n\nEasyMDE.prototype.getState = function () {\n  var cm = this.codemirror;\n  return getState(cm);\n};\n\nEasyMDE.prototype.toTextArea = function () {\n  var cm = this.codemirror;\n  var wrapper = cm.getWrapperElement();\n  var easyMDEContainer = wrapper.parentNode;\n\n  if (easyMDEContainer) {\n    if (this.gui.toolbar) {\n      easyMDEContainer.removeChild(this.gui.toolbar);\n    }\n\n    if (this.gui.statusbar) {\n      easyMDEContainer.removeChild(this.gui.statusbar);\n    }\n\n    if (this.gui.sideBySide) {\n      easyMDEContainer.removeChild(this.gui.sideBySide);\n    }\n  } // Unwrap easyMDEcontainer before codemirror toTextArea() call\n\n\n  easyMDEContainer.parentNode.insertBefore(wrapper, easyMDEContainer);\n  easyMDEContainer.remove();\n  cm.toTextArea();\n\n  if (this.autosaveTimeoutId) {\n    clearTimeout(this.autosaveTimeoutId);\n    this.autosaveTimeoutId = undefined;\n    this.clearAutosavedValue();\n  }\n};\n\nmodule.exports = EasyMDE;\n\n/***/ }),\n\n/***/ 1251:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565));else {}\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var listRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]\\s|[*+-]\\s|(\\d+)([.)]))(\\s*)/,\n      emptyListRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]|[*+-]|(\\d+)[.)])(\\s*)$/,\n      unorderedListRE = /[*+-]\\s/;\n\n  CodeMirror.commands.newlineAndIndentContinueMarkdownList = function (cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    var ranges = cm.listSelections(),\n        replacements = [];\n\n    for (var i = 0; i < ranges.length; i++) {\n      var pos = ranges[i].head; // If we're not in Markdown mode, fall back to normal newlineAndIndent\n\n      var eolState = cm.getStateAfter(pos.line);\n      var inner = CodeMirror.innerMode(cm.getMode(), eolState);\n\n      if (inner.mode.name !== \"markdown\") {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      } else {\n        eolState = inner.state;\n      }\n\n      var inList = eolState.list !== false;\n      var inQuote = eolState.quote !== 0;\n      var line = cm.getLine(pos.line),\n          match = listRE.exec(line);\n      var cursorBeforeBullet = /^\\s*$/.test(line.slice(0, pos.ch));\n\n      if (!ranges[i].empty() || !inList && !inQuote || !match || cursorBeforeBullet) {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      }\n\n      if (emptyListRE.test(line)) {\n        var endOfQuote = inQuote && />\\s*$/.test(line);\n        var endOfList = !/>\\s*$/.test(line);\n        if (endOfQuote || endOfList) cm.replaceRange(\"\", {\n          line: pos.line,\n          ch: 0\n        }, {\n          line: pos.line,\n          ch: pos.ch + 1\n        });\n        replacements[i] = \"\\n\";\n      } else {\n        var indent = match[1],\n            after = match[5];\n        var numbered = !(unorderedListRE.test(match[2]) || match[2].indexOf(\">\") >= 0);\n        var bullet = numbered ? parseInt(match[3], 10) + 1 + match[4] : match[2].replace(\"x\", \" \");\n        replacements[i] = \"\\n\" + indent + bullet + after;\n        if (numbered) incrementRemainingMarkdownListNumbers(cm, pos);\n      }\n    }\n\n    cm.replaceSelections(replacements);\n  }; // Auto-updating Markdown list numbers when a new item is added to the\n  // middle of a list\n\n\n  function incrementRemainingMarkdownListNumbers(cm, pos) {\n    var startLine = pos.line,\n        lookAhead = 0,\n        skipCount = 0;\n    var startItem = listRE.exec(cm.getLine(startLine)),\n        startIndent = startItem[1];\n\n    do {\n      lookAhead += 1;\n      var nextLineNumber = startLine + lookAhead;\n      var nextLine = cm.getLine(nextLineNumber),\n          nextItem = listRE.exec(nextLine);\n\n      if (nextItem) {\n        var nextIndent = nextItem[1];\n        var newNumber = parseInt(startItem[3], 10) + lookAhead - skipCount;\n        var nextNumber = parseInt(nextItem[3], 10),\n            itemNumber = nextNumber;\n\n        if (startIndent === nextIndent && !isNaN(nextNumber)) {\n          if (newNumber === nextNumber) itemNumber = nextNumber + 1;\n          if (newNumber > nextNumber) itemNumber = newNumber + 1;\n          cm.replaceRange(nextLine.replace(listRE, nextIndent + itemNumber + nextItem[4] + nextItem[5]), {\n            line: nextLineNumber,\n            ch: 0\n          }, {\n            line: nextLineNumber,\n            ch: nextLine.length\n          });\n        } else {\n          if (startIndent.length > nextIndent.length) return; // This doesn't run if the next line immediately indents, as it is\n          // not clear of the users intention (new indented item or same level)\n\n          if (startIndent.length < nextIndent.length && lookAhead === 1) return;\n          skipCount += 1;\n        }\n      }\n    } while (nextItem);\n  }\n});\n\n/***/ }),\n\n/***/ 1252:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\nvar CodeMirror = __webpack_require__(565);\n\nCodeMirror.commands.tabAndIndentMarkdownList = function (cm) {\n  var ranges = cm.listSelections();\n  var pos = ranges[0].head;\n  var eolState = cm.getStateAfter(pos.line);\n  var inList = eolState.list !== false;\n\n  if (inList) {\n    cm.execCommand('indentMore');\n    return;\n  }\n\n  if (cm.options.indentWithTabs) {\n    cm.execCommand('insertTab');\n  } else {\n    var spaces = Array(cm.options.tabSize + 1).join(' ');\n    cm.replaceSelection(spaces);\n  }\n};\n\nCodeMirror.commands.shiftTabAndUnindentMarkdownList = function (cm) {\n  var ranges = cm.listSelections();\n  var pos = ranges[0].head;\n  var eolState = cm.getStateAfter(pos.line);\n  var inList = eolState.list !== false;\n\n  if (inList) {\n    cm.execCommand('indentLess');\n    return;\n  }\n\n  if (cm.options.indentWithTabs) {\n    cm.execCommand('insertTab');\n  } else {\n    var spaces = Array(cm.options.tabSize + 1).join(' ');\n    cm.replaceSelection(spaces);\n  }\n};\n\n/***/ }),\n\n/***/ 1253:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565));else {}\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"fullScreen\", false, function (cm, val, old) {\n    if (old == CodeMirror.Init) old = false;\n    if (!old == !val) return;\n    if (val) setFullscreen(cm);else setNormal(cm);\n  });\n\n  function setFullscreen(cm) {\n    var wrap = cm.getWrapperElement();\n    cm.state.fullScreenRestore = {\n      scrollTop: window.pageYOffset,\n      scrollLeft: window.pageXOffset,\n      width: wrap.style.width,\n      height: wrap.style.height\n    };\n    wrap.style.width = \"\";\n    wrap.style.height = \"auto\";\n    wrap.className += \" CodeMirror-fullscreen\";\n    document.documentElement.style.overflow = \"hidden\";\n    cm.refresh();\n  }\n\n  function setNormal(cm) {\n    var wrap = cm.getWrapperElement();\n    wrap.className = wrap.className.replace(/\\s*CodeMirror-fullscreen\\b/, \"\");\n    document.documentElement.style.overflow = \"\";\n    var info = cm.state.fullScreenRestore;\n    wrap.style.width = info.width;\n    wrap.style.height = info.height;\n    window.scrollTo(info.scrollLeft, info.scrollTop);\n    cm.refresh();\n  }\n});\n\n/***/ }),\n\n/***/ 1254:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565));else {}\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.modeInfo = [{\n    name: \"APL\",\n    mime: \"text/apl\",\n    mode: \"apl\",\n    ext: [\"dyalog\", \"apl\"]\n  }, {\n    name: \"PGP\",\n    mimes: [\"application/pgp\", \"application/pgp-encrypted\", \"application/pgp-keys\", \"application/pgp-signature\"],\n    mode: \"asciiarmor\",\n    ext: [\"asc\", \"pgp\", \"sig\"]\n  }, {\n    name: \"ASN.1\",\n    mime: \"text/x-ttcn-asn\",\n    mode: \"asn.1\",\n    ext: [\"asn\", \"asn1\"]\n  }, {\n    name: \"Asterisk\",\n    mime: \"text/x-asterisk\",\n    mode: \"asterisk\",\n    file: /^extensions\\.conf$/i\n  }, {\n    name: \"Brainfuck\",\n    mime: \"text/x-brainfuck\",\n    mode: \"brainfuck\",\n    ext: [\"b\", \"bf\"]\n  }, {\n    name: \"C\",\n    mime: \"text/x-csrc\",\n    mode: \"clike\",\n    ext: [\"c\", \"h\", \"ino\"]\n  }, {\n    name: \"C++\",\n    mime: \"text/x-c++src\",\n    mode: \"clike\",\n    ext: [\"cpp\", \"c++\", \"cc\", \"cxx\", \"hpp\", \"h++\", \"hh\", \"hxx\"],\n    alias: [\"cpp\"]\n  }, {\n    name: \"Cobol\",\n    mime: \"text/x-cobol\",\n    mode: \"cobol\",\n    ext: [\"cob\", \"cpy\"]\n  }, {\n    name: \"C#\",\n    mime: \"text/x-csharp\",\n    mode: \"clike\",\n    ext: [\"cs\"],\n    alias: [\"csharp\", \"cs\"]\n  }, {\n    name: \"Clojure\",\n    mime: \"text/x-clojure\",\n    mode: \"clojure\",\n    ext: [\"clj\", \"cljc\", \"cljx\"]\n  }, {\n    name: \"ClojureScript\",\n    mime: \"text/x-clojurescript\",\n    mode: \"clojure\",\n    ext: [\"cljs\"]\n  }, {\n    name: \"Closure Stylesheets (GSS)\",\n    mime: \"text/x-gss\",\n    mode: \"css\",\n    ext: [\"gss\"]\n  }, {\n    name: \"CMake\",\n    mime: \"text/x-cmake\",\n    mode: \"cmake\",\n    ext: [\"cmake\", \"cmake.in\"],\n    file: /^CMakeLists\\.txt$/\n  }, {\n    name: \"CoffeeScript\",\n    mimes: [\"application/vnd.coffeescript\", \"text/coffeescript\", \"text/x-coffeescript\"],\n    mode: \"coffeescript\",\n    ext: [\"coffee\"],\n    alias: [\"coffee\", \"coffee-script\"]\n  }, {\n    name: \"Common Lisp\",\n    mime: \"text/x-common-lisp\",\n    mode: \"commonlisp\",\n    ext: [\"cl\", \"lisp\", \"el\"],\n    alias: [\"lisp\"]\n  }, {\n    name: \"Cypher\",\n    mime: \"application/x-cypher-query\",\n    mode: \"cypher\",\n    ext: [\"cyp\", \"cypher\"]\n  }, {\n    name: \"Cython\",\n    mime: \"text/x-cython\",\n    mode: \"python\",\n    ext: [\"pyx\", \"pxd\", \"pxi\"]\n  }, {\n    name: \"Crystal\",\n    mime: \"text/x-crystal\",\n    mode: \"crystal\",\n    ext: [\"cr\"]\n  }, {\n    name: \"CSS\",\n    mime: \"text/css\",\n    mode: \"css\",\n    ext: [\"css\"]\n  }, {\n    name: \"CQL\",\n    mime: \"text/x-cassandra\",\n    mode: \"sql\",\n    ext: [\"cql\"]\n  }, {\n    name: \"D\",\n    mime: \"text/x-d\",\n    mode: \"d\",\n    ext: [\"d\"]\n  }, {\n    name: \"Dart\",\n    mimes: [\"application/dart\", \"text/x-dart\"],\n    mode: \"dart\",\n    ext: [\"dart\"]\n  }, {\n    name: \"diff\",\n    mime: \"text/x-diff\",\n    mode: \"diff\",\n    ext: [\"diff\", \"patch\"]\n  }, {\n    name: \"Django\",\n    mime: \"text/x-django\",\n    mode: \"django\"\n  }, {\n    name: \"Dockerfile\",\n    mime: \"text/x-dockerfile\",\n    mode: \"dockerfile\",\n    file: /^Dockerfile$/\n  }, {\n    name: \"DTD\",\n    mime: \"application/xml-dtd\",\n    mode: \"dtd\",\n    ext: [\"dtd\"]\n  }, {\n    name: \"Dylan\",\n    mime: \"text/x-dylan\",\n    mode: \"dylan\",\n    ext: [\"dylan\", \"dyl\", \"intr\"]\n  }, {\n    name: \"EBNF\",\n    mime: \"text/x-ebnf\",\n    mode: \"ebnf\"\n  }, {\n    name: \"ECL\",\n    mime: \"text/x-ecl\",\n    mode: \"ecl\",\n    ext: [\"ecl\"]\n  }, {\n    name: \"edn\",\n    mime: \"application/edn\",\n    mode: \"clojure\",\n    ext: [\"edn\"]\n  }, {\n    name: \"Eiffel\",\n    mime: \"text/x-eiffel\",\n    mode: \"eiffel\",\n    ext: [\"e\"]\n  }, {\n    name: \"Elm\",\n    mime: \"text/x-elm\",\n    mode: \"elm\",\n    ext: [\"elm\"]\n  }, {\n    name: \"Embedded JavaScript\",\n    mime: \"application/x-ejs\",\n    mode: \"htmlembedded\",\n    ext: [\"ejs\"]\n  }, {\n    name: \"Embedded Ruby\",\n    mime: \"application/x-erb\",\n    mode: \"htmlembedded\",\n    ext: [\"erb\"]\n  }, {\n    name: \"Erlang\",\n    mime: \"text/x-erlang\",\n    mode: \"erlang\",\n    ext: [\"erl\"]\n  }, {\n    name: \"Esper\",\n    mime: \"text/x-esper\",\n    mode: \"sql\"\n  }, {\n    name: \"Factor\",\n    mime: \"text/x-factor\",\n    mode: \"factor\",\n    ext: [\"factor\"]\n  }, {\n    name: \"FCL\",\n    mime: \"text/x-fcl\",\n    mode: \"fcl\"\n  }, {\n    name: \"Forth\",\n    mime: \"text/x-forth\",\n    mode: \"forth\",\n    ext: [\"forth\", \"fth\", \"4th\"]\n  }, {\n    name: \"Fortran\",\n    mime: \"text/x-fortran\",\n    mode: \"fortran\",\n    ext: [\"f\", \"for\", \"f77\", \"f90\", \"f95\"]\n  }, {\n    name: \"F#\",\n    mime: \"text/x-fsharp\",\n    mode: \"mllike\",\n    ext: [\"fs\"],\n    alias: [\"fsharp\"]\n  }, {\n    name: \"Gas\",\n    mime: \"text/x-gas\",\n    mode: \"gas\",\n    ext: [\"s\"]\n  }, {\n    name: \"Gherkin\",\n    mime: \"text/x-feature\",\n    mode: \"gherkin\",\n    ext: [\"feature\"]\n  }, {\n    name: \"GitHub Flavored Markdown\",\n    mime: \"text/x-gfm\",\n    mode: \"gfm\",\n    file: /^(readme|contributing|history)\\.md$/i\n  }, {\n    name: \"Go\",\n    mime: \"text/x-go\",\n    mode: \"go\",\n    ext: [\"go\"]\n  }, {\n    name: \"Groovy\",\n    mime: \"text/x-groovy\",\n    mode: \"groovy\",\n    ext: [\"groovy\", \"gradle\"],\n    file: /^Jenkinsfile$/\n  }, {\n    name: \"HAML\",\n    mime: \"text/x-haml\",\n    mode: \"haml\",\n    ext: [\"haml\"]\n  }, {\n    name: \"Haskell\",\n    mime: \"text/x-haskell\",\n    mode: \"haskell\",\n    ext: [\"hs\"]\n  }, {\n    name: \"Haskell (Literate)\",\n    mime: \"text/x-literate-haskell\",\n    mode: \"haskell-literate\",\n    ext: [\"lhs\"]\n  }, {\n    name: \"Haxe\",\n    mime: \"text/x-haxe\",\n    mode: \"haxe\",\n    ext: [\"hx\"]\n  }, {\n    name: \"HXML\",\n    mime: \"text/x-hxml\",\n    mode: \"haxe\",\n    ext: [\"hxml\"]\n  }, {\n    name: \"ASP.NET\",\n    mime: \"application/x-aspx\",\n    mode: \"htmlembedded\",\n    ext: [\"aspx\"],\n    alias: [\"asp\", \"aspx\"]\n  }, {\n    name: \"HTML\",\n    mime: \"text/html\",\n    mode: \"htmlmixed\",\n    ext: [\"html\", \"htm\", \"handlebars\", \"hbs\"],\n    alias: [\"xhtml\"]\n  }, {\n    name: \"HTTP\",\n    mime: \"message/http\",\n    mode: \"http\"\n  }, {\n    name: \"IDL\",\n    mime: \"text/x-idl\",\n    mode: \"idl\",\n    ext: [\"pro\"]\n  }, {\n    name: \"Pug\",\n    mime: \"text/x-pug\",\n    mode: \"pug\",\n    ext: [\"jade\", \"pug\"],\n    alias: [\"jade\"]\n  }, {\n    name: \"Java\",\n    mime: \"text/x-java\",\n    mode: \"clike\",\n    ext: [\"java\"]\n  }, {\n    name: \"Java Server Pages\",\n    mime: \"application/x-jsp\",\n    mode: \"htmlembedded\",\n    ext: [\"jsp\"],\n    alias: [\"jsp\"]\n  }, {\n    name: \"JavaScript\",\n    mimes: [\"text/javascript\", \"text/ecmascript\", \"application/javascript\", \"application/x-javascript\", \"application/ecmascript\"],\n    mode: \"javascript\",\n    ext: [\"js\"],\n    alias: [\"ecmascript\", \"js\", \"node\"]\n  }, {\n    name: \"JSON\",\n    mimes: [\"application/json\", \"application/x-json\"],\n    mode: \"javascript\",\n    ext: [\"json\", \"map\"],\n    alias: [\"json5\"]\n  }, {\n    name: \"JSON-LD\",\n    mime: \"application/ld+json\",\n    mode: \"javascript\",\n    ext: [\"jsonld\"],\n    alias: [\"jsonld\"]\n  }, {\n    name: \"JSX\",\n    mime: \"text/jsx\",\n    mode: \"jsx\",\n    ext: [\"jsx\"]\n  }, {\n    name: \"Jinja2\",\n    mime: \"text/jinja2\",\n    mode: \"jinja2\",\n    ext: [\"j2\", \"jinja\", \"jinja2\"]\n  }, {\n    name: \"Julia\",\n    mime: \"text/x-julia\",\n    mode: \"julia\",\n    ext: [\"jl\"],\n    alias: [\"jl\"]\n  }, {\n    name: \"Kotlin\",\n    mime: \"text/x-kotlin\",\n    mode: \"clike\",\n    ext: [\"kt\"]\n  }, {\n    name: \"LESS\",\n    mime: \"text/x-less\",\n    mode: \"css\",\n    ext: [\"less\"]\n  }, {\n    name: \"LiveScript\",\n    mime: \"text/x-livescript\",\n    mode: \"livescript\",\n    ext: [\"ls\"],\n    alias: [\"ls\"]\n  }, {\n    name: \"Lua\",\n    mime: \"text/x-lua\",\n    mode: \"lua\",\n    ext: [\"lua\"]\n  }, {\n    name: \"Markdown\",\n    mime: \"text/x-markdown\",\n    mode: \"markdown\",\n    ext: [\"markdown\", \"md\", \"mkd\"]\n  }, {\n    name: \"mIRC\",\n    mime: \"text/mirc\",\n    mode: \"mirc\"\n  }, {\n    name: \"MariaDB SQL\",\n    mime: \"text/x-mariadb\",\n    mode: \"sql\"\n  }, {\n    name: \"Mathematica\",\n    mime: \"text/x-mathematica\",\n    mode: \"mathematica\",\n    ext: [\"m\", \"nb\", \"wl\", \"wls\"]\n  }, {\n    name: \"Modelica\",\n    mime: \"text/x-modelica\",\n    mode: \"modelica\",\n    ext: [\"mo\"]\n  }, {\n    name: \"MUMPS\",\n    mime: \"text/x-mumps\",\n    mode: \"mumps\",\n    ext: [\"mps\"]\n  }, {\n    name: \"MS SQL\",\n    mime: \"text/x-mssql\",\n    mode: \"sql\"\n  }, {\n    name: \"mbox\",\n    mime: \"application/mbox\",\n    mode: \"mbox\",\n    ext: [\"mbox\"]\n  }, {\n    name: \"MySQL\",\n    mime: \"text/x-mysql\",\n    mode: \"sql\"\n  }, {\n    name: \"Nginx\",\n    mime: \"text/x-nginx-conf\",\n    mode: \"nginx\",\n    file: /nginx.*\\.conf$/i\n  }, {\n    name: \"NSIS\",\n    mime: \"text/x-nsis\",\n    mode: \"nsis\",\n    ext: [\"nsh\", \"nsi\"]\n  }, {\n    name: \"NTriples\",\n    mimes: [\"application/n-triples\", \"application/n-quads\", \"text/n-triples\"],\n    mode: \"ntriples\",\n    ext: [\"nt\", \"nq\"]\n  }, {\n    name: \"Objective-C\",\n    mime: \"text/x-objectivec\",\n    mode: \"clike\",\n    ext: [\"m\"],\n    alias: [\"objective-c\", \"objc\"]\n  }, {\n    name: \"Objective-C++\",\n    mime: \"text/x-objectivec++\",\n    mode: \"clike\",\n    ext: [\"mm\"],\n    alias: [\"objective-c++\", \"objc++\"]\n  }, {\n    name: \"OCaml\",\n    mime: \"text/x-ocaml\",\n    mode: \"mllike\",\n    ext: [\"ml\", \"mli\", \"mll\", \"mly\"]\n  }, {\n    name: \"Octave\",\n    mime: \"text/x-octave\",\n    mode: \"octave\",\n    ext: [\"m\"]\n  }, {\n    name: \"Oz\",\n    mime: \"text/x-oz\",\n    mode: \"oz\",\n    ext: [\"oz\"]\n  }, {\n    name: \"Pascal\",\n    mime: \"text/x-pascal\",\n    mode: \"pascal\",\n    ext: [\"p\", \"pas\"]\n  }, {\n    name: \"PEG.js\",\n    mime: \"null\",\n    mode: \"pegjs\",\n    ext: [\"jsonld\"]\n  }, {\n    name: \"Perl\",\n    mime: \"text/x-perl\",\n    mode: \"perl\",\n    ext: [\"pl\", \"pm\"]\n  }, {\n    name: \"PHP\",\n    mimes: [\"text/x-php\", \"application/x-httpd-php\", \"application/x-httpd-php-open\"],\n    mode: \"php\",\n    ext: [\"php\", \"php3\", \"php4\", \"php5\", \"php7\", \"phtml\"]\n  }, {\n    name: \"Pig\",\n    mime: \"text/x-pig\",\n    mode: \"pig\",\n    ext: [\"pig\"]\n  }, {\n    name: \"Plain Text\",\n    mime: \"text/plain\",\n    mode: \"null\",\n    ext: [\"txt\", \"text\", \"conf\", \"def\", \"list\", \"log\"]\n  }, {\n    name: \"PLSQL\",\n    mime: \"text/x-plsql\",\n    mode: \"sql\",\n    ext: [\"pls\"]\n  }, {\n    name: \"PostgreSQL\",\n    mime: \"text/x-pgsql\",\n    mode: \"sql\"\n  }, {\n    name: \"PowerShell\",\n    mime: \"application/x-powershell\",\n    mode: \"powershell\",\n    ext: [\"ps1\", \"psd1\", \"psm1\"]\n  }, {\n    name: \"Properties files\",\n    mime: \"text/x-properties\",\n    mode: \"properties\",\n    ext: [\"properties\", \"ini\", \"in\"],\n    alias: [\"ini\", \"properties\"]\n  }, {\n    name: \"ProtoBuf\",\n    mime: \"text/x-protobuf\",\n    mode: \"protobuf\",\n    ext: [\"proto\"]\n  }, {\n    name: \"Python\",\n    mime: \"text/x-python\",\n    mode: \"python\",\n    ext: [\"BUILD\", \"bzl\", \"py\", \"pyw\"],\n    file: /^(BUCK|BUILD)$/\n  }, {\n    name: \"Puppet\",\n    mime: \"text/x-puppet\",\n    mode: \"puppet\",\n    ext: [\"pp\"]\n  }, {\n    name: \"Q\",\n    mime: \"text/x-q\",\n    mode: \"q\",\n    ext: [\"q\"]\n  }, {\n    name: \"R\",\n    mime: \"text/x-rsrc\",\n    mode: \"r\",\n    ext: [\"r\", \"R\"],\n    alias: [\"rscript\"]\n  }, {\n    name: \"reStructuredText\",\n    mime: \"text/x-rst\",\n    mode: \"rst\",\n    ext: [\"rst\"],\n    alias: [\"rst\"]\n  }, {\n    name: \"RPM Changes\",\n    mime: \"text/x-rpm-changes\",\n    mode: \"rpm\"\n  }, {\n    name: \"RPM Spec\",\n    mime: \"text/x-rpm-spec\",\n    mode: \"rpm\",\n    ext: [\"spec\"]\n  }, {\n    name: \"Ruby\",\n    mime: \"text/x-ruby\",\n    mode: \"ruby\",\n    ext: [\"rb\"],\n    alias: [\"jruby\", \"macruby\", \"rake\", \"rb\", \"rbx\"]\n  }, {\n    name: \"Rust\",\n    mime: \"text/x-rustsrc\",\n    mode: \"rust\",\n    ext: [\"rs\"]\n  }, {\n    name: \"SAS\",\n    mime: \"text/x-sas\",\n    mode: \"sas\",\n    ext: [\"sas\"]\n  }, {\n    name: \"Sass\",\n    mime: \"text/x-sass\",\n    mode: \"sass\",\n    ext: [\"sass\"]\n  }, {\n    name: \"Scala\",\n    mime: \"text/x-scala\",\n    mode: \"clike\",\n    ext: [\"scala\"]\n  }, {\n    name: \"Scheme\",\n    mime: \"text/x-scheme\",\n    mode: \"scheme\",\n    ext: [\"scm\", \"ss\"]\n  }, {\n    name: \"SCSS\",\n    mime: \"text/x-scss\",\n    mode: \"css\",\n    ext: [\"scss\"]\n  }, {\n    name: \"Shell\",\n    mimes: [\"text/x-sh\", \"application/x-sh\"],\n    mode: \"shell\",\n    ext: [\"sh\", \"ksh\", \"bash\"],\n    alias: [\"bash\", \"sh\", \"zsh\"],\n    file: /^PKGBUILD$/\n  }, {\n    name: \"Sieve\",\n    mime: \"application/sieve\",\n    mode: \"sieve\",\n    ext: [\"siv\", \"sieve\"]\n  }, {\n    name: \"Slim\",\n    mimes: [\"text/x-slim\", \"application/x-slim\"],\n    mode: \"slim\",\n    ext: [\"slim\"]\n  }, {\n    name: \"Smalltalk\",\n    mime: \"text/x-stsrc\",\n    mode: \"smalltalk\",\n    ext: [\"st\"]\n  }, {\n    name: \"Smarty\",\n    mime: \"text/x-smarty\",\n    mode: \"smarty\",\n    ext: [\"tpl\"]\n  }, {\n    name: \"Solr\",\n    mime: \"text/x-solr\",\n    mode: \"solr\"\n  }, {\n    name: \"SML\",\n    mime: \"text/x-sml\",\n    mode: \"mllike\",\n    ext: [\"sml\", \"sig\", \"fun\", \"smackspec\"]\n  }, {\n    name: \"Soy\",\n    mime: \"text/x-soy\",\n    mode: \"soy\",\n    ext: [\"soy\"],\n    alias: [\"closure template\"]\n  }, {\n    name: \"SPARQL\",\n    mime: \"application/sparql-query\",\n    mode: \"sparql\",\n    ext: [\"rq\", \"sparql\"],\n    alias: [\"sparul\"]\n  }, {\n    name: \"Spreadsheet\",\n    mime: \"text/x-spreadsheet\",\n    mode: \"spreadsheet\",\n    alias: [\"excel\", \"formula\"]\n  }, {\n    name: \"SQL\",\n    mime: \"text/x-sql\",\n    mode: \"sql\",\n    ext: [\"sql\"]\n  }, {\n    name: \"SQLite\",\n    mime: \"text/x-sqlite\",\n    mode: \"sql\"\n  }, {\n    name: \"Squirrel\",\n    mime: \"text/x-squirrel\",\n    mode: \"clike\",\n    ext: [\"nut\"]\n  }, {\n    name: \"Stylus\",\n    mime: \"text/x-styl\",\n    mode: \"stylus\",\n    ext: [\"styl\"]\n  }, {\n    name: \"Swift\",\n    mime: \"text/x-swift\",\n    mode: \"swift\",\n    ext: [\"swift\"]\n  }, {\n    name: \"sTeX\",\n    mime: \"text/x-stex\",\n    mode: \"stex\"\n  }, {\n    name: \"LaTeX\",\n    mime: \"text/x-latex\",\n    mode: \"stex\",\n    ext: [\"text\", \"ltx\", \"tex\"],\n    alias: [\"tex\"]\n  }, {\n    name: \"SystemVerilog\",\n    mime: \"text/x-systemverilog\",\n    mode: \"verilog\",\n    ext: [\"v\", \"sv\", \"svh\"]\n  }, {\n    name: \"Tcl\",\n    mime: \"text/x-tcl\",\n    mode: \"tcl\",\n    ext: [\"tcl\"]\n  }, {\n    name: \"Textile\",\n    mime: \"text/x-textile\",\n    mode: \"textile\",\n    ext: [\"textile\"]\n  }, {\n    name: \"TiddlyWiki\",\n    mime: \"text/x-tiddlywiki\",\n    mode: \"tiddlywiki\"\n  }, {\n    name: \"Tiki wiki\",\n    mime: \"text/tiki\",\n    mode: \"tiki\"\n  }, {\n    name: \"TOML\",\n    mime: \"text/x-toml\",\n    mode: \"toml\",\n    ext: [\"toml\"]\n  }, {\n    name: \"Tornado\",\n    mime: \"text/x-tornado\",\n    mode: \"tornado\"\n  }, {\n    name: \"troff\",\n    mime: \"text/troff\",\n    mode: \"troff\",\n    ext: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]\n  }, {\n    name: \"TTCN\",\n    mime: \"text/x-ttcn\",\n    mode: \"ttcn\",\n    ext: [\"ttcn\", \"ttcn3\", \"ttcnpp\"]\n  }, {\n    name: \"TTCN_CFG\",\n    mime: \"text/x-ttcn-cfg\",\n    mode: \"ttcn-cfg\",\n    ext: [\"cfg\"]\n  }, {\n    name: \"Turtle\",\n    mime: \"text/turtle\",\n    mode: \"turtle\",\n    ext: [\"ttl\"]\n  }, {\n    name: \"TypeScript\",\n    mime: \"application/typescript\",\n    mode: \"javascript\",\n    ext: [\"ts\"],\n    alias: [\"ts\"]\n  }, {\n    name: \"TypeScript-JSX\",\n    mime: \"text/typescript-jsx\",\n    mode: \"jsx\",\n    ext: [\"tsx\"],\n    alias: [\"tsx\"]\n  }, {\n    name: \"Twig\",\n    mime: \"text/x-twig\",\n    mode: \"twig\"\n  }, {\n    name: \"Web IDL\",\n    mime: \"text/x-webidl\",\n    mode: \"webidl\",\n    ext: [\"webidl\"]\n  }, {\n    name: \"VB.NET\",\n    mime: \"text/x-vb\",\n    mode: \"vb\",\n    ext: [\"vb\"]\n  }, {\n    name: \"VBScript\",\n    mime: \"text/vbscript\",\n    mode: \"vbscript\",\n    ext: [\"vbs\"]\n  }, {\n    name: \"Velocity\",\n    mime: \"text/velocity\",\n    mode: \"velocity\",\n    ext: [\"vtl\"]\n  }, {\n    name: \"Verilog\",\n    mime: \"text/x-verilog\",\n    mode: \"verilog\",\n    ext: [\"v\"]\n  }, {\n    name: \"VHDL\",\n    mime: \"text/x-vhdl\",\n    mode: \"vhdl\",\n    ext: [\"vhd\", \"vhdl\"]\n  }, {\n    name: \"Vue.js Component\",\n    mimes: [\"script/x-vue\", \"text/x-vue\"],\n    mode: \"vue\",\n    ext: [\"vue\"]\n  }, {\n    name: \"XML\",\n    mimes: [\"application/xml\", \"text/xml\"],\n    mode: \"xml\",\n    ext: [\"xml\", \"xsl\", \"xsd\", \"svg\"],\n    alias: [\"rss\", \"wsdl\", \"xsd\"]\n  }, {\n    name: \"XQuery\",\n    mime: \"application/xquery\",\n    mode: \"xquery\",\n    ext: [\"xy\", \"xquery\"]\n  }, {\n    name: \"Yacas\",\n    mime: \"text/x-yacas\",\n    mode: \"yacas\",\n    ext: [\"ys\"]\n  }, {\n    name: \"YAML\",\n    mimes: [\"text/x-yaml\", \"text/yaml\"],\n    mode: \"yaml\",\n    ext: [\"yaml\", \"yml\"],\n    alias: [\"yml\"]\n  }, {\n    name: \"Z80\",\n    mime: \"text/x-z80\",\n    mode: \"z80\",\n    ext: [\"z80\"]\n  }, {\n    name: \"mscgen\",\n    mime: \"text/x-mscgen\",\n    mode: \"mscgen\",\n    ext: [\"mscgen\", \"mscin\", \"msc\"]\n  }, {\n    name: \"xu\",\n    mime: \"text/x-xu\",\n    mode: \"mscgen\",\n    ext: [\"xu\"]\n  }, {\n    name: \"msgenny\",\n    mime: \"text/x-msgenny\",\n    mode: \"mscgen\",\n    ext: [\"msgenny\"]\n  }, {\n    name: \"WebAssembly\",\n    mime: \"text/webassembly\",\n    mode: \"wast\",\n    ext: [\"wat\", \"wast\"]\n  }]; // Ensure all modes have a mime property for backwards compatibility\n\n  for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n    var info = CodeMirror.modeInfo[i];\n    if (info.mimes) info.mime = info.mimes[0];\n  }\n\n  CodeMirror.findModeByMIME = function (mime) {\n    mime = mime.toLowerCase();\n\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.mime == mime) return info;\n      if (info.mimes) for (var j = 0; j < info.mimes.length; j++) {\n        if (info.mimes[j] == mime) return info;\n      }\n    }\n\n    if (/\\+xml$/.test(mime)) return CodeMirror.findModeByMIME(\"application/xml\");\n    if (/\\+json$/.test(mime)) return CodeMirror.findModeByMIME(\"application/json\");\n  };\n\n  CodeMirror.findModeByExtension = function (ext) {\n    ext = ext.toLowerCase();\n\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.ext) for (var j = 0; j < info.ext.length; j++) {\n        if (info.ext[j] == ext) return info;\n      }\n    }\n  };\n\n  CodeMirror.findModeByFileName = function (filename) {\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.file && info.file.test(filename)) return info;\n    }\n\n    var dot = filename.lastIndexOf(\".\");\n    var ext = dot > -1 && filename.substring(dot + 1, filename.length);\n    if (ext) return CodeMirror.findModeByExtension(ext);\n  };\n\n  CodeMirror.findModeByName = function (name) {\n    name = name.toLowerCase();\n\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.name.toLowerCase() == name) return info;\n      if (info.alias) for (var j = 0; j < info.alias.length; j++) {\n        if (info.alias[j].toLowerCase() == name) return info;\n      }\n    }\n  };\n});\n\n/***/ }),\n\n/***/ 1255:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565));else {}\n})(function (CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function (cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      CodeMirror.on(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose = function () {\n        onComposition(cm);\n      });\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      CodeMirror.off(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose);\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.style.direction = cm.getOption(\"direction\");\n    elt.className = \"CodeMirror-placeholder CodeMirror-line-like\";\n    var placeHolder = cm.getOption(\"placeholder\");\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder);\n    elt.appendChild(placeHolder);\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onComposition(cm) {\n    setTimeout(function () {\n      var empty = false;\n\n      if (cm.lineCount() == 1) {\n        var input = cm.getInputField();\n        empty = input.nodeName == \"TEXTAREA\" ? !cm.getLine(0).length : !/[^\\u200b]/.test(input.querySelector(\".CodeMirror-line\").textContent);\n      }\n\n      if (empty) setPlaceholder(cm);else clearPlaceholder(cm);\n    }, 20);\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(),\n        empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n    if (empty) setPlaceholder(cm);else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return cm.lineCount() === 1 && cm.getLine(0) === \"\";\n  }\n});\n\n/***/ }),\n\n/***/ 1256:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565));else {}\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"autoRefresh\", false, function (cm, val) {\n    if (cm.state.autoRefresh) {\n      stopListening(cm, cm.state.autoRefresh);\n      cm.state.autoRefresh = null;\n    }\n\n    if (val && cm.display.wrapper.offsetHeight == 0) startListening(cm, cm.state.autoRefresh = {\n      delay: val.delay || 250\n    });\n  });\n\n  function startListening(cm, state) {\n    function check() {\n      if (cm.display.wrapper.offsetHeight) {\n        stopListening(cm, state);\n        if (cm.display.lastWrapHeight != cm.display.wrapper.clientHeight) cm.refresh();\n      } else {\n        state.timeout = setTimeout(check, state.delay);\n      }\n    }\n\n    state.timeout = setTimeout(check, state.delay);\n\n    state.hurry = function () {\n      clearTimeout(state.timeout);\n      state.timeout = setTimeout(check, 50);\n    };\n\n    CodeMirror.on(window, \"mouseup\", state.hurry);\n    CodeMirror.on(window, \"keyup\", state.hurry);\n  }\n\n  function stopListening(_cm, state) {\n    clearTimeout(state.timeout);\n    CodeMirror.off(window, \"mouseup\", state.hurry);\n    CodeMirror.off(window, \"keyup\", state.hurry);\n  }\n});\n\n/***/ }),\n\n/***/ 1257:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n// Because sometimes you need to mark the selected *text*.\n//\n// Adds an option 'styleSelectedText' which, when enabled, gives\n// selected text the CSS class given as option value, or\n// \"CodeMirror-selectedtext\" when the value is not a string.\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565));else {}\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"styleSelectedText\", false, function (cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n\n    if (val && !prev) {\n      cm.state.markedSelection = [];\n      cm.state.markedSelectionStyle = typeof val == \"string\" ? val : \"CodeMirror-selectedtext\";\n      reset(cm);\n      cm.on(\"cursorActivity\", onCursorActivity);\n      cm.on(\"change\", onChange);\n    } else if (!val && prev) {\n      cm.off(\"cursorActivity\", onCursorActivity);\n      cm.off(\"change\", onChange);\n      clear(cm);\n      cm.state.markedSelection = cm.state.markedSelectionStyle = null;\n    }\n  });\n\n  function onCursorActivity(cm) {\n    if (cm.state.markedSelection) cm.operation(function () {\n      update(cm);\n    });\n  }\n\n  function onChange(cm) {\n    if (cm.state.markedSelection && cm.state.markedSelection.length) cm.operation(function () {\n      clear(cm);\n    });\n  }\n\n  var CHUNK_SIZE = 8;\n  var Pos = CodeMirror.Pos;\n  var cmp = CodeMirror.cmpPos;\n\n  function coverRange(cm, from, to, addAt) {\n    if (cmp(from, to) == 0) return;\n    var array = cm.state.markedSelection;\n    var cls = cm.state.markedSelectionStyle;\n\n    for (var line = from.line;;) {\n      var start = line == from.line ? from : Pos(line, 0);\n      var endLine = line + CHUNK_SIZE,\n          atEnd = endLine >= to.line;\n      var end = atEnd ? to : Pos(endLine, 0);\n      var mark = cm.markText(start, end, {\n        className: cls\n      });\n      if (addAt == null) array.push(mark);else array.splice(addAt++, 0, mark);\n      if (atEnd) break;\n      line = endLine;\n    }\n  }\n\n  function clear(cm) {\n    var array = cm.state.markedSelection;\n\n    for (var i = 0; i < array.length; ++i) {\n      array[i].clear();\n    }\n\n    array.length = 0;\n  }\n\n  function reset(cm) {\n    clear(cm);\n    var ranges = cm.listSelections();\n\n    for (var i = 0; i < ranges.length; i++) {\n      coverRange(cm, ranges[i].from(), ranges[i].to());\n    }\n  }\n\n  function update(cm) {\n    if (!cm.somethingSelected()) return clear(cm);\n    if (cm.listSelections().length > 1) return reset(cm);\n    var from = cm.getCursor(\"start\"),\n        to = cm.getCursor(\"end\");\n    var array = cm.state.markedSelection;\n    if (!array.length) return coverRange(cm, from, to);\n    var coverStart = array[0].find(),\n        coverEnd = array[array.length - 1].find();\n    if (!coverStart || !coverEnd || to.line - from.line <= CHUNK_SIZE || cmp(from, coverEnd.to) >= 0 || cmp(to, coverStart.from) <= 0) return reset(cm);\n\n    while (cmp(from, coverStart.from) > 0) {\n      array.shift().clear();\n      coverStart = array[0].find();\n    }\n\n    if (cmp(from, coverStart.from) < 0) {\n      if (coverStart.to.line - from.line < CHUNK_SIZE) {\n        array.shift().clear();\n        coverRange(cm, from, coverStart.to, 0);\n      } else {\n        coverRange(cm, from, coverStart.from, 0);\n      }\n    }\n\n    while (cmp(to, coverEnd.to) < 0) {\n      array.pop().clear();\n      coverEnd = array[array.length - 1].find();\n    }\n\n    if (cmp(to, coverEnd.to) > 0) {\n      if (to.line - coverEnd.from.line < CHUNK_SIZE) {\n        array.pop().clear();\n        coverRange(cm, coverEnd.from, to);\n      } else {\n        coverRange(cm, coverEnd.to, to);\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 1258:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565));else {}\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var Pos = CodeMirror.Pos;\n\n  function regexpFlags(regexp) {\n    var flags = regexp.flags;\n    return flags != null ? flags : (regexp.ignoreCase ? \"i\" : \"\") + (regexp.global ? \"g\" : \"\") + (regexp.multiline ? \"m\" : \"\");\n  }\n\n  function ensureFlags(regexp, flags) {\n    var current = regexpFlags(regexp),\n        target = current;\n\n    for (var i = 0; i < flags.length; i++) {\n      if (target.indexOf(flags.charAt(i)) == -1) target += flags.charAt(i);\n    }\n\n    return current == target ? regexp : new RegExp(regexp.source, target);\n  }\n\n  function maybeMultiline(regexp) {\n    return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source);\n  }\n\n  function searchRegexpForward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\");\n\n    for (var line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n      regexp.lastIndex = ch;\n      var string = doc.getLine(line),\n          match = regexp.exec(string);\n      if (match) return {\n        from: Pos(line, match.index),\n        to: Pos(line, match.index + match[0].length),\n        match: match\n      };\n    }\n  }\n\n  function searchRegexpForwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpForward(doc, regexp, start);\n    regexp = ensureFlags(regexp, \"gm\");\n    var string,\n        chunk = 1;\n\n    for (var line = start.line, last = doc.lastLine(); line <= last;) {\n      // This grows the search buffer in exponentially-sized chunks\n      // between matches, so that nearby matches are fast and don't\n      // require concatenating the whole document (in case we're\n      // searching for something that has tons of matches), but at the\n      // same time, the amount of retries is limited.\n      for (var i = 0; i < chunk; i++) {\n        if (line > last) break;\n        var curLine = doc.getLine(line++);\n        string = string == null ? curLine : string + \"\\n\" + curLine;\n      }\n\n      chunk = chunk * 2;\n      regexp.lastIndex = start.ch;\n      var match = regexp.exec(string);\n\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"),\n            inside = match[0].split(\"\\n\");\n        var startLine = start.line + before.length - 1,\n            startCh = before[before.length - 1].length;\n        return {\n          from: Pos(startLine, startCh),\n          to: Pos(startLine + inside.length - 1, inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n          match: match\n        };\n      }\n    }\n  }\n\n  function lastMatchIn(string, regexp, endMargin) {\n    var match,\n        from = 0;\n\n    while (from <= string.length) {\n      regexp.lastIndex = from;\n      var newMatch = regexp.exec(string);\n      if (!newMatch) break;\n      var end = newMatch.index + newMatch[0].length;\n      if (end > string.length - endMargin) break;\n      if (!match || end > match.index + match[0].length) match = newMatch;\n      from = newMatch.index + 1;\n    }\n\n    return match;\n  }\n\n  function searchRegexpBackward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\");\n\n    for (var line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n      var string = doc.getLine(line);\n      var match = lastMatchIn(string, regexp, ch < 0 ? 0 : string.length - ch);\n      if (match) return {\n        from: Pos(line, match.index),\n        to: Pos(line, match.index + match[0].length),\n        match: match\n      };\n    }\n  }\n\n  function searchRegexpBackwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpBackward(doc, regexp, start);\n    regexp = ensureFlags(regexp, \"gm\");\n    var string,\n        chunkSize = 1,\n        endMargin = doc.getLine(start.line).length - start.ch;\n\n    for (var line = start.line, first = doc.firstLine(); line >= first;) {\n      for (var i = 0; i < chunkSize && line >= first; i++) {\n        var curLine = doc.getLine(line--);\n        string = string == null ? curLine : curLine + \"\\n\" + string;\n      }\n\n      chunkSize *= 2;\n      var match = lastMatchIn(string, regexp, endMargin);\n\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"),\n            inside = match[0].split(\"\\n\");\n        var startLine = line + before.length,\n            startCh = before[before.length - 1].length;\n        return {\n          from: Pos(startLine, startCh),\n          to: Pos(startLine + inside.length - 1, inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n          match: match\n        };\n      }\n    }\n  }\n\n  var doFold, noFold;\n\n  if (String.prototype.normalize) {\n    doFold = function doFold(str) {\n      return str.normalize(\"NFD\").toLowerCase();\n    };\n\n    noFold = function noFold(str) {\n      return str.normalize(\"NFD\");\n    };\n  } else {\n    doFold = function doFold(str) {\n      return str.toLowerCase();\n    };\n\n    noFold = function noFold(str) {\n      return str;\n    };\n  } // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n\n\n  function adjustPos(orig, folded, pos, foldFunc) {\n    if (orig.length == folded.length) return pos;\n\n    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length);;) {\n      if (min == max) return min;\n      var mid = min + max >> 1;\n      var len = foldFunc(orig.slice(0, mid)).length;\n      if (len == pos) return mid;else if (len > pos) max = mid;else min = mid + 1;\n    }\n  }\n\n  function searchStringForward(doc, query, start, caseFold) {\n    // Empty string would match anything and never progress, so we\n    // define it to match nothing instead.\n    if (!query.length) return null;\n    var fold = caseFold ? doFold : noFold;\n    var lines = fold(query).split(/\\r|\\n\\r?/);\n\n    search: for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {\n      var orig = doc.getLine(line).slice(ch),\n          string = fold(orig);\n\n      if (lines.length == 1) {\n        var found = string.indexOf(lines[0]);\n        if (found == -1) continue search;\n        var start = adjustPos(orig, string, found, fold) + ch;\n        return {\n          from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n          to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)\n        };\n      } else {\n        var cutFrom = string.length - lines[0].length;\n        if (string.slice(cutFrom) != lines[0]) continue search;\n\n        for (var i = 1; i < lines.length - 1; i++) {\n          if (fold(doc.getLine(line + i)) != lines[i]) continue search;\n        }\n\n        var end = doc.getLine(line + lines.length - 1),\n            endString = fold(end),\n            lastLine = lines[lines.length - 1];\n        if (endString.slice(0, lastLine.length) != lastLine) continue search;\n        return {\n          from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n          to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))\n        };\n      }\n    }\n  }\n\n  function searchStringBackward(doc, query, start, caseFold) {\n    if (!query.length) return null;\n    var fold = caseFold ? doFold : noFold;\n    var lines = fold(query).split(/\\r|\\n\\r?/);\n\n    search: for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {\n      var orig = doc.getLine(line);\n      if (ch > -1) orig = orig.slice(0, ch);\n      var string = fold(orig);\n\n      if (lines.length == 1) {\n        var found = string.lastIndexOf(lines[0]);\n        if (found == -1) continue search;\n        return {\n          from: Pos(line, adjustPos(orig, string, found, fold)),\n          to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))\n        };\n      } else {\n        var lastLine = lines[lines.length - 1];\n        if (string.slice(0, lastLine.length) != lastLine) continue search;\n\n        for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++) {\n          if (fold(doc.getLine(start + i)) != lines[i]) continue search;\n        }\n\n        var top = doc.getLine(line + 1 - lines.length),\n            topString = fold(top);\n        if (topString.slice(topString.length - lines[0].length) != lines[0]) continue search;\n        return {\n          from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n          to: Pos(line, adjustPos(orig, string, lastLine.length, fold))\n        };\n      }\n    }\n  }\n\n  function SearchCursor(doc, query, pos, options) {\n    this.atOccurrence = false;\n    this.doc = doc;\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0);\n    this.pos = {\n      from: pos,\n      to: pos\n    };\n    var caseFold;\n\n    if (typeof options == \"object\") {\n      caseFold = options.caseFold;\n    } else {\n      // Backwards compat for when caseFold was the 4th argument\n      caseFold = options;\n      options = null;\n    }\n\n    if (typeof query == \"string\") {\n      if (caseFold == null) caseFold = false;\n\n      this.matches = function (reverse, pos) {\n        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos, caseFold);\n      };\n    } else {\n      query = ensureFlags(query, \"gm\");\n      if (!options || options.multiline !== false) this.matches = function (reverse, pos) {\n        return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos);\n      };else this.matches = function (reverse, pos) {\n        return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos);\n      };\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function findNext() {\n      return this.find(false);\n    },\n    findPrevious: function findPrevious() {\n      return this.find(true);\n    },\n    find: function find(reverse) {\n      var result = this.matches(reverse, this.doc.clipPos(reverse ? this.pos.from : this.pos.to)); // Implements weird auto-growing behavior on null-matches for\n      // backwards-compatibility with the vim code (unfortunately)\n\n      while (result && CodeMirror.cmpPos(result.from, result.to) == 0) {\n        if (reverse) {\n          if (result.from.ch) result.from = Pos(result.from.line, result.from.ch - 1);else if (result.from.line == this.doc.firstLine()) result = null;else result = this.matches(reverse, this.doc.clipPos(Pos(result.from.line - 1)));\n        } else {\n          if (result.to.ch < this.doc.getLine(result.to.line).length) result.to = Pos(result.to.line, result.to.ch + 1);else if (result.to.line == this.doc.lastLine()) result = null;else result = this.matches(reverse, Pos(result.to.line + 1, 0));\n        }\n      }\n\n      if (result) {\n        this.pos = result;\n        this.atOccurrence = true;\n        return this.pos.match || true;\n      } else {\n        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0);\n        this.pos = {\n          from: end,\n          to: end\n        };\n        return this.atOccurrence = false;\n      }\n    },\n    from: function from() {\n      if (this.atOccurrence) return this.pos.from;\n    },\n    to: function to() {\n      if (this.atOccurrence) return this.pos.to;\n    },\n    replace: function replace(newText, origin) {\n      if (!this.atOccurrence) return;\n      var lines = CodeMirror.splitLines(newText);\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin);\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1, lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0));\n    }\n  };\n  CodeMirror.defineExtension(\"getSearchCursor\", function (query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold);\n  });\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function (query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold);\n  });\n  CodeMirror.defineExtension(\"selectMatches\", function (query, caseFold) {\n    var ranges = [];\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold);\n\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break;\n      ranges.push({\n        anchor: cur.from(),\n        head: cur.to()\n      });\n    }\n\n    if (ranges.length) this.setSelections(ranges, 0);\n  });\n});\n\n/***/ }),\n\n/***/ 1259:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565), __webpack_require__(833), __webpack_require__(835));else {}\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var urlRE = /^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\\.beep|\\.lwz|\\.xpc|\\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\\.beeps?|xmpp|xri|ymsgr|z39\\.50[rs]?):(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`*!()\\[\\]{};:'\".,<>?«»“”‘’]))/i;\n  CodeMirror.defineMode(\"gfm\", function (config, modeConfig) {\n    var codeDepth = 0;\n\n    function blankLine(state) {\n      state.code = false;\n      return null;\n    }\n\n    var gfmOverlay = {\n      startState: function startState() {\n        return {\n          code: false,\n          codeBlock: false,\n          ateSpace: false\n        };\n      },\n      copyState: function copyState(s) {\n        return {\n          code: s.code,\n          codeBlock: s.codeBlock,\n          ateSpace: s.ateSpace\n        };\n      },\n      token: function token(stream, state) {\n        state.combineTokens = null; // Hack to prevent formatting override inside code blocks (block and inline)\n\n        if (state.codeBlock) {\n          if (stream.match(/^```+/)) {\n            state.codeBlock = false;\n            return null;\n          }\n\n          stream.skipToEnd();\n          return null;\n        }\n\n        if (stream.sol()) {\n          state.code = false;\n        }\n\n        if (stream.sol() && stream.match(/^```+/)) {\n          stream.skipToEnd();\n          state.codeBlock = true;\n          return null;\n        } // If this block is changed, it may need to be updated in Markdown mode\n\n\n        if (stream.peek() === '`') {\n          stream.next();\n          var before = stream.pos;\n          stream.eatWhile('`');\n          var difference = 1 + stream.pos - before;\n\n          if (!state.code) {\n            codeDepth = difference;\n            state.code = true;\n          } else {\n            if (difference === codeDepth) {\n              // Must be exact\n              state.code = false;\n            }\n          }\n\n          return null;\n        } else if (state.code) {\n          stream.next();\n          return null;\n        } // Check if space. If so, links can be formatted later on\n\n\n        if (stream.eatSpace()) {\n          state.ateSpace = true;\n          return null;\n        }\n\n        if (stream.sol() || state.ateSpace) {\n          state.ateSpace = false;\n\n          if (modeConfig.gitHubSpice !== false) {\n            if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+@)?(?=.{0,6}\\d)(?:[a-f0-9]{7,40}\\b)/)) {\n              // User/Project@SHA\n              // User@SHA\n              // SHA\n              state.combineTokens = true;\n              return \"link\";\n            } else if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+)?#[0-9]+\\b/)) {\n              // User/Project#Num\n              // User#Num\n              // #Num\n              state.combineTokens = true;\n              return \"link\";\n            }\n          }\n        }\n\n        if (stream.match(urlRE) && stream.string.slice(stream.start - 2, stream.start) != \"](\" && (stream.start == 0 || /\\W/.test(stream.string.charAt(stream.start - 1)))) {\n          // URLs\n          // Taken from http://daringfireball.net/2010/07/improved_regex_for_matching_urls\n          // And then (issue #1160) simplified to make it not crash the Chrome Regexp engine\n          // And then limited url schemes to the CommonMark list, so foo:bar isn't matched as a URL\n          state.combineTokens = true;\n          return \"link\";\n        }\n\n        stream.next();\n        return null;\n      },\n      blankLine: blankLine\n    };\n    var markdownConfig = {\n      taskLists: true,\n      strikethrough: true,\n      emoji: true\n    };\n\n    for (var attr in modeConfig) {\n      markdownConfig[attr] = modeConfig[attr];\n    }\n\n    markdownConfig.name = \"markdown\";\n    return CodeMirror.overlayMode(CodeMirror.getMode(config, markdownConfig), gfmOverlay);\n  }, \"markdown\");\n  CodeMirror.defineMIME(\"text/x-gfm\", \"gfm\");\n});\n\n/***/ }),\n\n/***/ 1260:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Use strict mode (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)\n // Requires\n\nvar Typo = __webpack_require__(1261); // Create function\n\n\nfunction CodeMirrorSpellChecker(options) {\n  // Initialize\n  options = options || {}; // Verify\n\n  if (typeof options.codeMirrorInstance !== \"function\" || typeof options.codeMirrorInstance.defineMode !== \"function\") {\n    console.log(\"CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`\");\n    return;\n  } // Because some browsers don't support this functionality yet\n\n\n  if (!String.prototype.includes) {\n    String.prototype.includes = function () {\n      \"use strict\";\n\n      return String.prototype.indexOf.apply(this, arguments) !== -1;\n    };\n  } // Define the new mode\n\n\n  options.codeMirrorInstance.defineMode(\"spell-checker\", function (config) {\n    // Load AFF/DIC data\n    if (!CodeMirrorSpellChecker.aff_loading) {\n      CodeMirrorSpellChecker.aff_loading = true;\n      var xhr_aff = new XMLHttpRequest();\n      xhr_aff.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff\", true);\n\n      xhr_aff.onload = function () {\n        if (xhr_aff.readyState === 4 && xhr_aff.status === 200) {\n          CodeMirrorSpellChecker.aff_data = xhr_aff.responseText;\n          CodeMirrorSpellChecker.num_loaded++;\n\n          if (CodeMirrorSpellChecker.num_loaded == 2) {\n            CodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n              platform: \"any\"\n            });\n          }\n        }\n      };\n\n      xhr_aff.send(null);\n    }\n\n    if (!CodeMirrorSpellChecker.dic_loading) {\n      CodeMirrorSpellChecker.dic_loading = true;\n      var xhr_dic = new XMLHttpRequest();\n      xhr_dic.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic\", true);\n\n      xhr_dic.onload = function () {\n        if (xhr_dic.readyState === 4 && xhr_dic.status === 200) {\n          CodeMirrorSpellChecker.dic_data = xhr_dic.responseText;\n          CodeMirrorSpellChecker.num_loaded++;\n\n          if (CodeMirrorSpellChecker.num_loaded == 2) {\n            CodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n              platform: \"any\"\n            });\n          }\n        }\n      };\n\n      xhr_dic.send(null);\n    } // Define what separates a word\n\n\n    var rx_word = \"!\\\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~ \"; // Create the overlay and such\n\n    var overlay = {\n      token: function token(stream) {\n        var ch = stream.peek();\n        var word = \"\";\n\n        if (rx_word.includes(ch)) {\n          stream.next();\n          return null;\n        }\n\n        while ((ch = stream.peek()) != null && !rx_word.includes(ch)) {\n          word += ch;\n          stream.next();\n        }\n\n        if (CodeMirrorSpellChecker.typo && !CodeMirrorSpellChecker.typo.check(word)) return \"spell-error\"; // CSS class: cm-spell-error\n\n        return null;\n      }\n    };\n    var mode = options.codeMirrorInstance.getMode(config, config.backdrop || \"text/plain\");\n    return options.codeMirrorInstance.overlayMode(mode, overlay, true);\n  });\n} // Initialize data globally to reduce memory consumption\n\n\nCodeMirrorSpellChecker.num_loaded = 0;\nCodeMirrorSpellChecker.aff_loading = false;\nCodeMirrorSpellChecker.dic_loading = false;\nCodeMirrorSpellChecker.aff_data = \"\";\nCodeMirrorSpellChecker.dic_data = \"\";\nCodeMirrorSpellChecker.typo; // Export\n\nmodule.exports = CodeMirrorSpellChecker;\n\n/***/ }),\n\n/***/ 1261:\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(__dirname) {/* globals chrome: false */\n\n/* globals __dirname: false */\n\n/* globals require: false */\n\n/* globals Buffer: false */\n\n/* globals module: false */\n\n/**\n * Typo is a JavaScript implementation of a spellchecker using hunspell-style \n * dictionaries.\n */\nvar Typo;\n\n(function () {\n  \"use strict\";\n  /**\n   * Typo constructor.\n   *\n   * @param {String} [dictionary] The locale code of the dictionary being used. e.g.,\n   *                              \"en_US\". This is only used to auto-load dictionaries.\n   * @param {String} [affData]    The data from the dictionary's .aff file. If omitted\n   *                              and Typo.js is being used in a Chrome extension, the .aff\n   *                              file will be loaded automatically from\n   *                              lib/typo/dictionaries/[dictionary]/[dictionary].aff\n   *                              In other environments, it will be loaded from\n   *                              [settings.dictionaryPath]/dictionaries/[dictionary]/[dictionary].aff\n   * @param {String} [wordsData]  The data from the dictionary's .dic file. If omitted\n   *                              and Typo.js is being used in a Chrome extension, the .dic\n   *                              file will be loaded automatically from\n   *                              lib/typo/dictionaries/[dictionary]/[dictionary].dic\n   *                              In other environments, it will be loaded from\n   *                              [settings.dictionaryPath]/dictionaries/[dictionary]/[dictionary].dic\n   * @param {Object} [settings]   Constructor settings. Available properties are:\n   *                              {String} [dictionaryPath]: path to load dictionary from in non-chrome\n   *                              environment.\n   *                              {Object} [flags]: flag information.\n   *                              {Boolean} [asyncLoad]: If true, affData and wordsData will be loaded\n   *                              asynchronously.\n   *                              {Function} [loadedCallback]: Called when both affData and wordsData\n   *                              have been loaded. Only used if asyncLoad is set to true. The parameter\n   *                              is the instantiated Typo object.\n   *\n   * @returns {Typo} A Typo object.\n   */\n\n  Typo = function Typo(dictionary, affData, wordsData, settings) {\n    settings = settings || {};\n    this.dictionary = null;\n    this.rules = {};\n    this.dictionaryTable = {};\n    this.compoundRules = [];\n    this.compoundRuleCodes = {};\n    this.replacementTable = [];\n    this.flags = settings.flags || {};\n    this.memoized = {};\n    this.loaded = false;\n    var self = this;\n    var path; // Loop-control variables.\n\n    var i, j, _len, _jlen;\n\n    if (dictionary) {\n      self.dictionary = dictionary; // If the data is preloaded, just setup the Typo object.\n\n      if (affData && wordsData) {\n        setup();\n      } // Loading data for Chrome extentions.\n      else if (typeof window !== 'undefined' && 'chrome' in window && 'extension' in window.chrome && 'getURL' in window.chrome.extension) {\n          if (settings.dictionaryPath) {\n            path = settings.dictionaryPath;\n          } else {\n            path = \"typo/dictionaries\";\n          }\n\n          if (!affData) readDataFile(chrome.extension.getURL(path + \"/\" + dictionary + \"/\" + dictionary + \".aff\"), setAffData);\n          if (!wordsData) readDataFile(chrome.extension.getURL(path + \"/\" + dictionary + \"/\" + dictionary + \".dic\"), setWordsData);\n        } else {\n          if (settings.dictionaryPath) {\n            path = settings.dictionaryPath;\n          } else if (true) {\n            path = __dirname + '/dictionaries';\n          } else {}\n\n          if (!affData) readDataFile(path + \"/\" + dictionary + \"/\" + dictionary + \".aff\", setAffData);\n          if (!wordsData) readDataFile(path + \"/\" + dictionary + \"/\" + dictionary + \".dic\", setWordsData);\n        }\n    }\n\n    function readDataFile(url, setFunc) {\n      var response = self._readFile(url, null, settings.asyncLoad);\n\n      if (settings.asyncLoad) {\n        response.then(function (data) {\n          setFunc(data);\n        });\n      } else {\n        setFunc(response);\n      }\n    }\n\n    function setAffData(data) {\n      affData = data;\n\n      if (wordsData) {\n        setup();\n      }\n    }\n\n    function setWordsData(data) {\n      wordsData = data;\n\n      if (affData) {\n        setup();\n      }\n    }\n\n    function setup() {\n      self.rules = self._parseAFF(affData); // Save the rule codes that are used in compound rules.\n\n      self.compoundRuleCodes = {};\n\n      for (i = 0, _len = self.compoundRules.length; i < _len; i++) {\n        var rule = self.compoundRules[i];\n\n        for (j = 0, _jlen = rule.length; j < _jlen; j++) {\n          self.compoundRuleCodes[rule[j]] = [];\n        }\n      } // If we add this ONLYINCOMPOUND flag to self.compoundRuleCodes, then _parseDIC\n      // will do the work of saving the list of words that are compound-only.\n\n\n      if (\"ONLYINCOMPOUND\" in self.flags) {\n        self.compoundRuleCodes[self.flags.ONLYINCOMPOUND] = [];\n      }\n\n      self.dictionaryTable = self._parseDIC(wordsData); // Get rid of any codes from the compound rule codes that are never used \n      // (or that were special regex characters).  Not especially necessary... \n\n      for (i in self.compoundRuleCodes) {\n        if (self.compoundRuleCodes[i].length === 0) {\n          delete self.compoundRuleCodes[i];\n        }\n      } // Build the full regular expressions for each compound rule.\n      // I have a feeling (but no confirmation yet) that this method of \n      // testing for compound words is probably slow.\n\n\n      for (i = 0, _len = self.compoundRules.length; i < _len; i++) {\n        var ruleText = self.compoundRules[i];\n        var expressionText = \"\";\n\n        for (j = 0, _jlen = ruleText.length; j < _jlen; j++) {\n          var character = ruleText[j];\n\n          if (character in self.compoundRuleCodes) {\n            expressionText += \"(\" + self.compoundRuleCodes[character].join(\"|\") + \")\";\n          } else {\n            expressionText += character;\n          }\n        }\n\n        self.compoundRules[i] = new RegExp(expressionText, \"i\");\n      }\n\n      self.loaded = true;\n\n      if (settings.asyncLoad && settings.loadedCallback) {\n        settings.loadedCallback(self);\n      }\n    }\n\n    return this;\n  };\n\n  Typo.prototype = {\n    /**\n     * Loads a Typo instance from a hash of all of the Typo properties.\n     *\n     * @param object obj A hash of Typo properties, probably gotten from a JSON.parse(JSON.stringify(typo_instance)).\n     */\n    load: function load(obj) {\n      for (var i in obj) {\n        if (obj.hasOwnProperty(i)) {\n          this[i] = obj[i];\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Read the contents of a file.\n     * \n     * @param {String} path The path (relative) to the file.\n     * @param {String} [charset=\"ISO8859-1\"] The expected charset of the file\n     * @param {Boolean} async If true, the file will be read asynchronously. For node.js this does nothing, all\n     *        files are read synchronously.\n     * @returns {String} The file data if async is false, otherwise a promise object. If running node.js, the data is\n     *          always returned.\n     */\n    _readFile: function _readFile(path, charset, async) {\n      charset = charset || \"utf8\";\n\n      if (typeof XMLHttpRequest !== 'undefined') {\n        var promise;\n        var req = new XMLHttpRequest();\n        req.open(\"GET\", path, async);\n\n        if (async) {\n          promise = new Promise(function (resolve, reject) {\n            req.onload = function () {\n              if (req.status === 200) {\n                resolve(req.responseText);\n              } else {\n                reject(req.statusText);\n              }\n            };\n\n            req.onerror = function () {\n              reject(req.statusText);\n            };\n          });\n        }\n\n        if (req.overrideMimeType) req.overrideMimeType(\"text/plain; charset=\" + charset);\n        req.send(null);\n        return async ? promise : req.responseText;\n      } else if (true) {\n        // Node.js\n        var fs = __webpack_require__(1262);\n\n        try {\n          if (fs.existsSync(path)) {\n            return fs.readFileSync(path, charset);\n          } else {\n            console.log(\"Path \" + path + \" does not exist.\");\n          }\n        } catch (e) {\n          console.log(e);\n          return '';\n        }\n      }\n    },\n\n    /**\n     * Parse the rules out from a .aff file.\n     *\n     * @param {String} data The contents of the affix file.\n     * @returns object The rules from the file.\n     */\n    _parseAFF: function _parseAFF(data) {\n      var rules = {};\n      var line, subline, numEntries, lineParts;\n\n      var i, j, _len, _jlen; // Remove comment lines\n\n\n      data = this._removeAffixComments(data);\n      var lines = data.split(/\\r?\\n/);\n\n      for (i = 0, _len = lines.length; i < _len; i++) {\n        line = lines[i];\n        var definitionParts = line.split(/\\s+/);\n        var ruleType = definitionParts[0];\n\n        if (ruleType == \"PFX\" || ruleType == \"SFX\") {\n          var ruleCode = definitionParts[1];\n          var combineable = definitionParts[2];\n          numEntries = parseInt(definitionParts[3], 10);\n          var entries = [];\n\n          for (j = i + 1, _jlen = i + 1 + numEntries; j < _jlen; j++) {\n            subline = lines[j];\n            lineParts = subline.split(/\\s+/);\n            var charactersToRemove = lineParts[2];\n            var additionParts = lineParts[3].split(\"/\");\n            var charactersToAdd = additionParts[0];\n            if (charactersToAdd === \"0\") charactersToAdd = \"\";\n            var continuationClasses = this.parseRuleCodes(additionParts[1]);\n            var regexToMatch = lineParts[4];\n            var entry = {};\n            entry.add = charactersToAdd;\n            if (continuationClasses.length > 0) entry.continuationClasses = continuationClasses;\n\n            if (regexToMatch !== \".\") {\n              if (ruleType === \"SFX\") {\n                entry.match = new RegExp(regexToMatch + \"$\");\n              } else {\n                entry.match = new RegExp(\"^\" + regexToMatch);\n              }\n            }\n\n            if (charactersToRemove != \"0\") {\n              if (ruleType === \"SFX\") {\n                entry.remove = new RegExp(charactersToRemove + \"$\");\n              } else {\n                entry.remove = charactersToRemove;\n              }\n            }\n\n            entries.push(entry);\n          }\n\n          rules[ruleCode] = {\n            \"type\": ruleType,\n            \"combineable\": combineable == \"Y\",\n            \"entries\": entries\n          };\n          i += numEntries;\n        } else if (ruleType === \"COMPOUNDRULE\") {\n          numEntries = parseInt(definitionParts[1], 10);\n\n          for (j = i + 1, _jlen = i + 1 + numEntries; j < _jlen; j++) {\n            line = lines[j];\n            lineParts = line.split(/\\s+/);\n            this.compoundRules.push(lineParts[1]);\n          }\n\n          i += numEntries;\n        } else if (ruleType === \"REP\") {\n          lineParts = line.split(/\\s+/);\n\n          if (lineParts.length === 3) {\n            this.replacementTable.push([lineParts[1], lineParts[2]]);\n          }\n        } else {\n          // ONLYINCOMPOUND\n          // COMPOUNDMIN\n          // FLAG\n          // KEEPCASE\n          // NEEDAFFIX\n          this.flags[ruleType] = definitionParts[1];\n        }\n      }\n\n      return rules;\n    },\n\n    /**\n     * Removes comment lines and then cleans up blank lines and trailing whitespace.\n     *\n     * @param {String} data The data from an affix file.\n     * @return {String} The cleaned-up data.\n     */\n    _removeAffixComments: function _removeAffixComments(data) {\n      // Remove comments\n      // This used to remove any string starting with '#' up to the end of the line,\n      // but some COMPOUNDRULE definitions include '#' as part of the rule.\n      // I haven't seen any affix files that use comments on the same line as real data,\n      // so I don't think this will break anything.\n      data = data.replace(/^\\s*#.*$/mg, \"\"); // Trim each line\n\n      data = data.replace(/^\\s\\s*/m, '').replace(/\\s\\s*$/m, ''); // Remove blank lines.\n\n      data = data.replace(/\\n{2,}/g, \"\\n\"); // Trim the entire string\n\n      data = data.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n      return data;\n    },\n\n    /**\n     * Parses the words out from the .dic file.\n     *\n     * @param {String} data The data from the dictionary file.\n     * @returns object The lookup table containing all of the words and\n     *                 word forms from the dictionary.\n     */\n    _parseDIC: function _parseDIC(data) {\n      data = this._removeDicComments(data);\n      var lines = data.split(/\\r?\\n/);\n      var dictionaryTable = {};\n\n      function addWord(word, rules) {\n        // Some dictionaries will list the same word multiple times with different rule sets.\n        if (!dictionaryTable.hasOwnProperty(word)) {\n          dictionaryTable[word] = null;\n        }\n\n        if (rules.length > 0) {\n          if (dictionaryTable[word] === null) {\n            dictionaryTable[word] = [];\n          }\n\n          dictionaryTable[word].push(rules);\n        }\n      } // The first line is the number of words in the dictionary.\n\n\n      for (var i = 1, _len = lines.length; i < _len; i++) {\n        var line = lines[i];\n\n        if (!line) {\n          // Ignore empty lines.\n          continue;\n        }\n\n        var parts = line.split(\"/\", 2);\n        var word = parts[0]; // Now for each affix rule, generate that form of the word.\n\n        if (parts.length > 1) {\n          var ruleCodesArray = this.parseRuleCodes(parts[1]); // Save the ruleCodes for compound word situations.\n\n          if (!(\"NEEDAFFIX\" in this.flags) || ruleCodesArray.indexOf(this.flags.NEEDAFFIX) == -1) {\n            addWord(word, ruleCodesArray);\n          }\n\n          for (var j = 0, _jlen = ruleCodesArray.length; j < _jlen; j++) {\n            var code = ruleCodesArray[j];\n            var rule = this.rules[code];\n\n            if (rule) {\n              var newWords = this._applyRule(word, rule);\n\n              for (var ii = 0, _iilen = newWords.length; ii < _iilen; ii++) {\n                var newWord = newWords[ii];\n                addWord(newWord, []);\n\n                if (rule.combineable) {\n                  for (var k = j + 1; k < _jlen; k++) {\n                    var combineCode = ruleCodesArray[k];\n                    var combineRule = this.rules[combineCode];\n\n                    if (combineRule) {\n                      if (combineRule.combineable && rule.type != combineRule.type) {\n                        var otherNewWords = this._applyRule(newWord, combineRule);\n\n                        for (var iii = 0, _iiilen = otherNewWords.length; iii < _iiilen; iii++) {\n                          var otherNewWord = otherNewWords[iii];\n                          addWord(otherNewWord, []);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n\n            if (code in this.compoundRuleCodes) {\n              this.compoundRuleCodes[code].push(word);\n            }\n          }\n        } else {\n          addWord(word.trim(), []);\n        }\n      }\n\n      return dictionaryTable;\n    },\n\n    /**\n     * Removes comment lines and then cleans up blank lines and trailing whitespace.\n     *\n     * @param {String} data The data from a .dic file.\n     * @return {String} The cleaned-up data.\n     */\n    _removeDicComments: function _removeDicComments(data) {\n      // I can't find any official documentation on it, but at least the de_DE\n      // dictionary uses tab-indented lines as comments.\n      // Remove comments\n      data = data.replace(/^\\t.*$/mg, \"\");\n      return data;\n    },\n    parseRuleCodes: function parseRuleCodes(textCodes) {\n      if (!textCodes) {\n        return [];\n      } else if (!(\"FLAG\" in this.flags)) {\n        return textCodes.split(\"\");\n      } else if (this.flags.FLAG === \"long\") {\n        var flags = [];\n\n        for (var i = 0, _len = textCodes.length; i < _len; i += 2) {\n          flags.push(textCodes.substr(i, 2));\n        }\n\n        return flags;\n      } else if (this.flags.FLAG === \"num\") {\n        return textCodes.split(\",\");\n      }\n    },\n\n    /**\n     * Applies an affix rule to a word.\n     *\n     * @param {String} word The base word.\n     * @param {Object} rule The affix rule.\n     * @returns {String[]} The new words generated by the rule.\n     */\n    _applyRule: function _applyRule(word, rule) {\n      var entries = rule.entries;\n      var newWords = [];\n\n      for (var i = 0, _len = entries.length; i < _len; i++) {\n        var entry = entries[i];\n\n        if (!entry.match || word.match(entry.match)) {\n          var newWord = word;\n\n          if (entry.remove) {\n            newWord = newWord.replace(entry.remove, \"\");\n          }\n\n          if (rule.type === \"SFX\") {\n            newWord = newWord + entry.add;\n          } else {\n            newWord = entry.add + newWord;\n          }\n\n          newWords.push(newWord);\n\n          if (\"continuationClasses\" in entry) {\n            for (var j = 0, _jlen = entry.continuationClasses.length; j < _jlen; j++) {\n              var continuationRule = this.rules[entry.continuationClasses[j]];\n\n              if (continuationRule) {\n                newWords = newWords.concat(this._applyRule(newWord, continuationRule));\n              }\n              /*\n              else {\n              \t// This shouldn't happen, but it does, at least in the de_DE dictionary.\n              \t// I think the author mistakenly supplied lower-case rule codes instead \n              \t// of upper-case.\n              }\n              */\n\n            }\n          }\n        }\n      }\n\n      return newWords;\n    },\n\n    /**\n     * Checks whether a word or a capitalization variant exists in the current dictionary.\n     * The word is trimmed and several variations of capitalizations are checked.\n     * If you want to check a word without any changes made to it, call checkExact()\n     *\n     * @see http://blog.stevenlevithan.com/archives/faster-trim-javascript re:trimming function\n     *\n     * @param {String} aWord The word to check.\n     * @returns {Boolean}\n     */\n    check: function check(aWord) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      } // Remove leading and trailing whitespace\n\n\n      var trimmedWord = aWord.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\n      if (this.checkExact(trimmedWord)) {\n        return true;\n      } // The exact word is not in the dictionary.\n\n\n      if (trimmedWord.toUpperCase() === trimmedWord) {\n        // The word was supplied in all uppercase.\n        // Check for a capitalized form of the word.\n        var capitalizedWord = trimmedWord[0] + trimmedWord.substring(1).toLowerCase();\n\n        if (this.hasFlag(capitalizedWord, \"KEEPCASE\")) {\n          // Capitalization variants are not allowed for this word.\n          return false;\n        }\n\n        if (this.checkExact(capitalizedWord)) {\n          // The all-caps word is a capitalized word spelled correctly.\n          return true;\n        }\n\n        if (this.checkExact(trimmedWord.toLowerCase())) {\n          // The all-caps is a lowercase word spelled correctly.\n          return true;\n        }\n      }\n\n      var uncapitalizedWord = trimmedWord[0].toLowerCase() + trimmedWord.substring(1);\n\n      if (uncapitalizedWord !== trimmedWord) {\n        if (this.hasFlag(uncapitalizedWord, \"KEEPCASE\")) {\n          // Capitalization variants are not allowed for this word.\n          return false;\n        } // Check for an uncapitalized form\n\n\n        if (this.checkExact(uncapitalizedWord)) {\n          // The word is spelled correctly but with the first letter capitalized.\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Checks whether a word exists in the current dictionary.\n     *\n     * @param {String} word The word to check.\n     * @returns {Boolean}\n     */\n    checkExact: function checkExact(word) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      }\n\n      var ruleCodes = this.dictionaryTable[word];\n\n      var i, _len;\n\n      if (typeof ruleCodes === 'undefined') {\n        // Check if this might be a compound word.\n        if (\"COMPOUNDMIN\" in this.flags && word.length >= this.flags.COMPOUNDMIN) {\n          for (i = 0, _len = this.compoundRules.length; i < _len; i++) {\n            if (word.match(this.compoundRules[i])) {\n              return true;\n            }\n          }\n        }\n      } else if (ruleCodes === null) {\n        // a null (but not undefined) value for an entry in the dictionary table\n        // means that the word is in the dictionary but has no flags.\n        return true;\n      } else if (typeof ruleCodes === 'object') {\n        // this.dictionary['hasOwnProperty'] will be a function.\n        for (i = 0, _len = ruleCodes.length; i < _len; i++) {\n          if (!this.hasFlag(word, \"ONLYINCOMPOUND\", ruleCodes[i])) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Looks up whether a given word is flagged with a given flag.\n     *\n     * @param {String} word The word in question.\n     * @param {String} flag The flag in question.\n     * @return {Boolean}\n     */\n    hasFlag: function hasFlag(word, flag, wordFlags) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      }\n\n      if (flag in this.flags) {\n        if (typeof wordFlags === 'undefined') {\n          wordFlags = Array.prototype.concat.apply([], this.dictionaryTable[word]);\n        }\n\n        if (wordFlags && wordFlags.indexOf(this.flags[flag]) !== -1) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Returns a list of suggestions for a misspelled word.\n     *\n     * @see http://www.norvig.com/spell-correct.html for the basis of this suggestor.\n     * This suggestor is primitive, but it works.\n     *\n     * @param {String} word The misspelling.\n     * @param {Number} [limit=5] The maximum number of suggestions to return.\n     * @returns {String[]} The array of suggestions.\n     */\n    alphabet: \"\",\n    suggest: function suggest(word, limit) {\n      if (!this.loaded) {\n        throw \"Dictionary not loaded.\";\n      }\n\n      limit = limit || 5;\n\n      if (this.memoized.hasOwnProperty(word)) {\n        var memoizedLimit = this.memoized[word]['limit']; // Only return the cached list if it's big enough or if there weren't enough suggestions\n        // to fill a smaller limit.\n\n        if (limit <= memoizedLimit || this.memoized[word]['suggestions'].length < memoizedLimit) {\n          return this.memoized[word]['suggestions'].slice(0, limit);\n        }\n      }\n\n      if (this.check(word)) return []; // Check the replacement table.\n\n      for (var i = 0, _len = this.replacementTable.length; i < _len; i++) {\n        var replacementEntry = this.replacementTable[i];\n\n        if (word.indexOf(replacementEntry[0]) !== -1) {\n          var correctedWord = word.replace(replacementEntry[0], replacementEntry[1]);\n\n          if (this.check(correctedWord)) {\n            return [correctedWord];\n          }\n        }\n      }\n\n      var self = this;\n      self.alphabet = \"abcdefghijklmnopqrstuvwxyz\";\n      /*\n      if (!self.alphabet) {\n      \t// Use the alphabet as implicitly defined by the words in the dictionary.\n      \tvar alphaHash = {};\n      \t\n      \tfor (var i in self.dictionaryTable) {\n      \t\tfor (var j = 0, _len = i.length; j < _len; j++) {\n      \t\t\talphaHash[i[j]] = true;\n      \t\t}\n      \t}\n      \t\n      \tfor (var i in alphaHash) {\n      \t\tself.alphabet += i;\n      \t}\n      \t\n      \tvar alphaArray = self.alphabet.split(\"\");\n      \talphaArray.sort();\n      \tself.alphabet = alphaArray.join(\"\");\n      }\n      */\n\n      /**\n       * Returns a hash keyed by all of the strings that can be made by making a single edit to the word (or words in) `words`\n       * The value of each entry is the number of unique ways that the resulting word can be made.\n       *\n       * @arg mixed words Either a hash keyed by words or a string word to operate on.\n       * @arg bool known_only Whether this function should ignore strings that are not in the dictionary.\n       */\n\n      function edits1(words, known_only) {\n        var rv = {};\n\n        var i, j, _iilen, _len, _jlen, _edit;\n\n        var alphabetLength = self.alphabet.length;\n\n        if (typeof words == 'string') {\n          var word = words;\n          words = {};\n          words[word] = true;\n        }\n\n        for (var word in words) {\n          for (i = 0, _len = word.length + 1; i < _len; i++) {\n            var s = [word.substring(0, i), word.substring(i)]; // Remove a letter.\n\n            if (s[1]) {\n              _edit = s[0] + s[1].substring(1);\n\n              if (!known_only || self.check(_edit)) {\n                if (!(_edit in rv)) {\n                  rv[_edit] = 1;\n                } else {\n                  rv[_edit] += 1;\n                }\n              }\n            } // Transpose letters\n            // Eliminate transpositions of identical letters\n\n\n            if (s[1].length > 1 && s[1][1] !== s[1][0]) {\n              _edit = s[0] + s[1][1] + s[1][0] + s[1].substring(2);\n\n              if (!known_only || self.check(_edit)) {\n                if (!(_edit in rv)) {\n                  rv[_edit] = 1;\n                } else {\n                  rv[_edit] += 1;\n                }\n              }\n            }\n\n            if (s[1]) {\n              // Replace a letter with another letter.\n              var lettercase = s[1].substring(0, 1).toUpperCase() === s[1].substring(0, 1) ? 'uppercase' : 'lowercase';\n\n              for (j = 0; j < alphabetLength; j++) {\n                var replacementLetter = self.alphabet[j]; // Set the case of the replacement letter to the same as the letter being replaced.\n\n                if ('uppercase' === lettercase) {\n                  replacementLetter = replacementLetter.toUpperCase();\n                } // Eliminate replacement of a letter by itself\n\n\n                if (replacementLetter != s[1].substring(0, 1)) {\n                  _edit = s[0] + replacementLetter + s[1].substring(1);\n\n                  if (!known_only || self.check(_edit)) {\n                    if (!(_edit in rv)) {\n                      rv[_edit] = 1;\n                    } else {\n                      rv[_edit] += 1;\n                    }\n                  }\n                }\n              }\n            }\n\n            if (s[1]) {\n              // Add a letter between each letter.\n              for (j = 0; j < alphabetLength; j++) {\n                // If the letters on each side are capitalized, capitalize the replacement.\n                var lettercase = s[0].substring(-1).toUpperCase() === s[0].substring(-1) && s[1].substring(0, 1).toUpperCase() === s[1].substring(0, 1) ? 'uppercase' : 'lowercase';\n                var replacementLetter = self.alphabet[j];\n\n                if ('uppercase' === lettercase) {\n                  replacementLetter = replacementLetter.toUpperCase();\n                }\n\n                _edit = s[0] + replacementLetter + s[1];\n\n                if (!known_only || self.check(_edit)) {\n                  if (!(_edit in rv)) {\n                    rv[_edit] = 1;\n                  } else {\n                    rv[_edit] += 1;\n                  }\n                }\n              }\n            }\n          }\n        }\n\n        return rv;\n      }\n\n      function correct(word) {\n        // Get the edit-distance-1 and edit-distance-2 forms of this word.\n        var ed1 = edits1(word);\n        var ed2 = edits1(ed1, true); // Sort the edits based on how many different ways they were created.\n\n        var weighted_corrections = ed2;\n\n        for (var ed1word in ed1) {\n          if (!self.check(ed1word)) {\n            continue;\n          }\n\n          if (ed1word in weighted_corrections) {\n            weighted_corrections[ed1word] += ed1[ed1word];\n          } else {\n            weighted_corrections[ed1word] = ed1[ed1word];\n          }\n        }\n\n        var i, _len;\n\n        var sorted_corrections = [];\n\n        for (i in weighted_corrections) {\n          if (weighted_corrections.hasOwnProperty(i)) {\n            sorted_corrections.push([i, weighted_corrections[i]]);\n          }\n        }\n\n        function sorter(a, b) {\n          var a_val = a[1];\n          var b_val = b[1];\n\n          if (a_val < b_val) {\n            return -1;\n          } else if (a_val > b_val) {\n            return 1;\n          } // @todo If a and b are equally weighted, add our own weight based on something like the key locations on this language's default keyboard.\n\n\n          return b[0].localeCompare(a[0]);\n        }\n\n        sorted_corrections.sort(sorter).reverse();\n        var rv = [];\n        var capitalization_scheme = \"lowercase\";\n\n        if (word.toUpperCase() === word) {\n          capitalization_scheme = \"uppercase\";\n        } else if (word.substr(0, 1).toUpperCase() + word.substr(1).toLowerCase() === word) {\n          capitalization_scheme = \"capitalized\";\n        }\n\n        var working_limit = limit;\n\n        for (i = 0; i < Math.min(working_limit, sorted_corrections.length); i++) {\n          if (\"uppercase\" === capitalization_scheme) {\n            sorted_corrections[i][0] = sorted_corrections[i][0].toUpperCase();\n          } else if (\"capitalized\" === capitalization_scheme) {\n            sorted_corrections[i][0] = sorted_corrections[i][0].substr(0, 1).toUpperCase() + sorted_corrections[i][0].substr(1);\n          }\n\n          if (!self.hasFlag(sorted_corrections[i][0], \"NOSUGGEST\") && rv.indexOf(sorted_corrections[i][0]) == -1) {\n            rv.push(sorted_corrections[i][0]);\n          } else {\n            // If one of the corrections is not eligible as a suggestion , make sure we still return the right number of suggestions.\n            working_limit++;\n          }\n        }\n\n        return rv;\n      }\n\n      this.memoized[word] = {\n        'suggestions': correct(word),\n        'limit': limit\n      };\n      return this.memoized[word]['suggestions'];\n    }\n  };\n})(); // Support for use as a node.js module.\n\n\nif (true) {\n  module.exports = Typo;\n}\n/* WEBPACK VAR INJECTION */}.call(this, \"/\"))\n\n/***/ }),\n\n/***/ 1263:\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * marked - a markdown parser\n * Copyright (c) 2011-2021, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n(function (global, factory) {\n   true ? module.exports = factory() : undefined;\n})(this, function () {\n  'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n    if (it) return (it = it.call(o)).next.bind(it);\n\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var defaults$5 = {\n    exports: {}\n  };\n\n  function getDefaults$1() {\n    return {\n      baseUrl: null,\n      breaks: false,\n      extensions: null,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: null,\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartLists: false,\n      smartypants: false,\n      tokenizer: null,\n      walkTokens: null,\n      xhtml: false\n    };\n  }\n\n  function changeDefaults$1(newDefaults) {\n    defaults$5.exports.defaults = newDefaults;\n  }\n\n  defaults$5.exports = {\n    defaults: getDefaults$1(),\n    getDefaults: getDefaults$1,\n    changeDefaults: changeDefaults$1\n  };\n  /**\n   * Helpers\n   */\n\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape$2(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n  function unescape$1(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n\n  var caret = /(^|[^\\[])\\^/g;\n\n  function edit$1(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  function cleanUrl$1(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape$1(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim$1(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n\n  var noopTest$1 = {\n    exec: function noopTest() {}\n  };\n\n  function merge$2(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function splitCells$1(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0;\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n\n  function rtrim$1(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, l - suffLen);\n  }\n\n  function findClosingBracket$1(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function checkSanitizeDeprecation$1(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  } // copied from https://stackoverflow.com/a/5450113/806777\n\n\n  function repeatString$1(pattern, count) {\n    if (count < 1) {\n      return '';\n    }\n\n    var result = '';\n\n    while (count > 1) {\n      if (count & 1) {\n        result += pattern;\n      }\n\n      count >>= 1;\n      pattern += pattern;\n    }\n\n    return result + pattern;\n  }\n\n  var helpers = {\n    escape: escape$2,\n    unescape: unescape$1,\n    edit: edit$1,\n    cleanUrl: cleanUrl$1,\n    resolveUrl: resolveUrl,\n    noopTest: noopTest$1,\n    merge: merge$2,\n    splitCells: splitCells$1,\n    rtrim: rtrim$1,\n    findClosingBracket: findClosingBracket$1,\n    checkSanitizeDeprecation: checkSanitizeDeprecation$1,\n    repeatString: repeatString$1\n  };\n  var defaults$4 = defaults$5.exports.defaults;\n  var rtrim = helpers.rtrim,\n      splitCells = helpers.splitCells,\n      _escape = helpers.escape,\n      findClosingBracket = helpers.findClosingBracket;\n\n  function outputLink(cap, link, raw) {\n    var href = link.href;\n    var title = link.title ? _escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n    if (cap[0].charAt(0) !== '!') {\n      return {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text\n      };\n    } else {\n      return {\n        type: 'image',\n        raw: raw,\n        href: href,\n        title: title,\n        text: _escape(text)\n      };\n    }\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer_1 = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || defaults$4;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap) {\n        if (cap[0].length > 1) {\n          return {\n            type: 'space',\n            raw: cap[0]\n          };\n        }\n\n        return {\n          raw: '\\n'\n        };\n      }\n    };\n\n    _proto.code = function code(src) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ {1,4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        var text = cap[2].trim(); // remove trailing #s\n\n        if (/#$/.test(text)) {\n          var trimmed = rtrim(text, '#');\n\n          if (this.options.pedantic) {\n            text = trimmed.trim();\n          } else if (!trimmed || / $/.test(trimmed)) {\n            // CommonMark requires space before trailing #s\n            text = trimmed.trim();\n          }\n        }\n\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: text\n        };\n      }\n    };\n\n    _proto.nptable = function nptable(src) {\n      var cap = this.rules.block.nptable.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n          raw: cap[0]\n        };\n\n        if (item.header.length === item.align.length) {\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells(item.cells[i], item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *> ?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var bull = cap[2];\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: raw,\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        }; // Get each top-level item.\n\n        var itemMatch = cap[0].match(this.rules.block.item);\n        var next = false,\n            item,\n            space,\n            bcurr,\n            bnext,\n            addBack,\n            loose,\n            istask,\n            ischecked,\n            endMatch;\n        var l = itemMatch.length;\n        bcurr = this.rules.block.listItemStart.exec(itemMatch[0]);\n\n        for (var i = 0; i < l; i++) {\n          item = itemMatch[i];\n          raw = item;\n\n          if (!this.options.pedantic) {\n            // Determine if current item contains the end of the list\n            endMatch = item.match(new RegExp('\\\\n\\\\s*\\\\n {0,' + (bcurr[0].length - 1) + '}\\\\S'));\n\n            if (endMatch) {\n              addBack = item.length - endMatch.index + itemMatch.slice(i + 1).join('\\n').length;\n              list.raw = list.raw.substring(0, list.raw.length - addBack);\n              item = item.substring(0, endMatch.index);\n              raw = item;\n              l = i + 1;\n            }\n          } // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n\n\n          if (i !== l - 1) {\n            bnext = this.rules.block.listItemStart.exec(itemMatch[i + 1]);\n\n            if (!this.options.pedantic ? bnext[1].length >= bcurr[0].length || bnext[1].length > 3 : bnext[1].length > bcurr[1].length) {\n              // nested list or continuation\n              itemMatch.splice(i, 2, itemMatch[i] + (!this.options.pedantic && bnext[1].length < bcurr[0].length && !itemMatch[i].match(/\\n$/) ? '' : '\\n') + itemMatch[i + 1]);\n              i--;\n              l--;\n              continue;\n            } else if ( // different bullet style\n            !this.options.pedantic || this.options.smartLists ? bnext[2][bnext[2].length - 1] !== bull[bull.length - 1] : isordered === (bnext[2].length === 1)) {\n              addBack = itemMatch.slice(i + 1).join('\\n').length;\n              list.raw = list.raw.substring(0, list.raw.length - addBack);\n              i = l - 1;\n            }\n\n            bcurr = bnext;\n          } // Remove the list item's bullet\n          // so it is seen as the next token.\n\n\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+[.)]) ?/, ''); // Outdent whatever the\n          // list item contains. Hacky.\n\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          } // trim item newlines at end\n\n\n          item = rtrim(item, '\\n');\n\n          if (i !== l - 1) {\n            raw = raw + '\\n';\n          } // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n\n\n          loose = next || /\\n\\n(?!\\s*$)/.test(raw);\n\n          if (i !== l - 1) {\n            next = raw.slice(-2) === '\\n\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            list.loose = true;\n          } // Check for task list items\n\n\n          if (this.options.gfm) {\n            istask = /^\\[[ xX]\\] /.test(item);\n            ischecked = undefined;\n\n            if (istask) {\n              ischecked = item[1] !== ' ';\n              item = item.replace(/^\\[[ xX]\\] +/, '');\n            }\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: istask,\n            checked: ischecked,\n            loose: loose,\n            text: item\n          });\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        return {\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          type: 'def',\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells(item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''), item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        };\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        return {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        };\n      }\n    };\n\n    _proto.text = function text(src) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n    };\n\n    _proto.escape = function escape(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: _escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src, inLink, inRawBlock) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!inLink && /^<a /i.test(cap[0])) {\n          inLink = true;\n        } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n          inLink = false;\n        }\n\n        if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = true;\n        } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: inLink,\n          inRawBlock: inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var trimmedUrl = cap[2].trim();\n\n        if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n          // commonmark requires matching angle brackets\n          if (!/>$/.test(trimmedUrl)) {\n            return;\n          } // ending angle bracket cannot be escaped\n\n\n          var rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n\n          if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n            return;\n          }\n        } else {\n          // find closing parenthesis\n          var lastParenIndex = findClosingBracket(cap[2], '()');\n\n          if (lastParenIndex > -1) {\n            var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n            var linkLen = start + cap[1].length + lastParenIndex;\n            cap[2] = cap[2].substring(0, lastParenIndex);\n            cap[0] = cap[0].substring(0, linkLen).trim();\n            cap[3] = '';\n          }\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          // split pedantic href and title\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim();\n\n        if (/^</.test(href)) {\n          if (this.options.pedantic && !/>$/.test(trimmedUrl)) {\n            // pedantic allows starting angle bracket without ending angle bracket\n            href = href.slice(1);\n          } else {\n            href = href.slice(1, -1);\n          }\n        }\n\n        return outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0]);\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          var text = cap[0].charAt(0);\n          return {\n            type: 'text',\n            raw: text,\n            text: text\n          };\n        }\n\n        return outputLink(cap, link, cap[0]);\n      }\n    };\n\n    _proto.emStrong = function emStrong(src, maskedSrc, prevChar) {\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var match = this.rules.inline.emStrong.lDelim.exec(src);\n      if (!match) return; // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n\n      if (match[3] && prevChar.match(/(?:[0-9A-Za-z\\xAA\\xB2\\xB3\\xB5\\xB9\\xBA\\xBC-\\xBE\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05D0-\\u05EA\\u05EF-\\u05F2\\u0620-\\u064A\\u0660-\\u0669\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07C0-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u08A0-\\u08B4\\u08B6-\\u08C7\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0966-\\u096F\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09F9\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A6F\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AE6-\\u0AEF\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B66-\\u0B6F\\u0B71-\\u0B77\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0BE6-\\u0BF2\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D04-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D58-\\u0D61\\u0D66-\\u0D78\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DE6-\\u0DEF\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F20-\\u0F33\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F-\\u1049\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u1090-\\u1099\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1369-\\u137C\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B50-\\u1B59\\u1B83-\\u1BA0\\u1BAE-\\u1BE5\\u1C00-\\u1C23\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1C80-\\u1C88\\u1C90-\\u1CBA\\u1CBD-\\u1CBF\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2070\\u2071\\u2074-\\u2079\\u207F-\\u2089\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2150-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2CFD\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u3192-\\u3195\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\u3400-\\u4DBF\\u4E00-\\u9FFC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7BF\\uA7C2-\\uA7CA\\uA7F5-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA830-\\uA835\\uA840-\\uA873\\uA882-\\uA8B3\\uA8D0-\\uA8D9\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA8FE\\uA900-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF-\\uA9D9\\uA9E0-\\uA9E4\\uA9E6-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB69\\uAB70-\\uABE2\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD07-\\uDD33\\uDD40-\\uDD78\\uDD8A\\uDD8B\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDEE1-\\uDEFB\\uDF00-\\uDF23\\uDF2D-\\uDF4A\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCA0-\\uDCA9\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC58-\\uDC76\\uDC79-\\uDC9E\\uDCA7-\\uDCAF\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDCFB-\\uDD1B\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBC-\\uDDCF\\uDDD2-\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE35\\uDE40-\\uDE48\\uDE60-\\uDE7E\\uDE80-\\uDE9F\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDEEB-\\uDEEF\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF58-\\uDF72\\uDF78-\\uDF91\\uDFA9-\\uDFAF]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2\\uDCFA-\\uDD23\\uDD30-\\uDD39\\uDE60-\\uDE7E\\uDE80-\\uDEA9\\uDEB0\\uDEB1\\uDF00-\\uDF27\\uDF30-\\uDF45\\uDF51-\\uDF54\\uDFB0-\\uDFCB\\uDFE0-\\uDFF6]|\\uD804[\\uDC03-\\uDC37\\uDC52-\\uDC6F\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDCF0-\\uDCF9\\uDD03-\\uDD26\\uDD36-\\uDD3F\\uDD44\\uDD47\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDD0-\\uDDDA\\uDDDC\\uDDE1-\\uDDF4\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDEF0-\\uDEF9\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC50-\\uDC59\\uDC5F-\\uDC61\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDCD0-\\uDCD9\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE50-\\uDE59\\uDE80-\\uDEAA\\uDEB8\\uDEC0-\\uDEC9\\uDF00-\\uDF1A\\uDF30-\\uDF3B]|\\uD806[\\uDC00-\\uDC2B\\uDCA0-\\uDCF2\\uDCFF-\\uDD06\\uDD09\\uDD0C-\\uDD13\\uDD15\\uDD16\\uDD18-\\uDD2F\\uDD3F\\uDD41\\uDD50-\\uDD59\\uDDA0-\\uDDA7\\uDDAA-\\uDDD0\\uDDE1\\uDDE3\\uDE00\\uDE0B-\\uDE32\\uDE3A\\uDE50\\uDE5C-\\uDE89\\uDE9D\\uDEC0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC50-\\uDC6C\\uDC72-\\uDC8F\\uDD00-\\uDD06\\uDD08\\uDD09\\uDD0B-\\uDD30\\uDD46\\uDD50-\\uDD59\\uDD60-\\uDD65\\uDD67\\uDD68\\uDD6A-\\uDD89\\uDD98\\uDDA0-\\uDDA9\\uDEE0-\\uDEF2\\uDFB0\\uDFC0-\\uDFD4]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|[\\uD80C\\uD81C-\\uD820\\uD822\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872\\uD874-\\uD879\\uD880-\\uD883][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDE60-\\uDE69\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF50-\\uDF59\\uDF5B-\\uDF61\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDE40-\\uDE96\\uDF00-\\uDF4A\\uDF50\\uDF93-\\uDF9F\\uDFE0\\uDFE1\\uDFE3]|\\uD821[\\uDC00-\\uDFF7]|\\uD823[\\uDC00-\\uDCD5\\uDD00-\\uDD08]|\\uD82C[\\uDC00-\\uDD1E\\uDD50-\\uDD52\\uDD64-\\uDD67\\uDD70-\\uDEFB]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD834[\\uDEE0-\\uDEF3\\uDF60-\\uDF78]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB\\uDFCE-\\uDFFF]|\\uD838[\\uDD00-\\uDD2C\\uDD37-\\uDD3D\\uDD40-\\uDD49\\uDD4E\\uDEC0-\\uDEEB\\uDEF0-\\uDEF9]|\\uD83A[\\uDC00-\\uDCC4\\uDCC7-\\uDCCF\\uDD00-\\uDD43\\uDD4B\\uDD50-\\uDD59]|\\uD83B[\\uDC71-\\uDCAB\\uDCAD-\\uDCAF\\uDCB1-\\uDCB4\\uDD01-\\uDD2D\\uDD2F-\\uDD3D\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD83C[\\uDD00-\\uDD0C]|\\uD83E[\\uDFF0-\\uDFF9]|\\uD869[\\uDC00-\\uDEDD\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1\\uDEB0-\\uDFFF]|\\uD87A[\\uDC00-\\uDFE0]|\\uD87E[\\uDC00-\\uDE1D]|\\uD884[\\uDC00-\\uDF4A])/)) return;\n      var nextChar = match[1] || match[2] || '';\n\n      if (!nextChar || nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))) {\n        var lLength = match[0].length - 1;\n        var rDelim,\n            rLength,\n            delimTotal = lLength,\n            midDelimTotal = 0;\n        var endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n        endReg.lastIndex = 0; // Clip maskedSrc to same section of string as src (move to lexer?)\n\n        maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n        while ((match = endReg.exec(maskedSrc)) != null) {\n          rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n          if (!rDelim) continue; // skip single * in __abc*abc__\n\n          rLength = rDelim.length;\n\n          if (match[3] || match[4]) {\n            // found another Left Delim\n            delimTotal += rLength;\n            continue;\n          } else if (match[5] || match[6]) {\n            // either Left or Right Delim\n            if (lLength % 3 && !((lLength + rLength) % 3)) {\n              midDelimTotal += rLength;\n              continue; // CommonMark Emphasis Rules 9-10\n            }\n          }\n\n          delimTotal -= rLength;\n          if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n          // Remove extra characters. *a*** -> *a*\n\n          rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal); // Create `em` if smallest delimiter has odd char count. *a***\n\n          if (Math.min(lLength, rLength) % 2) {\n            return {\n              type: 'em',\n              raw: src.slice(0, lLength + match.index + rLength + 1),\n              text: src.slice(1, lLength + match.index + rLength)\n            };\n          } // Create 'strong' if smallest delimiter has even char count. **a***\n\n\n          return {\n            type: 'strong',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text: src.slice(2, lLength + match.index + rLength - 1)\n          };\n        }\n      }\n    };\n\n    _proto.codespan = function codespan(src) {\n      var cap = this.rules.inline.code.exec(src);\n\n      if (cap) {\n        var text = cap[2].replace(/\\n/g, ' ');\n        var hasNonSpaceChars = /[^ ]/.test(text);\n        var hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n\n        if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n          text = text.substring(1, text.length - 1);\n        }\n\n        text = _escape(text, true);\n        return {\n          type: 'codespan',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.br = function br(src) {\n      var cap = this.rules.inline.br.exec(src);\n\n      if (cap) {\n        return {\n          type: 'br',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.del = function del(src) {\n      var cap = this.rules.inline.del.exec(src);\n\n      if (cap) {\n        return {\n          type: 'del',\n          raw: cap[0],\n          text: cap[2]\n        };\n      }\n    };\n\n    _proto.autolink = function autolink(src, mangle) {\n      var cap = this.rules.inline.autolink.exec(src);\n\n      if (cap) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = _escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n          href = 'mailto:' + text;\n        } else {\n          text = _escape(cap[1]);\n          href = text;\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.url = function url(src, mangle) {\n      var cap;\n\n      if (cap = this.rules.inline.url.exec(src)) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = _escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          var prevCapZero;\n\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = _escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.inlineText = function inlineText(src, inRawBlock, smartypants) {\n      var cap = this.rules.inline.text.exec(src);\n\n      if (cap) {\n        var text;\n\n        if (inRawBlock) {\n          text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0];\n        } else {\n          text = _escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    return Tokenizer;\n  }();\n\n  var noopTest = helpers.noopTest,\n      edit = helpers.edit,\n      merge$1 = helpers.merge;\n  /**\n   * Block-Level Grammar\n   */\n\n  var block$1 = {\n    newline: /^(?: *(?:\\n|$))+/,\n    code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n    fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n    hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?! {0,3}bull )\\n*|\\s*$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n    nptable: noopTest,\n    table: noopTest,\n    lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html| +\\n)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block$1._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\n  block$1._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block$1.def = edit(block$1.def).replace('label', block$1._label).replace('title', block$1._title).getRegex();\n  block$1.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\n  block$1.item = /^( *)(bull) ?[^\\n]*(?:\\n(?! *bull ?)[^\\n]*)*/;\n  block$1.item = edit(block$1.item, 'gm').replace(/bull/g, block$1.bullet).getRegex();\n  block$1.listItemStart = edit(/^( *)(bull) */).replace('bull', block$1.bullet).getRegex();\n  block$1.list = edit(block$1.list).replace(/bull/g, block$1.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block$1.def.source + ')').getRegex();\n  block$1._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block$1._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\n  block$1.html = edit(block$1.html, 'i').replace('comment', block$1._comment).replace('tag', block$1._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block$1.paragraph = edit(block$1._paragraph).replace('hr', block$1.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block$1._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block$1.blockquote = edit(block$1.blockquote).replace('paragraph', block$1.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block$1.normal = merge$1({}, block$1);\n  /**\n   * GFM Block Grammar\n   */\n\n  block$1.gfm = merge$1({}, block$1.normal, {\n    nptable: '^ *([^|\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}([-:]+ *\\\\|[-| :]*)' // Align\n    + '(?:\\\\n((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)',\n    // Cells\n    table: '^ *\\\\|(.+)\\\\n' // Header\n    + ' {0,3}\\\\|?( *[-:]+[-| :]*)' // Align\n    + '(?:\\\\n *((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n\n  });\n  block$1.gfm.nptable = edit(block$1.gfm.nptable).replace('hr', block$1.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block$1._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  block$1.gfm.table = edit(block$1.gfm.table).replace('hr', block$1.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block$1._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  /**\n   * Pedantic grammar (original John Gruber's loose markdown specification)\n   */\n\n  block$1.pedantic = merge$1({}, block$1.normal, {\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block$1._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n    fences: noopTest,\n    // fences not supported\n    paragraph: edit(block$1.normal._paragraph).replace('hr', block$1.hr).replace('heading', ' *#{1,6} *[^\\n]').replace('lheading', block$1.lheading).replace('blockquote', ' {0,3}>').replace('|fences', '').replace('|list', '').replace('|html', '').getRegex()\n  });\n  /**\n   * Inline-Level Grammar\n   */\n\n  var inline$1 = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noopTest,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n    nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n    reflinkSearch: 'reflink|nolink(?!\\\\()',\n    emStrong: {\n      lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n      //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n      //        () Skip other delimiter (1) #***                   (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n      rDelimAst: /\\_\\_[^_*]*?\\*[^_*]*?\\_\\_|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,\n      rDelimUnd: /\\*\\*[^_*]*?\\_[^_*]*?\\*\\*|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n\n    },\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noopTest,\n    text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n    punctuation: /^([\\spunctuation])/\n  }; // list of punctuation marks from CommonMark spec\n  // without * and _ to handle the different emphasis markers * and _\n\n  inline$1._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\n  inline$1.punctuation = edit(inline$1.punctuation).replace(/punctuation/g, inline$1._punctuation).getRegex(); // sequences em should skip over [title](link), `code`, <html>\n\n  inline$1.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\n  inline$1.escapedEmSt = /\\\\\\*|\\\\_/g;\n  inline$1._comment = edit(block$1._comment).replace('(?:-->|$)', '-->').getRegex();\n  inline$1.emStrong.lDelim = edit(inline$1.emStrong.lDelim).replace(/punct/g, inline$1._punctuation).getRegex();\n  inline$1.emStrong.rDelimAst = edit(inline$1.emStrong.rDelimAst, 'g').replace(/punct/g, inline$1._punctuation).getRegex();\n  inline$1.emStrong.rDelimUnd = edit(inline$1.emStrong.rDelimUnd, 'g').replace(/punct/g, inline$1._punctuation).getRegex();\n  inline$1._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline$1._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline$1._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline$1.autolink = edit(inline$1.autolink).replace('scheme', inline$1._scheme).replace('email', inline$1._email).getRegex();\n  inline$1._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline$1.tag = edit(inline$1.tag).replace('comment', inline$1._comment).replace('attribute', inline$1._attribute).getRegex();\n  inline$1._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\n  inline$1._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\n  inline$1._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline$1.link = edit(inline$1.link).replace('label', inline$1._label).replace('href', inline$1._href).replace('title', inline$1._title).getRegex();\n  inline$1.reflink = edit(inline$1.reflink).replace('label', inline$1._label).getRegex();\n  inline$1.reflinkSearch = edit(inline$1.reflinkSearch, 'g').replace('reflink', inline$1.reflink).replace('nolink', inline$1.nolink).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline$1.normal = merge$1({}, inline$1);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline$1.pedantic = merge$1({}, inline$1.normal, {\n    strong: {\n      start: /^__|\\*\\*/,\n      middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n      endAst: /\\*\\*(?!\\*)/g,\n      endUnd: /__(?!_)/g\n    },\n    em: {\n      start: /^_|\\*/,\n      middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n      endAst: /\\*(?!\\*)/g,\n      endUnd: /_(?!_)/g\n    },\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline$1._label).getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline$1._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline$1.gfm = merge$1({}, inline$1.normal, {\n    escape: edit(inline$1.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n  });\n  inline$1.gfm.url = edit(inline$1.gfm.url, 'i').replace('email', inline$1.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline$1.breaks = merge$1({}, inline$1.gfm, {\n    br: edit(inline$1.br).replace('{2,}', '*').getRegex(),\n    text: edit(inline$1.gfm.text).replace('\\\\b_', '\\\\b_| {2,}\\\\n').replace(/\\{2,\\}/g, '*').getRegex()\n  });\n  var rules = {\n    block: block$1,\n    inline: inline$1\n  };\n  var Tokenizer$1 = Tokenizer_1;\n  var defaults$3 = defaults$5.exports.defaults;\n  var block = rules.block,\n      inline = rules.inline;\n  var repeatString = helpers.repeatString;\n  /**\n   * smartypants text replacement\n   */\n\n  function smartypants(text) {\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  }\n  /**\n   * mangle email addresses\n   */\n\n\n  function mangle(text) {\n    var out = '',\n        i,\n        ch;\n    var l = text.length;\n\n    for (i = 0; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n  /**\n   * Block Lexer\n   */\n\n\n  var Lexer_1 = /*#__PURE__*/function () {\n    function Lexer(options) {\n      this.tokens = [];\n      this.tokens.links = Object.create(null);\n      this.options = options || defaults$3;\n      this.options.tokenizer = this.options.tokenizer || new Tokenizer$1();\n      this.tokenizer = this.options.tokenizer;\n      this.tokenizer.options = this.options;\n      var rules = {\n        block: block.normal,\n        inline: inline.normal\n      };\n\n      if (this.options.pedantic) {\n        rules.block = block.pedantic;\n        rules.inline = inline.pedantic;\n      } else if (this.options.gfm) {\n        rules.block = block.gfm;\n\n        if (this.options.breaks) {\n          rules.inline = inline.breaks;\n        } else {\n          rules.inline = inline.gfm;\n        }\n      }\n\n      this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n\n    /**\n     * Static Lex Method\n     */\n\n\n    Lexer.lex = function lex(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    ;\n\n    Lexer.lexInline = function lexInline(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    ;\n\n    var _proto = Lexer.prototype;\n\n    _proto.lex = function lex(src) {\n      src = src.replace(/\\r\\n|\\r/g, '\\n').replace(/\\t/g, '    ');\n      this.blockTokens(src, this.tokens, true);\n      this.inline(this.tokens);\n      return this.tokens;\n    }\n    /**\n     * Lexing\n     */\n    ;\n\n    _proto.blockTokens = function blockTokens(src, tokens, top) {\n      var _this = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (top === void 0) {\n        top = true;\n      }\n\n      if (this.options.pedantic) {\n        src = src.replace(/^ +$/gm, '');\n      }\n\n      var token, i, l, lastToken, cutSrc, lastParagraphClipped;\n\n      while (src) {\n        if (this.options.extensions && this.options.extensions.block && this.options.extensions.block.some(function (extTokenizer) {\n          if (token = extTokenizer.call(_this, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // newline\n\n\n        if (token = this.tokenizer.space(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type) {\n            tokens.push(token);\n          }\n\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.code(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n          if (lastToken && lastToken.type === 'paragraph') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // fences\n\n\n        if (token = this.tokenizer.fences(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // heading\n\n\n        if (token = this.tokenizer.heading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // table no leading pipe (gfm)\n\n\n        if (token = this.tokenizer.nptable(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // hr\n\n\n        if (token = this.tokenizer.hr(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // blockquote\n\n\n        if (token = this.tokenizer.blockquote(src)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.blockTokens(token.text, [], top);\n          tokens.push(token);\n          continue;\n        } // list\n\n\n        if (token = this.tokenizer.list(src)) {\n          src = src.substring(token.raw.length);\n          l = token.items.length;\n\n          for (i = 0; i < l; i++) {\n            token.items[i].tokens = this.blockTokens(token.items[i].text, [], false);\n          }\n\n          tokens.push(token);\n          continue;\n        } // html\n\n\n        if (token = this.tokenizer.html(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // def\n\n\n        if (top && (token = this.tokenizer.def(src))) {\n          src = src.substring(token.raw.length);\n\n          if (!this.tokens.links[token.tag]) {\n            this.tokens.links[token.tag] = {\n              href: token.href,\n              title: token.title\n            };\n          }\n\n          continue;\n        } // table (gfm)\n\n\n        if (token = this.tokenizer.table(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // lheading\n\n\n        if (token = this.tokenizer.lheading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // top-level paragraph\n        // prevent paragraph consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startBlock) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this.options.extensions.startBlock.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call(this, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (top && (token = this.tokenizer.paragraph(cutSrc))) {\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastParagraphClipped && lastToken.type === 'paragraph') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          lastParagraphClipped = cutSrc.length !== src.length;\n          src = src.substring(token.raw.length);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.text(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _proto.inline = function inline(tokens) {\n      var i, j, k, l2, row, token;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i];\n\n        switch (token.type) {\n          case 'paragraph':\n          case 'text':\n          case 'heading':\n            {\n              token.tokens = [];\n              this.inlineTokens(token.text, token.tokens);\n              break;\n            }\n\n          case 'table':\n            {\n              token.tokens = {\n                header: [],\n                cells: []\n              }; // header\n\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                token.tokens.header[j] = [];\n                this.inlineTokens(token.header[j], token.tokens.header[j]);\n              } // cells\n\n\n              l2 = token.cells.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.cells[j];\n                token.tokens.cells[j] = [];\n\n                for (k = 0; k < row.length; k++) {\n                  token.tokens.cells[j][k] = [];\n                  this.inlineTokens(row[k], token.tokens.cells[j][k]);\n                }\n              }\n\n              break;\n            }\n\n          case 'blockquote':\n            {\n              this.inline(token.tokens);\n              break;\n            }\n\n          case 'list':\n            {\n              l2 = token.items.length;\n\n              for (j = 0; j < l2; j++) {\n                this.inline(token.items[j].tokens);\n              }\n\n              break;\n            }\n        }\n      }\n\n      return tokens;\n    }\n    /**\n     * Lexing/Compiling\n     */\n    ;\n\n    _proto.inlineTokens = function inlineTokens(src, tokens, inLink, inRawBlock) {\n      var _this2 = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (inLink === void 0) {\n        inLink = false;\n      }\n\n      if (inRawBlock === void 0) {\n        inRawBlock = false;\n      }\n\n      var token, lastToken, cutSrc; // String with links masked to avoid interference with em and strong\n\n      var maskedSrc = src;\n      var match;\n      var keepPrevChar, prevChar; // Mask out reflinks\n\n      if (this.tokens.links) {\n        var links = Object.keys(this.tokens.links);\n\n        if (links.length > 0) {\n          while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n            if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n              maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n            }\n          }\n        }\n      } // Mask out other blocks\n\n\n      while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n      } // Mask out escaped em & strong delimiters\n\n\n      while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);\n      }\n\n      while (src) {\n        if (!keepPrevChar) {\n          prevChar = '';\n        }\n\n        keepPrevChar = false; // extensions\n\n        if (this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some(function (extTokenizer) {\n          if (token = extTokenizer.call(_this2, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // escape\n\n\n        if (token = this.tokenizer.escape(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // tag\n\n\n        if (token = this.tokenizer.tag(src, inLink, inRawBlock)) {\n          src = src.substring(token.raw.length);\n          inLink = token.inLink;\n          inRawBlock = token.inRawBlock;\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // link\n\n\n        if (token = this.tokenizer.link(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type === 'link') {\n            token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n          }\n\n          tokens.push(token);\n          continue;\n        } // reflink, nolink\n\n\n        if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (token.type === 'link') {\n            token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n            tokens.push(token);\n          } else if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // em & strong\n\n\n        if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.codespan(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // br\n\n\n        if (token = this.tokenizer.br(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // del (gfm)\n\n\n        if (token = this.tokenizer.del(src)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // autolink\n\n\n        if (token = this.tokenizer.autolink(src, mangle)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // url (gfm)\n\n\n        if (!inLink && (token = this.tokenizer.url(src, mangle))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n        // prevent inlineText consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startInline) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this2.options.extensions.startInline.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call(this, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (token = this.tokenizer.inlineText(cutSrc, inRawBlock, smartypants)) {\n          src = src.substring(token.raw.length);\n\n          if (token.raw.slice(-1) !== '_') {\n            // Track prevChar before string of ____ started\n            prevChar = token.raw.slice(-1);\n          }\n\n          keepPrevChar = true;\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _createClass(Lexer, null, [{\n      key: \"rules\",\n      get: function get() {\n        return {\n          block: block,\n          inline: inline\n        };\n      }\n    }]);\n\n    return Lexer;\n  }();\n\n  var defaults$2 = defaults$5.exports.defaults;\n  var cleanUrl = helpers.cleanUrl,\n      escape$1 = helpers.escape;\n  /**\n   * Renderer\n   */\n\n  var Renderer_1 = /*#__PURE__*/function () {\n    function Renderer(options) {\n      this.options = options || defaults$2;\n    }\n\n    var _proto = Renderer.prototype;\n\n    _proto.code = function code(_code, infostring, escaped) {\n      var lang = (infostring || '').match(/\\S*/)[0];\n\n      if (this.options.highlight) {\n        var out = this.options.highlight(_code, lang);\n\n        if (out != null && out !== _code) {\n          escaped = true;\n          _code = out;\n        }\n      }\n\n      _code = _code.replace(/\\n$/, '') + '\\n';\n\n      if (!lang) {\n        return '<pre><code>' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>\\n';\n      }\n\n      return '<pre><code class=\"' + this.options.langPrefix + escape$1(lang, true) + '\">' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>\\n';\n    };\n\n    _proto.blockquote = function blockquote(quote) {\n      return '<blockquote>\\n' + quote + '</blockquote>\\n';\n    };\n\n    _proto.html = function html(_html) {\n      return _html;\n    };\n\n    _proto.heading = function heading(text, level, raw, slugger) {\n      if (this.options.headerIds) {\n        return '<h' + level + ' id=\"' + this.options.headerPrefix + slugger.slug(raw) + '\">' + text + '</h' + level + '>\\n';\n      } // ignore IDs\n\n\n      return '<h' + level + '>' + text + '</h' + level + '>\\n';\n    };\n\n    _proto.hr = function hr() {\n      return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n    };\n\n    _proto.list = function list(body, ordered, start) {\n      var type = ordered ? 'ol' : 'ul',\n          startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n      return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    };\n\n    _proto.listitem = function listitem(text) {\n      return '<li>' + text + '</li>\\n';\n    };\n\n    _proto.checkbox = function checkbox(checked) {\n      return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n    };\n\n    _proto.paragraph = function paragraph(text) {\n      return '<p>' + text + '</p>\\n';\n    };\n\n    _proto.table = function table(header, body) {\n      if (body) body = '<tbody>' + body + '</tbody>';\n      return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n    };\n\n    _proto.tablerow = function tablerow(content) {\n      return '<tr>\\n' + content + '</tr>\\n';\n    };\n\n    _proto.tablecell = function tablecell(content, flags) {\n      var type = flags.header ? 'th' : 'td';\n      var tag = flags.align ? '<' + type + ' align=\"' + flags.align + '\">' : '<' + type + '>';\n      return tag + content + '</' + type + '>\\n';\n    } // span level renderer\n    ;\n\n    _proto.strong = function strong(text) {\n      return '<strong>' + text + '</strong>';\n    };\n\n    _proto.em = function em(text) {\n      return '<em>' + text + '</em>';\n    };\n\n    _proto.codespan = function codespan(text) {\n      return '<code>' + text + '</code>';\n    };\n\n    _proto.br = function br() {\n      return this.options.xhtml ? '<br/>' : '<br>';\n    };\n\n    _proto.del = function del(text) {\n      return '<del>' + text + '</del>';\n    };\n\n    _proto.link = function link(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<a href=\"' + escape$1(href) + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += '>' + text + '</a>';\n      return out;\n    };\n\n    _proto.image = function image(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += this.options.xhtml ? '/>' : '>';\n      return out;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    return Renderer;\n  }();\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n\n\n  var TextRenderer_1 = /*#__PURE__*/function () {\n    function TextRenderer() {}\n\n    var _proto = TextRenderer.prototype; // no need for block level renderers\n\n    _proto.strong = function strong(text) {\n      return text;\n    };\n\n    _proto.em = function em(text) {\n      return text;\n    };\n\n    _proto.codespan = function codespan(text) {\n      return text;\n    };\n\n    _proto.del = function del(text) {\n      return text;\n    };\n\n    _proto.html = function html(text) {\n      return text;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    _proto.link = function link(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.image = function image(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.br = function br() {\n      return '';\n    };\n\n    return TextRenderer;\n  }();\n  /**\n   * Slugger generates header id\n   */\n\n\n  var Slugger_1 = /*#__PURE__*/function () {\n    function Slugger() {\n      this.seen = {};\n    }\n\n    var _proto = Slugger.prototype;\n\n    _proto.serialize = function serialize(value) {\n      return value.toLowerCase().trim() // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '') // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n    }\n    /**\n     * Finds the next safe (unique) slug to use\n     */\n    ;\n\n    _proto.getNextSafeSlug = function getNextSafeSlug(originalSlug, isDryRun) {\n      var slug = originalSlug;\n      var occurenceAccumulator = 0;\n\n      if (this.seen.hasOwnProperty(slug)) {\n        occurenceAccumulator = this.seen[originalSlug];\n\n        do {\n          occurenceAccumulator++;\n          slug = originalSlug + '-' + occurenceAccumulator;\n        } while (this.seen.hasOwnProperty(slug));\n      }\n\n      if (!isDryRun) {\n        this.seen[originalSlug] = occurenceAccumulator;\n        this.seen[slug] = 0;\n      }\n\n      return slug;\n    }\n    /**\n     * Convert string to unique id\n     * @param {object} options\n     * @param {boolean} options.dryrun Generates the next unique slug without updating the internal accumulator.\n     */\n    ;\n\n    _proto.slug = function slug(value, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var slug = this.serialize(value);\n      return this.getNextSafeSlug(slug, options.dryrun);\n    };\n\n    return Slugger;\n  }();\n\n  var Renderer$1 = Renderer_1;\n  var TextRenderer$1 = TextRenderer_1;\n  var Slugger$1 = Slugger_1;\n  var defaults$1 = defaults$5.exports.defaults;\n  var unescape = helpers.unescape;\n  /**\n   * Parsing & Compiling\n   */\n\n  var Parser_1 = /*#__PURE__*/function () {\n    function Parser(options) {\n      this.options = options || defaults$1;\n      this.options.renderer = this.options.renderer || new Renderer$1();\n      this.renderer = this.options.renderer;\n      this.renderer.options = this.options;\n      this.textRenderer = new TextRenderer$1();\n      this.slugger = new Slugger$1();\n    }\n    /**\n     * Static Parse Method\n     */\n\n\n    Parser.parse = function parse(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    ;\n\n    Parser.parseInline = function parseInline(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    ;\n\n    var _proto = Parser.prototype;\n\n    _proto.parse = function parse(tokens, top) {\n      if (top === void 0) {\n        top = true;\n      }\n\n      var out = '',\n          i,\n          j,\n          k,\n          l2,\n          l3,\n          row,\n          cell,\n          header,\n          body,\n          token,\n          ordered,\n          start,\n          loose,\n          itemBody,\n          item,\n          checked,\n          task,\n          checkbox,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call(this, token);\n\n          if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'space':\n            {\n              continue;\n            }\n\n          case 'hr':\n            {\n              out += this.renderer.hr();\n              continue;\n            }\n\n          case 'heading':\n            {\n              out += this.renderer.heading(this.parseInline(token.tokens), token.depth, unescape(this.parseInline(token.tokens, this.textRenderer)), this.slugger);\n              continue;\n            }\n\n          case 'code':\n            {\n              out += this.renderer.code(token.text, token.lang, token.escaped);\n              continue;\n            }\n\n          case 'table':\n            {\n              header = ''; // header\n\n              cell = '';\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                cell += this.renderer.tablecell(this.parseInline(token.tokens.header[j]), {\n                  header: true,\n                  align: token.align[j]\n                });\n              }\n\n              header += this.renderer.tablerow(cell);\n              body = '';\n              l2 = token.cells.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.tokens.cells[j];\n                cell = '';\n                l3 = row.length;\n\n                for (k = 0; k < l3; k++) {\n                  cell += this.renderer.tablecell(this.parseInline(row[k]), {\n                    header: false,\n                    align: token.align[k]\n                  });\n                }\n\n                body += this.renderer.tablerow(cell);\n              }\n\n              out += this.renderer.table(header, body);\n              continue;\n            }\n\n          case 'blockquote':\n            {\n              body = this.parse(token.tokens);\n              out += this.renderer.blockquote(body);\n              continue;\n            }\n\n          case 'list':\n            {\n              ordered = token.ordered;\n              start = token.start;\n              loose = token.loose;\n              l2 = token.items.length;\n              body = '';\n\n              for (j = 0; j < l2; j++) {\n                item = token.items[j];\n                checked = item.checked;\n                task = item.task;\n                itemBody = '';\n\n                if (item.task) {\n                  checkbox = this.renderer.checkbox(checked);\n\n                  if (loose) {\n                    if (item.tokens.length > 0 && item.tokens[0].type === 'text') {\n                      item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n\n                      if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                      }\n                    } else {\n                      item.tokens.unshift({\n                        type: 'text',\n                        text: checkbox\n                      });\n                    }\n                  } else {\n                    itemBody += checkbox;\n                  }\n                }\n\n                itemBody += this.parse(item.tokens, loose);\n                body += this.renderer.listitem(itemBody, task, checked);\n              }\n\n              out += this.renderer.list(body, ordered, start);\n              continue;\n            }\n\n          case 'html':\n            {\n              // TODO parse inline content if parameter markdown=1\n              out += this.renderer.html(token.text);\n              continue;\n            }\n\n          case 'paragraph':\n            {\n              out += this.renderer.paragraph(this.parseInline(token.tokens));\n              continue;\n            }\n\n          case 'text':\n            {\n              body = token.tokens ? this.parseInline(token.tokens) : token.text;\n\n              while (i + 1 < l && tokens[i + 1].type === 'text') {\n                token = tokens[++i];\n                body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n              }\n\n              out += top ? this.renderer.paragraph(body) : body;\n              continue;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    ;\n\n    _proto.parseInline = function parseInline(tokens, renderer) {\n      renderer = renderer || this.renderer;\n      var out = '',\n          i,\n          token,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call(this, token);\n\n          if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'escape':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          case 'html':\n            {\n              out += renderer.html(token.text);\n              break;\n            }\n\n          case 'link':\n            {\n              out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'image':\n            {\n              out += renderer.image(token.href, token.title, token.text);\n              break;\n            }\n\n          case 'strong':\n            {\n              out += renderer.strong(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'em':\n            {\n              out += renderer.em(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'codespan':\n            {\n              out += renderer.codespan(token.text);\n              break;\n            }\n\n          case 'br':\n            {\n              out += renderer.br();\n              break;\n            }\n\n          case 'del':\n            {\n              out += renderer.del(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'text':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    };\n\n    return Parser;\n  }();\n\n  var Lexer = Lexer_1;\n  var Parser = Parser_1;\n  var Tokenizer = Tokenizer_1;\n  var Renderer = Renderer_1;\n  var TextRenderer = TextRenderer_1;\n  var Slugger = Slugger_1;\n  var merge = helpers.merge,\n      checkSanitizeDeprecation = helpers.checkSanitizeDeprecation,\n      escape = helpers.escape;\n  var getDefaults = defaults$5.exports.getDefaults,\n      changeDefaults = defaults$5.exports.changeDefaults,\n      defaults = defaults$5.exports.defaults;\n  /**\n   * Marked\n   */\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    if (callback) {\n      var highlight = opt.highlight;\n      var tokens;\n\n      try {\n        tokens = Lexer.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      var done = function done(err) {\n        var out;\n\n        if (!err) {\n          try {\n            if (opt.walkTokens) {\n              marked.walkTokens(tokens, opt.walkTokens);\n            }\n\n            out = Parser.parse(tokens, opt);\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!tokens.length) return done();\n      var pending = 0;\n      marked.walkTokens(tokens, function (token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(function () {\n            highlight(token.text, token.lang, function (err, code) {\n              if (err) {\n                return done(err);\n              }\n\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    try {\n      var _tokens = Lexer.lex(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(_tokens, opt.walkTokens);\n      }\n\n      return Parser.parse(_tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n\n  marked.options = marked.setOptions = function (opt) {\n    merge(marked.defaults, opt);\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n  marked.getDefaults = getDefaults;\n  marked.defaults = defaults;\n  /**\n   * Use Extension\n   */\n\n  marked.use = function () {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var opts = merge.apply(void 0, [{}].concat(args));\n    var extensions = marked.defaults.extensions || {\n      renderers: {},\n      childTokens: {}\n    };\n    var hasExtensions;\n    args.forEach(function (pack) {\n      // ==-- Parse \"addon\" extensions --== //\n      if (pack.extensions) {\n        hasExtensions = true;\n        pack.extensions.forEach(function (ext) {\n          if (!ext.name) {\n            throw new Error('extension name required');\n          }\n\n          if (ext.renderer) {\n            // Renderer extensions\n            var prevRenderer = extensions.renderers ? extensions.renderers[ext.name] : null;\n\n            if (prevRenderer) {\n              // Replace extension with func to run new extension but fall back if false\n              extensions.renderers[ext.name] = function () {\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  args[_key2] = arguments[_key2];\n                }\n\n                var ret = ext.renderer.apply(this, args);\n\n                if (ret === false) {\n                  ret = prevRenderer.apply(this, args);\n                }\n\n                return ret;\n              };\n            } else {\n              extensions.renderers[ext.name] = ext.renderer;\n            }\n          }\n\n          if (ext.tokenizer) {\n            // Tokenizer Extensions\n            if (!ext.level || ext.level !== 'block' && ext.level !== 'inline') {\n              throw new Error(\"extension level must be 'block' or 'inline'\");\n            }\n\n            if (extensions[ext.level]) {\n              extensions[ext.level].unshift(ext.tokenizer);\n            } else {\n              extensions[ext.level] = [ext.tokenizer];\n            }\n\n            if (ext.start) {\n              // Function to check for start of token\n              if (ext.level === 'block') {\n                if (extensions.startBlock) {\n                  extensions.startBlock.push(ext.start);\n                } else {\n                  extensions.startBlock = [ext.start];\n                }\n              } else if (ext.level === 'inline') {\n                if (extensions.startInline) {\n                  extensions.startInline.push(ext.start);\n                } else {\n                  extensions.startInline = [ext.start];\n                }\n              }\n            }\n          }\n\n          if (ext.childTokens) {\n            // Child tokens to be visited by walkTokens\n            extensions.childTokens[ext.name] = ext.childTokens;\n          }\n        });\n      } // ==-- Parse \"overwrite\" extensions --== //\n\n\n      if (pack.renderer) {\n        (function () {\n          var renderer = marked.defaults.renderer || new Renderer();\n\n          var _loop = function _loop(prop) {\n            var prevRenderer = renderer[prop]; // Replace renderer with func to run extension, but fall back if false\n\n            renderer[prop] = function () {\n              for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                args[_key3] = arguments[_key3];\n              }\n\n              var ret = pack.renderer[prop].apply(renderer, args);\n\n              if (ret === false) {\n                ret = prevRenderer.apply(renderer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.renderer) {\n            _loop(prop);\n          }\n\n          opts.renderer = renderer;\n        })();\n      }\n\n      if (pack.tokenizer) {\n        (function () {\n          var tokenizer = marked.defaults.tokenizer || new Tokenizer();\n\n          var _loop2 = function _loop2(prop) {\n            var prevTokenizer = tokenizer[prop]; // Replace tokenizer with func to run extension, but fall back if false\n\n            tokenizer[prop] = function () {\n              for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n                args[_key4] = arguments[_key4];\n              }\n\n              var ret = pack.tokenizer[prop].apply(tokenizer, args);\n\n              if (ret === false) {\n                ret = prevTokenizer.apply(tokenizer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.tokenizer) {\n            _loop2(prop);\n          }\n\n          opts.tokenizer = tokenizer;\n        })();\n      } // ==-- Parse WalkTokens extensions --== //\n\n\n      if (pack.walkTokens) {\n        var walkTokens = marked.defaults.walkTokens;\n\n        opts.walkTokens = function (token) {\n          pack.walkTokens.call(_this, token);\n\n          if (walkTokens) {\n            walkTokens(token);\n          }\n        };\n      }\n\n      if (hasExtensions) {\n        opts.extensions = extensions;\n      }\n\n      marked.setOptions(opts);\n    });\n  };\n  /**\n   * Run callback for every token\n   */\n\n\n  marked.walkTokens = function (tokens, callback) {\n    var _loop3 = function _loop3() {\n      var token = _step.value;\n      callback(token);\n\n      switch (token.type) {\n        case 'table':\n          {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(token.tokens.header), _step2; !(_step2 = _iterator2()).done;) {\n              var cell = _step2.value;\n              marked.walkTokens(cell, callback);\n            }\n\n            for (var _iterator3 = _createForOfIteratorHelperLoose(token.tokens.cells), _step3; !(_step3 = _iterator3()).done;) {\n              var row = _step3.value;\n\n              for (var _iterator4 = _createForOfIteratorHelperLoose(row), _step4; !(_step4 = _iterator4()).done;) {\n                var _cell = _step4.value;\n                marked.walkTokens(_cell, callback);\n              }\n            }\n\n            break;\n          }\n\n        case 'list':\n          {\n            marked.walkTokens(token.items, callback);\n            break;\n          }\n\n        default:\n          {\n            if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) {\n              // Walk any extensions\n              marked.defaults.extensions.childTokens[token.type].forEach(function (childTokens) {\n                marked.walkTokens(token[childTokens], callback);\n              });\n            } else if (token.tokens) {\n              marked.walkTokens(token.tokens, callback);\n            }\n          }\n      }\n    };\n\n    for (var _iterator = _createForOfIteratorHelperLoose(tokens), _step; !(_step = _iterator()).done;) {\n      _loop3();\n    }\n  };\n  /**\n   * Parse Inline\n   */\n\n\n  marked.parseInline = function (src, opt) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    try {\n      var tokens = Lexer.lexInline(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n\n      return Parser.parseInline(tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser;\n  marked.parser = Parser.parse;\n  marked.Renderer = Renderer;\n  marked.TextRenderer = TextRenderer;\n  marked.Lexer = Lexer;\n  marked.lexer = Lexer.lex;\n  marked.Tokenizer = Tokenizer;\n  marked.Slugger = Slugger;\n  marked.parse = marked;\n  var marked_1 = marked;\n  return marked_1;\n});\n\n/***/ }),\n\n/***/ 1264:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 565:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n(function (global, factory) {\n   true ? module.exports = factory() : undefined;\n})(this, function () {\n  'use strict'; // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n  var ios = safari && (/Mobile\\/\\w+/.test(userAgent) || navigator.maxTouchPoints > 2);\n  var android = /Android/.test(userAgent); // This is woefully incomplete. Suggestions for alternative methods welcome.\n\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n\n  if (presto_version) {\n    presto_version = Number(presto_version[1]);\n  }\n\n  if (presto_version && presto_version >= 15) {\n    presto = false;\n    webkit = true;\n  } // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n\n\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || ie && ie_version >= 9;\n\n  function classTest(cls) {\n    return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\");\n  }\n\n  var rmClass = function rmClass(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count) {\n      e.removeChild(e.firstChild);\n    }\n\n    return e;\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e);\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n\n    if (className) {\n      e.className = className;\n    }\n\n    if (style) {\n      e.style.cssText = style;\n    }\n\n    if (typeof content == \"string\") {\n      e.appendChild(document.createTextNode(content));\n    } else if (content) {\n      for (var i = 0; i < content.length; ++i) {\n        e.appendChild(content[i]);\n      }\n    }\n\n    return e;\n  } // wrapper for elt, which removes the elt from the accessibility tree\n\n\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e;\n  }\n\n  var range;\n\n  if (document.createRange) {\n    range = function range(node, start, end, endNode) {\n      var r = document.createRange();\n      r.setEnd(endNode || node, end);\n      r.setStart(node, start);\n      return r;\n    };\n  } else {\n    range = function range(node, start, end) {\n      var r = document.body.createTextRange();\n\n      try {\n        r.moveToElementText(node.parentNode);\n      } catch (e) {\n        return r;\n      }\n\n      r.collapse(true);\n      r.moveEnd(\"character\", end);\n      r.moveStart(\"character\", start);\n      return r;\n    };\n  }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      {\n        child = child.parentNode;\n      }\n\n    if (parent.contains) {\n      return parent.contains(child);\n    }\n\n    do {\n      if (child.nodeType == 11) {\n        child = child.host;\n      }\n\n      if (child == parent) {\n        return true;\n      }\n    } while (child = child.parentNode);\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n\n    try {\n      activeElement = document.activeElement;\n    } catch (e) {\n      activeElement = document.body || null;\n    }\n\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) {\n      activeElement = activeElement.shadowRoot.activeElement;\n    }\n\n    return activeElement;\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n\n    if (!classTest(cls).test(current)) {\n      node.className += (current ? \" \" : \"\") + cls;\n    }\n  }\n\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n\n    for (var i = 0; i < as.length; i++) {\n      if (as[i] && !classTest(as[i]).test(b)) {\n        b += \" \" + as[i];\n      }\n    }\n\n    return b;\n  }\n\n  var selectInput = function selectInput(node) {\n    node.select();\n  };\n\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    {\n      selectInput = function selectInput(node) {\n        node.selectionStart = 0;\n        node.selectionEnd = node.value.length;\n      };\n    } else if (ie) // Suppress mysterious IE10 errors\n    {\n      selectInput = function selectInput(node) {\n        try {\n          node.select();\n        } catch (_e) {}\n      };\n    }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function () {\n      return f.apply(null, args);\n    };\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) {\n      target = {};\n    }\n\n    for (var prop in obj) {\n      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop))) {\n        target[prop] = obj[prop];\n      }\n    }\n\n    return target;\n  } // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n\n\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n\n      if (end == -1) {\n        end = string.length;\n      }\n    }\n\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n\n      if (nextTab < 0 || nextTab >= end) {\n        return n + (end - i);\n      }\n\n      n += nextTab - i;\n      n += tabSize - n % tabSize;\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function Delayed() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n\n    if (self.time <= +new Date()) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date());\n    }\n  };\n\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date() + ms;\n\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i) {\n      if (array[i] == elt) {\n        return i;\n      }\n    }\n\n    return -1;\n  } // Number of pixels added to scroller and sizer to hide scrollbar\n\n\n  var scrollerGap = 50; // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n\n  var Pass = {\n    toString: function toString() {\n      return \"CodeMirror.Pass\";\n    }\n  }; // Reused option objects for setSelection & friends\n\n  var sel_dontScroll = {\n    scroll: false\n  },\n      sel_mouse = {\n    origin: \"*mouse\"\n  },\n      sel_move = {\n    origin: \"+move\"\n  }; // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n\n      if (nextTab == -1) {\n        nextTab = string.length;\n      }\n\n      var skipped = nextTab - pos;\n\n      if (nextTab == string.length || col + skipped >= goal) {\n        return pos + Math.min(skipped, goal - col);\n      }\n\n      col += nextTab - pos;\n      col += tabSize - col % tabSize;\n      pos = nextTab + 1;\n\n      if (col >= goal) {\n        return pos;\n      }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n\n  function spaceStr(n) {\n    while (spaceStrs.length <= n) {\n      spaceStrs.push(lst(spaceStrs) + \" \");\n    }\n\n    return spaceStrs[n];\n  }\n\n  function lst(arr) {\n    return arr[arr.length - 1];\n  }\n\n  function map(array, f) {\n    var out = [];\n\n    for (var i = 0; i < array.length; i++) {\n      out[i] = f(array[i], i);\n    }\n\n    return out;\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0,\n        priority = score(value);\n\n    while (pos < array.length && score(array[pos]) <= priority) {\n      pos++;\n    }\n\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n\n    if (props) {\n      copyObj(props, inst);\n    }\n\n    return inst;\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));\n  }\n\n  function isWordChar(ch, helper) {\n    if (!helper) {\n      return isWordCharBasic(ch);\n    }\n\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) {\n      return true;\n    }\n\n    return helper.test(ch);\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) {\n      if (obj.hasOwnProperty(n) && obj[n]) {\n        return false;\n      }\n    }\n\n    return true;\n  } // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n\n\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n\n  function isExtendingChar(ch) {\n    return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n  } // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n\n\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) {\n      pos += dir;\n    }\n\n    return pos;\n  } // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n\n\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n\n    for (;;) {\n      if (from == to) {\n        return from;\n      }\n\n      var midF = (from + to) / 2,\n          mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n\n      if (mid == from) {\n        return pred(mid) ? from : to;\n      }\n\n      if (pred(mid)) {\n        to = mid;\n      } else {\n        from = mid + dir;\n      }\n    }\n  } // BIDI HELPERS\n\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) {\n      return f(from, to, \"ltr\", 0);\n    }\n\n    var found = false;\n\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n\n    if (!found) {\n      f(from, to, \"ltr\");\n    }\n  }\n\n  var bidiOther = null;\n\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n\n      if (cur.from < ch && cur.to > ch) {\n        return i;\n      }\n\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") {\n          found = i;\n        } else {\n          bidiOther = i;\n        }\n      }\n\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") {\n          found = i;\n        } else {\n          bidiOther = i;\n        }\n      }\n    }\n\n    return found != null ? found : bidiOther;\n  } // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n\n\n  var bidiOrdering = function () {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\"; // Character types for codepoints 0x600 to 0x6f9\n\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n\n    function charType(code) {\n      if (code <= 0xf7) {\n        return lowTypes.charAt(code);\n      } else if (0x590 <= code && code <= 0x5f4) {\n        return \"R\";\n      } else if (0x600 <= code && code <= 0x6f9) {\n        return arabicTypes.charAt(code - 0x600);\n      } else if (0x6ee <= code && code <= 0x8ac) {\n        return \"r\";\n      } else if (0x2000 <= code && code <= 0x200b) {\n        return \"w\";\n      } else if (code == 0x200c) {\n        return \"b\";\n      } else {\n        return \"L\";\n      }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/,\n        isStrong = /[LRr]/,\n        countsAsLeft = /[Lb1n]/,\n        countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from;\n      this.to = to;\n    }\n\n    return function (str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) {\n        return false;\n      }\n\n      var len = str.length,\n          types = [];\n\n      for (var i = 0; i < len; ++i) {\n        types.push(charType(str.charCodeAt(i)));\n      } // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n\n\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n\n        if (type == \"m\") {\n          types[i$1] = prev;\n        } else {\n          prev = type;\n        }\n      } // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n\n\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n\n        if (type$1 == \"1\" && cur == \"r\") {\n          types[i$2] = \"n\";\n        } else if (isStrong.test(type$1)) {\n          cur = type$1;\n\n          if (type$1 == \"r\") {\n            types[i$2] = \"R\";\n          }\n        }\n      } // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n\n\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3 + 1] == \"1\") {\n          types[i$3] = \"1\";\n        } else if (type$2 == \",\" && prev$1 == types[i$3 + 1] && (prev$1 == \"1\" || prev$1 == \"n\")) {\n          types[i$3] = prev$1;\n        }\n\n        prev$1 = type$2;\n      } // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n\n\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n\n        if (type$3 == \",\") {\n          types[i$4] = \"N\";\n        } else if (type$3 == \"%\") {\n          var end = void 0;\n\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n\n          var replace = i$4 && types[i$4 - 1] == \"!\" || end < len && types[end] == \"1\" ? \"1\" : \"N\";\n\n          for (var j = i$4; j < end; ++j) {\n            types[j] = replace;\n          }\n\n          i$4 = end - 1;\n        }\n      } // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n\n\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n\n        if (cur$1 == \"L\" && type$4 == \"1\") {\n          types[i$5] = \"L\";\n        } else if (isStrong.test(type$4)) {\n          cur$1 = type$4;\n        }\n      } // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n\n\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = void 0;\n\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n\n          var before = (i$6 ? types[i$6 - 1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? before ? \"L\" : \"R\" : outerType;\n\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) {\n            types[j$1] = replace$1;\n          }\n\n          i$6 = end$1 - 1;\n        }\n      } // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n\n\n      var order = [],\n          m;\n\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7,\n              at = order.length,\n              isRTL = direction == \"rtl\" ? 1 : 0;\n\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) {\n                order.splice(at, 0, new BidiSpan(1, pos, j$2));\n                at += isRTL;\n              }\n\n              var nstart = j$2;\n\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              at += isRTL;\n              pos = j$2;\n            } else {\n              ++j$2;\n            }\n          }\n\n          if (pos < i$7) {\n            order.splice(at, 0, new BidiSpan(1, pos, i$7));\n          }\n        }\n      }\n\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order;\n    };\n  }(); // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n\n\n  function getOrder(line, direction) {\n    var order = line.order;\n\n    if (order == null) {\n      order = line.order = bidiOrdering(line.text, direction);\n    }\n\n    return order;\n  } // EVENT HANDLING\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n\n  var noHandlers = [];\n\n  var on = function on(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers;\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers,\n          arr = map && map[type];\n\n      if (arr) {\n        var index = indexOf(arr, f);\n\n        if (index > -1) {\n          map[type] = arr.slice(0, index).concat(arr.slice(index + 1));\n        }\n      }\n    }\n  }\n\n  function signal(emitter, type\n  /*, values...*/\n  ) {\n    var handlers = getHandlers(emitter, type);\n\n    if (!handlers.length) {\n      return;\n    }\n\n    var args = Array.prototype.slice.call(arguments, 2);\n\n    for (var i = 0; i < handlers.length; ++i) {\n      handlers[i].apply(null, args);\n    }\n  } // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n\n\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\") {\n      e = {\n        type: e,\n        preventDefault: function preventDefault() {\n          this.defaultPrevented = true;\n        }\n      };\n    }\n\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore;\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n\n    if (!arr) {\n      return;\n    }\n\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n\n    for (var i = 0; i < arr.length; ++i) {\n      if (indexOf(set, arr[i]) == -1) {\n        set.push(arr[i]);\n      }\n    }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0;\n  } // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n\n\n  function eventMixin(ctor) {\n    ctor.prototype.on = function (type, f) {\n      on(this, type, f);\n    };\n\n    ctor.prototype.off = function (type, f) {\n      off(this, type, f);\n    };\n  } // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) {\n      e.preventDefault();\n    } else {\n      e.returnValue = false;\n    }\n  }\n\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    } else {\n      e.cancelBubble = true;\n    }\n  }\n\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n  }\n\n  function e_stop(e) {\n    e_preventDefault(e);\n    e_stopPropagation(e);\n  }\n\n  function e_target(e) {\n    return e.target || e.srcElement;\n  }\n\n  function e_button(e) {\n    var b = e.which;\n\n    if (b == null) {\n      if (e.button & 1) {\n        b = 1;\n      } else if (e.button & 2) {\n        b = 3;\n      } else if (e.button & 4) {\n        b = 2;\n      }\n    }\n\n    if (mac && e.ctrlKey && b == 1) {\n      b = 3;\n    }\n\n    return b;\n  } // Detect drag-and-drop\n\n\n  var dragAndDrop = function () {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) {\n      return false;\n    }\n\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div;\n  }();\n\n  var zwspSupported;\n\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200B\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n\n      if (measure.firstChild.offsetHeight != 0) {\n        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n      }\n    }\n\n    var node = zwspSupported ? elt(\"span\", \"\\u200B\") : elt(\"span\", \"\\xA0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node;\n  } // Feature-detect IE's crummy client rect reporting for bidi text\n\n\n  var badBidiRects;\n\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) {\n      return badBidiRects;\n    }\n\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062EA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n\n    if (!r0 || r0.left == r0.right) {\n      return false;\n    } // Safari returns null in some cases (#2780)\n\n\n    return badBidiRects = r1.right - r0.right < 3;\n  } // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n\n\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0,\n        result = [],\n        l = string.length;\n\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n\n      if (nl == -1) {\n        nl = string.length;\n      }\n\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n\n    return result;\n  } : function (string) {\n    return string.split(/\\r\\n?|\\n/);\n  };\n  var hasSelection = window.getSelection ? function (te) {\n    try {\n      return te.selectionStart != te.selectionEnd;\n    } catch (e) {\n      return false;\n    }\n  } : function (te) {\n    var range;\n\n    try {\n      range = te.ownerDocument.selection.createRange();\n    } catch (e) {}\n\n    if (!range || range.parentElement() != te) {\n      return false;\n    }\n\n    return range.compareEndPoints(\"StartToEnd\", range) != 0;\n  };\n\n  var hasCopyEvent = function () {\n    var e = elt(\"div\");\n\n    if (\"oncopy\" in e) {\n      return true;\n    }\n\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\";\n  }();\n\n  var badZoomedRects = null;\n\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) {\n      return badZoomedRects;\n    }\n\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n  } // Known modes, by name and by MIME\n\n\n  var modes = {},\n      mimeModes = {}; // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n\n  function defineMode(name, mode) {\n    if (arguments.length > 2) {\n      mode.dependencies = Array.prototype.slice.call(arguments, 2);\n    }\n\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  } // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n\n\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n\n      if (typeof found == \"string\") {\n        found = {\n          name: found\n        };\n      }\n\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\");\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\");\n    }\n\n    if (typeof spec == \"string\") {\n      return {\n        name: spec\n      };\n    } else {\n      return spec || {\n        name: \"null\"\n      };\n    }\n  } // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n\n\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n\n    if (!mfactory) {\n      return getMode(options, \"text/plain\");\n    }\n\n    var modeObj = mfactory(options, spec);\n\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) {\n          continue;\n        }\n\n        if (modeObj.hasOwnProperty(prop)) {\n          modeObj[\"_\" + prop] = modeObj[prop];\n        }\n\n        modeObj[prop] = exts[prop];\n      }\n    }\n\n    modeObj.name = spec.name;\n\n    if (spec.helperType) {\n      modeObj.helperType = spec.helperType;\n    }\n\n    if (spec.modeProps) {\n      for (var prop$1 in spec.modeProps) {\n        modeObj[prop$1] = spec.modeProps[prop$1];\n      }\n    }\n\n    return modeObj;\n  } // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n\n\n  var modeExtensions = {};\n\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {};\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) {\n      return state;\n    }\n\n    if (mode.copyState) {\n      return mode.copyState(state);\n    }\n\n    var nstate = {};\n\n    for (var n in state) {\n      var val = state[n];\n\n      if (val instanceof Array) {\n        val = val.concat([]);\n      }\n\n      nstate[n] = val;\n    }\n\n    return nstate;\n  } // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n\n\n  function innerMode(mode, state) {\n    var info;\n\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n\n      if (!info || info.mode == mode) {\n        break;\n      }\n\n      state = info.state;\n      mode = info.mode;\n    }\n\n    return info || {\n      mode: mode,\n      state: state\n    };\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true;\n  } // STRING STREAM\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n\n  var StringStream = function StringStream(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {\n    return this.pos >= this.string.length;\n  };\n\n  StringStream.prototype.sol = function () {\n    return this.pos == this.lineStart;\n  };\n\n  StringStream.prototype.peek = function () {\n    return this.string.charAt(this.pos) || undefined;\n  };\n\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length) {\n      return this.string.charAt(this.pos++);\n    }\n  };\n\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n\n    if (typeof match == \"string\") {\n      ok = ch == match;\n    } else {\n      ok = ch && (match.test ? match.test(ch) : match(ch));\n    }\n\n    if (ok) {\n      ++this.pos;\n      return ch;\n    }\n  };\n\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n\n    while (this.eat(match)) {}\n\n    return this.pos > start;\n  };\n\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) {\n      ++this.pos;\n    }\n\n    return this.pos > start;\n  };\n\n  StringStream.prototype.skipToEnd = function () {\n    this.pos = this.string.length;\n  };\n\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n\n    if (found > -1) {\n      this.pos = found;\n      return true;\n    }\n  };\n\n  StringStream.prototype.backUp = function (n) {\n    this.pos -= n;\n  };\n\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n  };\n\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n  };\n\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function cased(str) {\n        return caseInsensitive ? str.toLowerCase() : str;\n      };\n\n      var substr = this.string.substr(this.pos, pattern.length);\n\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) {\n          this.pos += pattern.length;\n        }\n\n        return true;\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n\n      if (match && match.index > 0) {\n        return null;\n      }\n\n      if (match && consume !== false) {\n        this.pos += match[0].length;\n      }\n\n      return match;\n    }\n  };\n\n  StringStream.prototype.current = function () {\n    return this.string.slice(this.start, this.pos);\n  };\n\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n\n    try {\n      return inner();\n    } finally {\n      this.lineStart -= n;\n    }\n  };\n\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n);\n  };\n\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos);\n  }; // Find the line object corresponding to the given line number.\n\n\n  function getLine(doc, n) {\n    n -= doc.first;\n\n    if (n < 0 || n >= doc.size) {\n      throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n    }\n\n    var chunk = doc;\n\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i],\n            sz = child.chunkSize();\n\n        if (n < sz) {\n          chunk = child;\n          break;\n        }\n\n        n -= sz;\n      }\n    }\n\n    return chunk.lines[n];\n  } // Get the part of a document between two positions, as an array of\n  // strings.\n\n\n  function getBetween(doc, start, end) {\n    var out = [],\n        n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n\n      if (n == end.line) {\n        text = text.slice(0, end.ch);\n      }\n\n      if (n == start.line) {\n        text = text.slice(start.ch);\n      }\n\n      out.push(text);\n      ++n;\n    });\n    return out;\n  } // Get the lines between from and to, as array of strings.\n\n\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) {\n      out.push(line.text);\n    }); // iter aborts when callback returns truthy value\n\n    return out;\n  } // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n\n\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n\n    if (diff) {\n      for (var n = line; n; n = n.parent) {\n        n.height += diff;\n      }\n    }\n  } // Given a line object, find its line number by walking up through\n  // its parent links.\n\n\n  function lineNo(line) {\n    if (line.parent == null) {\n      return null;\n    }\n\n    var cur = line.parent,\n        no = indexOf(cur.lines, line);\n\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) {\n          break;\n        }\n\n        no += chunk.children[i].chunkSize();\n      }\n    }\n\n    return no + cur.first;\n  } // Find the line at the given vertical position, using the height\n  // information in the document tree.\n\n\n  function _lineAtHeight(chunk, h) {\n    var n = chunk.first;\n\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1],\n            ch = child.height;\n\n        if (h < ch) {\n          chunk = child;\n          continue outer;\n        }\n\n        h -= ch;\n        n += child.chunkSize();\n      }\n\n      return n;\n    } while (!chunk.lines);\n\n    var i = 0;\n\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i],\n          lh = line.height;\n\n      if (h < lh) {\n        break;\n      }\n\n      h -= lh;\n    }\n\n    return n + i;\n  }\n\n  function isLine(doc, l) {\n    return l >= doc.first && l < doc.first + doc.size;\n  }\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber));\n  } // A Pos instance represents a position within the text.\n\n\n  function Pos(line, ch, sticky) {\n    if (sticky === void 0) sticky = null;\n\n    if (!(this instanceof Pos)) {\n      return new Pos(line, ch, sticky);\n    }\n\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  } // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n\n\n  function cmp(a, b) {\n    return a.line - b.line || a.ch - b.ch;\n  }\n\n  function equalCursorPos(a, b) {\n    return a.sticky == b.sticky && cmp(a, b) == 0;\n  }\n\n  function copyPos(x) {\n    return Pos(x.line, x.ch);\n  }\n\n  function maxPos(a, b) {\n    return cmp(a, b) < 0 ? b : a;\n  }\n\n  function minPos(a, b) {\n    return cmp(a, b) < 0 ? a : b;\n  } // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n\n\n  function clipLine(doc, n) {\n    return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n  }\n\n  function _clipPos(doc, pos) {\n    if (pos.line < doc.first) {\n      return Pos(doc.first, 0);\n    }\n\n    var last = doc.first + doc.size - 1;\n\n    if (pos.line > last) {\n      return Pos(last, getLine(doc, last).text.length);\n    }\n\n    return clipToLen(pos, getLine(doc, pos.line).text.length);\n  }\n\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n\n    if (ch == null || ch > linelen) {\n      return Pos(pos.line, linelen);\n    } else if (ch < 0) {\n      return Pos(pos.line, 0);\n    } else {\n      return pos;\n    }\n  }\n\n  function clipPosArray(doc, array) {\n    var out = [];\n\n    for (var i = 0; i < array.length; i++) {\n      out[i] = _clipPos(doc, array[i]);\n    }\n\n    return out;\n  }\n\n  var SavedContext = function SavedContext(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function Context(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n\n    if (line != null && n > this.maxLookAhead) {\n      this.maxLookAhead = n;\n    }\n\n    return line;\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) {\n      return null;\n    }\n\n    while (this.baseTokens[this.baseTokenPos] <= n) {\n      this.baseTokenPos += 2;\n    }\n\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {\n      type: type && type.replace(/( |^)overlay .*/, \"\"),\n      size: this.baseTokens[this.baseTokenPos] - n\n    };\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n\n    if (this.maxLookAhead > 0) {\n      this.maxLookAhead--;\n    }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext) {\n      return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead);\n    } else {\n      return new Context(doc, copyState(doc.mode, saved), line);\n    }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state;\n  }; // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n\n\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen],\n        lineClasses = {}; // Compute the base array of styles\n\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) {\n      return st.push(end, style);\n    }, lineClasses, forceToEnd);\n    var state = context.state; // Run overlays, adjust style array.\n\n    var loop = function loop(o) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o],\n          i = 1,\n          at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i; // Ensure there's a token end at the current position, and that i points at it\n\n        while (at < end) {\n          var i_end = st[i];\n\n          if (i_end > end) {\n            st.splice(i, 1, end, st[i + 1], i_end);\n          }\n\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n\n        if (!style) {\n          return;\n        }\n\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start + 1];\n            st[start + 1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) {\n      loop(o);\n    }\n\n    return {\n      styles: st,\n      classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null\n    };\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n\n      if (resetState) {\n        context.state = resetState;\n      }\n\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n\n      if (result.classes) {\n        line.styleClasses = result.classes;\n      } else if (line.styleClasses) {\n        line.styleClasses = null;\n      }\n\n      if (updateFrontier === cm.doc.highlightFrontier) {\n        cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier);\n      }\n    }\n\n    return line.styles;\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc,\n        display = cm.display;\n\n    if (!doc.mode.startState) {\n      return new Context(doc, true, n);\n    }\n\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n\n    if (precise) {\n      doc.modeFrontier = context.line;\n    }\n\n    return context;\n  } // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n\n\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n\n    if (text == \"\") {\n      callBlankLine(mode, context.state);\n    }\n\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) {\n      return mode.blankLine(state);\n    }\n\n    if (!mode.innerMode) {\n      return;\n    }\n\n    var inner = innerMode(mode, state);\n\n    if (inner.mode.blankLine) {\n      return inner.mode.blankLine(inner.state);\n    }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) {\n        inner[0] = innerMode(mode, state).mode;\n      }\n\n      var style = mode.token(stream, state);\n\n      if (stream.pos > stream.start) {\n        return style;\n      }\n    }\n\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n  }\n\n  var Token = function Token(stream, type, state) {\n    this.start = stream.start;\n    this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  }; // Utility for getTokenAt and getLineTokens\n\n\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc,\n        mode = doc.mode,\n        style;\n    pos = _clipPos(doc, pos);\n    var line = getLine(doc, pos.line),\n        context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context),\n        tokens;\n\n    if (asArray) {\n      tokens = [];\n    }\n\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n\n      if (asArray) {\n        tokens.push(new Token(stream, style, copyState(doc.mode, context.state)));\n      }\n    }\n\n    return asArray ? tokens : new Token(stream, style, context.state);\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) {\n      for (;;) {\n        var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n\n        if (!lineClass) {\n          break;\n        }\n\n        type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n        var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n\n        if (output[prop] == null) {\n          output[prop] = lineClass[2];\n        } else if (!new RegExp(\"(?:^|\\\\s)\" + lineClass[2] + \"(?:$|\\\\s)\").test(output[prop])) {\n          output[prop] += \" \" + lineClass[2];\n        }\n      }\n    }\n\n    return type;\n  } // Run the given mode's parser over a line, calling f for each token.\n\n\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n\n    if (flattenSpans == null) {\n      flattenSpans = cm.options.flattenSpans;\n    }\n\n    var curStart = 0,\n        curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context),\n        style;\n    var inner = cm.options.addModeClass && [null];\n\n    if (text == \"\") {\n      extractLineClasses(callBlankLine(mode, context.state), lineClasses);\n    }\n\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n\n        if (forceToEnd) {\n          processLine(cm, text, context, stream.pos);\n        }\n\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n\n      if (inner) {\n        var mName = inner[0].name;\n\n        if (mName) {\n          style = \"m-\" + (style ? mName + \" \" + style : mName);\n        }\n      }\n\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n\n        curStyle = style;\n      }\n\n      stream.start = stream.pos;\n    }\n\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  } // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n\n\n  function findStartLine(cm, n, precise) {\n    var minindent,\n        minline,\n        doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) {\n        return doc.first;\n      }\n\n      var line = getLine(doc, search - 1),\n          after = line.stateAfter;\n\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier)) {\n        return search;\n      }\n\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n\n    return minline;\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n\n    if (doc.highlightFrontier < n - 10) {\n      return;\n    }\n\n    var start = doc.first;\n\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter; // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break;\n      }\n    }\n\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  } // Optimize some code when these features are not used.\n\n\n  var sawReadOnlySpans = false,\n      sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  } // TEXTMARKER SPANS\n\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from;\n    this.to = to;\n  } // Search an array of spans for a span matching the given marker.\n\n\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) {\n      for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n\n        if (span.marker == marker) {\n          return span;\n        }\n      }\n    }\n  } // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n\n\n  function removeMarkedSpan(spans, span) {\n    var r;\n\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i] != span) {\n        (r || (r = [])).push(spans[i]);\n      }\n    }\n\n    return r;\n  } // Add a span to a line.\n\n\n  function addMarkedSpan(line, span, op) {\n    var inThisOp = op && window.WeakSet && (op.markedSpans || (op.markedSpans = new WeakSet()));\n\n    if (inThisOp && inThisOp.has(line.markedSpans)) {\n      line.markedSpans.push(span);\n    } else {\n      line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n\n      if (inThisOp) {\n        inThisOp.add(line.markedSpans);\n      }\n    }\n\n    span.marker.attachLine(line);\n  } // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n\n\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n\n    if (old) {\n      for (var i = 0; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n\n        if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n          var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n        }\n      }\n    }\n\n    return nw;\n  }\n\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n\n    if (old) {\n      for (var i = 0; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n\n        if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n          var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));\n        }\n      }\n    }\n\n    return nw;\n  } // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n\n\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) {\n      return null;\n    }\n\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n\n    if (!oldFirst && !oldLast) {\n      return null;\n    }\n\n    var startCh = change.from.ch,\n        endCh = change.to.ch,\n        isInsert = cmp(change.from, change.to) == 0; // Get the spans that 'stick out' on both sides\n\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert); // Next, merge those two ends\n\n    var sameLine = change.text.length == 1,\n        offset = lst(change.text).length + (sameLine ? startCh : 0);\n\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n\n          if (!found) {\n            span.to = startCh;\n          } else if (sameLine) {\n            span.to = found.to == null ? null : found.to + offset;\n          }\n        }\n      }\n    }\n\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n\n        if (span$1.to != null) {\n          span$1.to += offset;\n        }\n\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n\n          if (!found$1) {\n            span$1.from = offset;\n\n            if (sameLine) {\n              (first || (first = [])).push(span$1);\n            }\n          }\n        } else {\n          span$1.from += offset;\n\n          if (sameLine) {\n            (first || (first = [])).push(span$1);\n          }\n        }\n      }\n    } // Make sure we didn't create any zero-length spans\n\n\n    if (first) {\n      first = clearEmptySpans(first);\n    }\n\n    if (last && last != first) {\n      last = clearEmptySpans(last);\n    }\n\n    var newMarkers = [first];\n\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2,\n          gapMarkers;\n\n      if (gap > 0 && first) {\n        for (var i$2 = 0; i$2 < first.length; ++i$2) {\n          if (first[i$2].to == null) {\n            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null));\n          }\n        }\n      }\n\n      for (var i$3 = 0; i$3 < gap; ++i$3) {\n        newMarkers.push(gapMarkers);\n      }\n\n      newMarkers.push(last);\n    }\n\n    return newMarkers;\n  } // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n\n\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false) {\n        spans.splice(i--, 1);\n      }\n    }\n\n    if (!spans.length) {\n      return null;\n    }\n\n    return spans;\n  } // Used to 'clip' out readOnly ranges when making a change.\n\n\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) {\n        for (var i = 0; i < line.markedSpans.length; ++i) {\n          var mark = line.markedSpans[i].marker;\n\n          if (mark.readOnly && (!markers || indexOf(markers, mark) == -1)) {\n            (markers || (markers = [])).push(mark);\n          }\n        }\n      }\n    });\n\n    if (!markers) {\n      return null;\n    }\n\n    var parts = [{\n      from: from,\n      to: to\n    }];\n\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i],\n          m = mk.find(0);\n\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) {\n          continue;\n        }\n\n        var newParts = [j, 1],\n            dfrom = cmp(p.from, m.from),\n            dto = cmp(p.to, m.to);\n\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom) {\n          newParts.push({\n            from: p.from,\n            to: m.from\n          });\n        }\n\n        if (dto > 0 || !mk.inclusiveRight && !dto) {\n          newParts.push({\n            from: m.to,\n            to: p.to\n          });\n        }\n\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n\n    return parts;\n  } // Connect or disconnect spans from a line.\n\n\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n\n    if (!spans) {\n      return;\n    }\n\n    for (var i = 0; i < spans.length; ++i) {\n      spans[i].marker.detachLine(line);\n    }\n\n    line.markedSpans = null;\n  }\n\n  function attachMarkedSpans(line, spans) {\n    if (!spans) {\n      return;\n    }\n\n    for (var i = 0; i < spans.length; ++i) {\n      spans[i].marker.attachLine(line);\n    }\n\n    line.markedSpans = spans;\n  } // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n\n\n  function extraLeft(marker) {\n    return marker.inclusiveLeft ? -1 : 0;\n  }\n\n  function extraRight(marker) {\n    return marker.inclusiveRight ? 1 : 0;\n  } // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n\n\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n\n    if (lenDiff != 0) {\n      return lenDiff;\n    }\n\n    var aPos = a.find(),\n        bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n\n    if (fromCmp) {\n      return -fromCmp;\n    }\n\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n\n    if (toCmp) {\n      return toCmp;\n    }\n\n    return b.id - a.id;\n  } // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n\n\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans,\n        found;\n\n    if (sps) {\n      for (var sp = void 0, i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n\n        if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n          found = sp.marker;\n        }\n      }\n    }\n\n    return found;\n  }\n\n  function collapsedSpanAtStart(line) {\n    return collapsedSpanAtSide(line, true);\n  }\n\n  function collapsedSpanAtEnd(line) {\n    return collapsedSpanAtSide(line, false);\n  }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans,\n        found;\n\n    if (sps) {\n      for (var i = 0; i < sps.length; ++i) {\n        var sp = sps[i];\n\n        if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n          found = sp.marker;\n        }\n      }\n    }\n\n    return found;\n  } // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n\n\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n\n    if (sps) {\n      for (var i = 0; i < sps.length; ++i) {\n        var sp = sps[i];\n\n        if (!sp.marker.collapsed) {\n          continue;\n        }\n\n        var found = sp.marker.find(0);\n        var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n        var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n\n        if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) {\n          continue;\n        }\n\n        if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0)) {\n          return true;\n        }\n      }\n    }\n  } // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n\n\n  function visualLine(line) {\n    var merged;\n\n    while (merged = collapsedSpanAtStart(line)) {\n      line = merged.find(-1, true).line;\n    }\n\n    return line;\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n    }\n\n    return line;\n  } // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n\n\n  function visualLineContinued(line) {\n    var merged, lines;\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n      (lines || (lines = [])).push(line);\n    }\n\n    return lines;\n  } // Get the line number of the start of the visual line that the\n  // given line number is part of.\n\n\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN),\n        vis = visualLine(line);\n\n    if (line == vis) {\n      return lineN;\n    }\n\n    return lineNo(vis);\n  } // Get the line number of the start of the next visual line after\n  // the given line.\n\n\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) {\n      return lineN;\n    }\n\n    var line = getLine(doc, lineN),\n        merged;\n\n    if (!lineIsHidden(doc, line)) {\n      return lineN;\n    }\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n    }\n\n    return lineNo(line) + 1;\n  } // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n\n\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n\n    if (sps) {\n      for (var sp = void 0, i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n\n        if (!sp.marker.collapsed) {\n          continue;\n        }\n\n        if (sp.from == null) {\n          return true;\n        }\n\n        if (sp.marker.widgetNode) {\n          continue;\n        }\n\n        if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp)) {\n          return true;\n        }\n      }\n    }\n  }\n\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n    }\n\n    if (span.marker.inclusiveRight && span.to == line.text.length) {\n      return true;\n    }\n\n    for (var sp = void 0, i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp)) {\n        return true;\n      }\n    }\n  } // Find the height above the given line.\n\n\n  function _heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n    var h = 0,\n        chunk = lineObj.parent;\n\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n\n      if (line == lineObj) {\n        break;\n      } else {\n        h += line.height;\n      }\n    }\n\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n\n        if (cur == chunk) {\n          break;\n        } else {\n          h += cur.height;\n        }\n      }\n    }\n\n    return h;\n  } // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n\n\n  function lineLength(line) {\n    if (line.height == 0) {\n      return 0;\n    }\n\n    var len = line.text.length,\n        merged,\n        cur = line;\n\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n\n    cur = line;\n\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n\n    return len;\n  } // Find the longest line in the document.\n\n\n  function findMaxLine(cm) {\n    var d = cm.display,\n        doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  } // LINE DATA STRUCTURE\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n\n\n  var Line = function Line(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () {\n    return lineNo(this);\n  };\n\n  eventMixin(Line); // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n\n    if (line.stateAfter) {\n      line.stateAfter = null;\n    }\n\n    if (line.styles) {\n      line.styles = null;\n    }\n\n    if (line.order != null) {\n      line.order = null;\n    }\n\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n\n    if (estHeight != line.height) {\n      updateLineHeight(line, estHeight);\n    }\n  } // Detach a line from the document tree and its markers.\n\n\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  } // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n\n\n  var styleToClassCache = {},\n      styleToClassCacheWithMode = {};\n\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) {\n      return null;\n    }\n\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] || (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n  } // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n\n\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {\n      pre: eltP(\"pre\", [content], \"CodeMirror-line\"),\n      content: content,\n      col: 0,\n      pos: 0,\n      cm: cm,\n      trailingSpace: false,\n      splitSpaces: cm.getOption(\"lineWrapping\")\n    };\n    lineView.measure = {}; // Iterate over the logical lines that make up this visual line.\n\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line,\n          order = void 0;\n      builder.pos = 0;\n      builder.addToken = buildToken; // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction))) {\n        builder.addToken = buildTokenBadBidi(builder.addToken, order);\n      }\n\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass) {\n          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n        }\n\n        if (line.styleClasses.textClass) {\n          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n        }\n      } // Ensure at least a single node is present, for measuring.\n\n\n      if (builder.map.length == 0) {\n        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n      } // Store the map and a cache object for the current logical line\n\n\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);\n        (lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    } // See issue #2901\n\n\n    if (webkit) {\n      var last = builder.content.lastChild;\n\n      if (/\\bcm-tab\\b/.test(last.className) || last.querySelector && last.querySelector(\".cm-tab\")) {\n        builder.content.className = \"cm-tab-wrap-hack\";\n      }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n\n    if (builder.pre.className) {\n      builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n    }\n\n    return builder;\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token;\n  } // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n\n\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) {\n      return;\n    }\n\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars,\n        mustWrap = false;\n    var content;\n\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n\n      if (ie && ie_version < 9) {\n        mustWrap = true;\n      }\n\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n\n          if (ie && ie_version < 9) {\n            content.appendChild(elt(\"span\", [txt]));\n          } else {\n            content.appendChild(txt);\n          }\n\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n\n        if (!m) {\n          break;\n        }\n\n        pos += skipped + 1;\n        var txt$1 = void 0;\n\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize,\n              tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240D\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n\n          if (ie && ie_version < 9) {\n            content.appendChild(elt(\"span\", [txt$1]));\n          } else {\n            content.appendChild(txt$1);\n          }\n\n          builder.col += 1;\n        }\n\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n\n    if (style || startStyle || endStyle || mustWrap || css || attributes) {\n      var fullStyle = style || \"\";\n\n      if (startStyle) {\n        fullStyle += startStyle;\n      }\n\n      if (endStyle) {\n        fullStyle += endStyle;\n      }\n\n      var token = elt(\"span\", [content], fullStyle, css);\n\n      if (attributes) {\n        for (var attr in attributes) {\n          if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\") {\n            token.setAttribute(attr, attributes[attr]);\n          }\n        }\n      }\n\n      return builder.content.appendChild(token);\n    }\n\n    builder.content.appendChild(content);\n  } // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n\n\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) {\n      return text;\n    }\n\n    var spaceBefore = trailingBefore,\n        result = \"\";\n\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32)) {\n        ch = \"\\xA0\";\n      }\n\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n\n    return result;\n  } // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n\n\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos,\n          end = start + text.length;\n\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = void 0;\n\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n\n          if (part.to > start && part.from <= start) {\n            break;\n          }\n        }\n\n        if (part.to >= end) {\n          return inner(builder, text, style, startStyle, endStyle, css, attributes);\n        }\n\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    };\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n\n    if (widget) {\n      builder.map.push(builder.pos, builder.pos + size, widget);\n    }\n\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget) {\n        widget = builder.content.appendChild(document.createElement(\"span\"));\n      }\n\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n\n    builder.pos += size;\n    builder.trailingSpace = false;\n  } // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n\n\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans,\n        allText = line.text,\n        at = 0;\n\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1 += 2) {\n        builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1 + 1], builder.cm.options));\n      }\n\n      return;\n    }\n\n    var len = allText.length,\n        pos = 0,\n        i = 1,\n        text = \"\",\n        style,\n        css;\n    var nextChange = 0,\n        spanStyle,\n        spanEndStyle,\n        spanStartStyle,\n        collapsed,\n        attributes;\n\n    for (;;) {\n      if (nextChange == pos) {\n        // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null;\n        nextChange = Infinity;\n        var foundBookmarks = [],\n            endStyles = void 0;\n\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j],\n              m = sp.marker;\n\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n\n            if (m.className) {\n              spanStyle += \" \" + m.className;\n            }\n\n            if (m.css) {\n              css = (css ? css + \";\" : \"\") + m.css;\n            }\n\n            if (m.startStyle && sp.from == pos) {\n              spanStartStyle += \" \" + m.startStyle;\n            }\n\n            if (m.endStyle && sp.to == nextChange) {\n              (endStyles || (endStyles = [])).push(m.endStyle, sp.to);\n            } // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n\n\n            if (m.title) {\n              (attributes || (attributes = {})).title = m.title;\n            }\n\n            if (m.attributes) {\n              for (var attr in m.attributes) {\n                (attributes || (attributes = {}))[attr] = m.attributes[attr];\n              }\n            }\n\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0)) {\n              collapsed = sp;\n            }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n\n        if (endStyles) {\n          for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2) {\n            if (endStyles[j$1 + 1] == nextChange) {\n              spanEndStyle += \" \" + endStyles[j$1];\n            }\n          }\n        }\n\n        if (!collapsed || collapsed.from == pos) {\n          for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2) {\n            buildCollapsedSpan(builder, 0, foundBookmarks[j$2]);\n          }\n        }\n\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);\n\n          if (collapsed.to == null) {\n            return;\n          }\n\n          if (collapsed.to == pos) {\n            collapsed = false;\n          }\n        }\n      }\n\n      if (pos >= len) {\n        break;\n      }\n\n      var upto = Math.min(len, nextChange);\n\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n\n          if (end >= upto) {\n            text = text.slice(upto - pos);\n            pos = upto;\n            break;\n          }\n\n          pos = end;\n          spanStartStyle = \"\";\n        }\n\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  } // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n\n\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line; // Continuing lines, if any\n\n    this.rest = visualLineContinued(line); // Number of logical lines in this visual line\n\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  } // Create a range of LineView objects for the given lines.\n\n\n  function buildViewArray(cm, from, to) {\n    var array = [],\n        nextPos;\n\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n\n    return array;\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks,\n        i = 0;\n\n    do {\n      for (; i < callbacks.length; i++) {\n        callbacks[i].call(null);\n      }\n\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n\n        if (op.cursorActivityHandlers) {\n          while (op.cursorActivityCalled < op.cursorActivityHandlers.length) {\n            op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n          }\n        }\n      }\n    } while (i < callbacks.length);\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n\n    if (!group) {\n      return;\n    }\n\n    try {\n      fireCallbacksForOps(group);\n    } finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null; // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n\n  function signalLater(emitter, type\n  /*, values...*/\n  ) {\n    var arr = getHandlers(emitter, type);\n\n    if (!arr.length) {\n      return;\n    }\n\n    var args = Array.prototype.slice.call(arguments, 2),\n        list;\n\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n\n    var loop = function loop(i) {\n      list.push(function () {\n        return arr[i].apply(null, args);\n      });\n    };\n\n    for (var i = 0; i < arr.length; ++i) {\n      loop(i);\n    }\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n\n    for (var i = 0; i < delayed.length; ++i) {\n      delayed[i]();\n    }\n  } // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n\n\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n\n      if (type == \"text\") {\n        updateLineText(cm, lineView);\n      } else if (type == \"gutter\") {\n        updateLineGutter(cm, lineView, lineN, dims);\n      } else if (type == \"class\") {\n        updateLineClasses(cm, lineView);\n      } else if (type == \"widget\") {\n        updateLineWidgets(cm, lineView, dims);\n      }\n    }\n\n    lineView.changes = null;\n  } // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n\n\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n\n      if (lineView.text.parentNode) {\n        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n      }\n\n      lineView.node.appendChild(lineView.text);\n\n      if (ie && ie_version < 8) {\n        lineView.node.style.zIndex = 2;\n      }\n    }\n\n    return lineView.node;\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n\n    if (cls) {\n      cls += \" CodeMirror-linebackground\";\n    }\n\n    if (lineView.background) {\n      if (cls) {\n        lineView.background.className = cls;\n      } else {\n        lineView.background.parentNode.removeChild(lineView.background);\n        lineView.background = null;\n      }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  } // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n\n\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built;\n    }\n\n    return buildLineContent(cm, lineView);\n  } // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n\n\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n\n    if (lineView.text == lineView.node) {\n      lineView.node = built.pre;\n    }\n\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n\n    if (lineView.line.wrapClass) {\n      ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n    } else if (lineView.node != lineView.text) {\n      lineView.node.className = \"\";\n    }\n\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass, \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + dims.gutterTotalWidth + \"px\");\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n\n    var markers = lineView.line.gutterMarkers;\n\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n      gutterWrap.setAttribute(\"aria-hidden\", \"true\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n\n      if (lineView.line.gutterClass) {\n        gutterWrap.className += \" \" + lineView.line.gutterClass;\n      }\n\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"])) {\n        lineView.lineNumber = gutterWrap.appendChild(elt(\"div\", lineNumberFor(cm.options, lineN), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + cm.display.lineNumInnerWidth + \"px\"));\n      }\n\n      if (markers) {\n        for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n          var id = cm.display.gutterSpecs[k].className,\n              found = markers.hasOwnProperty(id) && markers[id];\n\n          if (found) {\n            gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n          }\n        }\n      }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) {\n      lineView.alignable = null;\n    }\n\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n\n    for (var node = lineView.node.firstChild, next = void 0; node; node = next) {\n      next = node.nextSibling;\n\n      if (isWidget.test(node.className)) {\n        lineView.node.removeChild(node);\n      }\n    }\n\n    insertLineWidgets(cm, lineView, dims);\n  } // Build a line's DOM representation from scratch\n\n\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n\n    if (built.bgClass) {\n      lineView.bgClass = built.bgClass;\n    }\n\n    if (built.textClass) {\n      lineView.textClass = built.textClass;\n    }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node;\n  } // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n\n\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n\n    if (lineView.rest) {\n      for (var i = 0; i < lineView.rest.length; i++) {\n        insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n      }\n    }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) {\n      return;\n    }\n\n    var wrap = ensureLineWrapped(lineView);\n\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i],\n          node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n\n      if (!widget.handleMouseEvents) {\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n      }\n\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n\n      if (allowAbove && widget.above) {\n        wrap.insertBefore(node, lineView.gutter || lineView.text);\n      } else {\n        wrap.appendChild(node);\n      }\n\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n      (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n\n      node.style.width = width + \"px\";\n    }\n\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n\n      if (!widget.noHScroll) {\n        node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n      }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) {\n      return widget.height;\n    }\n\n    var cm = widget.doc.cm;\n\n    if (!cm) {\n      return 0;\n    }\n\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n\n      if (widget.coverGutter) {\n        parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n      }\n\n      if (widget.noHScroll) {\n        parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n      }\n\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n\n    return widget.height = widget.node.parentNode.offsetHeight;\n  } // Return true when the given mouse event happened in a widget\n\n\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\" || n.parentNode == display.sizer && n != display.mover) {\n        return true;\n      }\n    }\n  } // POSITION MEASUREMENT\n\n\n  function paddingTop(display) {\n    return display.lineSpace.offsetTop;\n  }\n\n  function paddingVert(display) {\n    return display.mover.offsetHeight - display.lineSpace.offsetHeight;\n  }\n\n  function paddingH(display) {\n    if (display.cachedPaddingH) {\n      return display.cachedPaddingH;\n    }\n\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {\n      left: parseInt(style.paddingLeft),\n      right: parseInt(style.paddingRight)\n    };\n\n    if (!isNaN(data.left) && !isNaN(data.right)) {\n      display.cachedPaddingH = data;\n    }\n\n    return data;\n  }\n\n  function scrollGap(cm) {\n    return scrollerGap - cm.display.nativeBarWidth;\n  }\n\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n  }\n\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n  } // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n\n\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i],\n              next = rects[i + 1];\n\n          if (Math.abs(cur.bottom - next.bottom) > 2) {\n            heights.push((cur.bottom + next.top) / 2 - rect.top);\n          }\n        }\n      }\n\n      heights.push(rect.bottom - rect.top);\n    }\n  } // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n\n\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line) {\n      return {\n        map: lineView.measure.map,\n        cache: lineView.measure.cache\n      };\n    }\n\n    for (var i = 0; i < lineView.rest.length; i++) {\n      if (lineView.rest[i] == line) {\n        return {\n          map: lineView.measure.maps[i],\n          cache: lineView.measure.caches[i]\n        };\n      }\n    }\n\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++) {\n      if (lineNo(lineView.rest[i$1]) > lineN) {\n        return {\n          map: lineView.measure.maps[i$1],\n          cache: lineView.measure.caches[i$1],\n          before: true\n        };\n      }\n    }\n  } // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n\n\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view;\n  } // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n\n\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n  } // Find a line view that corresponds to the given line number.\n\n\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) {\n      return cm.display.view[findViewIndex(cm, lineN)];\n    }\n\n    var ext = cm.display.externalMeasured;\n\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size) {\n      return ext;\n    }\n  } // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n\n\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n\n    if (!view) {\n      view = updateExternalMeasurement(cm, line);\n    }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line,\n      view: view,\n      rect: null,\n      map: info.map,\n      cache: info.cache,\n      before: info.before,\n      hasHeights: false\n    };\n  } // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n\n\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) {\n      ch = -1;\n    }\n\n    var key = ch + (bias || \"\"),\n        found;\n\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect) {\n        prepared.rect = prepared.view.text.getBoundingClientRect();\n      }\n\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n\n      found = measureCharInner(cm, prepared, ch, bias);\n\n      if (!found.bogus) {\n        prepared.cache[key] = found;\n      }\n    }\n\n    return {\n      left: found.left,\n      right: found.right,\n      top: varHeight ? found.rtop : found.top,\n      bottom: varHeight ? found.rbottom : found.bottom\n    };\n  }\n\n  var nullRect = {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  };\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd; // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n\n      if (ch < mStart) {\n        start = 0;\n        end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n\n        if (ch >= mEnd) {\n          collapse = \"right\";\n        }\n      }\n\n      if (start != null) {\n        node = map[i + 2];\n\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\")) {\n          collapse = bias;\n        }\n\n        if (bias == \"left\" && start == 0) {\n          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          }\n        }\n\n        if (bias == \"right\" && start == mEnd - mStart) {\n          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          }\n        }\n\n        break;\n      }\n    }\n\n    return {\n      node: node,\n      start: start,\n      end: end,\n      collapse: collapse,\n      coverStart: mStart,\n      coverEnd: mEnd\n    };\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n\n    if (bias == \"left\") {\n      for (var i = 0; i < rects.length; i++) {\n        if ((rect = rects[i]).left != rect.right) {\n          break;\n        }\n      }\n    } else {\n      for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n        if ((rect = rects[i$1]).left != rect.right) {\n          break;\n        }\n      }\n    }\n\n    return rect;\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node,\n        start = place.start,\n        end = place.end,\n        collapse = place.collapse;\n    var rect;\n\n    if (node.nodeType == 3) {\n      // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) {\n        // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) {\n          --start;\n        }\n\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) {\n          ++end;\n        }\n\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n          rect = node.parentNode.getBoundingClientRect();\n        } else {\n          rect = getUsefulRect(range(node, start, end).getClientRects(), bias);\n        }\n\n        if (rect.left || rect.right || start == 0) {\n          break;\n        }\n\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n\n      if (ie && ie_version < 11) {\n        rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n      }\n    } else {\n      // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) {\n        collapse = bias = \"right\";\n      }\n\n      var rects;\n\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1) {\n        rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n      } else {\n        rect = node.getBoundingClientRect();\n      }\n    }\n\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n\n      if (rSpan) {\n        rect = {\n          left: rSpan.left,\n          right: rSpan.left + charWidth(cm.display),\n          top: rSpan.top,\n          bottom: rSpan.bottom\n        };\n      } else {\n        rect = nullRect;\n      }\n    }\n\n    var rtop = rect.top - prepared.rect.top,\n        rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n\n    for (; i < heights.length - 1; i++) {\n      if (mid < heights[i]) {\n        break;\n      }\n    }\n\n    var top = i ? heights[i - 1] : 0,\n        bot = heights[i];\n    var result = {\n      left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n      right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n      top: top,\n      bottom: bot\n    };\n\n    if (!rect.left && !rect.right) {\n      result.bogus = true;\n    }\n\n    if (!cm.options.singleCursorHeightPerLine) {\n      result.rtop = rtop;\n      result.rbottom = rbot;\n    }\n\n    return result;\n  } // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n\n\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) {\n      return rect;\n    }\n\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {\n      left: rect.left * scaleX,\n      right: rect.right * scaleX,\n      top: rect.top * scaleY,\n      bottom: rect.bottom * scaleY\n    };\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n\n      if (lineView.rest) {\n        for (var i = 0; i < lineView.rest.length; i++) {\n          lineView.measure.caches[i] = {};\n        }\n      }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n\n    for (var i = 0; i < cm.display.view.length; i++) {\n      clearLineMeasurementCacheFor(cm.display.view[i]);\n    }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n\n    if (!cm.options.lineWrapping) {\n      cm.display.maxLineChanged = true;\n    }\n\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) {\n      return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft));\n    }\n\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n  }\n\n  function pageScrollY() {\n    if (chrome && android) {\n      return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop));\n    }\n\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop;\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n\n    if (lineObj.widgets) {\n      for (var i = 0; i < lineObj.widgets.length; ++i) {\n        if (lineObj.widgets[i].above) {\n          height += widgetHeight(lineObj.widgets[i]);\n        }\n      }\n    }\n\n    return height;\n  } // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n\n\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height;\n      rect.bottom += height;\n    }\n\n    if (context == \"line\") {\n      return rect;\n    }\n\n    if (!context) {\n      context = \"local\";\n    }\n\n    var yOff = _heightAtLine(lineObj);\n\n    if (context == \"local\") {\n      yOff += paddingTop(cm.display);\n    } else {\n      yOff -= cm.display.viewOffset;\n    }\n\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff;\n      rect.right += xOff;\n    }\n\n    rect.top += yOff;\n    rect.bottom += yOff;\n    return rect;\n  } // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n\n\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") {\n      return coords;\n    }\n\n    var left = coords.left,\n        top = coords.top; // First move into \"page\" coordinate system\n\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {\n      left: left - lineSpaceBox.left,\n      top: top - lineSpaceBox.top\n    };\n  }\n\n  function _charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) {\n      lineObj = getLine(cm.doc, pos.line);\n    }\n\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n  } // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n\n\n  function _cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n\n    if (!preparedMeasure) {\n      preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    }\n\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n\n      if (right) {\n        m.left = m.right;\n      } else {\n        m.right = m.left;\n      }\n\n      return intoCoordSystem(cm, lineObj, m, context);\n    }\n\n    var order = getOrder(lineObj, cm.doc.direction),\n        ch = pos.ch,\n        sticky = pos.sticky;\n\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n\n    if (!order) {\n      return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\");\n    }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos],\n          right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert);\n    }\n\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n\n    if (other != null) {\n      val.other = getBidi(ch, other, sticky != \"before\");\n    }\n\n    return val;\n  } // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n\n\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = _clipPos(cm.doc, pos);\n\n    if (!cm.options.lineWrapping) {\n      left = charWidth(cm.display) * pos.ch;\n    }\n\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = _heightAtLine(lineObj) + paddingTop(cm.display);\n    return {\n      left: left,\n      right: left,\n      top: top,\n      bottom: top + lineObj.height\n    };\n  } // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n\n\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n\n    if (outside) {\n      pos.outside = outside;\n    }\n\n    return pos;\n  } // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n\n\n  function _coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n\n    if (y < 0) {\n      return PosWithInfo(doc.first, 0, null, -1, -1);\n    }\n\n    var lineN = _lineAtHeight(doc, y),\n        last = doc.first + doc.size - 1;\n\n    if (lineN > last) {\n      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1);\n    }\n\n    if (x < 0) {\n      x = 0;\n    }\n\n    var lineObj = getLine(doc, lineN);\n\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n\n      if (!collapsed) {\n        return found;\n      }\n\n      var rangeEnd = collapsed.find(1);\n\n      if (rangeEnd.line == lineN) {\n        return rangeEnd;\n      }\n\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) {\n      return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y;\n    }, end, 0);\n    end = findFirst(function (ch) {\n      return measureCharPrepared(cm, preparedMeasure, ch).top > y;\n    }, begin, end);\n    return {\n      begin: begin,\n      end: end\n    };\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) {\n      preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    }\n\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop);\n  } // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n\n\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x;\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= _heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj); // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0,\n        end = lineObj.text.length,\n        ltr = true;\n    var order = getOrder(lineObj, cm.doc.direction); // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)(cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1; // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    } // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n\n\n    var chAround = null,\n        boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight;\n      box.bottom += widgetHeight;\n\n      if (!boxIsAfter(box, x, y, false)) {\n        return false;\n      }\n\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n\n      return true;\n    }, begin, end);\n    var baseX,\n        sticky,\n        outside = false; // If a box around the coordinates was found, use that\n\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x,\n          atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) {\n        ch++;\n      } // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n\n\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" : measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y == ltr ? \"after\" : \"before\"; // Now get accurate coordinates for this place, in order to get a\n      // base X position\n\n      var coords = _cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX);\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i],\n          ltr = part.level != 1;\n      return boxIsAfter(_cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"), \"line\", lineObj, preparedMeasure), x, y, true);\n    }, 0, order.length - 1);\n    var part = order[index]; // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n\n    if (index > 0) {\n      var ltr = part.level != 1;\n\n      var start = _cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"), \"line\", lineObj, preparedMeasure);\n\n      if (boxIsAfter(start, x, y, true) && start.top > y) {\n        part = order[index - 1];\n      }\n    }\n\n    return part;\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) {\n      end--;\n    }\n\n    var part = null,\n        closestDist = null;\n\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n\n      if (p.from >= end || p.to <= begin) {\n        continue;\n      }\n\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right; // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n\n    if (!part) {\n      part = order[order.length - 1];\n    } // Clip the part to the wrapped line.\n\n\n    if (part.from < begin) {\n      part = {\n        from: begin,\n        to: part.to,\n        level: part.level\n      };\n    }\n\n    if (part.to > end) {\n      part = {\n        from: part.from,\n        to: end,\n        level: part.level\n      };\n    }\n\n    return part;\n  }\n\n  var measureText; // Compute the default text height.\n\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) {\n      return display.cachedTextHeight;\n    }\n\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\"); // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n\n    if (height > 3) {\n      display.cachedTextHeight = height;\n    }\n\n    removeChildren(display.measure);\n    return height || 1;\n  } // Compute the default character width.\n\n\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) {\n      return display.cachedCharWidth;\n    }\n\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(),\n        width = (rect.right - rect.left) / 10;\n\n    if (width > 2) {\n      display.cachedCharWidth = width;\n    }\n\n    return width || 10;\n  } // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n\n\n  function getDimensions(cm) {\n    var d = cm.display,\n        left = {},\n        width = {};\n    var gutterLeft = d.gutters.clientLeft;\n\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n\n    return {\n      fixedPos: compensateForHScroll(d),\n      gutterTotalWidth: d.gutters.offsetWidth,\n      gutterLeft: left,\n      gutterWidth: width,\n      wrapperWidth: d.wrapper.clientWidth\n    };\n  } // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n\n\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n  } // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n\n\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display),\n        wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) {\n        return 0;\n      }\n\n      var widgetsHeight = 0;\n\n      if (line.widgets) {\n        for (var i = 0; i < line.widgets.length; i++) {\n          if (line.widgets[i].height) {\n            widgetsHeight += line.widgets[i].height;\n          }\n        }\n      }\n\n      if (wrapping) {\n        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n      } else {\n        return widgetsHeight + th;\n      }\n    };\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc,\n        est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n\n      if (estHeight != line.height) {\n        updateLineHeight(line, estHeight);\n      }\n    });\n  } // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n\n\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") {\n      return null;\n    }\n\n    var x,\n        y,\n        space = display.lineSpace.getBoundingClientRect(); // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n\n    try {\n      x = e.clientX - space.left;\n      y = e.clientY - space.top;\n    } catch (e$1) {\n      return null;\n    }\n\n    var coords = _coordsChar(cm, x, y),\n        line;\n\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n\n    return coords;\n  } // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n\n\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) {\n      return null;\n    }\n\n    n -= cm.display.viewFrom;\n\n    if (n < 0) {\n      return null;\n    }\n\n    var view = cm.display.view;\n\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n\n      if (n < 0) {\n        return i;\n      }\n    }\n  } // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n\n\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) {\n      from = cm.doc.first;\n    }\n\n    if (to == null) {\n      to = cm.doc.first + cm.doc.size;\n    }\n\n    if (!lendiff) {\n      lendiff = 0;\n    }\n\n    var display = cm.display;\n\n    if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from)) {\n      display.updateLineNumbers = from;\n    }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) {\n      // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo) {\n        resetView(cm);\n      }\n    } else if (to <= display.viewFrom) {\n      // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) {\n      // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) {\n      // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) {\n      // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else {\n      // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n\n    if (ext) {\n      if (to < ext.lineN) {\n        ext.lineN += lendiff;\n      } else if (from < ext.lineN + ext.size) {\n        display.externalMeasured = null;\n      }\n    }\n  } // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n\n\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display,\n        ext = cm.display.externalMeasured;\n\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size) {\n      display.externalMeasured = null;\n    }\n\n    if (line < display.viewFrom || line >= display.viewTo) {\n      return;\n    }\n\n    var lineView = display.view[findViewIndex(cm, line)];\n\n    if (lineView.node == null) {\n      return;\n    }\n\n    var arr = lineView.changes || (lineView.changes = []);\n\n    if (indexOf(arr, type) == -1) {\n      arr.push(type);\n    }\n  } // Clear the view.\n\n\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN),\n        diff,\n        view = cm.display.view;\n\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) {\n      return {\n        index: index,\n        lineN: newN\n      };\n    }\n\n    var n = cm.display.viewFrom;\n\n    for (var i = 0; i < index; i++) {\n      n += view[i].size;\n    }\n\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) {\n          return null;\n        }\n\n        diff = n + view[index].size - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n\n      oldN += diff;\n      newN += diff;\n    }\n\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) {\n        return null;\n      }\n\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n\n    return {\n      index: index,\n      lineN: newN\n    };\n  } // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n\n\n  function adjustView(cm, from, to) {\n    var display = cm.display,\n        view = display.view;\n\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from) {\n        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n      } else if (display.viewFrom < from) {\n        display.view = display.view.slice(findViewIndex(cm, from));\n      }\n\n      display.viewFrom = from;\n\n      if (display.viewTo < to) {\n        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n      } else if (display.viewTo > to) {\n        display.view = display.view.slice(0, findViewIndex(cm, to));\n      }\n    }\n\n    display.viewTo = to;\n  } // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n\n\n  function countDirtyView(cm) {\n    var view = cm.display.view,\n        dirty = 0;\n\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) {\n        ++dirty;\n      }\n    }\n\n    return dirty;\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if (primary === void 0) primary = true;\n    var doc = cm.doc,\n        result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) {\n        continue;\n      }\n\n      var range = doc.sel.ranges[i];\n\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) {\n        continue;\n      }\n\n      var collapsed = range.empty();\n\n      if (collapsed || cm.options.showCursorWhenSelecting) {\n        drawSelectionCursor(cm, range.head, curFragment);\n      }\n\n      if (!collapsed) {\n        drawSelectionRange(cm, range, selFragment);\n      }\n    }\n\n    return result;\n  } // Draws a cursor for the given range\n\n\n  function drawSelectionCursor(cm, head, output) {\n    var pos = _cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) {\n    return a.top - b.top || a.left - b.left;\n  } // Draws the given range as a highlighted selection\n\n\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display,\n        doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display),\n        leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) {\n        top = 0;\n      }\n\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\"));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n\n      function coords(ch, bias) {\n        return _charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = dir == \"ltr\" == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop];\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n        var openStart = fromArg == null && from == 0,\n            openEnd = toArg == null && to == lineLen;\n        var first = i == 0,\n            last = !order || i == order.length - 1;\n\n        if (toPos.top - fromPos.top <= 3) {\n          // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else {\n          // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n\n          if (fromPos.bottom < toPos.top) {\n            add(leftSide, fromPos.bottom, null, toPos.top);\n          }\n\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) {\n          start = fromPos;\n        }\n\n        if (cmpCoords(toPos, start) < 0) {\n          start = toPos;\n        }\n\n        if (!end || cmpCoords(fromPos, end) < 0) {\n          end = fromPos;\n        }\n\n        if (cmpCoords(toPos, end) < 0) {\n          end = toPos;\n        }\n      });\n      return {\n        start: start,\n        end: end\n      };\n    }\n\n    var sFrom = range.from(),\n        sTo = range.to();\n\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line),\n          toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n\n      if (leftEnd.bottom < rightStart.top) {\n        add(leftSide, leftEnd.bottom, null, rightStart.top);\n      }\n    }\n\n    output.appendChild(fragment);\n  } // Cursor-blinking\n\n\n  function restartBlink(cm) {\n    if (!cm.state.focused) {\n      return;\n    }\n\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n\n    if (cm.options.cursorBlinkRate > 0) {\n      display.blinker = setInterval(function () {\n        if (!cm.hasFocus()) {\n          onBlur(cm);\n        }\n\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate);\n    } else if (cm.options.cursorBlinkRate < 0) {\n      display.cursorDiv.style.visibility = \"hidden\";\n    }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.hasFocus()) {\n      cm.display.input.focus();\n\n      if (!cm.state.focused) {\n        onFocus(cm);\n      }\n    }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () {\n      if (cm.state.delayingBlurEvent) {\n        cm.state.delayingBlurEvent = false;\n\n        if (cm.state.focused) {\n          onBlur(cm);\n        }\n      }\n    }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent && !cm.state.draggingText) {\n      cm.state.delayingBlurEvent = false;\n    }\n\n    if (cm.options.readOnly == \"nocursor\") {\n      return;\n    }\n\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\"); // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n\n        if (webkit) {\n          setTimeout(function () {\n            return cm.display.input.reset(true);\n          }, 20);\n        } // Issue #1730\n\n      }\n\n      cm.display.input.receivedFocus();\n    }\n\n    restartBlink(cm);\n  }\n\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) {\n      return;\n    }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n\n    clearInterval(cm.display.blinker);\n    setTimeout(function () {\n      if (!cm.state.focused) {\n        cm.display.shift = false;\n      }\n    }, 150);\n  } // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n\n\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i],\n          wrapping = cm.options.lineWrapping;\n      var height = void 0,\n          width = 0;\n\n      if (cur.hidden) {\n        continue;\n      }\n\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top; // Check that lines don't extend past the right of the current\n        // editor width\n\n        if (!wrapping && cur.text.firstChild) {\n          width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1;\n        }\n      }\n\n      var diff = cur.line.height - height;\n\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n\n        if (cur.rest) {\n          for (var j = 0; j < cur.rest.length; j++) {\n            updateWidgetHeight(cur.rest[j]);\n          }\n        }\n      }\n\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  } // Read and store the height of line widgets associated with the\n  // given line.\n\n\n  function updateWidgetHeight(line) {\n    if (line.widgets) {\n      for (var i = 0; i < line.widgets.length; ++i) {\n        var w = line.widgets[i],\n            parent = w.node.parentNode;\n\n        if (parent) {\n          w.height = parent.offsetHeight;\n        }\n      }\n    }\n  } // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n\n\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = _lineAtHeight(doc, top),\n        to = _lineAtHeight(doc, bottom); // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n\n\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line,\n          ensureTo = viewport.ensure.to.line;\n\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n\n    return {\n      from: from,\n      to: Math.max(to, from + 1)\n    };\n  } // SCROLLING THINGS INTO VIEW\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n\n\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) {\n      return;\n    }\n\n    var display = cm.display,\n        box = display.sizer.getBoundingClientRect(),\n        doScroll = null;\n\n    if (rect.top + box.top < 0) {\n      doScroll = true;\n    } else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) {\n      doScroll = false;\n    }\n\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200B\", null, \"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + rect.left + \"px; width: \" + Math.max(2, rect.right - rect.left) + \"px;\");\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  } // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n\n\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) {\n      margin = 0;\n    }\n\n    var rect;\n\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n    }\n\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n\n      var coords = _cursorCoords(cm, pos);\n\n      var endCoords = !end || end == pos ? coords : _cursorCoords(cm, end);\n      rect = {\n        left: Math.min(coords.left, endCoords.left),\n        top: Math.min(coords.top, endCoords.top) - margin,\n        right: Math.max(coords.left, endCoords.left),\n        bottom: Math.max(coords.bottom, endCoords.bottom) + margin\n      };\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop,\n          startLeft = cm.doc.scrollLeft;\n\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) {\n          changed = true;\n        }\n      }\n\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) {\n          changed = true;\n        }\n      }\n\n      if (!changed) {\n        break;\n      }\n    }\n\n    return rect;\n  } // Scroll a given set of coordinates into view (immediately).\n\n\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n\n    if (scrollPos.scrollTop != null) {\n      updateScrollTop(cm, scrollPos.scrollTop);\n    }\n\n    if (scrollPos.scrollLeft != null) {\n      setScrollLeft(cm, scrollPos.scrollLeft);\n    }\n  } // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n\n\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display,\n        snapMargin = textHeight(cm.display);\n\n    if (rect.top < 0) {\n      rect.top = 0;\n    }\n\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm),\n        result = {};\n\n    if (rect.bottom - rect.top > screen) {\n      rect.bottom = rect.top + screen;\n    }\n\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin,\n        atBottom = rect.bottom > docBottom - snapMargin;\n\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n\n      if (newTop != screentop) {\n        result.scrollTop = newTop;\n      }\n    }\n\n    var gutterSpace = cm.options.fixedGutter ? 0 : display.gutters.offsetWidth;\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft - gutterSpace;\n    var screenw = displayWidth(cm) - display.gutters.offsetWidth;\n    var tooWide = rect.right - rect.left > screenw;\n\n    if (tooWide) {\n      rect.right = rect.left + screenw;\n    }\n\n    if (rect.left < 10) {\n      result.scrollLeft = 0;\n    } else if (rect.left < screenleft) {\n      result.scrollLeft = Math.max(0, rect.left + gutterSpace - (tooWide ? 0 : 10));\n    } else if (rect.right > screenw + screenleft - 3) {\n      result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw;\n    }\n\n    return result;\n  } // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n\n\n  function addToScrollTop(cm, top) {\n    if (top == null) {\n      return;\n    }\n\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  } // Make sure that at the end of the operation the current cursor is\n  // shown.\n\n\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {\n      from: cur,\n      to: cur,\n      margin: cm.options.cursorScrollMargin\n    };\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) {\n      resolveScrollToPos(cm);\n    }\n\n    if (x != null) {\n      cm.curOp.scrollLeft = x;\n    }\n\n    if (y != null) {\n      cm.curOp.scrollTop = y;\n    }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  } // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n\n\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from),\n          to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  } // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n\n\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) {\n      return;\n    }\n\n    if (!gecko) {\n      updateDisplaySimple(cm, {\n        top: val\n      });\n    }\n\n    setScrollTop(cm, val, true);\n\n    if (gecko) {\n      updateDisplaySimple(cm);\n    }\n\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));\n\n    if (cm.display.scroller.scrollTop == val && !forceScroll) {\n      return;\n    }\n\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n\n    if (cm.display.scroller.scrollTop != val) {\n      cm.display.scroller.scrollTop = val;\n    }\n  } // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n\n\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));\n\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) {\n      return;\n    }\n\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n\n    if (cm.display.scroller.scrollLeft != val) {\n      cm.display.scroller.scrollLeft = val;\n    }\n\n    cm.display.scrollbars.setScrollLeft(val);\n  } // SCROLLBARS\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n\n\n  function measureForScrollbars(cm) {\n    var d = cm.display,\n        gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth,\n      clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    };\n  }\n\n  var NativeScrollbars = function NativeScrollbars(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert);\n    place(horiz);\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) {\n        scroll(vert.scrollTop, \"vertical\");\n      }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) {\n        scroll(horiz.scrollLeft, \"horizontal\");\n      }\n    });\n    this.checkedZeroWidth = false; // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n\n    if (ie && ie_version < 8) {\n      this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n    }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0); // A bug in IE8 can cause this value to be negative, so guard it.\n\n      this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width = Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) {\n        this.zeroWidthHack();\n      }\n\n      this.checkedZeroWidth = true;\n    }\n\n    return {\n      right: needsV ? sWidth : 0,\n      bottom: needsH ? sWidth : 0\n    };\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) {\n      this.horiz.scrollLeft = pos;\n    }\n\n    if (this.disableHoriz) {\n      this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\");\n    }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) {\n      this.vert.scrollTop = pos;\n    }\n\n    if (this.disableVert) {\n      this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\");\n    }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed();\n    this.disableVert = new Delayed();\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2) : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n\n      if (elt != bar) {\n        bar.style.pointerEvents = \"none\";\n      } else {\n        delay.set(1000, maybeDisable);\n      }\n    }\n\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function NullScrollbars() {};\n\n  NullScrollbars.prototype.update = function () {\n    return {\n      bottom: 0,\n      right: 0\n    };\n  };\n\n  NullScrollbars.prototype.setScrollLeft = function () {};\n\n  NullScrollbars.prototype.setScrollTop = function () {};\n\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) {\n      measure = measureForScrollbars(cm);\n    }\n\n    var startWidth = cm.display.barWidth,\n        startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping) {\n        updateHeightsInViewport(cm);\n      }\n\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth;\n      startHeight = cm.display.barHeight;\n    }\n  } // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n\n\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else {\n      d.scrollbarFiller.style.display = \"\";\n    }\n\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else {\n      d.gutterFiller.style.display = \"\";\n    }\n  }\n\n  var scrollbarModel = {\n    \"native\": NativeScrollbars,\n    \"null\": NullScrollbars\n  };\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n\n      if (cm.display.scrollbars.addClass) {\n        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n      }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller); // Prevent clicks in the scrollbars from killing focus\n\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) {\n          setTimeout(function () {\n            return cm.display.input.focus();\n          }, 0);\n        }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") {\n        setScrollLeft(cm, pos);\n      } else {\n        updateScrollTop(cm, pos);\n      }\n    }, cm);\n\n    if (cm.display.scrollbars.addClass) {\n      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n    }\n  } // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n\n  var nextOpId = 0; // Start a new operation.\n\n  function _startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,\n      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height,\n      // Used to detect need to update scrollbar\n      forceUpdate: false,\n      // Used to force a redraw\n      updateInput: 0,\n      // Whether to reset the input textarea\n      typing: false,\n      // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,\n      // Accumulated changes, for firing change events\n      cursorActivityHandlers: null,\n      // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0,\n      // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false,\n      // Whether the selection needs to be redrawn\n      updateMaxLine: false,\n      // Set when the widest line needs to be determined anew\n      scrollLeft: null,\n      scrollTop: null,\n      // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,\n      // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId,\n      // Unique ID\n      markArrays: null // Used by addMarkedSpan\n\n    };\n    pushOperation(cm.curOp);\n  } // Finish an operation, updating the display and signalling delayed events\n\n\n  function _endOperation(cm) {\n    var op = cm.curOp;\n\n    if (op) {\n      finishOperation(op, function (group) {\n        for (var i = 0; i < group.ops.length; i++) {\n          group.ops[i].cm.curOp = null;\n        }\n\n        endOperations(group);\n      });\n    }\n  } // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n\n\n  function endOperations(group) {\n    var ops = group.ops;\n\n    for (var i = 0; i < ops.length; i++) // Read DOM\n    {\n      endOperation_R1(ops[i]);\n    }\n\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n    {\n      endOperation_W1(ops[i$1]);\n    }\n\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n    {\n      endOperation_R2(ops[i$2]);\n    }\n\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n    {\n      endOperation_W2(ops[i$3]);\n    }\n\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n    {\n      endOperation_finish(ops[i$4]);\n    }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm,\n        display = cm.display;\n    maybeClipScrollbars(cm);\n\n    if (op.updateMaxLine) {\n      findMaxLine(cm);\n    }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && {\n      top: op.scrollTop,\n      ensure: op.scrollToPos\n    }, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm,\n        display = cm.display;\n\n    if (op.updatedDisplay) {\n      updateHeightsInViewport(cm);\n    }\n\n    op.barMeasure = measureForScrollbars(cm); // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged) {\n      op.preparedSelection = display.input.prepareSelection();\n    }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n\n      if (op.maxScrollLeft < cm.doc.scrollLeft) {\n        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n      }\n\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n\n    if (op.preparedSelection) {\n      cm.display.input.showSelection(op.preparedSelection, takeFocus);\n    }\n\n    if (op.updatedDisplay || op.startHeight != cm.doc.height) {\n      updateScrollbars(cm, op.barMeasure);\n    }\n\n    if (op.updatedDisplay) {\n      setDocumentHeight(cm, op.barMeasure);\n    }\n\n    if (op.selectionChanged) {\n      restartBlink(cm);\n    }\n\n    if (cm.state.focused && op.updateInput) {\n      cm.display.input.reset(op.typing);\n    }\n\n    if (takeFocus) {\n      ensureFocus(op.cm);\n    }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm,\n        display = cm.display,\n        doc = cm.doc;\n\n    if (op.updatedDisplay) {\n      postUpdateDisplay(cm, op.update);\n    } // Abort mouse wheel delta measurement, when scrolling explicitly\n\n\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos)) {\n      display.wheelStartX = display.wheelStartY = null;\n    } // Propagate the scroll position to the actual DOM scroller\n\n\n    if (op.scrollTop != null) {\n      setScrollTop(cm, op.scrollTop, op.forceScroll);\n    }\n\n    if (op.scrollLeft != null) {\n      setScrollLeft(cm, op.scrollLeft, true, true);\n    } // If we need to scroll a specific position into view, do so.\n\n\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, _clipPos(doc, op.scrollToPos.from), _clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    } // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n\n\n    var hidden = op.maybeHiddenMarkers,\n        unhidden = op.maybeUnhiddenMarkers;\n\n    if (hidden) {\n      for (var i = 0; i < hidden.length; ++i) {\n        if (!hidden[i].lines.length) {\n          signal(hidden[i], \"hide\");\n        }\n      }\n    }\n\n    if (unhidden) {\n      for (var i$1 = 0; i$1 < unhidden.length; ++i$1) {\n        if (unhidden[i$1].lines.length) {\n          signal(unhidden[i$1], \"unhide\");\n        }\n      }\n    }\n\n    if (display.wrapper.offsetHeight) {\n      doc.scrollTop = cm.display.scroller.scrollTop;\n    } // Fire change events, and delayed event handlers\n\n\n    if (op.changeObjs) {\n      signal(cm, \"changes\", cm, op.changeObjs);\n    }\n\n    if (op.update) {\n      op.update.finish();\n    }\n  } // Run the given function in an operation\n\n\n  function runInOp(cm, f) {\n    if (cm.curOp) {\n      return f();\n    }\n\n    _startOperation(cm);\n\n    try {\n      return f();\n    } finally {\n      _endOperation(cm);\n    }\n  } // Wraps a function in an operation. Returns the wrapped function.\n\n\n  function operation(cm, f) {\n    return function () {\n      if (cm.curOp) {\n        return f.apply(cm, arguments);\n      }\n\n      _startOperation(cm);\n\n      try {\n        return f.apply(cm, arguments);\n      } finally {\n        _endOperation(cm);\n      }\n    };\n  } // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n\n\n  function methodOp(f) {\n    return function () {\n      if (this.curOp) {\n        return f.apply(this, arguments);\n      }\n\n      _startOperation(this);\n\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        _endOperation(this);\n      }\n    };\n  }\n\n  function docMethodOp(f) {\n    return function () {\n      var cm = this.cm;\n\n      if (!cm || cm.curOp) {\n        return f.apply(this, arguments);\n      }\n\n      _startOperation(cm);\n\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        _endOperation(cm);\n      }\n    };\n  } // HIGHLIGHT WORKER\n\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo) {\n      cm.state.highlight.set(time, bind(highlightWorker, cm));\n    }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n\n    if (doc.highlightFrontier >= cm.display.viewTo) {\n      return;\n    }\n\n    var end = +new Date() + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) {\n        // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n\n        if (resetState) {\n          context.state = resetState;\n        }\n\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses,\n            newCls = highlighted.classes;\n\n        if (newCls) {\n          line.styleClasses = newCls;\n        } else if (oldCls) {\n          line.styleClasses = null;\n        }\n\n        var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) {\n          ischange = oldStyles[i] != line.styles[i];\n        }\n\n        if (ischange) {\n          changedLines.push(context.line);\n        }\n\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength) {\n          processLine(cm, line.text, context);\n        }\n\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n\n      if (+new Date() > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true;\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n\n    if (changedLines.length) {\n      runInOp(cm, function () {\n        for (var i = 0; i < changedLines.length; i++) {\n          regLineChange(cm, changedLines[i], \"text\");\n        }\n      });\n    }\n  } // DISPLAY DRAWING\n\n\n  var DisplayUpdate = function DisplayUpdate(cm, viewport, force) {\n    var display = cm.display;\n    this.viewport = viewport; // Store some values that we'll need later (but don't want to force a relayout for)\n\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type)) {\n      this.events.push(arguments);\n    }\n  };\n\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++) {\n      signal.apply(null, this.events[i]);\n    }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) {\n      return null;\n    }\n\n    var active = activeElt();\n\n    if (!active || !contains(cm.display.lineDiv, active)) {\n      return null;\n    }\n\n    var result = {\n      activeElt: active\n    };\n\n    if (window.getSelection) {\n      var sel = window.getSelection();\n\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n\n    return result;\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) {\n      return;\n    }\n\n    snapshot.activeElt.focus();\n\n    if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) && snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(),\n          range = document.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  } // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n\n\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display,\n        doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false;\n    } // Bail out if the visible area is already rendered and nothing changed.\n\n\n    if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0) {\n      return false;\n    }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    } // Compute a suitable new viewport (from & to)\n\n\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n\n    if (display.viewFrom < from && from - display.viewFrom < 20) {\n      from = Math.max(doc.first, display.viewFrom);\n    }\n\n    if (display.viewTo > to && display.viewTo - to < 20) {\n      to = Math.min(end, display.viewTo);\n    }\n\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n    display.viewOffset = _heightAtLine(getLine(cm.doc, display.viewFrom)); // Position the mover div to align with the current scroll position\n\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n    var toUpdate = countDirtyView(cm);\n\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo)) {\n      return false;\n    } // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n\n\n    var selSnapshot = selectionSnapshot(cm);\n\n    if (toUpdate > 4) {\n      display.lineDiv.style.display = \"none\";\n    }\n\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n\n    if (toUpdate > 4) {\n      display.lineDiv.style.display = \"\";\n    }\n\n    display.renderedView = display.view; // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n\n    restoreSelection(selSnapshot); // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n    return true;\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null) {\n          viewport = {\n            top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)\n          };\n        } // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n\n\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo) {\n          break;\n        }\n      } else if (first) {\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n      }\n\n      if (!updateDisplayIfNeeded(cm, update)) {\n        break;\n      }\n\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom;\n      cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  } // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n\n\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display,\n        lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv,\n        cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling; // Works around a throw-scroll bug in OS X Webkit\n\n      if (webkit && mac && cm.display.currentWheelTarget == node) {\n        node.style.display = \"none\";\n      } else {\n        node.parentNode.removeChild(node);\n      }\n\n      return next;\n    }\n\n    var view = display.view,\n        lineN = display.viewFrom; // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ;else if (!lineView.node || lineView.node.parentNode != container) {\n        // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else {\n        // Already drawn\n        while (cur != lineView.node) {\n          cur = rm(cur);\n        }\n\n        var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;\n\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) {\n            updateNumber = false;\n          }\n\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n\n    while (cur) {\n      cur = rm(cur);\n    }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\"; // Send an event to consumers responding to changes in gutter width.\n\n    signalLater(display, \"gutterChanged\", display);\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + \"px\";\n  } // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n\n\n  function alignHorizontally(cm) {\n    var display = cm.display,\n        view = display.view;\n\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) {\n      return;\n    }\n\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth,\n        left = comp + \"px\";\n\n    for (var i = 0; i < view.length; i++) {\n      if (!view[i].hidden) {\n        if (cm.options.fixedGutter) {\n          if (view[i].gutter) {\n            view[i].gutter.style.left = left;\n          }\n\n          if (view[i].gutterBackground) {\n            view[i].gutterBackground.style.left = left;\n          }\n        }\n\n        var align = view[i].alignable;\n\n        if (align) {\n          for (var j = 0; j < align.length; j++) {\n            align[j].style.left = left;\n          }\n        }\n      }\n    }\n\n    if (cm.options.fixedGutter) {\n      display.gutters.style.left = comp + gutterW + \"px\";\n    }\n  } // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n\n\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) {\n      return false;\n    }\n\n    var doc = cm.doc,\n        last = lineNumberFor(cm.options, doc.first + doc.size - 1),\n        display = cm.display;\n\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)], \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth,\n          padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true;\n    }\n\n    return false;\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [],\n        sawLineNumbers = false;\n\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i],\n          style = null;\n\n      if (typeof name != \"string\") {\n        style = name.style;\n        name = name.className;\n      }\n\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) {\n          continue;\n        } else {\n          sawLineNumbers = true;\n        }\n      }\n\n      result.push({\n        className: name,\n        style: style\n      });\n    }\n\n    if (lineNumbers && !sawLineNumbers) {\n      result.push({\n        className: \"CodeMirror-linenumbers\",\n        style: null\n      });\n    }\n\n    return result;\n  } // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n\n\n  function renderGutters(display) {\n    var gutters = display.gutters,\n        specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n\n      if (style) {\n        gElt.style.cssText = style;\n      }\n\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  } // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input; // Covers bottom-right square when both scrollbars are present.\n\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\"); // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\"); // Will contain the actual code, positioned to cover the viewport.\n\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\"); // Elements are added to these to represent selection and cursors.\n\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\"); // A visibility: hidden element used to find the size of things.\n\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\"); // When lines outside of the viewport are measured, they are drawn in this.\n\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\"); // Wraps everything that needs to exist inside the vertically-padded coordinate system\n\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\"); // Moved around its parent to cover visible view.\n\n    d.mover = elt(\"div\", [lines], null, \"position: relative\"); // Set to the height of the document, allowing scrolling.\n\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null; // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\"); // Will contain the gutters, if any.\n\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null; // Actual scrollable element.\n\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\"); // The element in which the editor lives.\n\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\"); // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n\n    if (ie && ie_version < 8) {\n      d.gutters.style.zIndex = -1;\n      d.scroller.style.paddingRight = 0;\n    }\n\n    if (!webkit && !(gecko && mobile)) {\n      d.scroller.draggable = true;\n    }\n\n    if (place) {\n      if (place.appendChild) {\n        place.appendChild(d.wrapper);\n      } else {\n        place(d.wrapper);\n      }\n    } // Current rendered range (may be bigger than the view window).\n\n\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first; // Information about the rendered lines.\n\n    d.view = [];\n    d.renderedView = null; // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n\n    d.externalMeasured = null; // Empty space (in pixels) above the view\n\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false; // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null; // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n\n    d.alignWidgets = false;\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null; // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false; // Used for measuring wheel scrolling granularity\n\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null; // True when shift is held down.\n\n    d.shift = false; // Used to track whether anything happened since the context menu\n    // was opened.\n\n    d.selForContextMenu = null;\n    d.activeTouch = null;\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n    input.init(d);\n  } // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n\n  var wheelSamples = 0,\n      wheelPixelsPerUnit = null; // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n\n  if (ie) {\n    wheelPixelsPerUnit = -.53;\n  } else if (gecko) {\n    wheelPixelsPerUnit = 15;\n  } else if (chrome) {\n    wheelPixelsPerUnit = -.7;\n  } else if (safari) {\n    wheelPixelsPerUnit = -1 / 3;\n  }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX,\n        dy = e.wheelDeltaY;\n\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) {\n      dx = e.detail;\n    }\n\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) {\n      dy = e.detail;\n    } else if (dy == null) {\n      dy = e.wheelDelta;\n    }\n\n    return {\n      x: dx,\n      y: dy\n    };\n  }\n\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta;\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e),\n        dx = delta.x,\n        dy = delta.y;\n    var display = cm.display,\n        scroll = display.scroller; // Quit if there's nothing to scroll here\n\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n\n    if (!(dx && canScrollX || dy && canScrollY)) {\n      return;\n    } // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n\n\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer;\n          }\n        }\n      }\n    } // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n\n\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY) {\n        updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit));\n      }\n\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit)); // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n\n      if (!dy || dy && canScrollY) {\n        e_preventDefault(e);\n      }\n\n      display.wheelStartX = null; // Abort measurement, if in progress\n\n      return;\n    } // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n\n\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop,\n          bot = top + display.wrapper.clientHeight;\n\n      if (pixels < 0) {\n        top = Math.max(0, top + pixels - 50);\n      } else {\n        bot = Math.min(cm.doc.height, bot + pixels + 50);\n      }\n\n      updateDisplaySimple(cm, {\n        top: top,\n        bottom: bot\n      });\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft;\n        display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx;\n        display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) {\n            return;\n          }\n\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;\n          display.wheelStartX = display.wheelStartY = null;\n\n          if (!sample) {\n            return;\n          }\n\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx;\n        display.wheelDY += dy;\n      }\n    }\n  } // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n\n\n  var Selection = function Selection(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () {\n    return this.ranges[this.primIndex];\n  };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) {\n      return true;\n    }\n\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) {\n      return false;\n    }\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i],\n          there = other.ranges[i];\n\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));\n    }\n\n    return new Selection(out, this.primIndex);\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++) {\n      if (!this.ranges[i].empty()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) {\n      end = pos;\n    }\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  var Range = function Range(anchor, head) {\n    this.anchor = anchor;\n    this.head = head;\n  };\n\n  Range.prototype.from = function () {\n    return minPos(this.anchor, this.head);\n  };\n\n  Range.prototype.to = function () {\n    return maxPos(this.anchor, this.head);\n  };\n\n  Range.prototype.empty = function () {\n    return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n  }; // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n\n\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) {\n      return cmp(a.from(), b.from());\n    });\n    primIndex = indexOf(ranges, prim);\n\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i],\n          prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()),\n            to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n\n        if (i <= primIndex) {\n          --primIndex;\n        }\n\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n\n    return new Selection(ranges, primIndex);\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0);\n  } // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n\n\n  function changeEnd(change) {\n    if (!change.text) {\n      return change.to;\n    }\n\n    return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n  } // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n\n\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) {\n      return pos;\n    }\n\n    if (cmp(pos, change.to) <= 0) {\n      return changeEnd(change);\n    }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1,\n        ch = pos.ch;\n\n    if (pos.line == change.to.line) {\n      ch += changeEnd(change).ch - change.to.ch;\n    }\n\n    return Pos(line, ch);\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));\n    }\n\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex);\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line) {\n      return Pos(nw.line, pos.ch - old.ch + nw.ch);\n    } else {\n      return Pos(nw.line + (pos.line - old.line), pos.ch);\n    }\n  } // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n\n\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0),\n        newPrev = oldPrev;\n\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i],\n            inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n\n    return new Selection(out, doc.sel.primIndex);\n  } // Used to get the editor into a consistent state again when options change.\n\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) {\n        line.stateAfter = null;\n      }\n\n      if (line.styles) {\n        line.styles = null;\n      }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n\n    if (cm.curOp) {\n      regChange(cm);\n    }\n  } // DOCUMENT DATA STRUCTURE\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n\n\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n  } // Perform a change on the document data structure.\n\n\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {\n      return markedSpans ? markedSpans[n] : null;\n    }\n\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n\n    function linesFor(start, end) {\n      var result = [];\n\n      for (var i = start; i < end; ++i) {\n        result.push(new Line(text[i], spansFor(i), estimateHeight));\n      }\n\n      return result;\n    }\n\n    var from = change.from,\n        to = change.to,\n        text = change.text;\n    var firstLine = getLine(doc, from.line),\n        lastLine = getLine(doc, to.line);\n    var lastText = lst(text),\n        lastSpans = spansFor(text.length - 1),\n        nlines = to.line - from.line; // Adjust the line structure\n\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n\n      if (nlines) {\n        doc.remove(from.line, nlines);\n      }\n\n      if (added.length) {\n        doc.insert(from.line, added);\n      }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n\n      if (nlines > 1) {\n        doc.remove(from.line + 1, nlines - 1);\n      }\n\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  } // Call f for all linked documents.\n\n\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) {\n        for (var i = 0; i < doc.linked.length; ++i) {\n          var rel = doc.linked[i];\n\n          if (rel.doc == skip) {\n            continue;\n          }\n\n          var shared = sharedHist && rel.sharedHist;\n\n          if (sharedHistOnly && !shared) {\n            continue;\n          }\n\n          f(rel.doc, shared);\n          propagate(rel.doc, doc, shared);\n        }\n      }\n    }\n\n    propagate(doc, null, true);\n  } // Attach a document to an editor.\n\n\n  function attachDoc(cm, doc) {\n    if (doc.cm) {\n      throw new Error(\"This document is already in use.\");\n    }\n\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    cm.options.direction = doc.direction;\n\n    if (!cm.options.lineWrapping) {\n      findMaxLine(cm);\n    }\n\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n    (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(prev) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = [];\n    this.undone = [];\n    this.undoDepth = prev ? prev.undoDepth : Infinity; // Used to track when changes can be merged into a single undo\n    // event\n\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null; // Used by the isClean() method\n\n    this.generation = this.maxGeneration = prev ? prev.maxGeneration : 1;\n  } // Create a history change event from an updateDoc-style change\n  // object.\n\n\n  function historyChangeFromChange(doc, change) {\n    var histChange = {\n      from: copyPos(change.from),\n      to: changeEnd(change),\n      text: getBetween(doc, change.from, change.to)\n    };\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) {\n      return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    }, true);\n    return histChange;\n  } // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n\n\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n\n      if (last.ranges) {\n        array.pop();\n      } else {\n        break;\n      }\n    }\n  } // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n\n\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done);\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done);\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done);\n    }\n  } // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n\n\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date(),\n        cur;\n    var last;\n\n    if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && (change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500) || change.origin.charAt(0) == \"*\")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n\n      if (!before || !before.ranges) {\n        pushSelectionToHistory(doc.sel, hist.done);\n      }\n\n      cur = {\n        changes: [historyChangeFromChange(doc, change)],\n        generation: hist.generation\n      };\n      hist.done.push(cur);\n\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n\n        if (!hist.done[0].ranges) {\n          hist.done.shift();\n        }\n      }\n    }\n\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) {\n      signal(doc, \"historyAdded\");\n    }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" || ch == \"+\" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date() - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n  } // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n\n\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history,\n        origin = options && options.origin; // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n\n    if (opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))) {\n      hist.done[hist.done.length - 1] = sel;\n    } else {\n      pushSelectionToHistory(sel, hist.done);\n    }\n\n    hist.lastSelTime = +new Date();\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n\n    if (options && options.clearRedo !== false) {\n      clearSelectionEvents(hist.undone);\n    }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n\n    if (!(top && top.ranges && top.equals(sel))) {\n      dest.push(sel);\n    }\n  } // Used to store marked span information in the history.\n\n\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id],\n        n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans) {\n        (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n      }\n\n      ++n;\n    });\n  } // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n\n\n  function removeClearedSpans(spans) {\n    if (!spans) {\n      return null;\n    }\n\n    var out;\n\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) {\n        if (!out) {\n          out = spans.slice(0, i);\n        }\n      } else if (out) {\n        out.push(spans[i]);\n      }\n    }\n\n    return !out ? spans : out.length ? out : null;\n  } // Retrieve and filter the old marked spans stored in a change event.\n\n\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n\n    if (!found) {\n      return null;\n    }\n\n    var nw = [];\n\n    for (var i = 0; i < change.text.length; ++i) {\n      nw.push(removeClearedSpans(found[i]));\n    }\n\n    return nw;\n  } // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n\n\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n\n    if (!old) {\n      return stretched;\n    }\n\n    if (!stretched) {\n      return old;\n    }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i],\n          stretchCur = stretched[i];\n\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n\n          for (var k = 0; k < oldCur.length; ++k) {\n            if (oldCur[k].marker == span.marker) {\n              continue spans;\n            }\n          }\n\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n\n    return old;\n  } // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n\n\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue;\n      }\n\n      var changes = event.changes,\n          newChanges = [];\n      copy.push({\n        changes: newChanges\n      });\n\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j],\n            m = void 0;\n        newChanges.push({\n          from: change.from,\n          to: change.to,\n          text: change.text\n        });\n\n        if (newGroup) {\n          for (var prop in change) {\n            if (m = prop.match(/^spans_(\\d+)$/)) {\n              if (indexOf(newGroup, Number(m[1])) > -1) {\n                lst(newChanges)[prop] = change[prop];\n                delete change[prop];\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return copy;\n  } // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n\n\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n\n        if (posBefore != cmp(other, anchor) < 0) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != cmp(head, other) < 0) {\n          head = other;\n        }\n      }\n\n      return new Range(anchor, head);\n    } else {\n      return new Range(other || head, head);\n    }\n  } // Extend the primary selection range, discard the rest.\n\n\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) {\n      extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    }\n\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  } // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n\n\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend);\n    }\n\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  } // Updates a single range in the selection.\n\n\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  } // Reset the selection to a single range.\n\n\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  } // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n\n\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function update(ranges) {\n        this.ranges = [];\n\n        for (var i = 0; i < ranges.length; i++) {\n          this.ranges[i] = new Range(_clipPos(doc, ranges[i].anchor), _clipPos(doc, ranges[i].head));\n        }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n\n    if (doc.cm) {\n      signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n    }\n\n    if (obj.ranges != sel.ranges) {\n      return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1);\n    } else {\n      return sel;\n    }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done,\n        last = lst(done);\n\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  } // Set a new selection.\n\n\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\")) {\n      sel = filterSelectionChange(doc, sel, options);\n    }\n\n    var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm && doc.cm.getOption(\"readOnly\") != \"nocursor\") {\n      ensureCursorVisible(doc.cm);\n    }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) {\n      return;\n    }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n\n    signalLater(doc, \"cursorActivity\", doc);\n  } // Verify that the selection does not partially select any atomic\n  // marked ranges.\n\n\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  } // Return a selection that does not partially select any atomic\n  // ranges.\n\n\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) {\n          out = sel.ranges.slice(0, i);\n        }\n\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel;\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n\n    if (line.markedSpans) {\n      for (var i = 0; i < line.markedSpans.length; ++i) {\n        var sp = line.markedSpans[i],\n            m = sp.marker; // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n        // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n        // is with selectLeft/Right\n\n        var preventCursorLeft = \"selectLeft\" in m ? !m.selectLeft : m.inclusiveLeft;\n        var preventCursorRight = \"selectRight\" in m ? !m.selectRight : m.inclusiveRight;\n\n        if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n          if (mayClear) {\n            signal(m, \"beforeCursorEnter\");\n\n            if (m.explicitlyCleared) {\n              if (!line.markedSpans) {\n                break;\n              } else {\n                --i;\n                continue;\n              }\n            }\n          }\n\n          if (!m.atomic) {\n            continue;\n          }\n\n          if (oldPos) {\n            var near = m.find(dir < 0 ? 1 : -1),\n                diff = void 0;\n\n            if (dir < 0 ? preventCursorRight : preventCursorLeft) {\n              near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);\n            }\n\n            if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) {\n              return skipAtomicInner(doc, near, pos, dir, mayClear);\n            }\n          }\n\n          var far = m.find(dir < 0 ? -1 : 1);\n\n          if (dir < 0 ? preventCursorLeft : preventCursorRight) {\n            far = movePos(doc, far, dir, far.line == pos.line ? line : null);\n          }\n\n          return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;\n        }\n      }\n    }\n\n    return pos;\n  } // Ensure a given position is not inside an atomic range.\n\n\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, dir, true) || skipAtomicInner(doc, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true);\n\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0);\n    }\n\n    return found;\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) {\n        return _clipPos(doc, Pos(pos.line - 1));\n      } else {\n        return null;\n      }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) {\n        return Pos(pos.line + 1, 0);\n      } else {\n        return null;\n      }\n    } else {\n      return new Pos(pos.line, pos.ch + dir);\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  } // UPDATING\n  // Allow \"beforeChange\" event handlers to influence a change\n\n\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function cancel() {\n        return obj.canceled = true;\n      }\n    };\n\n    if (update) {\n      obj.update = function (from, to, text, origin) {\n        if (from) {\n          obj.from = _clipPos(doc, from);\n        }\n\n        if (to) {\n          obj.to = _clipPos(doc, to);\n        }\n\n        if (text) {\n          obj.text = text;\n        }\n\n        if (origin !== undefined) {\n          obj.origin = origin;\n        }\n      };\n    }\n\n    signal(doc, \"beforeChange\", doc, obj);\n\n    if (doc.cm) {\n      signal(doc.cm, \"beforeChange\", doc.cm, obj);\n    }\n\n    if (obj.canceled) {\n      if (doc.cm) {\n        doc.cm.curOp.updateInput = 2;\n      }\n\n      return null;\n    }\n\n    return {\n      from: obj.from,\n      to: obj.to,\n      text: obj.text,\n      origin: obj.origin\n    };\n  } // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n\n\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) {\n        return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n      }\n\n      if (doc.cm.state.suppressEdits) {\n        return;\n      }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n\n      if (!change) {\n        return;\n      }\n    } // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n\n\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i) {\n        makeChangeInner(doc, {\n          from: split[i].from,\n          to: split[i].to,\n          text: i ? [\"\"] : change.text,\n          origin: change.origin\n        });\n      }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) {\n      return;\n    }\n\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  } // Revert a change stored in a document's history.\n\n\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n\n    if (suppress && !allowSelectionOnly) {\n      return;\n    }\n\n    var hist = doc.history,\n        event,\n        selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone,\n        dest = type == \"undo\" ? hist.undone : hist.done; // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n\n    var i = 0;\n\n    for (; i < source.length; i++) {\n      event = source[i];\n\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges) {\n        break;\n      }\n    }\n\n    if (i == source.length) {\n      return;\n    }\n\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {\n            clearRedo: false\n          });\n          return;\n        }\n\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return;\n      } else {\n        break;\n      }\n    } // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n\n\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({\n      changes: antiChanges,\n      generation: hist.generation\n    });\n    hist.generation = event.generation || ++hist.maxGeneration;\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function loop(i) {\n      var change = event.changes[i];\n      change.origin = type;\n\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {};\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n\n      if (!i && doc.cm) {\n        doc.cm.scrollIntoView({\n          from: change.from,\n          to: changeEnd(change)\n        });\n      }\n\n      var rebased = []; // Propagate to the linked documents\n\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop(i$1);\n      if (returned) return returned.v;\n    }\n  } // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n\n\n  function shiftDoc(doc, distance) {\n    if (distance == 0) {\n      return;\n    }\n\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) {\n      return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));\n    }), doc.sel.primIndex);\n\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++) {\n        regLineChange(doc.cm, l, \"gutter\");\n      }\n    }\n  } // More lower-level change function, handling only a single document\n  // (not linked ones).\n\n\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp) {\n      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n    }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return;\n    }\n\n    if (change.from.line > doc.lastLine()) {\n      return;\n    } // Clip the change to the size of this doc\n\n\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {\n        from: Pos(doc.first, 0),\n        to: Pos(change.to.line + shift, change.to.ch),\n        text: [lst(change.text)],\n        origin: change.origin\n      };\n    }\n\n    var last = doc.lastLine();\n\n    if (change.to.line > last) {\n      change = {\n        from: change.from,\n        to: Pos(last, getLine(doc, last).text.length),\n        text: [change.text[0]],\n        origin: change.origin\n      };\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) {\n      selAfter = computeSelAfterChange(doc, change);\n    }\n\n    if (doc.cm) {\n      makeChangeSingleDocInEditor(doc.cm, change, spans);\n    } else {\n      updateDoc(doc, change, spans);\n    }\n\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0))) {\n      doc.cantEdit = false;\n    }\n  } // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n\n\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc,\n        display = cm.display,\n        from = change.from,\n        to = change.to;\n    var recomputeMaxLength = false,\n        checkWidthStart = from.line;\n\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true;\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1) {\n      signalCursorActivity(cm);\n    }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n\n      if (recomputeMaxLength) {\n        cm.curOp.updateMaxLine = true;\n      }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n    var lendiff = change.text.length - (to.line - from.line) - 1; // Remember that these lines changed, for updating the display\n\n    if (change.full) {\n      regChange(cm);\n    } else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change)) {\n      regLineChange(cm, from.line, \"text\");\n    } else {\n      regChange(cm, from.line, to.line + 1, lendiff);\n    }\n\n    var changesHandler = hasHandler(cm, \"changes\"),\n        changeHandler = hasHandler(cm, \"change\");\n\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from,\n        to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n\n      if (changeHandler) {\n        signalLater(cm, \"change\", cm, obj);\n      }\n\n      if (changesHandler) {\n        (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n      }\n    }\n\n    cm.display.selForContextMenu = null;\n  }\n\n  function _replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) {\n      to = from;\n    }\n\n    if (cmp(to, from) < 0) {\n      assign = [to, from], from = assign[0], to = assign[1];\n    }\n\n    if (typeof code == \"string\") {\n      code = doc.splitLines(code);\n    }\n\n    makeChange(doc, {\n      from: from,\n      to: to,\n      text: code,\n      origin: origin\n    });\n  } // Rebasing/resetting history to deal with externally-sourced changes\n\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  } // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n\n\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i],\n          ok = true;\n\n      if (sub.ranges) {\n        if (!sub.copied) {\n          sub = array[i] = sub.deepCopy();\n          sub.copied = true;\n        }\n\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n\n        continue;\n      }\n\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break;\n        }\n      }\n\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line,\n        to = change.to.line,\n        diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  } // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n\n\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle,\n        line = handle;\n\n    if (typeof handle == \"number\") {\n      line = getLine(doc, clipLine(doc, handle));\n    } else {\n      no = lineNo(handle);\n    }\n\n    if (no == null) {\n      return null;\n    }\n\n    if (op(line, no) && doc.cm) {\n      regLineChange(doc.cm, no, changeType);\n    }\n\n    return line;\n  } // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function chunkSize() {\n      return this.lines.length;\n    },\n    // Remove the n lines at offset 'at'.\n    removeInner: function removeInner(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n\n      this.lines.splice(at, n);\n    },\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function collapse(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function insertInner(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n\n      for (var i = 0; i < lines.length; ++i) {\n        lines[i].parent = this;\n      }\n    },\n    // Used to iterate over a part of the tree.\n    iterN: function iterN(at, n, op) {\n      for (var e = at + n; at < e; ++at) {\n        if (op(this.lines[at])) {\n          return true;\n        }\n      }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0,\n        height = 0;\n\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize();\n      height += ch.height;\n      ch.parent = this;\n    }\n\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function chunkSize() {\n      return this.size;\n    },\n    removeInner: function removeInner(at, n) {\n      this.size -= n;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n\n        if (at < sz) {\n          var rm = Math.min(n, sz - at),\n              oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n\n          if (sz == rm) {\n            this.children.splice(i--, 1);\n            child.parent = null;\n          }\n\n          if ((n -= rm) == 0) {\n            break;\n          }\n\n          at = 0;\n        } else {\n          at -= sz;\n        }\n      } // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n\n\n      if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n    collapse: function collapse(lines) {\n      for (var i = 0; i < this.children.length; ++i) {\n        this.children[i].collapse(lines);\n      }\n    },\n    insertInner: function insertInner(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n\n          break;\n        }\n\n        at -= sz;\n      }\n    },\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function maybeSpill() {\n      if (this.children.length <= 10) {\n        return;\n      }\n\n      var me = this;\n\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n\n        if (!me.parent) {\n          // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n        } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n\n        sibling.parent = me.parent;\n      } while (me.children.length > 10);\n\n      me.parent.maybeSpill();\n    },\n    iterN: function iterN(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n\n          if (child.iterN(at, used, op)) {\n            return true;\n          }\n\n          if ((n -= used) == 0) {\n            break;\n          }\n\n          at = 0;\n        } else {\n          at -= sz;\n        }\n      }\n    }\n  }; // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function LineWidget(doc, node, options) {\n    if (options) {\n      for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n          this[opt] = options[opt];\n        }\n      }\n    }\n\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm,\n        ws = this.line.widgets,\n        line = this.line,\n        no = lineNo(line);\n\n    if (no == null || !ws) {\n      return;\n    }\n\n    for (var i = 0; i < ws.length; ++i) {\n      if (ws[i] == this) {\n        ws.splice(i--, 1);\n      }\n    }\n\n    if (!ws.length) {\n      line.widgets = null;\n    }\n\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n    var this$1 = this;\n    var oldH = this.height,\n        cm = this.doc.cm,\n        line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n\n    if (!diff) {\n      return;\n    }\n\n    if (!lineIsHidden(this.doc, line)) {\n      updateLineHeight(line, line.height + diff);\n    }\n\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (_heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop)) {\n      addToScrollTop(cm, diff);\n    }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n\n    if (cm && widget.noHScroll) {\n      cm.display.alignWidgets = true;\n    }\n\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n\n      if (widget.insertAt == null) {\n        widgets.push(widget);\n      } else {\n        widgets.splice(Math.min(widgets.length, Math.max(0, widget.insertAt)), 0, widget);\n      }\n\n      widget.line = line;\n\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = _heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n\n        if (aboveVisible) {\n          addToScrollTop(cm, widget.height);\n        }\n\n        cm.curOp.forceUpdate = true;\n      }\n\n      return true;\n    });\n\n    if (cm) {\n      signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle));\n    }\n\n    return widget;\n  } // TEXTMARKERS\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n\n\n  var nextMarkerId = 0;\n\n  var TextMarker = function TextMarker(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  }; // Clear the marker.\n\n\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) {\n      return;\n    }\n\n    var cm = this.doc.cm,\n        withOp = cm && !cm.curOp;\n\n    if (withOp) {\n      _startOperation(cm);\n    }\n\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n\n      if (found) {\n        signalLater(this, \"clear\", found.from, found.to);\n      }\n    }\n\n    var min = null,\n        max = null;\n\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n\n      if (cm && !this.collapsed) {\n        regLineChange(cm, lineNo(line), \"text\");\n      } else if (cm) {\n        if (span.to != null) {\n          max = lineNo(line);\n        }\n\n        if (span.from != null) {\n          min = lineNo(line);\n        }\n      }\n\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm) {\n        updateLineHeight(line, textHeight(cm.display));\n      }\n    }\n\n    if (cm && this.collapsed && !cm.options.lineWrapping) {\n      for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n        var visual = visualLine(this.lines[i$1]),\n            len = lineLength(visual);\n\n        if (len > cm.display.maxLineLength) {\n          cm.display.maxLine = visual;\n          cm.display.maxLineLength = len;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n\n    if (min != null && cm && this.collapsed) {\n      regChange(cm, min, max + 1);\n    }\n\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n\n      if (cm) {\n        reCheckSelection(cm.doc);\n      }\n    }\n\n    if (cm) {\n      signalLater(cm, \"markerCleared\", cm, this, min, max);\n    }\n\n    if (withOp) {\n      _endOperation(cm);\n    }\n\n    if (this.parent) {\n      this.parent.clear();\n    }\n  }; // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n\n\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") {\n      side = 1;\n    }\n\n    var from, to;\n\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n\n        if (side == -1) {\n          return from;\n        }\n      }\n\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n\n        if (side == 1) {\n          return to;\n        }\n      }\n    }\n\n    return from && {\n      from: from,\n      to: to\n    };\n  }; // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n\n\n  TextMarker.prototype.changed = function () {\n    var this$1 = this;\n    var pos = this.find(-1, true),\n        widget = this,\n        cm = this.doc.cm;\n\n    if (!pos || !cm) {\n      return;\n    }\n\n    runInOp(cm, function () {\n      var line = pos.line,\n          lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n\n      cm.curOp.updateMaxLine = true;\n\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n\n        if (dHeight) {\n          updateLineHeight(line, line.height + dHeight);\n        }\n      }\n\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1) {\n        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n      }\n    }\n\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n\n  eventMixin(TextMarker); // Create a marker, wire it up to the right lines, and\n\n  function _markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) {\n      return markTextShared(doc, from, to, options, type);\n    } // Ensure we are in an operation.\n\n\n    if (doc.cm && !doc.cm.curOp) {\n      return operation(doc.cm, _markText)(doc, from, to, options, type);\n    }\n\n    var marker = new TextMarker(doc, type),\n        diff = cmp(from, to);\n\n    if (options) {\n      copyObj(options, marker, false);\n    } // Don't connect empty markers unless clearWhenEmpty is false\n\n\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false) {\n      return marker;\n    }\n\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n\n      if (!options.handleMouseEvents) {\n        marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n      }\n\n      if (options.insertLeft) {\n        marker.widgetNode.insertLeft = true;\n      }\n    }\n\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker)) {\n        throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n      }\n\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory) {\n      addChangeToHistory(doc, {\n        from: from,\n        to: to,\n        origin: \"markText\"\n      }, doc.sel, NaN);\n    }\n\n    var curLine = from.line,\n        cm = doc.cm,\n        updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine) {\n        updateMaxLine = true;\n      }\n\n      if (marker.collapsed && curLine != from.line) {\n        updateLineHeight(line, 0);\n      }\n\n      addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null), doc.cm && doc.cm.curOp);\n      ++curLine;\n    }); // lineIsHidden depends on the presence of the spans, so needs a second pass\n\n    if (marker.collapsed) {\n      doc.iter(from.line, to.line + 1, function (line) {\n        if (lineIsHidden(doc, line)) {\n          updateLineHeight(line, 0);\n        }\n      });\n    }\n\n    if (marker.clearOnEnter) {\n      on(marker, \"beforeCursorEnter\", function () {\n        return marker.clear();\n      });\n    }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n\n      if (doc.history.done.length || doc.history.undone.length) {\n        doc.clearHistory();\n      }\n    }\n\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) {\n        cm.curOp.updateMaxLine = true;\n      }\n\n      if (marker.collapsed) {\n        regChange(cm, from.line, to.line + 1);\n      } else if (marker.className || marker.startStyle || marker.endStyle || marker.css || marker.attributes || marker.title) {\n        for (var i = from.line; i <= to.line; i++) {\n          regLineChange(cm, i, \"text\");\n        }\n      }\n\n      if (marker.atomic) {\n        reCheckSelection(cm.doc);\n      }\n\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n\n    return marker;\n  } // SHARED TEXTMARKERS\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n\n\n  var SharedTextMarker = function SharedTextMarker(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n\n    for (var i = 0; i < markers.length; ++i) {\n      markers[i].parent = this;\n    }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) {\n      return;\n    }\n\n    this.explicitlyCleared = true;\n\n    for (var i = 0; i < this.markers.length; ++i) {\n      this.markers[i].clear();\n    }\n\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj);\n  };\n\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [_markText(doc, from, to, options, type)],\n        primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) {\n        options.widgetNode = widget.cloneNode(true);\n      }\n\n      markers.push(_markText(doc, _clipPos(doc, from), _clipPos(doc, to), options, type));\n\n      for (var i = 0; i < doc.linked.length; ++i) {\n        if (doc.linked[i].isParent) {\n          return;\n        }\n      }\n\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary);\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) {\n      return m.parent;\n    });\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i],\n          pos = marker.find();\n      var mFrom = doc.clipPos(pos.from),\n          mTo = doc.clipPos(pos.to);\n\n      if (cmp(mFrom, mTo)) {\n        var subMark = _markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function loop(i) {\n      var marker = markers[i],\n          linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) {\n        return linked.push(d);\n      });\n\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) {\n      loop(i);\n    }\n  }\n\n  var nextDocId = 0;\n\n  var Doc = function Doc(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) {\n      return new Doc(text, mode, firstLine, lineSep, direction);\n    }\n\n    if (firstLine == null) {\n      firstLine = 0;\n    }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = direction == \"rtl\" ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") {\n      text = this.splitLines(text);\n    }\n\n    updateDoc(this, {\n      from: start,\n      to: start,\n      text: text\n    });\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function iter(from, to, op) {\n      if (op) {\n        this.iterN(from - this.first, to - from, op);\n      } else {\n        this.iterN(this.first, this.first + this.size, from);\n      }\n    },\n    // Non-public interface for adding and removing lines.\n    insert: function insert(at, lines) {\n      var height = 0;\n\n      for (var i = 0; i < lines.length; ++i) {\n        height += lines[i].height;\n      }\n\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function remove(at, n) {\n      this.removeInner(at - this.first, n);\n    },\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n    getValue: function getValue(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n\n      if (lineSep === false) {\n        return lines;\n      }\n\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    setValue: docMethodOp(function (code) {\n      var top = Pos(this.first, 0),\n          last = this.first + this.size - 1;\n      makeChange(this, {\n        from: top,\n        to: Pos(last, getLine(this, last).text.length),\n        text: this.splitLines(code),\n        origin: \"setValue\",\n        full: true\n      }, true);\n\n      if (this.cm) {\n        scrollToCoords(this.cm, 0, 0);\n      }\n\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function replaceRange(code, from, to, origin) {\n      from = _clipPos(this, from);\n      to = to ? _clipPos(this, to) : from;\n\n      _replaceRange(this, code, from, to, origin);\n    },\n    getRange: function getRange(from, to, lineSep) {\n      var lines = getBetween(this, _clipPos(this, from), _clipPos(this, to));\n\n      if (lineSep === false) {\n        return lines;\n      }\n\n      if (lineSep === '') {\n        return lines.join('');\n      }\n\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    getLine: function getLine(line) {\n      var l = this.getLineHandle(line);\n      return l && l.text;\n    },\n    getLineHandle: function getLineHandle(line) {\n      if (isLine(this, line)) {\n        return getLine(this, line);\n      }\n    },\n    getLineNumber: function getLineNumber(line) {\n      return lineNo(line);\n    },\n    getLineHandleVisualStart: function getLineHandleVisualStart(line) {\n      if (typeof line == \"number\") {\n        line = getLine(this, line);\n      }\n\n      return visualLine(line);\n    },\n    lineCount: function lineCount() {\n      return this.size;\n    },\n    firstLine: function firstLine() {\n      return this.first;\n    },\n    lastLine: function lastLine() {\n      return this.first + this.size - 1;\n    },\n    clipPos: function clipPos(pos) {\n      return _clipPos(this, pos);\n    },\n    getCursor: function getCursor(start) {\n      var range = this.sel.primary(),\n          pos;\n\n      if (start == null || start == \"head\") {\n        pos = range.head;\n      } else if (start == \"anchor\") {\n        pos = range.anchor;\n      } else if (start == \"end\" || start == \"to\" || start === false) {\n        pos = range.to();\n      } else {\n        pos = range.from();\n      }\n\n      return pos;\n    },\n    listSelections: function listSelections() {\n      return this.sel.ranges;\n    },\n    somethingSelected: function somethingSelected() {\n      return this.sel.somethingSelected();\n    },\n    setCursor: docMethodOp(function (line, ch, options) {\n      setSimpleSelection(this, _clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function (anchor, head, options) {\n      setSimpleSelection(this, _clipPos(this, anchor), _clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function (head, other, options) {\n      extendSelection(this, _clipPos(this, head), other && _clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function (heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function (f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function (ranges, primary, options) {\n      if (!ranges.length) {\n        return;\n      }\n\n      var out = [];\n\n      for (var i = 0; i < ranges.length; i++) {\n        out[i] = new Range(_clipPos(this, ranges[i].anchor), _clipPos(this, ranges[i].head || ranges[i].anchor));\n      }\n\n      if (primary == null) {\n        primary = Math.min(ranges.length - 1, this.sel.primIndex);\n      }\n\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function (anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(_clipPos(this, anchor), _clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n    getSelection: function getSelection(lineSep) {\n      var ranges = this.sel.ranges,\n          lines;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n\n      if (lineSep === false) {\n        return lines;\n      } else {\n        return lines.join(lineSep || this.lineSeparator());\n      }\n    },\n    getSelections: function getSelections(lineSep) {\n      var parts = [],\n          ranges = this.sel.ranges;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n\n        if (lineSep !== false) {\n          sel = sel.join(lineSep || this.lineSeparator());\n        }\n\n        parts[i] = sel;\n      }\n\n      return parts;\n    },\n    replaceSelection: function replaceSelection(code, collapse, origin) {\n      var dup = [];\n\n      for (var i = 0; i < this.sel.ranges.length; i++) {\n        dup[i] = code;\n      }\n\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function (code, collapse, origin) {\n      var changes = [],\n          sel = this.sel;\n\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {\n          from: range.from(),\n          to: range.to(),\n          text: this.splitLines(code[i]),\n          origin: origin\n        };\n      }\n\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--) {\n        makeChange(this, changes[i$1]);\n      }\n\n      if (newSel) {\n        setSelectionReplaceHistory(this, newSel);\n      } else if (this.cm) {\n        ensureCursorVisible(this.cm);\n      }\n    }),\n    undo: docMethodOp(function () {\n      makeChangeFromHistory(this, \"undo\");\n    }),\n    redo: docMethodOp(function () {\n      makeChangeFromHistory(this, \"redo\");\n    }),\n    undoSelection: docMethodOp(function () {\n      makeChangeFromHistory(this, \"undo\", true);\n    }),\n    redoSelection: docMethodOp(function () {\n      makeChangeFromHistory(this, \"redo\", true);\n    }),\n    setExtending: function setExtending(val) {\n      this.extend = val;\n    },\n    getExtending: function getExtending() {\n      return this.extend;\n    },\n    historySize: function historySize() {\n      var hist = this.history,\n          done = 0,\n          undone = 0;\n\n      for (var i = 0; i < hist.done.length; i++) {\n        if (!hist.done[i].ranges) {\n          ++done;\n        }\n      }\n\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) {\n        if (!hist.undone[i$1].ranges) {\n          ++undone;\n        }\n      }\n\n      return {\n        undo: done,\n        redo: undone\n      };\n    },\n    clearHistory: function clearHistory() {\n      var this$1 = this;\n      this.history = new History(this.history);\n      linkedDocs(this, function (doc) {\n        return doc.history = this$1.history;\n      }, true);\n    },\n    markClean: function markClean() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function changeGeneration(forceSplit) {\n      if (forceSplit) {\n        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n      }\n\n      return this.history.generation;\n    },\n    isClean: function isClean(gen) {\n      return this.history.generation == (gen || this.cleanGeneration);\n    },\n    getHistory: function getHistory() {\n      return {\n        done: copyHistoryArray(this.history.done),\n        undone: copyHistoryArray(this.history.undone)\n      };\n    },\n    setHistory: function setHistory(histData) {\n      var hist = this.history = new History(this.history);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n    setGutterMarker: docMethodOp(function (line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n\n        if (!value && isEmpty(markers)) {\n          line.gutterMarkers = null;\n        }\n\n        return true;\n      });\n    }),\n    clearGutter: docMethodOp(function (gutterID) {\n      var this$1 = this;\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n\n            if (isEmpty(line.gutterMarkers)) {\n              line.gutterMarkers = null;\n            }\n\n            return true;\n          });\n        }\n      });\n    }),\n    lineInfo: function lineInfo(line) {\n      var n;\n\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) {\n          return null;\n        }\n\n        n = line;\n        line = getLine(this, line);\n\n        if (!line) {\n          return null;\n        }\n      } else {\n        n = lineNo(line);\n\n        if (n == null) {\n          return null;\n        }\n      }\n\n      return {\n        line: n,\n        handle: line,\n        text: line.text,\n        gutterMarkers: line.gutterMarkers,\n        textClass: line.textClass,\n        bgClass: line.bgClass,\n        wrapClass: line.wrapClass,\n        widgets: line.widgets\n      };\n    },\n    addLineClass: docMethodOp(function (handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n\n        if (!line[prop]) {\n          line[prop] = cls;\n        } else if (classTest(cls).test(line[prop])) {\n          return false;\n        } else {\n          line[prop] += \" \" + cls;\n        }\n\n        return true;\n      });\n    }),\n    removeLineClass: docMethodOp(function (handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n\n        if (!cur) {\n          return false;\n        } else if (cls == null) {\n          line[prop] = null;\n        } else {\n          var found = cur.match(classTest(cls));\n\n          if (!found) {\n            return false;\n          }\n\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n\n        return true;\n      });\n    }),\n    addLineWidget: docMethodOp(function (handle, node, options) {\n      return addLineWidget(this, handle, node, options);\n    }),\n    removeLineWidget: function removeLineWidget(widget) {\n      widget.clear();\n    },\n    markText: function markText(from, to, options) {\n      return _markText(this, _clipPos(this, from), _clipPos(this, to), options, options && options.type || \"range\");\n    },\n    setBookmark: function setBookmark(pos, options) {\n      var realOpts = {\n        replacedWith: options && (options.nodeType == null ? options.widget : options),\n        insertLeft: options && options.insertLeft,\n        clearWhenEmpty: false,\n        shared: options && options.shared,\n        handleMouseEvents: options && options.handleMouseEvents\n      };\n      pos = _clipPos(this, pos);\n      return _markText(this, pos, pos, realOpts, \"bookmark\");\n    },\n    findMarksAt: function findMarksAt(pos) {\n      pos = _clipPos(this, pos);\n      var markers = [],\n          spans = getLine(this, pos.line).markedSpans;\n\n      if (spans) {\n        for (var i = 0; i < spans.length; ++i) {\n          var span = spans[i];\n\n          if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch)) {\n            markers.push(span.marker.parent || span.marker);\n          }\n        }\n      }\n\n      return markers;\n    },\n    findMarks: function findMarks(from, to, filter) {\n      from = _clipPos(this, from);\n      to = _clipPos(this, to);\n      var found = [],\n          lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n\n        if (spans) {\n          for (var i = 0; i < spans.length; i++) {\n            var span = spans[i];\n\n            if (!(span.to != null && lineNo == from.line && from.ch >= span.to || span.from == null && lineNo != from.line || span.from != null && lineNo == to.line && span.from >= to.ch) && (!filter || filter(span.marker))) {\n              found.push(span.marker.parent || span.marker);\n            }\n          }\n        }\n\n        ++lineNo;\n      });\n      return found;\n    },\n    getAllMarks: function getAllMarks() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n\n        if (sps) {\n          for (var i = 0; i < sps.length; ++i) {\n            if (sps[i].from != null) {\n              markers.push(sps[i].marker);\n            }\n          }\n        }\n      });\n      return markers;\n    },\n    posFromIndex: function posFromIndex(off) {\n      var ch,\n          lineNo = this.first,\n          sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n\n        if (sz > off) {\n          ch = off;\n          return true;\n        }\n\n        off -= sz;\n        ++lineNo;\n      });\n      return _clipPos(this, Pos(lineNo, ch));\n    },\n    indexFromPos: function indexFromPos(coords) {\n      coords = _clipPos(this, coords);\n      var index = coords.ch;\n\n      if (coords.line < this.first || coords.ch < 0) {\n        return 0;\n      }\n\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) {\n        // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index;\n    },\n    copy: function copy(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop;\n      doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n\n      return doc;\n    },\n    linkedDoc: function linkedDoc(options) {\n      if (!options) {\n        options = {};\n      }\n\n      var from = this.first,\n          to = this.first + this.size;\n\n      if (options.from != null && options.from > from) {\n        from = options.from;\n      }\n\n      if (options.to != null && options.to < to) {\n        to = options.to;\n      }\n\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n\n      if (options.sharedHist) {\n        copy.history = this.history;\n      }\n\n      (this.linked || (this.linked = [])).push({\n        doc: copy,\n        sharedHist: options.sharedHist\n      });\n      copy.linked = [{\n        doc: this,\n        isParent: true,\n        sharedHist: options.sharedHist\n      }];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy;\n    },\n    unlinkDoc: function unlinkDoc(other) {\n      if (other instanceof CodeMirror) {\n        other = other.doc;\n      }\n\n      if (this.linked) {\n        for (var i = 0; i < this.linked.length; ++i) {\n          var link = this.linked[i];\n\n          if (link.doc != other) {\n            continue;\n          }\n\n          this.linked.splice(i, 1);\n          other.unlinkDoc(this);\n          detachSharedMarkers(findSharedMarkers(this));\n          break;\n        }\n      } // If the histories were shared, split them again\n\n\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) {\n          return splitIds.push(doc.id);\n        }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function iterLinkedDocs(f) {\n      linkedDocs(this, f);\n    },\n    getMode: function getMode() {\n      return this.mode;\n    },\n    getEditor: function getEditor() {\n      return this.cm;\n    },\n    splitLines: function splitLines(str) {\n      if (this.lineSep) {\n        return str.split(this.lineSep);\n      }\n\n      return splitLinesAuto(str);\n    },\n    lineSeparator: function lineSeparator() {\n      return this.lineSep || \"\\n\";\n    },\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") {\n        dir = \"ltr\";\n      }\n\n      if (dir == this.direction) {\n        return;\n      }\n\n      this.direction = dir;\n      this.iter(function (line) {\n        return line.order = null;\n      });\n\n      if (this.cm) {\n        directionChanged(this.cm);\n      }\n    })\n  }); // Public alias.\n\n  Doc.prototype.eachLine = Doc.prototype.iter; // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n      return;\n    }\n\n    e_preventDefault(e);\n\n    if (ie) {\n      lastDrop = +new Date();\n    }\n\n    var pos = posFromMouse(cm, e, true),\n        files = e.dataTransfer.files;\n\n    if (!pos || cm.isReadOnly()) {\n      return;\n    } // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n\n\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length,\n          text = Array(n),\n          read = 0;\n\n      var markAsReadAndPasteIfAllFilesAreRead = function markAsReadAndPasteIfAllFilesAreRead() {\n        if (++read == n) {\n          operation(cm, function () {\n            pos = _clipPos(cm.doc, pos);\n            var change = {\n              from: pos,\n              to: pos,\n              text: cm.doc.splitLines(text.filter(function (t) {\n                return t != null;\n              }).join(cm.doc.lineSeparator())),\n              origin: \"paste\"\n            };\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(_clipPos(cm.doc, pos), _clipPos(cm.doc, changeEnd(change))));\n          })();\n        }\n      };\n\n      var readTextFromFile = function readTextFromFile(file, i) {\n        if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          markAsReadAndPasteIfAllFilesAreRead();\n          return;\n        }\n\n        var reader = new FileReader();\n\n        reader.onerror = function () {\n          return markAsReadAndPasteIfAllFilesAreRead();\n        };\n\n        reader.onload = function () {\n          var content = reader.result;\n\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            markAsReadAndPasteIfAllFilesAreRead();\n            return;\n          }\n\n          text[i] = content;\n          markAsReadAndPasteIfAllFilesAreRead();\n        };\n\n        reader.readAsText(file);\n      };\n\n      for (var i = 0; i < files.length; i++) {\n        readTextFromFile(files[i], i);\n      }\n    } else {\n      // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e); // Ensure the editor is re-focused\n\n        setTimeout(function () {\n          return cm.display.input.focus();\n        }, 20);\n        return;\n      }\n\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n\n        if (text$1) {\n          var selected;\n\n          if (cm.state.draggingText && !cm.state.draggingText.copy) {\n            selected = cm.listSelections();\n          }\n\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n\n          if (selected) {\n            for (var i$1 = 0; i$1 < selected.length; ++i$1) {\n              _replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\");\n            }\n          }\n\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      } catch (e$1) {}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date() - lastDrop < 100)) {\n      e_stop(e);\n      return;\n    }\n\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n      return;\n    }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\"; // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img); // Force a relayout, or Opera won't use our image for some obscure reason\n\n        img._top = img.offsetTop;\n      }\n\n      e.dataTransfer.setDragImage(img, 0, 0);\n\n      if (presto) {\n        img.parentNode.removeChild(img);\n      }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n\n    if (!pos) {\n      return;\n    }\n\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  } // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) {\n      return;\n    }\n\n    var byClass = document.getElementsByClassName(\"CodeMirror\"),\n        editors = [];\n\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n\n      if (cm) {\n        editors.push(cm);\n      }\n    }\n\n    if (editors.length) {\n      editors[0].operation(function () {\n        for (var i = 0; i < editors.length; i++) {\n          f(editors[i]);\n        }\n      });\n    }\n  }\n\n  var globalsRegistered = false;\n\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) {\n      return;\n    }\n\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) {\n        resizeTimer = setTimeout(function () {\n          resizeTimer = null;\n          forEachCodeMirror(onResize);\n        }, 100);\n      }\n    }); // When the window loses focus, we want to show the editor as blurred\n\n    on(window, \"blur\", function () {\n      return forEachCodeMirror(onBlur);\n    });\n  } // Called when the window resizes\n\n\n  function onResize(cm) {\n    var d = cm.display; // Might be a text scaling operation, clear size caches.\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\",\n    8: \"Backspace\",\n    9: \"Tab\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Ctrl\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Esc\",\n    32: \"Space\",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"Left\",\n    38: \"Up\",\n    39: \"Right\",\n    40: \"Down\",\n    44: \"PrintScrn\",\n    45: \"Insert\",\n    46: \"Delete\",\n    59: \";\",\n    61: \"=\",\n    91: \"Mod\",\n    92: \"Mod\",\n    93: \"Mod\",\n    106: \"*\",\n    107: \"=\",\n    109: \"-\",\n    110: \".\",\n    111: \"/\",\n    145: \"ScrollLock\",\n    173: \"-\",\n    186: \";\",\n    187: \"=\",\n    188: \",\",\n    189: \"-\",\n    190: \".\",\n    191: \"/\",\n    192: \"`\",\n    219: \"[\",\n    220: \"\\\\\",\n    221: \"]\",\n    222: \"'\",\n    224: \"Mod\",\n    63232: \"Up\",\n    63233: \"Down\",\n    63234: \"Left\",\n    63235: \"Right\",\n    63272: \"Delete\",\n    63273: \"Home\",\n    63275: \"End\",\n    63276: \"PageUp\",\n    63277: \"PageDown\",\n    63302: \"Insert\"\n  }; // Number keys\n\n  for (var i = 0; i < 10; i++) {\n    keyNames[i + 48] = keyNames[i + 96] = String(i);\n  } // Alphabetic keys\n\n\n  for (var i$1 = 65; i$1 <= 90; i$1++) {\n    keyNames[i$1] = String.fromCharCode(i$1);\n  } // Function keys\n\n\n  for (var i$2 = 1; i$2 <= 12; i$2++) {\n    keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2;\n  }\n\n  var keyMap = {};\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\",\n    \"Right\": \"goCharRight\",\n    \"Up\": \"goLineUp\",\n    \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\",\n    \"Home\": \"goLineStartSmart\",\n    \"PageUp\": \"goPageUp\",\n    \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\",\n    \"Backspace\": \"delCharBefore\",\n    \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\",\n    \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\",\n    \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  }; // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\",\n    \"Ctrl-D\": \"deleteLine\",\n    \"Ctrl-Z\": \"undo\",\n    \"Shift-Ctrl-Z\": \"redo\",\n    \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\",\n    \"Ctrl-End\": \"goDocEnd\",\n    \"Ctrl-Up\": \"goLineUp\",\n    \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\",\n    \"Ctrl-Right\": \"goGroupRight\",\n    \"Alt-Left\": \"goLineStart\",\n    \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Delete\": \"delGroupAfter\",\n    \"Ctrl-S\": \"save\",\n    \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\",\n    \"Shift-Ctrl-G\": \"findPrev\",\n    \"Shift-Ctrl-F\": \"replace\",\n    \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\",\n    \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\",\n    \"Shift-Ctrl-U\": \"redoSelection\",\n    \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  }; // Very basic readline/emacs-style bindings, which are standard on Mac.\n\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\",\n    \"Ctrl-B\": \"goCharLeft\",\n    \"Ctrl-P\": \"goLineUp\",\n    \"Ctrl-N\": \"goLineDown\",\n    \"Ctrl-A\": \"goLineStart\",\n    \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\",\n    \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\",\n    \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-Backspace\": \"delWordBefore\",\n    \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\",\n    \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\",\n    \"Cmd-D\": \"deleteLine\",\n    \"Cmd-Z\": \"undo\",\n    \"Shift-Cmd-Z\": \"redo\",\n    \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\",\n    \"Cmd-Up\": \"goDocStart\",\n    \"Cmd-End\": \"goDocEnd\",\n    \"Cmd-Down\": \"goDocEnd\",\n    \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\",\n    \"Cmd-Left\": \"goLineLeft\",\n    \"Cmd-Right\": \"goLineRight\",\n    \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\",\n    \"Alt-Delete\": \"delGroupAfter\",\n    \"Cmd-S\": \"save\",\n    \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\",\n    \"Shift-Cmd-G\": \"findPrev\",\n    \"Cmd-Alt-F\": \"replace\",\n    \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\",\n    \"Cmd-]\": \"indentMore\",\n    \"Cmd-Backspace\": \"delWrappedLineLeft\",\n    \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\",\n    \"Shift-Cmd-U\": \"redoSelection\",\n    \"Ctrl-Up\": \"goDocStart\",\n    \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault; // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n\n      if (/^(cmd|meta|m)$/i.test(mod)) {\n        cmd = true;\n      } else if (/^a(lt)?$/i.test(mod)) {\n        alt = true;\n      } else if (/^(c|ctrl|control)$/i.test(mod)) {\n        ctrl = true;\n      } else if (/^s(hift)?$/i.test(mod)) {\n        shift = true;\n      } else {\n        throw new Error(\"Unrecognized modifier name: \" + mod);\n      }\n    }\n\n    if (alt) {\n      name = \"Alt-\" + name;\n    }\n\n    if (ctrl) {\n      name = \"Ctrl-\" + name;\n    }\n\n    if (cmd) {\n      name = \"Cmd-\" + name;\n    }\n\n    if (shift) {\n      name = \"Shift-\" + name;\n    }\n\n    return name;\n  } // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n\n\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n\n    for (var keyname in keymap) {\n      if (keymap.hasOwnProperty(keyname)) {\n        var value = keymap[keyname];\n\n        if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) {\n          continue;\n        }\n\n        if (value == \"...\") {\n          delete keymap[keyname];\n          continue;\n        }\n\n        var keys = map(keyname.split(\" \"), normalizeKeyName);\n\n        for (var i = 0; i < keys.length; i++) {\n          var val = void 0,\n              name = void 0;\n\n          if (i == keys.length - 1) {\n            name = keys.join(\" \");\n            val = value;\n          } else {\n            name = keys.slice(0, i + 1).join(\" \");\n            val = \"...\";\n          }\n\n          var prev = copy[name];\n\n          if (!prev) {\n            copy[name] = val;\n          } else if (prev != val) {\n            throw new Error(\"Inconsistent bindings for \" + name);\n          }\n        }\n\n        delete keymap[keyname];\n      }\n    }\n\n    for (var prop in copy) {\n      keymap[prop] = copy[prop];\n    }\n\n    return keymap;\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n\n    if (found === false) {\n      return \"nothing\";\n    }\n\n    if (found === \"...\") {\n      return \"multi\";\n    }\n\n    if (found != null && handle(found)) {\n      return \"handled\";\n    }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\") {\n        return lookupKey(key, map.fallthrough, handle, context);\n      }\n\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n\n        if (result) {\n          return result;\n        }\n      }\n    }\n  } // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n\n\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n\n    if (event.altKey && base != \"Alt\") {\n      name = \"Alt-\" + name;\n    }\n\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") {\n      name = \"Ctrl-\" + name;\n    }\n\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Mod\") {\n      name = \"Cmd-\" + name;\n    }\n\n    if (!noShift && event.shiftKey && base != \"Shift\") {\n      name = \"Shift-\" + name;\n    }\n\n    return name;\n  } // Look up the name of a key as indicated by an event object.\n\n\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) {\n      return false;\n    }\n\n    var name = keyNames[event.keyCode];\n\n    if (name == null || event.altGraphKey) {\n      return false;\n    } // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n\n\n    if (event.keyCode == 3 && event.code) {\n      name = event.code;\n    }\n\n    return addModifierNames(name, event, noShift);\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val;\n  } // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n\n\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges,\n        kill = []; // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break;\n        }\n      }\n\n      kill.push(toKill);\n    } // Next, remove those actual ranges.\n\n\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--) {\n        _replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n      }\n\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target;\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\");\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      if (cm.doc.direction == \"rtl\") {\n        dir = -dir;\n      }\n\n      var order = getOrder(lineObj, cm.doc.direction);\n\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = dir < 0 == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch; // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) {\n            return measureCharPrepared(cm, prep, ch).top == targetTop;\n          }, dir < 0 == (part.level == 1) ? part.from : part.to - 1, ch);\n\n          if (sticky == \"before\") {\n            ch = moveCharLogically(lineObj, ch, 1);\n          }\n        } else {\n          ch = dir < 0 ? part.to : part.from;\n        }\n\n        return new Pos(lineNo, ch, sticky);\n      }\n    }\n\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\");\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n\n    if (!bidi) {\n      return moveLogically(line, start, dir);\n    }\n\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky),\n        part = bidi[partPos];\n\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir);\n    }\n\n    var mv = function mv(pos, dir) {\n      return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir);\n    };\n\n    var prep;\n\n    var getWrappedLineExtent = function getWrappedLineExtent(ch) {\n      if (!cm.options.lineWrapping) {\n        return {\n          begin: 0,\n          end: line.text.length\n        };\n      }\n\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch);\n    };\n\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = part.level == 1 == dir < 0;\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky);\n      }\n    } // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n\n    var searchInVisualLine = function searchInVisualLine(partPos, dir, wrappedLineExtent) {\n      var getRes = function getRes(ch, moveInStorageOrder) {\n        return moveInStorageOrder ? new Pos(start.line, mv(ch, 1), \"before\") : new Pos(start.line, ch, \"after\");\n      };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = dir > 0 == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n\n        if (part.from <= ch && ch < part.to) {\n          return getRes(ch, moveInStorageOrder);\n        }\n\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) {\n          return getRes(ch, moveInStorageOrder);\n        }\n      }\n    }; // Case 3a: Look for other bidi parts on the same visual line\n\n\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n\n    if (res) {\n      return res;\n    } // Case 3b: Look for other bidi parts on the next visual line\n\n\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n\n      if (res) {\n        return res;\n      }\n    } // Case 4: Nowhere to move\n\n\n    return null;\n  } // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n\n\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function singleSelection(cm) {\n      return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n    },\n    killLine: function killLine(cm) {\n      return deleteNearSelection(cm, function (range) {\n        if (range.empty()) {\n          var len = getLine(cm.doc, range.head.line).text.length;\n\n          if (range.head.ch == len && range.head.line < cm.lastLine()) {\n            return {\n              from: range.head,\n              to: Pos(range.head.line + 1, 0)\n            };\n          } else {\n            return {\n              from: range.head,\n              to: Pos(range.head.line, len)\n            };\n          }\n        } else {\n          return {\n            from: range.from(),\n            to: range.to()\n          };\n        }\n      });\n    },\n    deleteLine: function deleteLine(cm) {\n      return deleteNearSelection(cm, function (range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: _clipPos(cm.doc, Pos(range.to().line + 1, 0))\n        };\n      });\n    },\n    delLineLeft: function delLineLeft(cm) {\n      return deleteNearSelection(cm, function (range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineLeft: function delWrappedLineLeft(cm) {\n      return deleteNearSelection(cm, function (range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var leftPos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n        return {\n          from: leftPos,\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineRight: function delWrappedLineRight(cm) {\n      return deleteNearSelection(cm, function (range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var rightPos = cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n        return {\n          from: range.from(),\n          to: rightPos\n        };\n      });\n    },\n    undo: function undo(cm) {\n      return cm.undo();\n    },\n    redo: function redo(cm) {\n      return cm.redo();\n    },\n    undoSelection: function undoSelection(cm) {\n      return cm.undoSelection();\n    },\n    redoSelection: function redoSelection(cm) {\n      return cm.redoSelection();\n    },\n    goDocStart: function goDocStart(cm) {\n      return cm.extendSelection(Pos(cm.firstLine(), 0));\n    },\n    goDocEnd: function goDocEnd(cm) {\n      return cm.extendSelection(Pos(cm.lastLine()));\n    },\n    goLineStart: function goLineStart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineStart(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineStartSmart: function goLineStartSmart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineStartSmart(cm, range.head);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineEnd: function goLineEnd(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineEnd(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: -1\n      });\n    },\n    goLineRight: function goLineRight(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeft: function goLineLeft(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeftSmart: function goLineLeftSmart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        var pos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n\n        if (pos.ch < cm.getLine(pos.line).search(/\\S/)) {\n          return lineStartSmart(cm, range.head);\n        }\n\n        return pos;\n      }, sel_move);\n    },\n    goLineUp: function goLineUp(cm) {\n      return cm.moveV(-1, \"line\");\n    },\n    goLineDown: function goLineDown(cm) {\n      return cm.moveV(1, \"line\");\n    },\n    goPageUp: function goPageUp(cm) {\n      return cm.moveV(-1, \"page\");\n    },\n    goPageDown: function goPageDown(cm) {\n      return cm.moveV(1, \"page\");\n    },\n    goCharLeft: function goCharLeft(cm) {\n      return cm.moveH(-1, \"char\");\n    },\n    goCharRight: function goCharRight(cm) {\n      return cm.moveH(1, \"char\");\n    },\n    goColumnLeft: function goColumnLeft(cm) {\n      return cm.moveH(-1, \"column\");\n    },\n    goColumnRight: function goColumnRight(cm) {\n      return cm.moveH(1, \"column\");\n    },\n    goWordLeft: function goWordLeft(cm) {\n      return cm.moveH(-1, \"word\");\n    },\n    goGroupRight: function goGroupRight(cm) {\n      return cm.moveH(1, \"group\");\n    },\n    goGroupLeft: function goGroupLeft(cm) {\n      return cm.moveH(-1, \"group\");\n    },\n    goWordRight: function goWordRight(cm) {\n      return cm.moveH(1, \"word\");\n    },\n    delCharBefore: function delCharBefore(cm) {\n      return cm.deleteH(-1, \"codepoint\");\n    },\n    delCharAfter: function delCharAfter(cm) {\n      return cm.deleteH(1, \"char\");\n    },\n    delWordBefore: function delWordBefore(cm) {\n      return cm.deleteH(-1, \"word\");\n    },\n    delWordAfter: function delWordAfter(cm) {\n      return cm.deleteH(1, \"word\");\n    },\n    delGroupBefore: function delGroupBefore(cm) {\n      return cm.deleteH(-1, \"group\");\n    },\n    delGroupAfter: function delGroupAfter(cm) {\n      return cm.deleteH(1, \"group\");\n    },\n    indentAuto: function indentAuto(cm) {\n      return cm.indentSelection(\"smart\");\n    },\n    indentMore: function indentMore(cm) {\n      return cm.indentSelection(\"add\");\n    },\n    indentLess: function indentLess(cm) {\n      return cm.indentSelection(\"subtract\");\n    },\n    insertTab: function insertTab(cm) {\n      return cm.replaceSelection(\"\\t\");\n    },\n    insertSoftTab: function insertSoftTab(cm) {\n      var spaces = [],\n          ranges = cm.listSelections(),\n          tabSize = cm.options.tabSize;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function defaultTab(cm) {\n      if (cm.somethingSelected()) {\n        cm.indentSelection(\"add\");\n      } else {\n        cm.execCommand(\"insertTab\");\n      }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function transposeChars(cm) {\n      return runInOp(cm, function () {\n        var ranges = cm.listSelections(),\n            newSel = [];\n\n        for (var i = 0; i < ranges.length; i++) {\n          if (!ranges[i].empty()) {\n            continue;\n          }\n\n          var cur = ranges[i].head,\n              line = getLine(cm.doc, cur.line).text;\n\n          if (line) {\n            if (cur.ch == line.length) {\n              cur = new Pos(cur.line, cur.ch - 1);\n            }\n\n            if (cur.ch > 0) {\n              cur = new Pos(cur.line, cur.ch + 1);\n              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n            } else if (cur.line > cm.doc.first) {\n              var prev = getLine(cm.doc, cur.line - 1).text;\n\n              if (prev) {\n                cur = new Pos(cur.line, 1);\n                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n              }\n            }\n          }\n\n          newSel.push(new Range(cur, cur));\n        }\n\n        cm.setSelections(newSel);\n      });\n    },\n    newlineAndIndent: function newlineAndIndent(cm) {\n      return runInOp(cm, function () {\n        var sels = cm.listSelections();\n\n        for (var i = sels.length - 1; i >= 0; i--) {\n          cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\");\n        }\n\n        sels = cm.listSelections();\n\n        for (var i$1 = 0; i$1 < sels.length; i$1++) {\n          cm.indentLine(sels[i$1].from().line, null, true);\n        }\n\n        ensureCursorVisible(cm);\n      });\n    },\n    openLine: function openLine(cm) {\n      return cm.replaceSelection(\"\\n\", \"start\");\n    },\n    toggleOverwrite: function toggleOverwrite(cm) {\n      return cm.toggleOverwrite();\n    }\n  };\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n\n    if (visual != line) {\n      lineN = lineNo(visual);\n    }\n\n    return endOfLine(true, cm, visual, lineN, 1);\n  }\n\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n\n    if (visual != line) {\n      lineN = lineNo(visual);\n    }\n\n    return endOfLine(true, cm, line, lineN, -1);\n  }\n\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(start.ch, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky);\n    }\n\n    return start;\n  } // Run a handler that was bound to a key.\n\n\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n\n      if (!bound) {\n        return false;\n      }\n    } // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n\n\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift,\n        done = false;\n\n    try {\n      if (cm.isReadOnly()) {\n        cm.state.suppressEdits = true;\n      }\n\n      if (dropShift) {\n        cm.display.shift = false;\n      }\n\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n\n    return done;\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n\n      if (result) {\n        return result;\n      }\n    }\n\n    return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);\n  } // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n\n  var stopSeq = new Delayed();\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n\n    if (seq) {\n      if (isModifierKey(name)) {\n        return \"handled\";\n      }\n\n      if (/\\'$/.test(name)) {\n        cm.state.keySeq = null;\n      } else {\n        stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        });\n      }\n\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) {\n        return true;\n      }\n    }\n\n    return dispatchKeyInner(cm, name, e, handle);\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\") {\n      cm.state.keySeq = name;\n    }\n\n    if (result == \"handled\") {\n      signalLater(cm, \"keyHandled\", cm, name, e);\n    }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result;\n  } // Handle a key from the keydown event.\n\n\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n\n    if (!name) {\n      return false;\n    }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) {\n        return doHandleBinding(cm, b, true);\n      }) || dispatchKey(cm, name, e, function (b) {\n        if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion) {\n          return doHandleBinding(cm, b);\n        }\n      });\n    } else {\n      return dispatchKey(cm, name, e, function (b) {\n        return doHandleBinding(cm, b);\n      });\n    }\n  } // Handle a key from the keypress event\n\n\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) {\n      return doHandleBinding(cm, b, true);\n    });\n  }\n\n  var lastStoppedKey = null;\n\n  function onKeyDown(e) {\n    var cm = this;\n\n    if (e.target && e.target != cm.display.input.getField()) {\n      return;\n    }\n\n    cm.curOp.focus = activeElt();\n\n    if (signalDOMEvent(cm, e)) {\n      return;\n    } // IE does strange things with escape.\n\n\n    if (ie && ie_version < 11 && e.keyCode == 27) {\n      e.returnValue = false;\n    }\n\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n\n    if (presto) {\n      lastStoppedKey = handled ? code : null; // Opera has no cut event... we try to at least catch the key combo\n\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey)) {\n        cm.replaceSelection(\"\", null, \"cut\");\n      }\n    }\n\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand) {\n      document.execCommand(\"cut\");\n    } // Turn mouse into crosshair when Alt is held on Mac.\n\n\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className)) {\n      showCrossHair(cm);\n    }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) {\n      this.doc.sel.shift = false;\n    }\n\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n\n    if (e.target && e.target != cm.display.input.getField()) {\n      return;\n    }\n\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) {\n      return;\n    }\n\n    var keyCode = e.keyCode,\n        charCode = e.charCode;\n\n    if (presto && keyCode == lastStoppedKey) {\n      lastStoppedKey = null;\n      e_preventDefault(e);\n      return;\n    }\n\n    if (presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e)) {\n      return;\n    }\n\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode); // Some browsers fire keypress events for backspace\n\n    if (ch == \"\\x08\") {\n      return;\n    }\n\n    if (handleCharBinding(cm, e, ch)) {\n      return;\n    }\n\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function PastClick(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time && cmp(pos, this.pos) == 0 && button == this.button;\n  };\n\n  var lastClick, lastDoubleClick;\n\n  function clickRepeat(pos, button) {\n    var now = +new Date();\n\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\";\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\";\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\";\n    }\n  } // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n\n\n  function onMouseDown(e) {\n    var cm = this,\n        display = cm.display;\n\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) {\n      return;\n    }\n\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () {\n          return display.scroller.draggable = true;\n        }, 100);\n      }\n\n      return;\n    }\n\n    if (clickInGutter(cm, e)) {\n      return;\n    }\n\n    var pos = posFromMouse(cm, e),\n        button = e_button(e),\n        repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus(); // #3261: make sure, that we're not starting a second selection\n\n    if (button == 1 && cm.state.selectingText) {\n      cm.state.selectingText(e);\n    }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) {\n      return;\n    }\n\n    if (button == 1) {\n      if (pos) {\n        leftButtonDown(cm, pos, repeat, e);\n      } else if (e_target(e) == display.scroller) {\n        e_preventDefault(e);\n      }\n    } else if (button == 2) {\n      if (pos) {\n        extendSelection(cm.doc, pos);\n      }\n\n      setTimeout(function () {\n        return display.input.focus();\n      }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) {\n        cm.display.input.onContextMenu(e);\n      } else {\n        delayBlurEvent(cm);\n      }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n\n    if (repeat == \"double\") {\n      name = \"Double\" + name;\n    } else if (repeat == \"triple\") {\n      name = \"Triple\" + name;\n    }\n\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n    return dispatchKey(cm, addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") {\n        bound = commands[bound];\n      }\n\n      if (!bound) {\n        return false;\n      }\n\n      var done = false;\n\n      try {\n        if (cm.isReadOnly()) {\n          cm.state.suppressEdits = true;\n        }\n\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n\n      return done;\n    });\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n\n    if (value.extend == null || cm.doc.extend) {\n      value.extend = cm.doc.extend || event.shiftKey;\n    }\n\n    if (value.addNew == null) {\n      value.addNew = mac ? event.metaKey : event.ctrlKey;\n    }\n\n    if (value.moveOnDrag == null) {\n      value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey);\n    }\n\n    return value;\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) {\n      setTimeout(bind(ensureFocus, cm), 0);\n    } else {\n      cm.curOp.focus = activeElt();\n    }\n\n    var behavior = configureMouse(cm, repeat, event);\n    var sel = cm.doc.sel,\n        contained;\n\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && repeat == \"single\" && (contained = sel.contains(pos)) > -1 && (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) && (cmp(contained.to(), pos) > 0 || pos.xRel < 0)) {\n      leftButtonStartDrag(cm, event, pos, behavior);\n    } else {\n      leftButtonSelect(cm, event, pos, behavior);\n    }\n  } // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n\n\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display,\n        moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) {\n        display.scroller.draggable = false;\n      }\n\n      cm.state.draggingText = false;\n\n      if (cm.state.delayingBlurEvent) {\n        if (cm.hasFocus()) {\n          cm.state.delayingBlurEvent = false;\n        } else {\n          delayBlurEvent(cm);\n        }\n      }\n\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n\n      if (!moved) {\n        e_preventDefault(e);\n\n        if (!behavior.addNew) {\n          extendSelection(cm.doc, pos, null, null, behavior.extend);\n        } // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n\n\n        if (webkit && !safari || ie && ie_version == 9) {\n          setTimeout(function () {\n            display.wrapper.ownerDocument.body.focus({\n              preventScroll: true\n            });\n            display.input.focus();\n          }, 20);\n        } else {\n          display.input.focus();\n        }\n      }\n    });\n\n    var mouseMove = function mouseMove(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n\n    var dragStart = function dragStart() {\n      return moved = true;\n    }; // Let the drag handler handle this.\n\n\n    if (webkit) {\n      display.scroller.draggable = true;\n    }\n\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () {\n      return display.input.focus();\n    }, 20); // IE's approach to draggable\n\n    if (display.scroller.dragDrop) {\n      display.scroller.dragDrop();\n    }\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") {\n      return new Range(pos, pos);\n    }\n\n    if (unit == \"word\") {\n      return cm.findWordAt(pos);\n    }\n\n    if (unit == \"line\") {\n      return new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n    }\n\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to);\n  } // Normal selection, as opposed to text dragging.\n\n\n  function leftButtonSelect(cm, event, start, behavior) {\n    if (ie) {\n      delayBlurEvent(cm);\n    }\n\n    var display = cm.display,\n        doc = cm.doc;\n    e_preventDefault(event);\n    var ourRange,\n        ourIndex,\n        startSel = doc.sel,\n        ranges = startSel.ranges;\n\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n\n      if (ourIndex > -1) {\n        ourRange = ranges[ourIndex];\n      } else {\n        ourRange = new Range(start, start);\n      }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) {\n        ourRange = new Range(start, start);\n      }\n\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n\n      if (behavior.extend) {\n        ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend);\n      } else {\n        ourRange = range;\n      }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) {\n        return;\n      }\n\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [],\n            tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol),\n            right = Math.max(startCol, posCol);\n\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {\n          var text = getLine(doc, line).text,\n              leftPos = findColumn(text, left, tabSize);\n\n          if (left == right) {\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n          } else if (text.length > leftPos) {\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n          }\n        }\n\n        if (!ranges.length) {\n          ranges.push(new Range(start, start));\n        }\n\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), {\n          origin: \"*mouse\",\n          scroll: false\n        });\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor,\n            head;\n\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(_clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect(); // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n\n      if (!cur) {\n        return;\n      }\n\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n\n        if (cur.line >= visible.to || cur.line < visible.from) {\n          setTimeout(operation(cm, function () {\n            if (counter == curCount) {\n              extend(e);\n            }\n          }), 150);\n        }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n\n        if (outside) {\n          setTimeout(operation(cm, function () {\n            if (counter != curCount) {\n              return;\n            }\n\n            display.scroller.scrollTop += outside;\n            extend(e);\n          }), 50);\n        }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity; // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) {\n        done(e);\n      } else {\n        extend(e);\n      }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  } // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n\n\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) {\n      return range;\n    }\n\n    var order = getOrder(anchorLine);\n\n    if (!order) {\n      return range;\n    }\n\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky),\n        part = order[index];\n\n    if (part.from != anchor.ch && part.to != anchor.ch) {\n      return range;\n    }\n\n    var boundary = index + (part.from == anchor.ch == (part.level != 1) ? 0 : 1);\n\n    if (boundary == 0 || boundary == order.length) {\n      return range;\n    } // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n\n\n    var leftSide;\n\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n\n      if (headIndex == boundary - 1 || headIndex == boundary) {\n        leftSide = dir < 0;\n      } else {\n        leftSide = dir > 0;\n      }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to,\n        sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head);\n  } // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n\n\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try {\n        mX = e.clientX;\n        mY = e.clientY;\n      } catch (e$1) {\n        return false;\n      }\n    }\n\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) {\n      return false;\n    }\n\n    if (prevent) {\n      e_preventDefault(e);\n    }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) {\n      return e_defaultPrevented(e);\n    }\n\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = _lineAtHeight(cm.doc, mY);\n\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e);\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true);\n  } // CONTEXT MENU HANDLING\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n\n\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) {\n      return;\n    }\n\n    if (signalDOMEvent(cm, e, \"contextmenu\")) {\n      return;\n    }\n\n    if (!captureRightClick) {\n      cm.display.input.onContextMenu(e);\n    }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) {\n      return false;\n    }\n\n    return gutterEvent(cm, e, \"gutterContextMenu\", false);\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {\n    toString: function toString() {\n      return \"CodeMirror.Init\";\n    }\n  };\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n\n      if (handle) {\n        optionHandlers[name] = notOnInit ? function (cm, val, old) {\n          if (old != Init) {\n            handle(cm, val, old);\n          }\n        } : handle;\n      }\n    }\n\n    CodeMirror.defineOption = option; // Passed to option handlers when there is no old value.\n\n    CodeMirror.Init = Init; // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n\n    option(\"value\", \"\", function (cm, val) {\n      return cm.setValue(val);\n    }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n\n      if (!val) {\n        return;\n      }\n\n      var newBreaks = [],\n          lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n\n          if (found == -1) {\n            break;\n          }\n\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n\n        lineNo++;\n      });\n\n      for (var i = newBreaks.length - 1; i >= 0; i--) {\n        _replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));\n      }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b\\u200e\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n\n      if (old != Init) {\n        cm.refresh();\n      }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) {\n      return cm.refresh();\n    }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\"); // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) {\n      return cm.getInputField().spellcheck = val;\n    }, true);\n    option(\"autocorrect\", false, function (cm, val) {\n      return cm.getInputField().autocorrect = val;\n    }, true);\n    option(\"autocapitalize\", false, function (cm, val) {\n      return cm.getInputField().autocapitalize = val;\n    }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n\n      if (prev && prev.detach) {\n        prev.detach(cm, next);\n      }\n\n      if (next.attach) {\n        next.attach(cm, prev || null);\n      }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) {\n      return updateScrollbars(cm);\n    }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) {\n      return integer;\n    }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n\n      cm.display.input.readOnlyChanged(val);\n    });\n    option(\"screenReaderLabel\", null, function (cm, val) {\n      val = val === '' ? null : val;\n      cm.display.input.screenReaderLabelChanged(val);\n    });\n    option(\"disableInput\", false, function (cm, val) {\n      if (!val) {\n        cm.display.input.reset();\n      }\n    }, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) {\n      return cm.doc.history.undoDepth = val;\n    });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) {\n      return cm.refresh();\n    }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) {\n        cm.display.input.resetPosition();\n      }\n    });\n    option(\"tabindex\", null, function (cm, val) {\n      return cm.display.input.getField().tabIndex = val || \"\";\n    });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) {\n      return cm.doc.setDirection(val);\n    }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () {\n      return updateScrollbars(cm);\n    }, 100);\n  } // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) {\n      return new CodeMirror(place, options);\n    }\n\n    this.options = options = options ? copyObj(options) : {}; // Determine effective options based on given values and defaults.\n\n    copyObj(defaults, options, false);\n    var doc = options.value;\n\n    if (typeof doc == \"string\") {\n      doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction);\n    } else if (options.mode) {\n      doc.modeOption = options.mode;\n    }\n\n    this.doc = doc;\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n\n    if (options.lineWrapping) {\n      this.display.wrapper.className += \" CodeMirror-wrap\";\n    }\n\n    initScrollbars(this);\n    this.state = {\n      keyMaps: [],\n      // stores maps added by addKeyMap\n      overlays: [],\n      // highlighting overlays, as added by addOverlay\n      modeGen: 0,\n      // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false,\n      // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1,\n      cutIncoming: -1,\n      // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(),\n      // stores highlight worker timeout\n      keySeq: null,\n      // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) {\n      display.input.focus();\n    } // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n\n\n    if (ie && ie_version < 11) {\n      setTimeout(function () {\n        return this$1.display.input.reset(true);\n      }, 20);\n    }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    _startOperation(this);\n\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if (options.autofocus && !mobile || this.hasFocus()) {\n      setTimeout(function () {\n        if (this$1.hasFocus() && !this$1.state.focused) {\n          onFocus(this$1);\n        }\n      }, 20);\n    } else {\n      onBlur(this);\n    }\n\n    for (var opt in optionHandlers) {\n      if (optionHandlers.hasOwnProperty(opt)) {\n        optionHandlers[opt](this, options[opt], Init);\n      }\n    }\n\n    maybeUpdateLineNumberWidth(this);\n\n    if (options.finishInit) {\n      options.finishInit(this);\n    }\n\n    for (var i = 0; i < initHooks.length; ++i) {\n      initHooks[i](this);\n    }\n\n    _endOperation(this); // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n\n\n    if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\") {\n      display.lineDiv.style.textRendering = \"auto\";\n    }\n  } // The default configuration options.\n\n\n  CodeMirror.defaults = defaults; // Functions to run when options are changed.\n\n  CodeMirror.optionHandlers = optionHandlers; // Attach the necessary event handlers when initializing the editor\n\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown)); // Older IE's will not fire a second mousedown for a double click\n\n    if (ie && ie_version < 11) {\n      on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) {\n          return;\n        }\n\n        var pos = posFromMouse(cm, e);\n\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) {\n          return;\n        }\n\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      }));\n    } else {\n      on(d.scroller, \"dblclick\", function (e) {\n        return signalDOMEvent(cm, e) || e_preventDefault(e);\n      });\n    } // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n\n\n    on(d.scroller, \"contextmenu\", function (e) {\n      return onContextMenu(cm, e);\n    });\n    on(d.input.getField(), \"contextmenu\", function (e) {\n      if (!d.scroller.contains(e.target)) {\n        onContextMenu(cm, e);\n      }\n    }); // Used to suppress mouse event handling when a touch happens\n\n    var touchFinished,\n        prevTouch = {\n      end: 0\n    };\n\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () {\n          return d.activeTouch = null;\n        }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date();\n      }\n    }\n\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) {\n        return false;\n      }\n\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1;\n    }\n\n    function farAway(touch, other) {\n      if (other.left == null) {\n        return true;\n      }\n\n      var dx = other.left - touch.left,\n          dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20;\n    }\n\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date();\n        d.activeTouch = {\n          start: now,\n          moved: false,\n          prev: now - prevTouch.end <= 300 ? prevTouch : null\n        };\n\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) {\n        d.activeTouch.moved = true;\n      }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n\n      if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date() - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"),\n            range;\n\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          {\n            range = new Range(pos, pos);\n          } else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          {\n            range = cm.findWordAt(pos);\n          } else // Triple tap\n          {\n            range = new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n          }\n\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch); // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    }); // Listen to wheel events in order to try and update the viewport on time.\n\n    on(d.scroller, \"mousewheel\", function (e) {\n      return onScrollWheel(cm, e);\n    });\n    on(d.scroller, \"DOMMouseScroll\", function (e) {\n      return onScrollWheel(cm, e);\n    }); // Prevent wrapper from ever scrolling\n\n    on(d.wrapper, \"scroll\", function () {\n      return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;\n    });\n    d.dragFunctions = {\n      enter: function enter(e) {\n        if (!signalDOMEvent(cm, e)) {\n          e_stop(e);\n        }\n      },\n      over: function over(e) {\n        if (!signalDOMEvent(cm, e)) {\n          onDragOver(cm, e);\n          e_stop(e);\n        }\n      },\n      start: function start(e) {\n        return onDragStart(cm, e);\n      },\n      drop: operation(cm, onDrop),\n      leave: function leave(e) {\n        if (!signalDOMEvent(cm, e)) {\n          clearDragCursor(cm);\n        }\n      }\n    };\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) {\n      return onKeyUp.call(cm, e);\n    });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) {\n      return onFocus(cm, e);\n    });\n    on(inp, \"blur\", function (e) {\n      return onBlur(cm, e);\n    });\n  }\n\n  var initHooks = [];\n\n  CodeMirror.defineInitHook = function (f) {\n    return initHooks.push(f);\n  }; // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n\n\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc,\n        state;\n\n    if (how == null) {\n      how = \"add\";\n    }\n\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) {\n        how = \"prev\";\n      } else {\n        state = getContextBefore(cm, n).state;\n      }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n),\n        curSpace = countColumn(line.text, null, tabSize);\n\n    if (line.stateAfter) {\n      line.stateAfter = null;\n    }\n\n    var curSpaceString = line.text.match(/^\\s*/)[0],\n        indentation;\n\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) {\n          return;\n        }\n\n        how = \"prev\";\n      }\n    }\n\n    if (how == \"prev\") {\n      if (n > doc.first) {\n        indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);\n      } else {\n        indentation = 0;\n      }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n\n    indentation = Math.max(0, indentation);\n    var indentString = \"\",\n        pos = 0;\n\n    if (cm.options.indentWithTabs) {\n      for (var i = Math.floor(indentation / tabSize); i; --i) {\n        pos += tabSize;\n        indentString += \"\\t\";\n      }\n    }\n\n    if (pos < indentation) {\n      indentString += spaceStr(indentation - pos);\n    }\n\n    if (indentString != curSpaceString) {\n      _replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n\n      line.stateAfter = null;\n      return true;\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break;\n        }\n      }\n    }\n  } // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n\n\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n\n    if (!sel) {\n      sel = doc.sel;\n    }\n\n    var recent = +new Date() - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted),\n        multiPaste = null; // When pasting N lines into N selections, insert one line per selection\n\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n\n          for (var i = 0; i < lastCopied.text.length; i++) {\n            multiPaste.push(doc.splitLines(lastCopied.text[i]));\n          }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) {\n          return [l];\n        });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput; // Normal behavior is to insert the new text into every selection\n\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(),\n          to = range.to();\n\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          {\n            from = Pos(from.line, from.ch - deleted);\n          } else if (cm.state.overwrite && !paste) // Handle overwrite\n          {\n            to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n          } else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == textLines.join(\"\\n\")) {\n          from = to = Pos(from.line, 0);\n        }\n      }\n\n      var changeEvent = {\n        from: from,\n        to: to,\n        text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n        origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")\n      };\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n\n    if (inserted && !paste) {\n      triggerElectric(cm, inserted);\n    }\n\n    ensureCursorVisible(cm);\n\n    if (cm.curOp.updateInput < 2) {\n      cm.curOp.updateInput = updateInput;\n    }\n\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n\n    if (pasted) {\n      e.preventDefault();\n\n      if (!cm.isReadOnly() && !cm.options.disableInput) {\n        runInOp(cm, function () {\n          return applyTextInput(cm, pasted, 0, null, \"paste\");\n        });\n      }\n\n      return true;\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) {\n      return;\n    }\n\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n\n      if (range.head.ch > 100 || i && sel.ranges[i - 1].head.line == range.head.line) {\n        continue;\n      }\n\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++) {\n          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break;\n          }\n        }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch))) {\n          indented = indentLine(cm, range.head.line, \"smart\");\n        }\n      }\n\n      if (indented) {\n        signalLater(cm, \"electricInput\", cm, range.head.line);\n      }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [],\n        ranges = [];\n\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {\n        anchor: Pos(line, 0),\n        head: Pos(line + 1, 0)\n      };\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n\n    return {\n      text: text,\n      ranges: ranges\n    };\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\"); // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n\n    if (webkit) {\n      te.style.width = \"1000px\";\n    } else {\n      te.setAttribute(\"wrap\", \"off\");\n    } // If border: 0; -- iOS fails to open keyboard (issue #1287)\n\n\n    if (ios) {\n      te.style.border = \"1px solid black\";\n    }\n\n    disableBrowserMagic(te);\n    return div;\n  } // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n    var helpers = CodeMirror.helpers = {};\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function focus() {\n        window.focus();\n        this.display.input.focus();\n      },\n      setOption: function setOption(option, value) {\n        var options = this.options,\n            old = options[option];\n\n        if (options[option] == value && option != \"mode\") {\n          return;\n        }\n\n        options[option] = value;\n\n        if (optionHandlers.hasOwnProperty(option)) {\n          operation(this, optionHandlers[option])(this, value, old);\n        }\n\n        signal(this, \"optionChange\", this, option);\n      },\n      getOption: function getOption(option) {\n        return this.options[option];\n      },\n      getDoc: function getDoc() {\n        return this.doc;\n      },\n      addKeyMap: function addKeyMap(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function removeKeyMap(map) {\n        var maps = this.state.keyMaps;\n\n        for (var i = 0; i < maps.length; ++i) {\n          if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true;\n          }\n        }\n      },\n      addOverlay: methodOp(function (spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n\n        if (mode.startState) {\n          throw new Error(\"Overlays may not be stateful.\");\n        }\n\n        insertSorted(this.state.overlays, {\n          mode: mode,\n          modeSpec: spec,\n          opaque: options && options.opaque,\n          priority: options && options.priority || 0\n        }, function (overlay) {\n          return overlay.priority;\n        });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function (spec) {\n        var overlays = this.state.overlays;\n\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return;\n          }\n        }\n      }),\n      indentLine: methodOp(function (n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) {\n            dir = this.options.smartIndent ? \"smart\" : \"prev\";\n          } else {\n            dir = dir ? \"add\" : \"subtract\";\n          }\n        }\n\n        if (isLine(this.doc, n)) {\n          indentLine(this, n, dir, aggressive);\n        }\n      }),\n      indentSelection: methodOp(function (how) {\n        var ranges = this.doc.sel.ranges,\n            end = -1;\n\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n\n          if (!range.empty()) {\n            var from = range.from(),\n                to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n\n            for (var j = start; j < end; ++j) {\n              indentLine(this, j, how);\n            }\n\n            var newRanges = this.doc.sel.ranges;\n\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0) {\n              replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n            }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n\n            if (i == this.doc.sel.primIndex) {\n              ensureCursorVisible(this);\n            }\n          }\n        }\n      }),\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function getTokenAt(pos, precise) {\n        return takeToken(this, pos, precise);\n      },\n      getLineTokens: function getLineTokens(line, precise) {\n        return takeToken(this, Pos(line), precise, true);\n      },\n      getTokenTypeAt: function getTokenTypeAt(pos) {\n        pos = _clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0,\n            after = (styles.length - 1) / 2,\n            ch = pos.ch;\n        var type;\n\n        if (ch == 0) {\n          type = styles[2];\n        } else {\n          for (;;) {\n            var mid = before + after >> 1;\n\n            if ((mid ? styles[mid * 2 - 1] : 0) >= ch) {\n              after = mid;\n            } else if (styles[mid * 2 + 1] < ch) {\n              before = mid + 1;\n            } else {\n              type = styles[mid * 2 + 2];\n              break;\n            }\n          }\n        }\n\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n      },\n      getModeAt: function getModeAt(pos) {\n        var mode = this.doc.mode;\n\n        if (!mode.innerMode) {\n          return mode;\n        }\n\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n      },\n      getHelper: function getHelper(pos, type) {\n        return this.getHelpers(pos, type)[0];\n      },\n      getHelpers: function getHelpers(pos, type) {\n        var found = [];\n\n        if (!helpers.hasOwnProperty(type)) {\n          return found;\n        }\n\n        var help = helpers[type],\n            mode = this.getModeAt(pos);\n\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) {\n            found.push(help[mode[type]]);\n          }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n\n            if (val) {\n              found.push(val);\n            }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1) {\n            found.push(cur.val);\n          }\n        }\n\n        return found;\n      },\n      getStateAfter: function getStateAfter(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);\n        return getContextBefore(this, line + 1, precise).state;\n      },\n      cursorCoords: function cursorCoords(start, mode) {\n        var pos,\n            range = this.doc.sel.primary();\n\n        if (start == null) {\n          pos = range.head;\n        } else if (typeof start == \"object\") {\n          pos = _clipPos(this.doc, start);\n        } else {\n          pos = start ? range.from() : range.to();\n        }\n\n        return _cursorCoords(this, pos, mode || \"page\");\n      },\n      charCoords: function charCoords(pos, mode) {\n        return _charCoords(this, _clipPos(this.doc, pos), mode || \"page\");\n      },\n      coordsChar: function coordsChar(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return _coordsChar(this, coords.left, coords.top);\n      },\n      lineAtHeight: function lineAtHeight(height, mode) {\n        height = fromCoordSystem(this, {\n          top: height,\n          left: 0\n        }, mode || \"page\").top;\n        return _lineAtHeight(this.doc, height + this.display.viewOffset);\n      },\n      heightAtLine: function heightAtLine(line, mode, includeWidgets) {\n        var end = false,\n            lineObj;\n\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n\n          if (line < this.doc.first) {\n            line = this.doc.first;\n          } else if (line > last) {\n            line = last;\n            end = true;\n          }\n\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n\n        return intoCoordSystem(this, lineObj, {\n          top: 0,\n          left: 0\n        }, mode || \"page\", includeWidgets || end).top + (end ? this.doc.height - _heightAtLine(lineObj) : 0);\n      },\n      defaultTextHeight: function defaultTextHeight() {\n        return textHeight(this.display);\n      },\n      defaultCharWidth: function defaultCharWidth() {\n        return charWidth(this.display);\n      },\n      getViewport: function getViewport() {\n        return {\n          from: this.display.viewFrom,\n          to: this.display.viewTo\n        };\n      },\n      addWidget: function addWidget(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = _cursorCoords(this, _clipPos(this.doc, pos));\n        var top = pos.bottom,\n            left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n              hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth); // Default to positioning above (if specified and possible); otherwise default to positioning below\n\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight) {\n            top = pos.top - node.offsetHeight;\n          } else if (pos.bottom + node.offsetHeight <= vspace) {\n            top = pos.bottom;\n          }\n\n          if (left + node.offsetWidth > hspace) {\n            left = hspace - node.offsetWidth;\n          }\n        }\n\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") {\n            left = 0;\n          } else if (horiz == \"middle\") {\n            left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n          }\n\n          node.style.left = left + \"px\";\n        }\n\n        if (scroll) {\n          scrollIntoView(this, {\n            left: left,\n            top: top,\n            right: left + node.offsetWidth,\n            bottom: top + node.offsetHeight\n          });\n        }\n      },\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n      execCommand: function execCommand(cmd) {\n        if (commands.hasOwnProperty(cmd)) {\n          return commands[cmd].call(null, this);\n        }\n      },\n      triggerElectric: methodOp(function (text) {\n        triggerElectric(this, text);\n      }),\n      findPosH: function findPosH(from, amount, unit, visually) {\n        var dir = 1;\n\n        if (amount < 0) {\n          dir = -1;\n          amount = -amount;\n        }\n\n        var cur = _clipPos(this.doc, from);\n\n        for (var i = 0; i < amount; ++i) {\n          cur = _findPosH(this.doc, cur, dir, unit, visually);\n\n          if (cur.hitSide) {\n            break;\n          }\n        }\n\n        return cur;\n      },\n      moveH: methodOp(function (dir, unit) {\n        var this$1 = this;\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty()) {\n            return _findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually);\n          } else {\n            return dir < 0 ? range.from() : range.to();\n          }\n        }, sel_move);\n      }),\n      deleteH: methodOp(function (dir, unit) {\n        var sel = this.doc.sel,\n            doc = this.doc;\n\n        if (sel.somethingSelected()) {\n          doc.replaceSelection(\"\", null, \"+delete\");\n        } else {\n          deleteNearSelection(this, function (range) {\n            var other = _findPosH(doc, range.head, dir, unit, false);\n\n            return dir < 0 ? {\n              from: other,\n              to: range.head\n            } : {\n              from: range.head,\n              to: other\n            };\n          });\n        }\n      }),\n      findPosV: function findPosV(from, amount, unit, goalColumn) {\n        var dir = 1,\n            x = goalColumn;\n\n        if (amount < 0) {\n          dir = -1;\n          amount = -amount;\n        }\n\n        var cur = _clipPos(this.doc, from);\n\n        for (var i = 0; i < amount; ++i) {\n          var coords = _cursorCoords(this, cur, \"div\");\n\n          if (x == null) {\n            x = coords.left;\n          } else {\n            coords.left = x;\n          }\n\n          cur = _findPosV(this, coords, dir, unit);\n\n          if (cur.hitSide) {\n            break;\n          }\n        }\n\n        return cur;\n      },\n      moveV: methodOp(function (dir, unit) {\n        var this$1 = this;\n        var doc = this.doc,\n            goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse) {\n            return dir < 0 ? range.from() : range.to();\n          }\n\n          var headPos = _cursorCoords(this$1, range.head, \"div\");\n\n          if (range.goalColumn != null) {\n            headPos.left = range.goalColumn;\n          }\n\n          goals.push(headPos.left);\n\n          var pos = _findPosV(this$1, headPos, dir, unit);\n\n          if (unit == \"page\" && range == doc.sel.primary()) {\n            addToScrollTop(this$1, _charCoords(this$1, pos, \"div\").top - headPos.top);\n          }\n\n          return pos;\n        }, sel_move);\n\n        if (goals.length) {\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            doc.sel.ranges[i].goalColumn = goals[i];\n          }\n        }\n      }),\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function findWordAt(pos) {\n        var doc = this.doc,\n            line = getLine(doc, pos.line).text;\n        var start = pos.ch,\n            end = pos.ch;\n\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n\n          if ((pos.sticky == \"before\" || end == line.length) && start) {\n            --start;\n          } else {\n            ++end;\n          }\n\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper) ? function (ch) {\n            return isWordChar(ch, helper);\n          } : /\\s/.test(startChar) ? function (ch) {\n            return /\\s/.test(ch);\n          } : function (ch) {\n            return !/\\s/.test(ch) && !isWordChar(ch);\n          };\n\n          while (start > 0 && check(line.charAt(start - 1))) {\n            --start;\n          }\n\n          while (end < line.length && check(line.charAt(end))) {\n            ++end;\n          }\n        }\n\n        return new Range(Pos(pos.line, start), Pos(pos.line, end));\n      },\n      toggleOverwrite: function toggleOverwrite(value) {\n        if (value != null && value == this.state.overwrite) {\n          return;\n        }\n\n        if (this.state.overwrite = !this.state.overwrite) {\n          addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n        } else {\n          rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n        }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function hasFocus() {\n        return this.display.input.getField() == activeElt();\n      },\n      isReadOnly: function isReadOnly() {\n        return !!(this.options.readOnly || this.doc.cantEdit);\n      },\n      scrollTo: methodOp(function (x, y) {\n        scrollToCoords(this, x, y);\n      }),\n      getScrollInfo: function getScrollInfo() {\n        var scroller = this.display.scroller;\n        return {\n          left: scroller.scrollLeft,\n          top: scroller.scrollTop,\n          height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n          width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n          clientHeight: displayHeight(this),\n          clientWidth: displayWidth(this)\n        };\n      },\n      scrollIntoView: methodOp(function (range, margin) {\n        if (range == null) {\n          range = {\n            from: this.doc.sel.primary().head,\n            to: null\n          };\n\n          if (margin == null) {\n            margin = this.options.cursorScrollMargin;\n          }\n        } else if (typeof range == \"number\") {\n          range = {\n            from: Pos(range, 0),\n            to: null\n          };\n        } else if (range.from == null) {\n          range = {\n            from: range,\n            to: null\n          };\n        }\n\n        if (!range.to) {\n          range.to = range.from;\n        }\n\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n      setSize: methodOp(function (width, height) {\n        var this$1 = this;\n\n        var interpret = function interpret(val) {\n          return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n        };\n\n        if (width != null) {\n          this.display.wrapper.style.width = interpret(width);\n        }\n\n        if (height != null) {\n          this.display.wrapper.style.height = interpret(height);\n        }\n\n        if (this.options.lineWrapping) {\n          clearLineMeasurementCache(this);\n        }\n\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) {\n            for (var i = 0; i < line.widgets.length; i++) {\n              if (line.widgets[i].noHScroll) {\n                regLineChange(this$1, lineNo, \"widget\");\n                break;\n              }\n            }\n          }\n\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n      operation: function operation(f) {\n        return runInOp(this, f);\n      },\n      startOperation: function startOperation() {\n        return _startOperation(this);\n      },\n      endOperation: function endOperation() {\n        return _endOperation(this);\n      },\n      refresh: methodOp(function () {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5 || this.options.lineWrapping) {\n          estimateLineHeights(this);\n        }\n\n        signal(this, \"refresh\", this);\n      }),\n      swapDoc: methodOp(function (doc) {\n        var old = this.doc;\n        old.cm = null; // Cancel the current text selection if any (#5821)\n\n        if (this.state.selectingText) {\n          this.state.selectingText();\n        }\n\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old;\n      }),\n      phrase: function phrase(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText;\n      },\n      getInputField: function getInputField() {\n        return this.display.input.getField();\n      },\n      getWrapperElement: function getWrapperElement() {\n        return this.display.wrapper;\n      },\n      getScrollerElement: function getScrollerElement() {\n        return this.display.scroller;\n      },\n      getGutterElement: function getGutterElement() {\n        return this.display.gutters;\n      }\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function (type, name, value) {\n      if (!helpers.hasOwnProperty(type)) {\n        helpers[type] = CodeMirror[type] = {\n          _global: []\n        };\n      }\n\n      helpers[type][name] = value;\n    };\n\n    CodeMirror.registerGlobalHelper = function (type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n\n      helpers[type]._global.push({\n        pred: predicate,\n        val: value\n      });\n    };\n  } // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"codepoint\", \"char\", \"column\" (like char, but\n  // doesn't cross line boundaries), \"word\" (across next word), or\n  // \"group\" (to the start of next group of word or\n  // non-word-non-whitespace chars). The visually param controls\n  // whether, in right-to-left text, direction 1 means to move towards\n  // the next index in the string, or towards the character to the right\n  // of the current position. The resulting position will have a\n  // hitSide=true property if it reached the end of the document.\n\n\n  function _findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    var lineDir = visually && doc.direction == \"rtl\" ? -dir : dir;\n\n    function findNextLine() {\n      var l = pos.line + lineDir;\n\n      if (l < doc.first || l >= doc.first + doc.size) {\n        return false;\n      }\n\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l);\n    }\n\n    function moveOnce(boundToLine) {\n      var next;\n\n      if (unit == \"codepoint\") {\n        var ch = lineObj.text.charCodeAt(pos.ch + (dir > 0 ? 0 : -1));\n\n        if (isNaN(ch)) {\n          next = null;\n        } else {\n          var astral = dir > 0 ? ch >= 0xD800 && ch < 0xDC00 : ch >= 0xDC00 && ch < 0xDFFF;\n          next = new Pos(pos.line, Math.max(0, Math.min(lineObj.text.length, pos.ch + dir * (astral ? 2 : 1))), -dir);\n        }\n      } else if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n\n      if (next == null) {\n        if (!boundToLine && findNextLine()) {\n          pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir);\n        } else {\n          return false;\n        }\n      } else {\n        pos = next;\n      }\n\n      return true;\n    }\n\n    if (unit == \"char\" || unit == \"codepoint\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null,\n          group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) {\n          break;\n        }\n\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\" : group && cur == \"\\n\" ? \"n\" : !group || /\\s/.test(cur) ? null : \"p\";\n\n        if (group && !first && !type) {\n          type = \"s\";\n        }\n\n        if (sawType && sawType != type) {\n          if (dir < 0) {\n            dir = 1;\n            moveOnce();\n            pos.sticky = \"after\";\n          }\n\n          break;\n        }\n\n        if (type) {\n          sawType = type;\n        }\n\n        if (dir > 0 && !moveOnce(!first)) {\n          break;\n        }\n      }\n    }\n\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n\n    if (equalCursorPos(oldPos, result)) {\n      result.hitSide = true;\n    }\n\n    return result;\n  } // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n\n\n  function _findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc,\n        x = pos.left,\n        y;\n\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n\n    var target;\n\n    for (;;) {\n      target = _coordsChar(cm, x, y);\n\n      if (!target.outside) {\n        break;\n      }\n\n      if (dir < 0 ? y <= 0 : y >= doc.height) {\n        target.hitSide = true;\n        break;\n      }\n\n      y += dir * 5;\n    }\n\n    return target;\n  } // CONTENTEDITABLE INPUT STYLE\n\n\n  var ContentEditableInput = function ContentEditableInput(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n    var this$1 = this;\n    var input = this,\n        cm = input.cm;\n    var div = input.div = display.lineDiv;\n    div.contentEditable = true;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    function belongsToInput(e) {\n      for (var t = e.target; t; t = t.parentNode) {\n        if (t == div) {\n          return true;\n        }\n\n        if (/\\bCodeMirror-(?:line)?widget\\b/.test(t.className)) {\n          break;\n        }\n      }\n\n      return false;\n    }\n\n    on(div, \"paste\", function (e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n        return;\n      } // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n\n\n      if (ie_version <= 11) {\n        setTimeout(operation(cm, function () {\n          return this$1.updateFromDOM();\n        }), 20);\n      }\n    });\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {\n        data: e.data,\n        done: false\n      };\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) {\n        this$1.composing = {\n          data: e.data,\n          done: false\n        };\n      }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) {\n          this$1.readFromDOMSoon();\n        }\n\n        this$1.composing.done = true;\n      }\n    });\n    on(div, \"touchstart\", function () {\n      return input.forceCompositionEnd();\n    });\n    on(div, \"input\", function () {\n      if (!this$1.composing) {\n        this$1.readFromDOMSoon();\n      }\n    });\n\n    function onCopyCut(e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (cm.somethingSelected()) {\n        setLastCopied({\n          lineWise: false,\n          text: cm.getSelections()\n        });\n\n        if (e.type == \"cut\") {\n          cm.replaceSelection(\"\", null, \"cut\");\n        }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return;\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({\n          lineWise: true,\n          text: ranges.text\n        });\n\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\"); // iOS exposes the clipboard API, but seems to discard content inserted into it\n\n        e.clipboardData.setData(\"Text\", content);\n\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return;\n        }\n      } // Old-fashioned briefly-focus-a-textarea hack\n\n\n      var kludge = hiddenTextarea(),\n          te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = activeElt();\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n\n        if (hadFocus == div) {\n          input.showPrimarySelection();\n        }\n      }, 50);\n    }\n\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if (label) {\n      this.div.setAttribute('aria-label', label);\n    } else {\n      this.div.removeAttribute('aria-label');\n    }\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = activeElt() == this.div;\n    return result;\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) {\n      return;\n    }\n\n    if (info.focus || takeFocus) {\n      this.showPrimarySelection();\n    }\n\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection();\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(),\n        cm = this.cm,\n        prim = cm.doc.sel.primary();\n    var from = prim.from(),\n        to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return;\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), from) == 0 && cmp(maxPos(curAnchor, curFocus), to) == 0) {\n      return;\n    }\n\n    var view = cm.display.view;\n    var start = from.line >= cm.display.viewFrom && posToDOM(cm, from) || {\n      node: view[0].measure.map[2],\n      offset: 0\n    };\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {\n        node: map[map.length - 1],\n        offset: map[map.length - 2] - map[map.length - 3]\n      };\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return;\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0),\n        rng;\n\n    try {\n      rng = range(start.node, start.offset, end.offset, end.node);\n    } catch (e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n\n\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n\n      if (old && sel.anchorNode == null) {\n        sel.addRange(old);\n      } else if (gecko) {\n        this.startGracePeriod();\n      }\n    }\n\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n    var this$1 = this;\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n\n      if (this$1.selectionChanged()) {\n        this$1.cm.operation(function () {\n          return this$1.cm.curOp.selectionChanged = true;\n        });\n      }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode;\n    this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode;\n    this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n\n    if (!sel.rangeCount) {\n      return false;\n    }\n\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node);\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor() || activeElt() != this.div) {\n        this.showSelection(this.prepareSelection(), true);\n      }\n\n      this.div.focus();\n    }\n  };\n\n  ContentEditableInput.prototype.blur = function () {\n    this.div.blur();\n  };\n\n  ContentEditableInput.prototype.getField = function () {\n    return this.div;\n  };\n\n  ContentEditableInput.prototype.supportsTouch = function () {\n    return true;\n  };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n\n    if (this.selectionInEditor()) {\n      this.pollSelection();\n    } else {\n      runInOp(this.cm, function () {\n        return input.cm.curOp.selectionChanged = true;\n      });\n    }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) {\n      return;\n    }\n\n    var sel = this.getSelection(),\n        cm = this.cm; // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({\n        type: \"keydown\",\n        keyCode: 8,\n        preventDefault: Math.abs\n      });\n      this.blur();\n      this.focus();\n      return;\n    }\n\n    if (this.composing) {\n      return;\n    }\n\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n\n    if (anchor && head) {\n      runInOp(cm, function () {\n        setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n\n        if (anchor.bad || head.bad) {\n          cm.curOp.selectionChanged = true;\n        }\n      });\n    }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm,\n        display = cm.display,\n        sel = cm.doc.sel.primary();\n    var from = sel.from(),\n        to = sel.to();\n\n    if (from.ch == 0 && from.line > cm.firstLine()) {\n      from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length);\n    }\n\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine()) {\n      to = Pos(to.line + 1, 0);\n    }\n\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) {\n      return false;\n    }\n\n    var fromIndex, fromLine, fromNode;\n\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) {\n      return false;\n    }\n\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) {\n        newText.pop();\n        oldText.pop();\n        toLine--;\n      } else if (newText[0] == oldText[0]) {\n        newText.shift();\n        oldText.shift();\n        fromLine++;\n      } else {\n        break;\n      }\n    }\n\n    var cutFront = 0,\n        cutEnd = 0;\n    var newTop = newText[0],\n        oldTop = oldText[0],\n        maxCutFront = Math.min(newTop.length, oldTop.length);\n\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront)) {\n      ++cutFront;\n    }\n\n    var newBot = lst(newText),\n        oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));\n\n    while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n      ++cutEnd;\n    } // Try to move start of change to start of selection if ambiguous\n\n\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      _replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n\n      return true;\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) {\n      return;\n    }\n\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n    var this$1 = this;\n\n    if (this.readDOMTimeout != null) {\n      return;\n    }\n\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n\n      if (this$1.composing) {\n        if (this$1.composing.done) {\n          this$1.composing = null;\n        } else {\n          return;\n        }\n      }\n\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n    var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent()) {\n      runInOp(this.cm, function () {\n        return regChange(this$1.cm);\n      });\n    }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (!this.cm.isReadOnly()) {\n      operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n    }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n\n    if (!view || view.hidden) {\n      return null;\n    }\n\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n    var order = getOrder(line, cm.doc.direction),\n        side = \"left\";\n\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result;\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode) {\n      if (/CodeMirror-gutter-wrapper/.test(scan.className)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function badPos(pos, bad) {\n    if (bad) {\n      pos.bad = true;\n    }\n\n    return pos;\n  }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\",\n        closing = false,\n        lineSep = cm.doc.lineSeparator(),\n        extraLinebreak = false;\n\n    function recognizeMarker(id) {\n      return function (marker) {\n        return marker.id == id;\n      };\n    }\n\n    function close() {\n      if (closing) {\n        text += lineSep;\n\n        if (extraLinebreak) {\n          text += lineSep;\n        }\n\n        closing = extraLinebreak = false;\n      }\n    }\n\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n\n        if (cmText) {\n          addText(cmText);\n          return;\n        }\n\n        var markerID = node.getAttribute(\"cm-marker\"),\n            range;\n\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n\n          if (found.length && (range = found[0].find(0))) {\n            addText(getBetween(cm.doc, range.from, range.to).join(lineSep));\n          }\n\n          return;\n        }\n\n        if (node.getAttribute(\"contenteditable\") == \"false\") {\n          return;\n        }\n\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) {\n          return;\n        }\n\n        if (isBlock) {\n          close();\n        }\n\n        for (var i = 0; i < node.childNodes.length; i++) {\n          walk(node.childNodes[i]);\n        }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) {\n          extraLinebreak = true;\n        }\n\n        if (isBlock) {\n          closing = true;\n        }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n\n    for (;;) {\n      walk(from);\n\n      if (from == to) {\n        break;\n      }\n\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n\n    return text;\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n\n      if (!lineNode) {\n        return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n      }\n\n      node = null;\n      offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) {\n          return null;\n        }\n\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) {\n          break;\n        }\n      }\n    }\n\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n\n      if (lineView.node == lineNode) {\n        return locateNodeInLineView(lineView, node, offset);\n      }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild,\n        bad = false;\n\n    if (!node || !contains(wrapper, node)) {\n      return badPos(Pos(lineNo(lineView.line), 0), true);\n    }\n\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad);\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null,\n        topNode = node;\n\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n\n      if (offset) {\n        offset = textNode.nodeValue.length;\n      }\n    }\n\n    while (topNode.parentNode != wrapper) {\n      topNode = topNode.parentNode;\n    }\n\n    var measure = lineView.measure,\n        maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n\n            if (offset < 0 || curNode != textNode) {\n              ch = map[j + (offset ? 1 : 0)];\n            }\n\n            return Pos(line, ch);\n          }\n        }\n      }\n    }\n\n    var found = find(textNode, topNode, offset);\n\n    if (found) {\n      return badPos(found, bad);\n    } // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n\n\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n\n      if (found) {\n        return badPos(Pos(found.line, found.ch - dist), bad);\n      } else {\n        dist += after.textContent.length;\n      }\n    }\n\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n\n      if (found) {\n        return badPos(Pos(found.line, found.ch + dist$1), bad);\n      } else {\n        dist$1 += before.textContent.length;\n      }\n    }\n  } // TEXTAREA INPUT STYLE\n\n\n  var TextareaInput = function TextareaInput(cm) {\n    this.cm = cm; // See input.poll and input.reset\n\n    this.prevInput = \"\"; // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n\n    this.pollingFast = false; // Self-resetting timeout for the poller\n\n    this.polling = new Delayed(); // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n    var this$1 = this;\n    var input = this,\n        cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild); // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n\n    if (ios) {\n      te.style.width = \"0px\";\n    }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) {\n        this$1.hasSelection = null;\n      }\n\n      input.poll();\n    });\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n        return;\n      }\n\n      cm.state.pasteIncoming = +new Date();\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (cm.somethingSelected()) {\n        setLastCopied({\n          lineWise: false,\n          text: cm.getSelections()\n        });\n      } else if (!cm.options.lineWiseCopyCut) {\n        return;\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({\n          lineWise: true,\n          text: ranges.text\n        });\n\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n\n      if (e.type == \"cut\") {\n        cm.state.cutIncoming = +new Date();\n      }\n    }\n\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date();\n        input.focus();\n        return;\n      } // Pass the `paste` event to the textarea so it's handled by its event listener.\n\n\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    }); // Prevent normal selection in the editor (we handle our own)\n\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) {\n        e_preventDefault(e);\n      }\n    });\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n\n      if (input.composing) {\n        input.composing.range.clear();\n      }\n\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {\n          className: \"CodeMirror-composing\"\n        })\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea(); // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if (label) {\n      this.textarea.setAttribute('aria-label', label);\n    } else {\n      this.textarea.removeAttribute('aria-label');\n    }\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm,\n        display = cm.display,\n        doc = cm.doc;\n    var result = prepareSelection(cm); // Move the hidden textarea near the cursor to prevent scrolling artifacts\n\n    if (cm.options.moveInputWithCursor) {\n      var headPos = _cursorCoords(cm, doc.sel.primary().head, \"div\");\n\n      var wrapOff = display.wrapper.getBoundingClientRect(),\n          lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result;\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm,\n        display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  }; // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n\n\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) {\n      return;\n    }\n\n    var cm = this.cm;\n\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n\n      if (cm.state.focused) {\n        selectInput(this.textarea);\n      }\n\n      if (ie && ie_version >= 9) {\n        this.hasSelection = content;\n      }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n\n      if (ie && ie_version >= 9) {\n        this.hasSelection = null;\n      }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () {\n    return this.textarea;\n  };\n\n  TextareaInput.prototype.supportsTouch = function () {\n    return false;\n  };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try {\n        this.textarea.focus();\n      } catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n\n    }\n  };\n\n  TextareaInput.prototype.blur = function () {\n    this.textarea.blur();\n  };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () {\n    this.slowPoll();\n  }; // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n\n\n  TextareaInput.prototype.slowPoll = function () {\n    var this$1 = this;\n\n    if (this.pollingFast) {\n      return;\n    }\n\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n\n      if (this$1.cm.state.focused) {\n        this$1.slowPoll();\n      }\n    });\n  }; // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n\n\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false,\n        input = this;\n    input.pollingFast = true;\n\n    function p() {\n      var changed = input.poll();\n\n      if (!changed && !missed) {\n        missed = true;\n        input.polling.set(60, p);\n      } else {\n        input.pollingFast = false;\n        input.slowPoll();\n      }\n    }\n\n    input.polling.set(20, p);\n  }; // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n\n\n  TextareaInput.prototype.poll = function () {\n    var this$1 = this;\n    var cm = this.cm,\n        input = this.textarea,\n        prevInput = this.prevInput; // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n\n    if (this.contextMenuPending || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) {\n      return false;\n    }\n\n    var text = input.value; // If nothing changed, bail.\n\n    if (text == prevInput && !cm.somethingSelected()) {\n      return false;\n    } // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n\n\n    if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false;\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n\n      if (first == 0x200b && !prevInput) {\n        prevInput = \"\\u200B\";\n      }\n\n      if (first == 0x21da) {\n        this.reset();\n        return this.cm.execCommand(\"undo\");\n      }\n    } // Find the part of the input that is actually new\n\n\n    var same = 0,\n        l = Math.min(prevInput.length, text.length);\n\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) {\n      ++same;\n    }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same, null, this$1.composing ? \"*compose\" : null); // Don't leave long text in the textarea, since it makes further polling slow\n\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) {\n        input.value = this$1.prevInput = \"\";\n      } else {\n        this$1.prevInput = text;\n      }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"), {\n          className: \"CodeMirror-composing\"\n        });\n      }\n    });\n    return true;\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) {\n      this.pollingFast = false;\n    }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) {\n      this.hasSelection = null;\n    }\n\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this,\n        cm = input.cm,\n        display = cm.display,\n        te = input.textarea;\n\n    if (input.contextMenuPending) {\n      input.contextMenuPending();\n    }\n\n    var pos = posFromMouse(cm, e),\n        scrollPos = display.scroller.scrollTop;\n\n    if (!pos || presto) {\n      return;\n    } // Opera is difficult.\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n\n\n    var reset = cm.options.resetSelectionOnContextMenu;\n\n    if (reset && cm.doc.sel.contains(pos) == -1) {\n      operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n    }\n\n    var oldCSS = te.style.cssText,\n        oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n\n    if (webkit) {\n      oldScrollY = window.scrollY;\n    } // Work around Chrome issue (#2712)\n\n\n    display.input.focus();\n\n    if (webkit) {\n      window.scrollTo(null, oldScrollY);\n    }\n\n    display.input.reset(); // Adds \"Select all\" to context menu in FF\n\n    if (!cm.somethingSelected()) {\n      te.value = input.prevInput = \" \";\n    }\n\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll); // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200B\" + (selected ? te.value : \"\");\n        te.value = \"\\u21DA\"; // Used to catch context-menu undo\n\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200B\";\n        te.selectionStart = 1;\n        te.selectionEnd = extval.length; // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n\n    function rehide() {\n      if (input.contextMenuPending != rehide) {\n        return;\n      }\n\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n\n      if (ie && ie_version < 9) {\n        display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n      } // Try to detect the user choosing select-all\n\n\n      if (te.selectionStart != null) {\n        if (!ie || ie && ie_version < 9) {\n          prepareSelectAllHack();\n        }\n\n        var i = 0,\n            poll = function poll() {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == \"\\u200B\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) {\n      prepareSelectAllHack();\n    }\n\n    if (captureRightClick) {\n      e_stop(e);\n\n      var mouseup = function mouseup() {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) {\n      this.reset();\n    }\n\n    this.textarea.disabled = val == \"nocursor\";\n    this.textarea.readOnly = !!val;\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n\n    if (!options.tabindex && textarea.tabIndex) {\n      options.tabindex = textarea.tabIndex;\n    }\n\n    if (!options.placeholder && textarea.placeholder) {\n      options.placeholder = textarea.placeholder;\n    } // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n\n\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea || textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {\n      textarea.value = cm.getValue();\n    }\n\n    var realSubmit;\n\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save); // Deplorable hack to make the submit method do the right thing.\n\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch (e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n\n      cm.getTextArea = function () {\n        return textarea;\n      };\n\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\") {\n            textarea.form.submit = realSubmit;\n          }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) {\n      return textarea.parentNode.insertBefore(node, textarea.nextSibling);\n    }, options);\n    return cm;\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  } // EDITOR CONSTRUCTOR\n\n\n  defineOptions(CodeMirror);\n  addEditorMethods(CodeMirror); // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n\n  for (var prop in Doc.prototype) {\n    if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0) {\n      CodeMirror.prototype[prop] = function (method) {\n        return function () {\n          return method.apply(this.doc, arguments);\n        };\n      }(Doc.prototype[prop]);\n    }\n  }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\n    \"textarea\": TextareaInput,\n    \"contenteditable\": ContentEditableInput\n  }; // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n\n  CodeMirror.defineMode = function (name\n  /*, mode, …*/\n  ) {\n    if (!CodeMirror.defaults.mode && name != \"null\") {\n      CodeMirror.defaults.mode = name;\n    }\n\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME; // Minimal default mode.\n\n  CodeMirror.defineMode(\"null\", function () {\n    return {\n      token: function token(stream) {\n        return stream.skipToEnd();\n      }\n    };\n  });\n  CodeMirror.defineMIME(\"text/plain\", \"null\"); // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n  addLegacyProps(CodeMirror);\n  CodeMirror.version = \"5.62.0\";\n  return CodeMirror;\n});\n\n/***/ }),\n\n/***/ 833:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565), __webpack_require__(834), __webpack_require__(1254));else {}\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode(\"markdown\", function (cmCfg, modeCfg) {\n    var htmlMode = CodeMirror.getMode(cmCfg, \"text/html\");\n    var htmlModeMissing = htmlMode.name == \"null\";\n\n    function getMode(name) {\n      if (CodeMirror.findModeByName) {\n        var found = CodeMirror.findModeByName(name);\n        if (found) name = found.mime || found.mimes[0];\n      }\n\n      var mode = CodeMirror.getMode(cmCfg, name);\n      return mode.name == \"null\" ? null : mode;\n    } // Should characters that affect highlighting be highlighted separate?\n    // Does not include characters that will be output (such as `1.` and `-` for lists)\n\n\n    if (modeCfg.highlightFormatting === undefined) modeCfg.highlightFormatting = false; // Maximum number of nested blockquotes. Set to 0 for infinite nesting.\n    // Excess `>` will emit `error` token.\n\n    if (modeCfg.maxBlockquoteDepth === undefined) modeCfg.maxBlockquoteDepth = 0; // Turn on task lists? (\"- [ ] \" and \"- [x] \")\n\n    if (modeCfg.taskLists === undefined) modeCfg.taskLists = false; // Turn on strikethrough syntax\n\n    if (modeCfg.strikethrough === undefined) modeCfg.strikethrough = false;\n    if (modeCfg.emoji === undefined) modeCfg.emoji = false;\n    if (modeCfg.fencedCodeBlockHighlighting === undefined) modeCfg.fencedCodeBlockHighlighting = true;\n    if (modeCfg.fencedCodeBlockDefaultMode === undefined) modeCfg.fencedCodeBlockDefaultMode = 'text/plain';\n    if (modeCfg.xml === undefined) modeCfg.xml = true; // Allow token types to be overridden by user-provided token types.\n\n    if (modeCfg.tokenTypeOverrides === undefined) modeCfg.tokenTypeOverrides = {};\n    var tokenTypes = {\n      header: \"header\",\n      code: \"comment\",\n      quote: \"quote\",\n      list1: \"variable-2\",\n      list2: \"variable-3\",\n      list3: \"keyword\",\n      hr: \"hr\",\n      image: \"image\",\n      imageAltText: \"image-alt-text\",\n      imageMarker: \"image-marker\",\n      formatting: \"formatting\",\n      linkInline: \"link\",\n      linkEmail: \"link\",\n      linkText: \"link\",\n      linkHref: \"string\",\n      em: \"em\",\n      strong: \"strong\",\n      strikethrough: \"strikethrough\",\n      emoji: \"builtin\"\n    };\n\n    for (var tokenType in tokenTypes) {\n      if (tokenTypes.hasOwnProperty(tokenType) && modeCfg.tokenTypeOverrides[tokenType]) {\n        tokenTypes[tokenType] = modeCfg.tokenTypeOverrides[tokenType];\n      }\n    }\n\n    var hrRE = /^([*\\-_])(?:\\s*\\1){2,}\\s*$/,\n        listRE = /^(?:[*\\-+]|^[0-9]+([.)]))\\s+/,\n        taskListRE = /^\\[(x| )\\](?=\\s)/i // Must follow listRE\n    ,\n        atxHeaderRE = modeCfg.allowAtxHeaderWithoutSpace ? /^(#+)/ : /^(#+)(?: |$)/,\n        setextHeaderRE = /^ {0,3}(?:\\={1,}|-{2,})\\s*$/,\n        textRE = /^[^#!\\[\\]*_\\\\<>` \"'(~:]+/,\n        fencedCodeRE = /^(~~~+|```+)[ \\t]*([\\w\\/+#-]*)[^\\n`]*$/,\n        linkDefRE = /^\\s*\\[[^\\]]+?\\]:.*$/ // naive link-definition\n    ,\n        punctuation = /[!\"#$%&'()*+,\\-.\\/:;<=>?@\\[\\\\\\]^_`{|}~\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDF3C-\\uDF3E]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]/,\n        expandedTab = \"    \"; // CommonMark specifies tab as 4 spaces\n\n    function switchInline(stream, state, f) {\n      state.f = state.inline = f;\n      return f(stream, state);\n    }\n\n    function switchBlock(stream, state, f) {\n      state.f = state.block = f;\n      return f(stream, state);\n    }\n\n    function lineIsEmpty(line) {\n      return !line || !/\\S/.test(line.string);\n    } // Blocks\n\n\n    function blankLine(state) {\n      // Reset linkTitle state\n      state.linkTitle = false;\n      state.linkHref = false;\n      state.linkText = false; // Reset EM state\n\n      state.em = false; // Reset STRONG state\n\n      state.strong = false; // Reset strikethrough state\n\n      state.strikethrough = false; // Reset state.quote\n\n      state.quote = 0; // Reset state.indentedCode\n\n      state.indentedCode = false;\n\n      if (state.f == htmlBlock) {\n        var exit = htmlModeMissing;\n\n        if (!exit) {\n          var inner = CodeMirror.innerMode(htmlMode, state.htmlState);\n          exit = inner.mode.name == \"xml\" && inner.state.tagStart === null && !inner.state.context && inner.state.tokenize.isInText;\n        }\n\n        if (exit) {\n          state.f = inlineNormal;\n          state.block = blockNormal;\n          state.htmlState = null;\n        }\n      } // Reset state.trailingSpace\n\n\n      state.trailingSpace = 0;\n      state.trailingSpaceNewLine = false; // Mark this line as blank\n\n      state.prevLine = state.thisLine;\n      state.thisLine = {\n        stream: null\n      };\n      return null;\n    }\n\n    function blockNormal(stream, state) {\n      var firstTokenOnLine = stream.column() === state.indentation;\n      var prevLineLineIsEmpty = lineIsEmpty(state.prevLine.stream);\n      var prevLineIsIndentedCode = state.indentedCode;\n      var prevLineIsHr = state.prevLine.hr;\n      var prevLineIsList = state.list !== false;\n      var maxNonCodeIndentation = (state.listStack[state.listStack.length - 1] || 0) + 3;\n      state.indentedCode = false;\n      var lineIndentation = state.indentation; // compute once per line (on first token)\n\n      if (state.indentationDiff === null) {\n        state.indentationDiff = state.indentation;\n\n        if (prevLineIsList) {\n          state.list = null; // While this list item's marker's indentation is less than the deepest\n          //  list item's content's indentation,pop the deepest list item\n          //  indentation off the stack, and update block indentation state\n\n          while (lineIndentation < state.listStack[state.listStack.length - 1]) {\n            state.listStack.pop();\n\n            if (state.listStack.length) {\n              state.indentation = state.listStack[state.listStack.length - 1]; // less than the first list's indent -> the line is no longer a list\n            } else {\n              state.list = false;\n            }\n          }\n\n          if (state.list !== false) {\n            state.indentationDiff = lineIndentation - state.listStack[state.listStack.length - 1];\n          }\n        }\n      } // not comprehensive (currently only for setext detection purposes)\n\n\n      var allowsInlineContinuation = !prevLineLineIsEmpty && !prevLineIsHr && !state.prevLine.header && (!prevLineIsList || !prevLineIsIndentedCode) && !state.prevLine.fencedCodeEnd;\n      var isHr = (state.list === false || prevLineIsHr || prevLineLineIsEmpty) && state.indentation <= maxNonCodeIndentation && stream.match(hrRE);\n      var match = null;\n\n      if (state.indentationDiff >= 4 && (prevLineIsIndentedCode || state.prevLine.fencedCodeEnd || state.prevLine.header || prevLineLineIsEmpty)) {\n        stream.skipToEnd();\n        state.indentedCode = true;\n        return tokenTypes.code;\n      } else if (stream.eatSpace()) {\n        return null;\n      } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(atxHeaderRE)) && match[1].length <= 6) {\n        state.quote = 0;\n        state.header = match[1].length;\n        state.thisLine.header = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"header\";\n        state.f = state.inline;\n        return getType(state);\n      } else if (state.indentation <= maxNonCodeIndentation && stream.eat('>')) {\n        state.quote = firstTokenOnLine ? 1 : state.quote + 1;\n        if (modeCfg.highlightFormatting) state.formatting = \"quote\";\n        stream.eatSpace();\n        return getType(state);\n      } else if (!isHr && !state.setext && firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(listRE))) {\n        var listType = match[1] ? \"ol\" : \"ul\";\n        state.indentation = lineIndentation + stream.current().length;\n        state.list = true;\n        state.quote = 0; // Add this list item's content's indentation to the stack\n\n        state.listStack.push(state.indentation); // Reset inline styles which shouldn't propagate across list items\n\n        state.em = false;\n        state.strong = false;\n        state.code = false;\n        state.strikethrough = false;\n\n        if (modeCfg.taskLists && stream.match(taskListRE, false)) {\n          state.taskList = true;\n        }\n\n        state.f = state.inline;\n        if (modeCfg.highlightFormatting) state.formatting = [\"list\", \"list-\" + listType];\n        return getType(state);\n      } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(fencedCodeRE, true))) {\n        state.quote = 0;\n        state.fencedEndRE = new RegExp(match[1] + \"+ *$\"); // try switching mode\n\n        state.localMode = modeCfg.fencedCodeBlockHighlighting && getMode(match[2] || modeCfg.fencedCodeBlockDefaultMode);\n        if (state.localMode) state.localState = CodeMirror.startState(state.localMode);\n        state.f = state.block = local;\n        if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n        state.code = -1;\n        return getType(state); // SETEXT has lowest block-scope precedence after HR, so check it after\n        //  the others (code, blockquote, list...)\n      } else if ( // if setext set, indicates line after ---/===\n      state.setext || // line before ---/===\n      (!allowsInlineContinuation || !prevLineIsList) && !state.quote && state.list === false && !state.code && !isHr && !linkDefRE.test(stream.string) && (match = stream.lookAhead(1)) && (match = match.match(setextHeaderRE))) {\n        if (!state.setext) {\n          state.header = match[0].charAt(0) == '=' ? 1 : 2;\n          state.setext = state.header;\n        } else {\n          state.header = state.setext; // has no effect on type so we can reset it now\n\n          state.setext = 0;\n          stream.skipToEnd();\n          if (modeCfg.highlightFormatting) state.formatting = \"header\";\n        }\n\n        state.thisLine.header = true;\n        state.f = state.inline;\n        return getType(state);\n      } else if (isHr) {\n        stream.skipToEnd();\n        state.hr = true;\n        state.thisLine.hr = true;\n        return tokenTypes.hr;\n      } else if (stream.peek() === '[') {\n        return switchInline(stream, state, footnoteLink);\n      }\n\n      return switchInline(stream, state, state.inline);\n    }\n\n    function htmlBlock(stream, state) {\n      var style = htmlMode.token(stream, state.htmlState);\n\n      if (!htmlModeMissing) {\n        var inner = CodeMirror.innerMode(htmlMode, state.htmlState);\n\n        if (inner.mode.name == \"xml\" && inner.state.tagStart === null && !inner.state.context && inner.state.tokenize.isInText || state.md_inside && stream.current().indexOf(\">\") > -1) {\n          state.f = inlineNormal;\n          state.block = blockNormal;\n          state.htmlState = null;\n        }\n      }\n\n      return style;\n    }\n\n    function local(stream, state) {\n      var currListInd = state.listStack[state.listStack.length - 1] || 0;\n      var hasExitedList = state.indentation < currListInd;\n      var maxFencedEndInd = currListInd + 3;\n\n      if (state.fencedEndRE && state.indentation <= maxFencedEndInd && (hasExitedList || stream.match(state.fencedEndRE))) {\n        if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n        var returnType;\n        if (!hasExitedList) returnType = getType(state);\n        state.localMode = state.localState = null;\n        state.block = blockNormal;\n        state.f = inlineNormal;\n        state.fencedEndRE = null;\n        state.code = 0;\n        state.thisLine.fencedCodeEnd = true;\n        if (hasExitedList) return switchBlock(stream, state, state.block);\n        return returnType;\n      } else if (state.localMode) {\n        return state.localMode.token(stream, state.localState);\n      } else {\n        stream.skipToEnd();\n        return tokenTypes.code;\n      }\n    } // Inline\n\n\n    function getType(state) {\n      var styles = [];\n\n      if (state.formatting) {\n        styles.push(tokenTypes.formatting);\n        if (typeof state.formatting === \"string\") state.formatting = [state.formatting];\n\n        for (var i = 0; i < state.formatting.length; i++) {\n          styles.push(tokenTypes.formatting + \"-\" + state.formatting[i]);\n\n          if (state.formatting[i] === \"header\") {\n            styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.header);\n          } // Add `formatting-quote` and `formatting-quote-#` for blockquotes\n          // Add `error` instead if the maximum blockquote nesting depth is passed\n\n\n          if (state.formatting[i] === \"quote\") {\n            if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n              styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.quote);\n            } else {\n              styles.push(\"error\");\n            }\n          }\n        }\n      }\n\n      if (state.taskOpen) {\n        styles.push(\"meta\");\n        return styles.length ? styles.join(' ') : null;\n      }\n\n      if (state.taskClosed) {\n        styles.push(\"property\");\n        return styles.length ? styles.join(' ') : null;\n      }\n\n      if (state.linkHref) {\n        styles.push(tokenTypes.linkHref, \"url\");\n      } else {\n        // Only apply inline styles to non-url text\n        if (state.strong) {\n          styles.push(tokenTypes.strong);\n        }\n\n        if (state.em) {\n          styles.push(tokenTypes.em);\n        }\n\n        if (state.strikethrough) {\n          styles.push(tokenTypes.strikethrough);\n        }\n\n        if (state.emoji) {\n          styles.push(tokenTypes.emoji);\n        }\n\n        if (state.linkText) {\n          styles.push(tokenTypes.linkText);\n        }\n\n        if (state.code) {\n          styles.push(tokenTypes.code);\n        }\n\n        if (state.image) {\n          styles.push(tokenTypes.image);\n        }\n\n        if (state.imageAltText) {\n          styles.push(tokenTypes.imageAltText, \"link\");\n        }\n\n        if (state.imageMarker) {\n          styles.push(tokenTypes.imageMarker);\n        }\n      }\n\n      if (state.header) {\n        styles.push(tokenTypes.header, tokenTypes.header + \"-\" + state.header);\n      }\n\n      if (state.quote) {\n        styles.push(tokenTypes.quote); // Add `quote-#` where the maximum for `#` is modeCfg.maxBlockquoteDepth\n\n        if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n          styles.push(tokenTypes.quote + \"-\" + state.quote);\n        } else {\n          styles.push(tokenTypes.quote + \"-\" + modeCfg.maxBlockquoteDepth);\n        }\n      }\n\n      if (state.list !== false) {\n        var listMod = (state.listStack.length - 1) % 3;\n\n        if (!listMod) {\n          styles.push(tokenTypes.list1);\n        } else if (listMod === 1) {\n          styles.push(tokenTypes.list2);\n        } else {\n          styles.push(tokenTypes.list3);\n        }\n      }\n\n      if (state.trailingSpaceNewLine) {\n        styles.push(\"trailing-space-new-line\");\n      } else if (state.trailingSpace) {\n        styles.push(\"trailing-space-\" + (state.trailingSpace % 2 ? \"a\" : \"b\"));\n      }\n\n      return styles.length ? styles.join(' ') : null;\n    }\n\n    function handleText(stream, state) {\n      if (stream.match(textRE, true)) {\n        return getType(state);\n      }\n\n      return undefined;\n    }\n\n    function inlineNormal(stream, state) {\n      var style = state.text(stream, state);\n      if (typeof style !== 'undefined') return style;\n\n      if (state.list) {\n        // List marker (*, +, -, 1., etc)\n        state.list = null;\n        return getType(state);\n      }\n\n      if (state.taskList) {\n        var taskOpen = stream.match(taskListRE, true)[1] === \" \";\n        if (taskOpen) state.taskOpen = true;else state.taskClosed = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"task\";\n        state.taskList = false;\n        return getType(state);\n      }\n\n      state.taskOpen = false;\n      state.taskClosed = false;\n\n      if (state.header && stream.match(/^#+$/, true)) {\n        if (modeCfg.highlightFormatting) state.formatting = \"header\";\n        return getType(state);\n      }\n\n      var ch = stream.next(); // Matches link titles present on next line\n\n      if (state.linkTitle) {\n        state.linkTitle = false;\n        var matchCh = ch;\n\n        if (ch === '(') {\n          matchCh = ')';\n        }\n\n        matchCh = (matchCh + '').replace(/([.?*+^\\[\\]\\\\(){}|-])/g, \"\\\\$1\");\n        var regex = '^\\\\s*(?:[^' + matchCh + '\\\\\\\\]+|\\\\\\\\\\\\\\\\|\\\\\\\\.)' + matchCh;\n\n        if (stream.match(new RegExp(regex), true)) {\n          return tokenTypes.linkHref;\n        }\n      } // If this block is changed, it may need to be updated in GFM mode\n\n\n      if (ch === '`') {\n        var previousFormatting = state.formatting;\n        if (modeCfg.highlightFormatting) state.formatting = \"code\";\n        stream.eatWhile('`');\n        var count = stream.current().length;\n\n        if (state.code == 0 && (!state.quote || count == 1)) {\n          state.code = count;\n          return getType(state);\n        } else if (count == state.code) {\n          // Must be exact\n          var t = getType(state);\n          state.code = 0;\n          return t;\n        } else {\n          state.formatting = previousFormatting;\n          return getType(state);\n        }\n      } else if (state.code) {\n        return getType(state);\n      }\n\n      if (ch === '\\\\') {\n        stream.next();\n\n        if (modeCfg.highlightFormatting) {\n          var type = getType(state);\n          var formattingEscape = tokenTypes.formatting + \"-escape\";\n          return type ? type + \" \" + formattingEscape : formattingEscape;\n        }\n      }\n\n      if (ch === '!' && stream.match(/\\[[^\\]]*\\] ?(?:\\(|\\[)/, false)) {\n        state.imageMarker = true;\n        state.image = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"image\";\n        return getType(state);\n      }\n\n      if (ch === '[' && state.imageMarker && stream.match(/[^\\]]*\\](\\(.*?\\)| ?\\[.*?\\])/, false)) {\n        state.imageMarker = false;\n        state.imageAltText = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"image\";\n        return getType(state);\n      }\n\n      if (ch === ']' && state.imageAltText) {\n        if (modeCfg.highlightFormatting) state.formatting = \"image\";\n        var type = getType(state);\n        state.imageAltText = false;\n        state.image = false;\n        state.inline = state.f = linkHref;\n        return type;\n      }\n\n      if (ch === '[' && !state.image) {\n        if (state.linkText && stream.match(/^.*?\\]/)) return getType(state);\n        state.linkText = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        return getType(state);\n      }\n\n      if (ch === ']' && state.linkText) {\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n        state.linkText = false;\n        state.inline = state.f = stream.match(/\\(.*?\\)| ?\\[.*?\\]/, false) ? linkHref : inlineNormal;\n        return type;\n      }\n\n      if (ch === '<' && stream.match(/^(https?|ftps?):\\/\\/(?:[^\\\\>]|\\\\.)+>/, false)) {\n        state.f = state.inline = linkInline;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n\n        if (type) {\n          type += \" \";\n        } else {\n          type = \"\";\n        }\n\n        return type + tokenTypes.linkInline;\n      }\n\n      if (ch === '<' && stream.match(/^[^> \\\\]+@(?:[^\\\\>]|\\\\.)+>/, false)) {\n        state.f = state.inline = linkInline;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n\n        if (type) {\n          type += \" \";\n        } else {\n          type = \"\";\n        }\n\n        return type + tokenTypes.linkEmail;\n      }\n\n      if (modeCfg.xml && ch === '<' && stream.match(/^(!--|\\?|!\\[CDATA\\[|[a-z][a-z0-9-]*(?:\\s+[a-z_:.\\-]+(?:\\s*=\\s*[^>]+)?)*\\s*(?:>|$))/i, false)) {\n        var end = stream.string.indexOf(\">\", stream.pos);\n\n        if (end != -1) {\n          var atts = stream.string.substring(stream.start, end);\n          if (/markdown\\s*=\\s*('|\"){0,1}1('|\"){0,1}/.test(atts)) state.md_inside = true;\n        }\n\n        stream.backUp(1);\n        state.htmlState = CodeMirror.startState(htmlMode);\n        return switchBlock(stream, state, htmlBlock);\n      }\n\n      if (modeCfg.xml && ch === '<' && stream.match(/^\\/\\w*?>/)) {\n        state.md_inside = false;\n        return \"tag\";\n      } else if (ch === \"*\" || ch === \"_\") {\n        var len = 1,\n            before = stream.pos == 1 ? \" \" : stream.string.charAt(stream.pos - 2);\n\n        while (len < 3 && stream.eat(ch)) {\n          len++;\n        }\n\n        var after = stream.peek() || \" \"; // See http://spec.commonmark.org/0.27/#emphasis-and-strong-emphasis\n\n        var leftFlanking = !/\\s/.test(after) && (!punctuation.test(after) || /\\s/.test(before) || punctuation.test(before));\n        var rightFlanking = !/\\s/.test(before) && (!punctuation.test(before) || /\\s/.test(after) || punctuation.test(after));\n        var setEm = null,\n            setStrong = null;\n\n        if (len % 2) {\n          // Em\n          if (!state.em && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before))) setEm = true;else if (state.em == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after))) setEm = false;\n        }\n\n        if (len > 1) {\n          // Strong\n          if (!state.strong && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before))) setStrong = true;else if (state.strong == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after))) setStrong = false;\n        }\n\n        if (setStrong != null || setEm != null) {\n          if (modeCfg.highlightFormatting) state.formatting = setEm == null ? \"strong\" : setStrong == null ? \"em\" : \"strong em\";\n          if (setEm === true) state.em = ch;\n          if (setStrong === true) state.strong = ch;\n          var t = getType(state);\n          if (setEm === false) state.em = false;\n          if (setStrong === false) state.strong = false;\n          return t;\n        }\n      } else if (ch === ' ') {\n        if (stream.eat('*') || stream.eat('_')) {\n          // Probably surrounded by spaces\n          if (stream.peek() === ' ') {\n            // Surrounded by spaces, ignore\n            return getType(state);\n          } else {\n            // Not surrounded by spaces, back up pointer\n            stream.backUp(1);\n          }\n        }\n      }\n\n      if (modeCfg.strikethrough) {\n        if (ch === '~' && stream.eatWhile(ch)) {\n          if (state.strikethrough) {\n            // Remove strikethrough\n            if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n            var t = getType(state);\n            state.strikethrough = false;\n            return t;\n          } else if (stream.match(/^[^\\s]/, false)) {\n            // Add strikethrough\n            state.strikethrough = true;\n            if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n            return getType(state);\n          }\n        } else if (ch === ' ') {\n          if (stream.match('~~', true)) {\n            // Probably surrounded by space\n            if (stream.peek() === ' ') {\n              // Surrounded by spaces, ignore\n              return getType(state);\n            } else {\n              // Not surrounded by spaces, back up pointer\n              stream.backUp(2);\n            }\n          }\n        }\n      }\n\n      if (modeCfg.emoji && ch === \":\" && stream.match(/^(?:[a-z_\\d+][a-z_\\d+-]*|\\-[a-z_\\d+][a-z_\\d+-]*):/)) {\n        state.emoji = true;\n        if (modeCfg.highlightFormatting) state.formatting = \"emoji\";\n        var retType = getType(state);\n        state.emoji = false;\n        return retType;\n      }\n\n      if (ch === ' ') {\n        if (stream.match(/^ +$/, false)) {\n          state.trailingSpace++;\n        } else if (state.trailingSpace) {\n          state.trailingSpaceNewLine = true;\n        }\n      }\n\n      return getType(state);\n    }\n\n    function linkInline(stream, state) {\n      var ch = stream.next();\n\n      if (ch === \">\") {\n        state.f = state.inline = inlineNormal;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var type = getType(state);\n\n        if (type) {\n          type += \" \";\n        } else {\n          type = \"\";\n        }\n\n        return type + tokenTypes.linkInline;\n      }\n\n      stream.match(/^[^>]+/, true);\n      return tokenTypes.linkInline;\n    }\n\n    function linkHref(stream, state) {\n      // Check if space, and return NULL if so (to avoid marking the space)\n      if (stream.eatSpace()) {\n        return null;\n      }\n\n      var ch = stream.next();\n\n      if (ch === '(' || ch === '[') {\n        state.f = state.inline = getLinkHrefInside(ch === \"(\" ? \")\" : \"]\");\n        if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n        state.linkHref = true;\n        return getType(state);\n      }\n\n      return 'error';\n    }\n\n    var linkRE = {\n      \")\": /^(?:[^\\\\\\(\\)]|\\\\.|\\((?:[^\\\\\\(\\)]|\\\\.)*\\))*?(?=\\))/,\n      \"]\": /^(?:[^\\\\\\[\\]]|\\\\.|\\[(?:[^\\\\\\[\\]]|\\\\.)*\\])*?(?=\\])/\n    };\n\n    function getLinkHrefInside(endChar) {\n      return function (stream, state) {\n        var ch = stream.next();\n\n        if (ch === endChar) {\n          state.f = state.inline = inlineNormal;\n          if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n          var returnState = getType(state);\n          state.linkHref = false;\n          return returnState;\n        }\n\n        stream.match(linkRE[endChar]);\n        state.linkHref = true;\n        return getType(state);\n      };\n    }\n\n    function footnoteLink(stream, state) {\n      if (stream.match(/^([^\\]\\\\]|\\\\.)*\\]:/, false)) {\n        state.f = footnoteLinkInside;\n        stream.next(); // Consume [\n\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        state.linkText = true;\n        return getType(state);\n      }\n\n      return switchInline(stream, state, inlineNormal);\n    }\n\n    function footnoteLinkInside(stream, state) {\n      if (stream.match(']:', true)) {\n        state.f = state.inline = footnoteUrl;\n        if (modeCfg.highlightFormatting) state.formatting = \"link\";\n        var returnType = getType(state);\n        state.linkText = false;\n        return returnType;\n      }\n\n      stream.match(/^([^\\]\\\\]|\\\\.)+/, true);\n      return tokenTypes.linkText;\n    }\n\n    function footnoteUrl(stream, state) {\n      // Check if space, and return NULL if so (to avoid marking the space)\n      if (stream.eatSpace()) {\n        return null;\n      } // Match URL\n\n\n      stream.match(/^[^\\s]+/, true); // Check for link title\n\n      if (stream.peek() === undefined) {\n        // End of line, set flag to check next line\n        state.linkTitle = true;\n      } else {\n        // More content on line, check if link title\n        stream.match(/^(?:\\s+(?:\"(?:[^\"\\\\]|\\\\.)+\"|'(?:[^'\\\\]|\\\\.)+'|\\((?:[^)\\\\]|\\\\.)+\\)))?/, true);\n      }\n\n      state.f = state.inline = inlineNormal;\n      return tokenTypes.linkHref + \" url\";\n    }\n\n    var mode = {\n      startState: function startState() {\n        return {\n          f: blockNormal,\n          prevLine: {\n            stream: null\n          },\n          thisLine: {\n            stream: null\n          },\n          block: blockNormal,\n          htmlState: null,\n          indentation: 0,\n          inline: inlineNormal,\n          text: handleText,\n          formatting: false,\n          linkText: false,\n          linkHref: false,\n          linkTitle: false,\n          code: 0,\n          em: false,\n          strong: false,\n          header: 0,\n          setext: 0,\n          hr: false,\n          taskList: false,\n          list: false,\n          listStack: [],\n          quote: 0,\n          trailingSpace: 0,\n          trailingSpaceNewLine: false,\n          strikethrough: false,\n          emoji: false,\n          fencedEndRE: null\n        };\n      },\n      copyState: function copyState(s) {\n        return {\n          f: s.f,\n          prevLine: s.prevLine,\n          thisLine: s.thisLine,\n          block: s.block,\n          htmlState: s.htmlState && CodeMirror.copyState(htmlMode, s.htmlState),\n          indentation: s.indentation,\n          localMode: s.localMode,\n          localState: s.localMode ? CodeMirror.copyState(s.localMode, s.localState) : null,\n          inline: s.inline,\n          text: s.text,\n          formatting: false,\n          linkText: s.linkText,\n          linkTitle: s.linkTitle,\n          linkHref: s.linkHref,\n          code: s.code,\n          em: s.em,\n          strong: s.strong,\n          strikethrough: s.strikethrough,\n          emoji: s.emoji,\n          header: s.header,\n          setext: s.setext,\n          hr: s.hr,\n          taskList: s.taskList,\n          list: s.list,\n          listStack: s.listStack.slice(0),\n          quote: s.quote,\n          indentedCode: s.indentedCode,\n          trailingSpace: s.trailingSpace,\n          trailingSpaceNewLine: s.trailingSpaceNewLine,\n          md_inside: s.md_inside,\n          fencedEndRE: s.fencedEndRE\n        };\n      },\n      token: function token(stream, state) {\n        // Reset state.formatting\n        state.formatting = false;\n\n        if (stream != state.thisLine.stream) {\n          state.header = 0;\n          state.hr = false;\n\n          if (stream.match(/^\\s*$/, true)) {\n            blankLine(state);\n            return null;\n          }\n\n          state.prevLine = state.thisLine;\n          state.thisLine = {\n            stream: stream\n          }; // Reset state.taskList\n\n          state.taskList = false; // Reset state.trailingSpace\n\n          state.trailingSpace = 0;\n          state.trailingSpaceNewLine = false;\n\n          if (!state.localState) {\n            state.f = state.block;\n\n            if (state.f != htmlBlock) {\n              var indentation = stream.match(/^\\s*/, true)[0].replace(/\\t/g, expandedTab).length;\n              state.indentation = indentation;\n              state.indentationDiff = null;\n              if (indentation > 0) return null;\n            }\n          }\n        }\n\n        return state.f(stream, state);\n      },\n      innerMode: function innerMode(state) {\n        if (state.block == htmlBlock) return {\n          state: state.htmlState,\n          mode: htmlMode\n        };\n        if (state.localState) return {\n          state: state.localState,\n          mode: state.localMode\n        };\n        return {\n          state: state,\n          mode: mode\n        };\n      },\n      indent: function indent(state, textAfter, line) {\n        if (state.block == htmlBlock && htmlMode.indent) return htmlMode.indent(state.htmlState, textAfter, line);\n        if (state.localState && state.localMode.indent) return state.localMode.indent(state.localState, textAfter, line);\n        return CodeMirror.Pass;\n      },\n      blankLine: blankLine,\n      getType: getType,\n      blockCommentStart: \"<!--\",\n      blockCommentEnd: \"-->\",\n      closeBrackets: \"()[]{}''\\\"\\\"``\",\n      fold: \"markdown\"\n    };\n    return mode;\n  }, \"xml\");\n  CodeMirror.defineMIME(\"text/markdown\", \"markdown\");\n  CodeMirror.defineMIME(\"text/x-markdown\", \"markdown\");\n});\n\n/***/ }),\n\n/***/ 834:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565));else {}\n})(function (CodeMirror) {\n  \"use strict\";\n\n  var htmlConfig = {\n    autoSelfClosers: {\n      'area': true,\n      'base': true,\n      'br': true,\n      'col': true,\n      'command': true,\n      'embed': true,\n      'frame': true,\n      'hr': true,\n      'img': true,\n      'input': true,\n      'keygen': true,\n      'link': true,\n      'meta': true,\n      'param': true,\n      'source': true,\n      'track': true,\n      'wbr': true,\n      'menuitem': true\n    },\n    implicitlyClosed: {\n      'dd': true,\n      'li': true,\n      'optgroup': true,\n      'option': true,\n      'p': true,\n      'rp': true,\n      'rt': true,\n      'tbody': true,\n      'td': true,\n      'tfoot': true,\n      'th': true,\n      'tr': true\n    },\n    contextGrabbers: {\n      'dd': {\n        'dd': true,\n        'dt': true\n      },\n      'dt': {\n        'dd': true,\n        'dt': true\n      },\n      'li': {\n        'li': true\n      },\n      'option': {\n        'option': true,\n        'optgroup': true\n      },\n      'optgroup': {\n        'optgroup': true\n      },\n      'p': {\n        'address': true,\n        'article': true,\n        'aside': true,\n        'blockquote': true,\n        'dir': true,\n        'div': true,\n        'dl': true,\n        'fieldset': true,\n        'footer': true,\n        'form': true,\n        'h1': true,\n        'h2': true,\n        'h3': true,\n        'h4': true,\n        'h5': true,\n        'h6': true,\n        'header': true,\n        'hgroup': true,\n        'hr': true,\n        'menu': true,\n        'nav': true,\n        'ol': true,\n        'p': true,\n        'pre': true,\n        'section': true,\n        'table': true,\n        'ul': true\n      },\n      'rp': {\n        'rp': true,\n        'rt': true\n      },\n      'rt': {\n        'rp': true,\n        'rt': true\n      },\n      'tbody': {\n        'tbody': true,\n        'tfoot': true\n      },\n      'td': {\n        'td': true,\n        'th': true\n      },\n      'tfoot': {\n        'tbody': true\n      },\n      'th': {\n        'td': true,\n        'th': true\n      },\n      'thead': {\n        'tbody': true,\n        'tfoot': true\n      },\n      'tr': {\n        'tr': true\n      }\n    },\n    doNotIndent: {\n      \"pre\": true\n    },\n    allowUnquoted: true,\n    allowMissing: true,\n    caseFold: true\n  };\n  var xmlConfig = {\n    autoSelfClosers: {},\n    implicitlyClosed: {},\n    contextGrabbers: {},\n    doNotIndent: {},\n    allowUnquoted: false,\n    allowMissing: false,\n    allowMissingTagName: false,\n    caseFold: false\n  };\n  CodeMirror.defineMode(\"xml\", function (editorConf, config_) {\n    var indentUnit = editorConf.indentUnit;\n    var config = {};\n    var defaults = config_.htmlMode ? htmlConfig : xmlConfig;\n\n    for (var prop in defaults) {\n      config[prop] = defaults[prop];\n    }\n\n    for (var prop in config_) {\n      config[prop] = config_[prop];\n    } // Return variables for tokenizers\n\n\n    var type, setStyle;\n\n    function inText(stream, state) {\n      function chain(parser) {\n        state.tokenize = parser;\n        return parser(stream, state);\n      }\n\n      var ch = stream.next();\n\n      if (ch == \"<\") {\n        if (stream.eat(\"!\")) {\n          if (stream.eat(\"[\")) {\n            if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));else return null;\n          } else if (stream.match(\"--\")) {\n            return chain(inBlock(\"comment\", \"-->\"));\n          } else if (stream.match(\"DOCTYPE\", true, true)) {\n            stream.eatWhile(/[\\w\\._\\-]/);\n            return chain(doctype(1));\n          } else {\n            return null;\n          }\n        } else if (stream.eat(\"?\")) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          state.tokenize = inBlock(\"meta\", \"?>\");\n          return \"meta\";\n        } else {\n          type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n          state.tokenize = inTag;\n          return \"tag bracket\";\n        }\n      } else if (ch == \"&\") {\n        var ok;\n\n        if (stream.eat(\"#\")) {\n          if (stream.eat(\"x\")) {\n            ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n          } else {\n            ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n          }\n        } else {\n          ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n        }\n\n        return ok ? \"atom\" : \"error\";\n      } else {\n        stream.eatWhile(/[^&<]/);\n        return null;\n      }\n    }\n\n    inText.isInText = true;\n\n    function inTag(stream, state) {\n      var ch = stream.next();\n\n      if (ch == \">\" || ch == \"/\" && stream.eat(\">\")) {\n        state.tokenize = inText;\n        type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n        return \"tag bracket\";\n      } else if (ch == \"=\") {\n        type = \"equals\";\n        return null;\n      } else if (ch == \"<\") {\n        state.tokenize = inText;\n        state.state = baseState;\n        state.tagName = state.tagStart = null;\n        var next = state.tokenize(stream, state);\n        return next ? next + \" tag error\" : \"tag error\";\n      } else if (/[\\'\\\"]/.test(ch)) {\n        state.tokenize = inAttribute(ch);\n        state.stringStartCol = stream.column();\n        return state.tokenize(stream, state);\n      } else {\n        stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n        return \"word\";\n      }\n    }\n\n    function inAttribute(quote) {\n      var closure = function closure(stream, state) {\n        while (!stream.eol()) {\n          if (stream.next() == quote) {\n            state.tokenize = inTag;\n            break;\n          }\n        }\n\n        return \"string\";\n      };\n\n      closure.isInAttribute = true;\n      return closure;\n    }\n\n    function inBlock(style, terminator) {\n      return function (stream, state) {\n        while (!stream.eol()) {\n          if (stream.match(terminator)) {\n            state.tokenize = inText;\n            break;\n          }\n\n          stream.next();\n        }\n\n        return style;\n      };\n    }\n\n    function doctype(depth) {\n      return function (stream, state) {\n        var ch;\n\n        while ((ch = stream.next()) != null) {\n          if (ch == \"<\") {\n            state.tokenize = doctype(depth + 1);\n            return state.tokenize(stream, state);\n          } else if (ch == \">\") {\n            if (depth == 1) {\n              state.tokenize = inText;\n              break;\n            } else {\n              state.tokenize = doctype(depth - 1);\n              return state.tokenize(stream, state);\n            }\n          }\n        }\n\n        return \"meta\";\n      };\n    }\n\n    function Context(state, tagName, startOfLine) {\n      this.prev = state.context;\n      this.tagName = tagName || \"\";\n      this.indent = state.indented;\n      this.startOfLine = startOfLine;\n      if (config.doNotIndent.hasOwnProperty(tagName) || state.context && state.context.noIndent) this.noIndent = true;\n    }\n\n    function popContext(state) {\n      if (state.context) state.context = state.context.prev;\n    }\n\n    function maybePopContext(state, nextTagName) {\n      var parentTagName;\n\n      while (true) {\n        if (!state.context) {\n          return;\n        }\n\n        parentTagName = state.context.tagName;\n\n        if (!config.contextGrabbers.hasOwnProperty(parentTagName) || !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n          return;\n        }\n\n        popContext(state);\n      }\n    }\n\n    function baseState(type, stream, state) {\n      if (type == \"openTag\") {\n        state.tagStart = stream.column();\n        return tagNameState;\n      } else if (type == \"closeTag\") {\n        return closeTagNameState;\n      } else {\n        return baseState;\n      }\n    }\n\n    function tagNameState(type, stream, state) {\n      if (type == \"word\") {\n        state.tagName = stream.current();\n        setStyle = \"tag\";\n        return attrState;\n      } else if (config.allowMissingTagName && type == \"endTag\") {\n        setStyle = \"tag bracket\";\n        return attrState(type, stream, state);\n      } else {\n        setStyle = \"error\";\n        return tagNameState;\n      }\n    }\n\n    function closeTagNameState(type, stream, state) {\n      if (type == \"word\") {\n        var tagName = stream.current();\n        if (state.context && state.context.tagName != tagName && config.implicitlyClosed.hasOwnProperty(state.context.tagName)) popContext(state);\n\n        if (state.context && state.context.tagName == tagName || config.matchClosing === false) {\n          setStyle = \"tag\";\n          return closeState;\n        } else {\n          setStyle = \"tag error\";\n          return closeStateErr;\n        }\n      } else if (config.allowMissingTagName && type == \"endTag\") {\n        setStyle = \"tag bracket\";\n        return closeState(type, stream, state);\n      } else {\n        setStyle = \"error\";\n        return closeStateErr;\n      }\n    }\n\n    function closeState(type, _stream, state) {\n      if (type != \"endTag\") {\n        setStyle = \"error\";\n        return closeState;\n      }\n\n      popContext(state);\n      return baseState;\n    }\n\n    function closeStateErr(type, stream, state) {\n      setStyle = \"error\";\n      return closeState(type, stream, state);\n    }\n\n    function attrState(type, _stream, state) {\n      if (type == \"word\") {\n        setStyle = \"attribute\";\n        return attrEqState;\n      } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n        var tagName = state.tagName,\n            tagStart = state.tagStart;\n        state.tagName = state.tagStart = null;\n\n        if (type == \"selfcloseTag\" || config.autoSelfClosers.hasOwnProperty(tagName)) {\n          maybePopContext(state, tagName);\n        } else {\n          maybePopContext(state, tagName);\n          state.context = new Context(state, tagName, tagStart == state.indented);\n        }\n\n        return baseState;\n      }\n\n      setStyle = \"error\";\n      return attrState;\n    }\n\n    function attrEqState(type, stream, state) {\n      if (type == \"equals\") return attrValueState;\n      if (!config.allowMissing) setStyle = \"error\";\n      return attrState(type, stream, state);\n    }\n\n    function attrValueState(type, stream, state) {\n      if (type == \"string\") return attrContinuedState;\n\n      if (type == \"word\" && config.allowUnquoted) {\n        setStyle = \"string\";\n        return attrState;\n      }\n\n      setStyle = \"error\";\n      return attrState(type, stream, state);\n    }\n\n    function attrContinuedState(type, stream, state) {\n      if (type == \"string\") return attrContinuedState;\n      return attrState(type, stream, state);\n    }\n\n    return {\n      startState: function startState(baseIndent) {\n        var state = {\n          tokenize: inText,\n          state: baseState,\n          indented: baseIndent || 0,\n          tagName: null,\n          tagStart: null,\n          context: null\n        };\n        if (baseIndent != null) state.baseIndent = baseIndent;\n        return state;\n      },\n      token: function token(stream, state) {\n        if (!state.tagName && stream.sol()) state.indented = stream.indentation();\n        if (stream.eatSpace()) return null;\n        type = null;\n        var style = state.tokenize(stream, state);\n\n        if ((style || type) && style != \"comment\") {\n          setStyle = null;\n          state.state = state.state(type || style, stream, state);\n          if (setStyle) style = setStyle == \"error\" ? style + \" error\" : setStyle;\n        }\n\n        return style;\n      },\n      indent: function indent(state, textAfter, fullLine) {\n        var context = state.context; // Indent multi-line strings (e.g. css).\n\n        if (state.tokenize.isInAttribute) {\n          if (state.tagStart == state.indented) return state.stringStartCol + 1;else return state.indented + indentUnit;\n        }\n\n        if (context && context.noIndent) return CodeMirror.Pass;\n        if (state.tokenize != inTag && state.tokenize != inText) return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0; // Indent the starts of attribute names.\n\n        if (state.tagName) {\n          if (config.multilineTagIndentPastTag !== false) return state.tagStart + state.tagName.length + 2;else return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n        }\n\n        if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n        var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n\n        if (tagAfter && tagAfter[1]) {\n          // Closing tag spotted\n          while (context) {\n            if (context.tagName == tagAfter[2]) {\n              context = context.prev;\n              break;\n            } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n              context = context.prev;\n            } else {\n              break;\n            }\n          }\n        } else if (tagAfter) {\n          // Opening tag spotted\n          while (context) {\n            var grabbers = config.contextGrabbers[context.tagName];\n            if (grabbers && grabbers.hasOwnProperty(tagAfter[2])) context = context.prev;else break;\n          }\n        }\n\n        while (context && context.prev && !context.startOfLine) {\n          context = context.prev;\n        }\n\n        if (context) return context.indent + indentUnit;else return state.baseIndent || 0;\n      },\n      electricInput: /<\\/[\\s\\w:]+>$/,\n      blockCommentStart: \"<!--\",\n      blockCommentEnd: \"-->\",\n      configuration: config.htmlMode ? \"html\" : \"xml\",\n      helperType: config.htmlMode ? \"html\" : \"xml\",\n      skipAttribute: function skipAttribute(state) {\n        if (state.state == attrValueState) state.state = attrState;\n      },\n      xmlCurrentTag: function xmlCurrentTag(state) {\n        return state.tagName ? {\n          name: state.tagName,\n          close: state.type == \"closeTag\"\n        } : null;\n      },\n      xmlCurrentContext: function xmlCurrentContext(state) {\n        var context = [];\n\n        for (var cx = state.context; cx; cx = cx.prev) {\n          context.push(cx.tagName);\n        }\n\n        return context.reverse();\n      }\n    };\n  });\n  CodeMirror.defineMIME(\"text/xml\", \"xml\");\n  CodeMirror.defineMIME(\"application/xml\", \"xml\");\n  if (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\")) CodeMirror.defineMIME(\"text/html\", {\n    name: \"xml\",\n    htmlMode: true\n  });\n});\n\n/***/ }),\n\n/***/ 835:\n/***/ (function(module, exports, __webpack_require__) {\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n// Utility function that allows modes to be combined. The mode given\n// as the base argument takes care of most of the normal mode\n// functionality, but a second (typically simple) mode is used, which\n// can override the style of text. Both modes get to parse all of the\n// text, but when both assign a non-null style to a piece of code, the\n// overlay wins, unless the combine argument was true and not overridden,\n// or state.overlay.combineTokens was true, in which case the styles are\n// combined.\n(function (mod) {\n  if (true) // CommonJS\n    mod(__webpack_require__(565));else {}\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.overlayMode = function (base, overlay, combine) {\n    return {\n      startState: function startState() {\n        return {\n          base: CodeMirror.startState(base),\n          overlay: CodeMirror.startState(overlay),\n          basePos: 0,\n          baseCur: null,\n          overlayPos: 0,\n          overlayCur: null,\n          streamSeen: null\n        };\n      },\n      copyState: function copyState(state) {\n        return {\n          base: CodeMirror.copyState(base, state.base),\n          overlay: CodeMirror.copyState(overlay, state.overlay),\n          basePos: state.basePos,\n          baseCur: null,\n          overlayPos: state.overlayPos,\n          overlayCur: null\n        };\n      },\n      token: function token(stream, state) {\n        if (stream != state.streamSeen || Math.min(state.basePos, state.overlayPos) < stream.start) {\n          state.streamSeen = stream;\n          state.basePos = state.overlayPos = stream.start;\n        }\n\n        if (stream.start == state.basePos) {\n          state.baseCur = base.token(stream, state.base);\n          state.basePos = stream.pos;\n        }\n\n        if (stream.start == state.overlayPos) {\n          stream.pos = stream.start;\n          state.overlayCur = overlay.token(stream, state.overlay);\n          state.overlayPos = stream.pos;\n        }\n\n        stream.pos = Math.min(state.basePos, state.overlayPos); // state.overlay.combineTokens always takes precedence over combine,\n        // unless set to null\n\n        if (state.overlayCur == null) return state.baseCur;else if (state.baseCur != null && state.overlay.combineTokens || combine && state.overlay.combineTokens == null) return state.baseCur + \" \" + state.overlayCur;else return state.overlayCur;\n      },\n      indent: base.indent && function (state, textAfter, line) {\n        return base.indent(state.base, textAfter, line);\n      },\n      electricChars: base.electricChars,\n      innerMode: function innerMode(state) {\n        return {\n          state: state.base,\n          mode: base\n        };\n      },\n      blankLine: function blankLine(state) {\n        var baseToken, overlayToken;\n        if (base.blankLine) baseToken = base.blankLine(state.base);\n        if (overlay.blankLine) overlayToken = overlay.blankLine(state.overlay);\n        return overlayToken == null ? baseToken : combine && baseToken != null ? baseToken + \" \" + overlayToken : overlayToken;\n      }\n    };\n  };\n});\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/home/kodachi/Desktop/Frontend1/node_modules/easymde/src/js/easymde.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/addon/edit/continuelist.js","/home/kodachi/Desktop/Frontend1/node_modules/easymde/src/js/codemirror/tablist.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/addon/display/fullscreen.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/mode/meta.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/addon/display/placeholder.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/addon/display/autorefresh.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/addon/selection/mark-selection.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/addon/search/searchcursor.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/mode/gfm/gfm.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror-spell-checker/src/js/spell-checker.js","/home/kodachi/Desktop/Frontend1/node_modules/typo-js/typo.js","/home/kodachi/Desktop/Frontend1/node_modules/marked/lib/marked.js","/home/kodachi/Desktop/Frontend1/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/kodachi/Desktop/Frontend1/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/kodachi/Desktop/Frontend1/node_modules/postcss-loader/src/index.js??postcss!/home/kodachi/Desktop/Frontend1/node_modules/easymde/dist/easymde.min.css","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/lib/codemirror.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/mode/markdown/markdown.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/mode/xml/xml.js","/home/kodachi/Desktop/Frontend1/node_modules/codemirror/addon/mode/overlay.js"],"names":["CodeMirror","require","CodeMirrorSpellChecker","marked","isMac","test","navigator","platform","anchorToExternalRegex","RegExp","bindings","toggleBold","toggleItalic","drawLink","toggleHeadingSmaller","toggleHeadingBigger","drawImage","toggleBlockquote","toggleOrderedList","toggleUnorderedList","toggleCodeBlock","togglePreview","toggleStrikethrough","toggleHeading1","toggleHeading2","toggleHeading3","cleanBlock","drawTable","drawHorizontalRule","undo","redo","toggleSideBySide","toggleFullScreen","shortcuts","getBindingName","f","key","isMobile","check","a","substr","userAgent","vendor","window","opera","addAnchorTargetBlank","htmlText","match","exec","linkString","indexOf","fixedLinkString","replace","removeListStyleWhenCheckbox","parser","DOMParser","htmlDoc","parseFromString","listItems","getElementsByTagName","i","length","listItem","j","children","listItemChild","HTMLInputElement","type","style","marginLeft","listStyleType","documentElement","innerHTML","fixShortcut","name","CLASS_REGEX","getClassRegex","className","addClass","el","classRegex","removeClass","createToolbarDropdown","options","enableTooltips","parent","createToolbarButton","content","document","createElement","childrenIndex","child","childElement","toolbarBuiltInButtons","appendChild","enableActions","markup","setAttribute","undefined","action","title","createTooltip","noDisable","classList","add","noMobile","classNameParts","split","iconClasses","classNameIndex","classNamePart","push","tabIndex","icon","iconClassIndex","iconClass","onclick","e","preventDefault","open","createSep","actionName","tooltip","getState","cm","pos","getCursor","stat","getTokenAt","types","ret","data","text","bold","getLine","line","quote","italic","strikethrough","code","link","image","saved_overflow","editor","codemirror","setOption","getOption","body","overflow","wrapper","getWrapperElement","sidebyside","nextSibling","sideBySideFullscreen","easyMDEContainer","parentNode","onToggleFullScreen","maxHeight","getScrollerElement","removeProperty","height","setPreviewMaxHeight","toolbar_div","toolbarElements","fullscreen","toolbarButton","_toggleBlock","blockStyles","fenceCharsToInsert","fencing_line","styles","token_state","token","state","base","code_type","line_num","firstTok","lastTok","getLineHandle","ch","indentedCode","fencedChars","insertFencingAtSelection","cur_start","cur_end","start_line_sel","end_line_sel","sel_multi","repl_start","repl_end","_replaceSelection","setSelection","tok","is_code","block_start","block_end","lineCount","start","slice","end","replaceRange","focus","fencedTok","fence_chars","start_text","start_line","end_text","end_line","operation","search_from","next_line","next_line_last_tok","next_line_indented","indentLine","no_sel_and_starting_of_line","_toggleLine","_toggleHeading","_cleanBlock","url","promptURLs","prompt","promptTexts","insertTexts","drawUploadedImage","openBrowseFileWindow","afterImageUploaded","imageName","lastIndexOf","ext","substring","includes","uploadedImage","text_link","updateStatusBar","imageTexts","sbOnUploaded","setTimeout","sbInit","table","horizontalRule","preview","useSideBySideListener","previewNormal","lastChild","toolbar","sideBySideRenderingFunction","newValue","previewRender","value","on","off","refresh","previewClass","Array","isArray","active","startEnd","startPoint","endPoint","Object","assign","getSelection","replaceSelection","direction","size","currHeadingLevel","search","listRegexp","whitespacesRegexp","repl","_getChar","map","_checkChar","char","rt","_toggle","untoggleOnly","arr","start_chars","end_chars","join","humanFileSize","bytes","units","Math","abs","u","toFixed","_mergeProperties","target","source","property","prototype","hasOwnProperty","call","concat","constructor","extend","arguments","wordCount","pattern","m","count","charCodeAt","default","timeFormat","locale","format","hour","minute","sbOnDragEnter","sbOnDrop","sbProgress","sizeUnits","errorMessages","noFileGiven","typeNotAllowed","fileTooLarge","importError","EasyMDE","autoDownloadFA","autoDownloadFontAwesome","styleSheets","href","rel","element","console","log","showIcons","status","uploadImage","unshift","plainText","markdown","parsingConfig","highlightFormatting","autosave","minHeight","errorCallback","errorMessage","alert","imageMaxSize","imageAccept","unique_id","uniqueId","overlayMode","combine","render","initialValue","foundSavedValue","self","event","stopPropagation","imageUploadFunction","uploadImagesUsingCustomFunction","dataTransfer","files","uploadImages","clipboardData","onSuccess","onError","names","uploadImageUsingCustomFunction","itemName","gui","statusbar","matchingClasses","getElementsByClassName","textContent","markedOptions","renderingConfig","singleLineBreaks","breaks","codeSyntaxHighlighting","hljs","highlight","language","getLanguage","highlightAuto","setOptions","sanitizerFunction","_rendered","keyMaps","documentOnKeyDown","keyCode","addEventListener","mode","backdrop","defineMode","config","getMode","spellChecker","gitHubSpice","codeMirrorInstance","configureMouse","repeat","addNew","fromTextArea","theme","tabSize","indentUnit","indentWithTabs","lineNumbers","autofocus","extraKeys","lineWrapping","allowDropFileTypes","placeholder","getAttribute","styleSelectedText","scrollbarStyle","inputStyle","spellcheck","nativeSpellcheck","autoRefresh","forceSync","save","cmWrapper","insertBefore","createToolbar","createStatusbar","enabled","clearTimeout","_autosave_timeout","submit_delay","delay","calcHeight","naturalWidth","naturalHeight","viewportWidth","getComputedStyle","querySelector","width","_vm","assignImageBlockAttributes","parentEl","img","setSize","handleImages","previewImagesInEditor","querySelectorAll","forEach","parentElement","innerText","hasAttribute","srcAttr","EMDEimagesCache","keySrc","onload","src","sideBySide","createSideBySide","temp_cm","bind","cleanup","removeEventListener","isLocalStorageAvailable","localStorage","setItem","removeItem","easyMDE","binded","form","autosaveTimeoutId","loaded","getItem","setValue","getElementById","d","Date","dd","Intl","DateTimeFormat","clearAutosavedValue","imageInput","click","onChange","file","imageUrl","onErrorSup","fillErrorMessage","formData","FormData","append","imageCSRFToken","request","XMLHttpRequest","upload","onprogress","lengthComputable","progress","round","total","imageUploadEndpoint","response","JSON","parse","responseText","error","filePath","imagePathAbsolute","location","origin","statusText","onerror","send","filledErrorMessage","apply","paddingTop","parseInt","borderTopWidth","optionsMaxHeight","wrapperMaxHeight","previewMaxHeight","toString","syncSideBySidePreviewScroll","cScroll","pScroll","v","getScrollInfo","clientHeight","ratio","parseFloat","top","move","scrollHeight","scrollTop","onscroll","scrollTo","items","bar","toolbarData","toolbarGuideIcon","hideIcons","nonSeparatorIconsFollow","x","item","toolbarTips","multiple","accept","display","opacity","onUpdate","onActivity","defaultValue","getValue","val","getDoc","isPreviewActive","isSideBySideActive","isFullscreenActive","toTextArea","removeChild","remove","module","exports","mod","listRE","emptyListRE","unorderedListRE","commands","newlineAndIndentContinueMarkdownList","Pass","ranges","listSelections","replacements","head","eolState","getStateAfter","inner","innerMode","execCommand","inList","list","inQuote","cursorBeforeBullet","empty","endOfQuote","endOfList","indent","after","numbered","bullet","incrementRemainingMarkdownListNumbers","replaceSelections","startLine","lookAhead","skipCount","startItem","startIndent","nextLineNumber","nextLine","nextItem","nextIndent","newNumber","nextNumber","itemNumber","isNaN","tabAndIndentMarkdownList","spaces","shiftTabAndUnindentMarkdownList","defineOption","old","Init","setFullscreen","setNormal","wrap","fullScreenRestore","pageYOffset","scrollLeft","pageXOffset","info","modeInfo","mime","mimes","alias","findModeByMIME","toLowerCase","findModeByExtension","findModeByFileName","filename","dot","findModeByName","prev","onBlur","getInputField","placeholderCompose","onComposition","clearPlaceholder","hasFocus","setPlaceholder","elt","cssText","placeHolder","createTextNode","lineSpace","firstChild","input","nodeName","isEmpty","stopListening","offsetHeight","startListening","lastWrapHeight","timeout","hurry","_cm","markedSelection","markedSelectionStyle","reset","onCursorActivity","clear","update","CHUNK_SIZE","Pos","cmp","cmpPos","coverRange","from","to","addAt","array","cls","endLine","atEnd","mark","markText","splice","somethingSelected","coverStart","find","coverEnd","shift","pop","regexpFlags","regexp","flags","ignoreCase","global","multiline","ensureFlags","current","charAt","maybeMultiline","searchRegexpForward","doc","last","lastLine","lastIndex","string","index","searchRegexpForwardMultiline","chunk","curLine","before","inside","startCh","lastMatchIn","endMargin","newMatch","searchRegexpBackward","first","firstLine","searchRegexpBackwardMultiline","chunkSize","doFold","noFold","String","normalize","str","adjustPos","orig","folded","foldFunc","min","max","mid","len","searchStringForward","query","caseFold","fold","lines","found","cutFrom","endString","searchStringBackward","topString","SearchCursor","atOccurrence","clipPos","matches","reverse","findNext","findPrevious","result","newText","splitLines","defineExtension","defineDocExtension","cur","getSearchCursor","anchor","setSelections","urlRE","modeConfig","codeDepth","blankLine","gfmOverlay","startState","codeBlock","ateSpace","copyState","s","stream","combineTokens","skipToEnd","sol","peek","next","eatWhile","difference","eatSpace","markdownConfig","taskLists","emoji","attr","defineMIME","Typo","aff_loading","xhr_aff","readyState","aff_data","num_loaded","typo","dic_data","dic_loading","xhr_dic","rx_word","overlay","word","dictionary","affData","wordsData","settings","rules","dictionaryTable","compoundRules","compoundRuleCodes","replacementTable","memoized","path","_len","_jlen","setup","chrome","extension","dictionaryPath","readDataFile","getURL","setAffData","setWordsData","__dirname","setFunc","_readFile","asyncLoad","then","_parseAFF","rule","ONLYINCOMPOUND","_parseDIC","ruleText","expressionText","character","loadedCallback","load","obj","charset","async","promise","req","Promise","resolve","reject","overrideMimeType","fs","existsSync","readFileSync","subline","numEntries","lineParts","_removeAffixComments","definitionParts","ruleType","ruleCode","combineable","entries","charactersToRemove","additionParts","charactersToAdd","continuationClasses","parseRuleCodes","regexToMatch","entry","_removeDicComments","addWord","parts","ruleCodesArray","NEEDAFFIX","newWords","_applyRule","ii","_iilen","newWord","k","combineCode","combineRule","otherNewWords","iii","_iiilen","otherNewWord","trim","textCodes","FLAG","continuationRule","aWord","trimmedWord","checkExact","toUpperCase","capitalizedWord","hasFlag","uncapitalizedWord","ruleCodes","COMPOUNDMIN","flag","wordFlags","alphabet","suggest","limit","memoizedLimit","replacementEntry","correctedWord","edits1","words","known_only","rv","_edit","alphabetLength","lettercase","replacementLetter","correct","ed1","ed2","weighted_corrections","ed1word","sorted_corrections","sorter","b","a_val","b_val","localeCompare","sort","capitalization_scheme","working_limit","factory","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","Constructor","protoProps","staticProps","_unsupportedIterableToArray","o","minLen","_arrayLikeToArray","n","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","Symbol","iterator","done","TypeError","defaults$5","getDefaults$1","baseUrl","extensions","gfm","headerIds","headerPrefix","langPrefix","mangle","pedantic","renderer","sanitize","sanitizer","silent","smartLists","smartypants","tokenizer","walkTokens","xhtml","changeDefaults$1","newDefaults","defaults","getDefaults","changeDefaults","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","getEscapeReplacement","escape$2","html","encode","unescapeTest","unescape$1","_","fromCharCode","caret","edit$1","regex","opt","getRegex","nonWordAndColonTest","originIndependentUrl","cleanUrl$1","prot","decodeURIComponent","resolveUrl","encodeURI","baseUrls","justDomain","protocol","domain","rtrim$1","relativeBase","noopTest$1","noopTest","merge$2","splitCells$1","tableRow","row","offset","escaped","curr","cells","c","invert","l","suffLen","currChar","findClosingBracket$1","level","checkSanitizeDeprecation$1","warn","repeatString$1","helpers","escape","unescape","edit","cleanUrl","merge","splitCells","rtrim","findClosingBracket","checkSanitizeDeprecation","repeatString","defaults$4","_escape","outputLink","cap","raw","indentCodeCompensation","matchIndentToCode","indentToCode","node","matchIndentInNode","indentInNode","Tokenizer_1","Tokenizer","_proto","space","block","newline","codeBlockStyle","fences","lang","heading","trimmed","depth","nptable","header","align","hr","blockquote","bull","isordered","ordered","loose","itemMatch","bcurr","bnext","addBack","istask","ischecked","endMatch","listItemStart","task","checked","pre","def","tag","lheading","paragraph","inline","inLink","inRawBlock","trimmedUrl","rtrimSlash","lastParenIndex","linkLen","_escapes","reflink","links","nolink","emStrong","maskedSrc","prevChar","lDelim","nextChar","punctuation","lLength","rDelim","rLength","delimTotal","midDelimTotal","endReg","rDelimAst","rDelimUnd","codespan","hasNonSpaceChars","hasSpaceCharsOnBothEnds","br","del","autolink","tokens","prevCapZero","_backpedal","inlineText","merge$1","block$1","_paragraph","_label","_title","_tag","_comment","normal","inline$1","reflinkSearch","_punctuation","blockSkip","escapedEmSt","_scheme","_email","_attribute","_href","strong","middle","endAst","endUnd","em","_extended_email","Tokenizer$1","defaults$3","out","random","Lexer_1","Lexer","create","lex","lexer","lexInline","inlineTokens","blockTokens","_this","lastToken","cutSrc","lastParagraphClipped","some","extTokenizer","startBlock","startIndex","Infinity","tempSrc","tempStart","getStartIndex","errMsg","Error","l2","_this2","keepPrevChar","keys","startInline","get","defaults$2","escape$1","Renderer_1","Renderer","_code","infostring","_html","slugger","slug","startatt","listitem","checkbox","tablerow","tablecell","_text","TextRenderer_1","TextRenderer","Slugger_1","Slugger","seen","serialize","getNextSafeSlug","originalSlug","isDryRun","occurenceAccumulator","dryrun","Renderer$1","TextRenderer$1","Slugger$1","defaults$1","Parser_1","Parser","textRenderer","parseInline","l3","cell","itemBody","renderers","callback","err","pending","_tokens","message","use","args","_key","opts","childTokens","hasExtensions","pack","prevRenderer","_len2","_key2","_loop","prop","_len3","_key3","_loop2","prevTokenizer","_len4","_key4","_loop3","_step","_iterator2","_step2","_iterator3","_step3","_iterator4","_step4","_cell","_iterator","marked_1","gecko","ie_upto10","ie_11up","edge","ie","ie_version","documentMode","webkit","qtwebkit","presto","safari","mac_geMountainLion","phantom","ios","maxTouchPoints","android","mobile","mac","chromeOS","windows","presto_version","Number","flipCtrlCmd","captureRightClick","classTest","rmClass","removeChildren","childNodes","removeChildrenAndAdd","eltP","range","createRange","endNode","r","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","contains","nodeType","host","activeElt","activeElement","shadowRoot","joinClasses","as","selectInput","select","selectionStart","selectionEnd","_e","copyObj","overwrite","countColumn","startValue","nextTab","Delayed","id","time","handler","onTimeout","set","ms","scrollerGap","sel_dontScroll","scroll","sel_mouse","sel_move","findColumn","goal","col","skipped","spaceStrs","spaceStr","lst","insertSorted","score","priority","nothing","createObj","inst","nonASCIISingleCaseWordChar","isWordCharBasic","isWordChar","helper","extendingChars","isExtendingChar","skipExtendingChars","dir","findFirst","pred","midF","ceil","floor","iterateBidiSections","order","part","bidiOther","getBidiPartAt","sticky","bidiOrdering","lowTypes","arabicTypes","charType","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","outerType","i$1","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","i$5","cur$1","type$4","i$6","end$1","replace$1","j$1","i$7","at","isRTL","j$2","nstart","getOrder","noHandlers","emitter","attachEvent","_handlers","getHandlers","detachEvent","signal","handlers","signalDOMEvent","override","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","ctrlKey","dragAndDrop","div","zwspSupported","zeroWidthElement","measure","offsetWidth","badBidiRects","hasBadBidiRects","txt","r0","getBoundingClientRect","r1","left","right","splitLinesAuto","nl","hasSelection","te","ownerDocument","selection","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","hasBadZoomedRects","fromRange","modes","mimeModes","dependencies","spec","resolveMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","nstate","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","eol","eat","ok","skipTo","backUp","column","indentation","consume","caseInsensitive","cased","hideFirstChars","oracle","baseToken","sz","getBetween","iter","getLines","updateLineHeight","diff","lineNo","no","lineAtHeight","h","outer","lh","isLine","lineNumberFor","lineNumberFormatter","firstLineNumber","equalCursorPos","copyPos","maxPos","minPos","clipLine","clipToLen","linelen","clipPosArray","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","fromSaved","saved","copy","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","overlays","i_end","opaque","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","styleClasses","highlightFrontier","modeFrontier","precise","findStartLine","processLine","viewFrom","viewTo","startAt","callBlankLine","readToken","Token","takeToken","asArray","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","indented","retreatFrontier","sawReadOnlySpans","sawCollapsedSpans","seeReadOnlySpans","seeCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","op","inThisOp","WeakSet","markedSpans","has","attachLine","markedSpansBefore","isInsert","nw","startsBefore","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","endCh","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","span$1","found$1","clearEmptySpans","newMarkers","gap","gapMarkers","clearWhenEmpty","removeReadOnlyRanges","markers","readOnly","mk","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","findMaxLine","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","updateLine","estHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","trailingSpace","splitSpaces","rest","addToken","buildToken","buildTokenBadBidi","allowFrontierUpdate","externalMeasured","insertLineContent","maps","caches","defaultSpecialCharPlaceholder","startStyle","endStyle","css","attributes","displayText","special","specialChars","mustWrap","createDocumentFragment","txt$1","tabWidth","specialCharPlaceholder","fullStyle","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","widget","needsContentAttribute","setUneditable","allText","nextChange","spanStyle","spanEndStyle","spanStartStyle","foundBookmarks","endStyles","upto","tokenText","LineView","hidden","buildViewArray","nextPos","view","operationGroup","pushOperation","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","callbacks","cursorActivityCalled","finishOperation","endCb","orphanDelayedCallbacks","signalLater","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","updateLineBackground","background","getLineContent","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","wrap$1","gutterWrap","lineNumber","gutterLeft","lineNumInnerWidth","gutterSpecs","gutterWidth","alignable","isWidget","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","position","widgetHeight","parentStyle","gutters","clientWidth","eventInWidget","sizer","mover","offsetTop","paddingVert","paddingH","cachedPaddingH","currentStyle","paddingRight","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","barHeight","ensureLineHeights","rect","wrapping","curWidth","heights","rects","getClientRects","bottom","mapFromLineView","updateExternalMeasurement","lineMeasure","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","measureCharInner","bogus","rtop","rbottom","nullRect","nodeAndOffsetInLineMap","mStart","mEnd","getUsefulRect","place","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageScrollY","marginTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","getBidi","partPos","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","targetTop","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","chAround","boxAround","baseX","atLeft","atStart","_lineNo","ref","closestDist","endX","dist","measureText","textHeight","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","clientX","clientY","e$1","colDiff","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","primIndex","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","sizerWidth","docLTR","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","fromPos","toPos","openStart","openEnd","openLeft","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","ensureFocus","onFocus","delayBlurEvent","delayingBlurEvent","draggingText","selForContextMenu","receivedFocus","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","maybeScrollWindow","doScroll","innerHeight","scrollNode","scrollIntoView","scrollPosIntoView","margin","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","gutterSpace","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollbars","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","checkedZeroWidth","minWidth","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","maybeDisable","elementFromPoint","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","initScrollbars","axis","nextOpId","startOperation","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","markArrays","endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","methodOp","docMethodOp","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","scrollbarsClipped","marginBottom","borderRightWidth","selectionSnapshot","anchorNode","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","removeAllRanges","addRange","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapWidth","toUpdate","selSnapshot","patchDisplay","selectionDiv","reportedViewFrom","reportedViewTo","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","updateGutterSpace","alignWidgets","comp","innerW","lineGutter","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","normalizeSelection","mayTouch","selectionsMayTouch","prim","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","linesFor","lastText","lastSpans","nlines","insert","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","shared","attachDoc","setDirectionClass","directionChanged","History","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","newChanges","extendRange","posBefore","extendSelection","extendSelections","heads","newSel","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","filter","returned","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","rebaseHistSelSingle","rebaseHistArray","sub","copied","changeLine","handle","changeType","LeafChunk","removeInner","insertInner","iterN","BranchChunk","oldHeight","remaining","leaf","maybeSpill","me","spilled","sibling","myIndex","used","LineWidget","adjustScrollWhenAboveVisible","this$1","oldH","addLineWidget","insertAt","aboveVisible","nextMarkerId","TextMarker","withOp","visual","dHeight","markTextShared","replacedWith","addToHistory","clearOnEnter","clearHistory","SharedTextMarker","cloneNode","isParent","findSharedMarkers","findMarks","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","lineSeparator","getRange","getLineNumber","getLineHandleVisualStart","setCursor","extendSelectionsBy","addSelection","getSelections","dup","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","isReadOnly","FileReader","File","read","markAsReadAndPasteIfAllFilesAreRead","t","readTextFromFile","reader","readAsText","text$1","getData","selected","onDragStart","setData","effectAllowed","setDragImage","_top","onDragOver","frag","dragCursor","forEachCodeMirror","byClass","editors","globalsRegistered","ensureGlobalHandlers","registerGlobalHandlers","resizeTimer","onResize","keyNames","keyMap","basic","pcDefault","emacsy","macDefault","normalizeKeyName","alt","ctrl","cmd","normalizeKeyMap","keymap","keyname","lookupKey","getKeyMap","fallthrough","isModifierKey","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","moveInStorageOrder","prep","moveVisually","bidi","mv","getWrappedLineExtent","searchInVisualLine","getRes","res","nextCh","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","leftPos","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","lineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","defaultTab","transposeChars","newlineAndIndent","sels","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","lookupKeyForEditor","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","handleKeyBinding","motion","handleCharBinding","lastStoppedKey","onKeyDown","getField","handled","showCrossHair","up","onKeyUp","onKeyPress","charCode","DOUBLECLICK_DELAY","PastClick","compare","lastClick","lastDoubleClick","clickRepeat","now","onMouseDown","supportsTouch","clickInGutter","selectingText","handleMappedButton","leftButtonDown","onContextMenu","option","unit","moveOnDrag","behavior","contained","dragDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","preventScroll","e2","rangeForUnit","findWordAt","ourRange","ourIndex","startSel","lastPos","extendTo","startCol","posCol","oldRange","ranges$1","bidiSimplify","editorSize","counter","curCount","buttons","anchorLine","boundary","headIndex","usePart","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","optionHandlers","defineOptions","deflt","notOnInit","newBreaks","autocorrect","autocapitalize","detach","attach","wrappingChanged","integer","blur","readOnlyChanged","screenReaderLabelChanged","dragDropChanged","resetPosition","wasOn","funcs","dragFunctions","toggle","enter","over","leave","drop","inputStyles","pasteIncoming","cutIncoming","registerEventHandlers","finishInit","initHooks","textRendering","touchFinished","prevTouch","finishTouch","isMouseLikeTouchEvent","touch","radiusX","radiusY","farAway","pageX","pageY","inp","defineInitHook","how","aggressive","curSpace","curSpaceString","indentString","pos$1","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","hiddenTextarea","border","addEditorMethods","addKeyMap","removeKeyMap","addOverlay","modeSpec","removeOverlay","newRanges","getLineTokens","getTokenTypeAt","getHelper","getHelpers","help","_global","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","hitSide","rtlMoveVisually","findPosV","goalColumn","goals","headPos","startChar","interpret","swapDoc","phrase","phraseText","phrases","getGutterElement","registerHelper","registerGlobalHelper","predicate","origDir","lineDir","findNextLine","moveOnce","boundToLine","astral","sawType","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","contentEditable","belongsToInput","updateFromDOM","readFromDOMSoon","forceCompositionEnd","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","label","removeAttribute","showMultipleSelections","curAnchor","domToPos","curFocus","bad","posToDOM","rangeCount","getRangeAt","rng","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","pollSelection","poll","pollInterval","isInGutter","pollContent","fromIndex","fromNode","toIndex","toNode","previousSibling","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","scan","badPos","closing","extraLinebreak","recognizeMarker","close","addText","walk","cmText","markerID","isBlock","nodeValue","lineNode","locateNodeInLineView","textNode","topNode","curNode","dist$1","TextareaInput","prevInput","pollingFast","createField","textarea","fastPoll","prepareCopyCut","dispatchEvent","Event","_display","moveInputWithCursor","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","oldScrollY","scrollY","rehide","detectingSelectAll","prepareSelectAllHack","extval","mouseup","disabled","tabindex","realSubmit","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","addLegacyProps","dontDelegate","method","func","version","cmCfg","modeCfg","htmlMode","htmlModeMissing","maxBlockquoteDepth","fencedCodeBlockHighlighting","fencedCodeBlockDefaultMode","xml","tokenTypeOverrides","tokenTypes","list1","list2","list3","imageAltText","imageMarker","formatting","linkInline","linkEmail","linkText","linkHref","tokenType","hrRE","taskListRE","atxHeaderRE","allowAtxHeaderWithoutSpace","setextHeaderRE","textRE","fencedCodeRE","linkDefRE","expandedTab","switchInline","switchBlock","lineIsEmpty","linkTitle","htmlBlock","exit","htmlState","tagStart","tokenize","isInText","inlineNormal","blockNormal","trailingSpaceNewLine","prevLine","thisLine","firstTokenOnLine","prevLineLineIsEmpty","prevLineIsIndentedCode","prevLineIsHr","prevLineIsList","maxNonCodeIndentation","listStack","lineIndentation","indentationDiff","allowsInlineContinuation","fencedCodeEnd","isHr","getType","setext","listType","taskList","fencedEndRE","localMode","localState","local","footnoteLink","md_inside","currListInd","hasExitedList","maxFencedEndInd","returnType","taskOpen","taskClosed","listMod","handleText","matchCh","previousFormatting","formattingEscape","atts","leftFlanking","rightFlanking","setEm","setStrong","retType","getLinkHrefInside","linkRE","endChar","returnState","footnoteLinkInside","footnoteUrl","textAfter","blockCommentStart","blockCommentEnd","closeBrackets","htmlConfig","autoSelfClosers","implicitlyClosed","contextGrabbers","doNotIndent","allowUnquoted","allowMissing","xmlConfig","allowMissingTagName","editorConf","config_","setStyle","inText","chain","inBlock","doctype","inTag","baseState","tagName","inAttribute","stringStartCol","closure","isInAttribute","terminator","startOfLine","noIndent","popContext","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","attrState","matchClosing","closeState","closeStateErr","_stream","attrEqState","attrValueState","attrContinuedState","baseIndent","fullLine","multilineTagIndentPastTag","multilineTagIndentFactor","alignCDATA","tagAfter","grabbers","configuration","skipAttribute","xmlCurrentTag","xmlCurrentContext","cx","basePos","baseCur","overlayPos","overlayCur","streamSeen","overlayToken"],"mappings":"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","file":"x","sourcesContent":["'use strict';\nvar CodeMirror = require('codemirror');\nrequire('codemirror/addon/edit/continuelist.js');\nrequire('./codemirror/tablist');\nrequire('codemirror/addon/display/fullscreen.js');\nrequire('codemirror/mode/markdown/markdown.js');\nrequire('codemirror/addon/mode/overlay.js');\nrequire('codemirror/addon/display/placeholder.js');\nrequire('codemirror/addon/display/autorefresh.js');\nrequire('codemirror/addon/selection/mark-selection.js');\nrequire('codemirror/addon/search/searchcursor.js');\nrequire('codemirror/mode/gfm/gfm.js');\nrequire('codemirror/mode/xml/xml.js');\nvar CodeMirrorSpellChecker = require('codemirror-spell-checker');\nvar marked = require('marked/lib/marked');\n\n\n// Some variables\nvar isMac = /Mac/.test(navigator.platform);\nvar anchorToExternalRegex = new RegExp(/(<a.*?https?:\\/\\/.*?[^a]>)+?/g);\n\n// Mapping of actions that can be bound to keyboard shortcuts or toolbar buttons\nvar bindings = {\n    'toggleBold': toggleBold,\n    'toggleItalic': toggleItalic,\n    'drawLink': drawLink,\n    'toggleHeadingSmaller': toggleHeadingSmaller,\n    'toggleHeadingBigger': toggleHeadingBigger,\n    'drawImage': drawImage,\n    'toggleBlockquote': toggleBlockquote,\n    'toggleOrderedList': toggleOrderedList,\n    'toggleUnorderedList': toggleUnorderedList,\n    'toggleCodeBlock': toggleCodeBlock,\n    'togglePreview': togglePreview,\n    'toggleStrikethrough': toggleStrikethrough,\n    'toggleHeading1': toggleHeading1,\n    'toggleHeading2': toggleHeading2,\n    'toggleHeading3': toggleHeading3,\n    'cleanBlock': cleanBlock,\n    'drawTable': drawTable,\n    'drawHorizontalRule': drawHorizontalRule,\n    'undo': undo,\n    'redo': redo,\n    'toggleSideBySide': toggleSideBySide,\n    'toggleFullScreen': toggleFullScreen,\n};\n\nvar shortcuts = {\n    'toggleBold': 'Cmd-B',\n    'toggleItalic': 'Cmd-I',\n    'drawLink': 'Cmd-K',\n    'toggleHeadingSmaller': 'Cmd-H',\n    'toggleHeadingBigger': 'Shift-Cmd-H',\n    'cleanBlock': 'Cmd-E',\n    'drawImage': 'Cmd-Alt-I',\n    'toggleBlockquote': 'Cmd-\\'',\n    'toggleOrderedList': 'Cmd-Alt-L',\n    'toggleUnorderedList': 'Cmd-L',\n    'toggleCodeBlock': 'Cmd-Alt-C',\n    'togglePreview': 'Cmd-P',\n    'toggleSideBySide': 'F9',\n    'toggleFullScreen': 'F11',\n};\n\nvar getBindingName = function (f) {\n    for (var key in bindings) {\n        if (bindings[key] === f) {\n            return key;\n        }\n    }\n    return null;\n};\n\nvar isMobile = function () {\n    var check = false;\n    (function (a) {\n        if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0, 4))) check = true;\n    })(navigator.userAgent || navigator.vendor || window.opera);\n    return check;\n};\n\n/**\n * Modify HTML to add 'target=\"_blank\"' to links so they open in new tabs by default.\n * @param {string} htmlText - HTML to be modified.\n * @return {string} The modified HTML text.\n */\nfunction addAnchorTargetBlank(htmlText) {\n    var match;\n    while ((match = anchorToExternalRegex.exec(htmlText)) !== null) {\n        // With only one capture group in the RegExp, we can safely take the first index from the match.\n        var linkString = match[0];\n\n        if (linkString.indexOf('target=') === -1) {\n            var fixedLinkString = linkString.replace(/>$/, ' target=\"_blank\">');\n            htmlText = htmlText.replace(linkString, fixedLinkString);\n        }\n    }\n    return htmlText;\n}\n\n/**\n * Modify HTML to remove the list-style when rendering checkboxes.\n * @param {string} htmlText - HTML to be modified.\n * @return {string} The modified HTML text.\n */\nfunction removeListStyleWhenCheckbox(htmlText) {\n\n    var parser = new DOMParser();\n    var htmlDoc = parser.parseFromString(htmlText, 'text/html');\n    var listItems = htmlDoc.getElementsByTagName('li');\n\n    for (var i = 0; i < listItems.length; i++) {\n        var listItem = listItems[i];\n\n        for (var j = 0; j < listItem.children.length; j++) {\n            var listItemChild = listItem.children[j];\n\n            if (listItemChild instanceof HTMLInputElement && listItemChild.type === 'checkbox') {\n                // From Github: margin: 0 .2em .25em -1.6em;\n                listItem.style.marginLeft = '-1.5em';\n                listItem.style.listStyleType = 'none';\n            }\n        }\n    }\n\n    return htmlDoc.documentElement.innerHTML;\n}\n\n/**\n * Fix shortcut. Mac use Command, others use Ctrl.\n */\nfunction fixShortcut(name) {\n    if (isMac) {\n        name = name.replace('Ctrl', 'Cmd');\n    } else {\n        name = name.replace('Cmd', 'Ctrl');\n    }\n    return name;\n}\n\n/**\n * Class handling utility methods.\n */\nvar CLASS_REGEX = {};\n\n/**\n * Convert a className string into a regex for matching (and cache).\n * Note that the RegExp includes trailing spaces for replacement\n * (to ensure that removing a class from the middle of the string will retain\n *  spacing between other classes.)\n * @param {String} className Class name to convert to regex for matching.\n * @returns {RegExp} Regular expression option that will match className.\n */\nfunction getClassRegex (className) {\n    return CLASS_REGEX[className] || (CLASS_REGEX[className] = new RegExp('\\\\s*' + className + '(\\\\s*)', 'g'));\n}\n\n/**\n * Add a class string to an element.\n * @param {Element} el DOM element on which to add className.\n * @param {String} className Class string to apply\n * @returns {void}\n */\nfunction addClass (el, className) {\n    if (!el || !className) return;\n    var classRegex = getClassRegex(className);\n    if (el.className.match(classRegex)) return; // already applied\n    el.className += ' ' + className;\n}\n\n/**\n * Remove a class string from an element.\n * @param {Element} el DOM element from which to remove className.\n * @param {String} className Class string to remove\n * @returns {void}\n */\n function removeClass (el, className) {\n    if (!el || !className) return;\n    var classRegex = getClassRegex(className);\n    if (!el.className.match(classRegex)) return; // not available to remove\n    el.className = el.className.replace(classRegex, '$1');\n}\n\n\n/**\n * Create dropdown block\n */\nfunction createToolbarDropdown(options, enableTooltips, shortcuts, parent) {\n    var el = createToolbarButton(options, false, enableTooltips, shortcuts, 'button', parent);\n    el.className += ' easymde-dropdown';\n    var content = document.createElement('div');\n    content.className = 'easymde-dropdown-content';\n    for (var childrenIndex = 0; childrenIndex < options.children.length; childrenIndex++) {\n\n        var child = options.children[childrenIndex];\n        var childElement;\n\n        if (typeof child === 'string' && child in toolbarBuiltInButtons) {\n            childElement = createToolbarButton(toolbarBuiltInButtons[child], true, enableTooltips, shortcuts, 'button', parent);\n        } else {\n            childElement = createToolbarButton(child, true, enableTooltips, shortcuts, 'button', parent);\n        }\n\n        content.appendChild(childElement);\n    }\n    el.appendChild(content);\n    return el;\n}\n\n/**\n * Create button element for toolbar.\n */\nfunction createToolbarButton(options, enableActions, enableTooltips, shortcuts, markup, parent) {\n    options = options || {};\n    var el = document.createElement(markup);\n    el.className = options.name;\n    el.setAttribute('type', markup);\n    enableTooltips = (enableTooltips == undefined) ? true : enableTooltips;\n\n    // Properly hande custom shortcuts\n    if (options.name && options.name in shortcuts) {\n        bindings[options.name] = options.action;\n    }\n\n    if (options.title && enableTooltips) {\n        el.title = createTooltip(options.title, options.action, shortcuts);\n\n        if (isMac) {\n            el.title = el.title.replace('Ctrl', '⌘');\n            el.title = el.title.replace('Alt', '⌥');\n        }\n    }\n\n    if (options.noDisable) {\n        el.classList.add('no-disable');\n    }\n\n    if (options.noMobile) {\n        el.classList.add('no-mobile');\n    }\n\n    // Prevent errors if there is no class name in custom options\n    var classNameParts = [];\n    if(typeof options.className !== 'undefined') {\n        classNameParts = options.className.split(' ');\n    }\n\n    // Provide backwards compatibility with simple-markdown-editor by adding custom classes to the button.\n    var iconClasses = [];\n    for (var classNameIndex = 0; classNameIndex < classNameParts.length; classNameIndex++) {\n        var classNamePart = classNameParts[classNameIndex];\n        // Split icon classes from the button.\n        // Regex will detect \"fa\", \"fas\", \"fa-something\" and \"fa-some-icon-1\", but not \"fanfare\".\n        if (classNamePart.match(/^fa([srlb]|(-[\\w-]*)|$)/)) {\n            iconClasses.push(classNamePart);\n        } else {\n            el.classList.add(classNamePart);\n        }\n    }\n\n    el.tabIndex = -1;\n\n    // Create icon element and append as a child to the button\n    var icon = document.createElement('i');\n    for (var iconClassIndex = 0; iconClassIndex < iconClasses.length; iconClassIndex++) {\n        var iconClass = iconClasses[iconClassIndex];\n        icon.classList.add(iconClass);\n    }\n    el.appendChild(icon);\n\n    // If there is a custom icon markup set, use that\n    if (typeof options.icon !== 'undefined') {\n        el.innerHTML = options.icon;\n    }\n\n    if (options.action && enableActions) {\n        if (typeof options.action === 'function') {\n            el.onclick = function (e) {\n                e.preventDefault();\n                options.action(parent);\n            };\n        } else if (typeof options.action === 'string') {\n            el.onclick = function (e) {\n                e.preventDefault();\n                window.open(options.action, '_blank');\n            };\n        }\n    }\n\n    return el;\n}\n\nfunction createSep() {\n    var el = document.createElement('i');\n    el.className = 'separator';\n    el.innerHTML = '|';\n    return el;\n}\n\nfunction createTooltip(title, action, shortcuts) {\n    var actionName;\n    var tooltip = title;\n\n    if (action) {\n        actionName = getBindingName(action);\n        if (shortcuts[actionName]) {\n            tooltip += ' (' + fixShortcut(shortcuts[actionName]) + ')';\n        }\n    }\n\n    return tooltip;\n}\n\n/**\n * The state of CodeMirror at the given position.\n */\nfunction getState(cm, pos) {\n    pos = pos || cm.getCursor('start');\n    var stat = cm.getTokenAt(pos);\n    if (!stat.type) return {};\n\n    var types = stat.type.split(' ');\n\n    var ret = {},\n        data, text;\n    for (var i = 0; i < types.length; i++) {\n        data = types[i];\n        if (data === 'strong') {\n            ret.bold = true;\n        } else if (data === 'variable-2') {\n            text = cm.getLine(pos.line);\n            if (/^\\s*\\d+\\.\\s/.test(text)) {\n                ret['ordered-list'] = true;\n            } else {\n                ret['unordered-list'] = true;\n            }\n        } else if (data === 'atom') {\n            ret.quote = true;\n        } else if (data === 'em') {\n            ret.italic = true;\n        } else if (data === 'quote') {\n            ret.quote = true;\n        } else if (data === 'strikethrough') {\n            ret.strikethrough = true;\n        } else if (data === 'comment') {\n            ret.code = true;\n        } else if (data === 'link') {\n            ret.link = true;\n        } else if (data === 'tag') {\n            ret.image = true;\n        } else if (data.match(/^header(-[1-6])?$/)) {\n            ret[data.replace('header', 'heading')] = true;\n        }\n    }\n    return ret;\n}\n\n\n// Saved overflow setting\nvar saved_overflow = '';\n\n/**\n * Toggle full screen of the editor.\n */\nfunction toggleFullScreen(editor) {\n    // Set fullscreen\n    var cm = editor.codemirror;\n    cm.setOption('fullScreen', !cm.getOption('fullScreen'));\n\n\n    // Prevent scrolling on body during fullscreen active\n    if (cm.getOption('fullScreen')) {\n        saved_overflow = document.body.style.overflow;\n        document.body.style.overflow = 'hidden';\n    } else {\n        document.body.style.overflow = saved_overflow;\n    }\n\n    var wrapper = cm.getWrapperElement();\n    var sidebyside = wrapper.nextSibling;\n\n    if (/editor-preview-active-side/.test(sidebyside.className)) {\n        if (editor.options.sideBySideFullscreen === false) {\n            // if side-by-side not-fullscreen ok, apply classes as needed\n            var easyMDEContainer = wrapper.parentNode;\n            if (cm.getOption('fullScreen')) {\n                removeClass(easyMDEContainer, 'sided--no-fullscreen');\n            } else {\n                addClass(easyMDEContainer, 'sided--no-fullscreen');\n            }\n        } else {\n            toggleSideBySide(editor);\n        }\n    }\n\n    if (editor.options.onToggleFullScreen) {\n        editor.options.onToggleFullScreen(cm.getOption('fullScreen') || false);\n    }\n\n    // Remove or set maxHeight\n    if (typeof editor.options.maxHeight !== 'undefined') {\n        if (cm.getOption('fullScreen')) {\n            cm.getScrollerElement().style.removeProperty('height');\n            sidebyside.style.removeProperty('height');\n        } else {\n            cm.getScrollerElement().style.height = editor.options.maxHeight;\n            editor.setPreviewMaxHeight();\n        }\n    }\n\n\n    // Update toolbar class\n    if (!/fullscreen/.test(editor.toolbar_div.className)) {\n        editor.toolbar_div.className += ' fullscreen';\n    } else {\n        editor.toolbar_div.className = editor.toolbar_div.className.replace(/\\s*fullscreen\\b/, '');\n    }\n\n\n    // Update toolbar button\n    if (editor.toolbarElements && editor.toolbarElements.fullscreen) {\n        var toolbarButton = editor.toolbarElements.fullscreen;\n\n        if (!/active/.test(toolbarButton.className)) {\n            toolbarButton.className += ' active';\n        } else {\n            toolbarButton.className = toolbarButton.className.replace(/\\s*active\\s*/g, '');\n        }\n    }\n}\n\n\n/**\n * Action for toggling bold.\n */\nfunction toggleBold(editor) {\n    _toggleBlock(editor, 'bold', editor.options.blockStyles.bold);\n}\n\n\n/**\n * Action for toggling italic.\n */\nfunction toggleItalic(editor) {\n    _toggleBlock(editor, 'italic', editor.options.blockStyles.italic);\n}\n\n\n/**\n * Action for toggling strikethrough.\n */\nfunction toggleStrikethrough(editor) {\n    _toggleBlock(editor, 'strikethrough', '~~');\n}\n\n/**\n * Action for toggling code block.\n */\nfunction toggleCodeBlock(editor) {\n    var fenceCharsToInsert = editor.options.blockStyles.code;\n\n    function fencing_line(line) {\n        /* return true, if this is a ``` or ~~~ line */\n        if (typeof line !== 'object') {\n            throw 'fencing_line() takes a \\'line\\' object (not a line number, or line text).  Got: ' + typeof line + ': ' + line;\n        }\n        return line.styles && line.styles[2] && line.styles[2].indexOf('formatting-code-block') !== -1;\n    }\n\n    function token_state(token) {\n        // base goes an extra level deep when mode backdrops are used, e.g. spellchecker on\n        return token.state.base.base || token.state.base;\n    }\n\n    function code_type(cm, line_num, line, firstTok, lastTok) {\n        /*\n         * Return \"single\", \"indented\", \"fenced\" or false\n         *\n         * cm and line_num are required.  Others are optional for efficiency\n         *   To check in the middle of a line, pass in firstTok yourself.\n         */\n        line = line || cm.getLineHandle(line_num);\n        firstTok = firstTok || cm.getTokenAt({\n            line: line_num,\n            ch: 1,\n        });\n        lastTok = lastTok || (!!line.text && cm.getTokenAt({\n            line: line_num,\n            ch: line.text.length - 1,\n        }));\n        var types = firstTok.type ? firstTok.type.split(' ') : [];\n        if (lastTok && token_state(lastTok).indentedCode) {\n            // have to check last char, since first chars of first line aren\"t marked as indented\n            return 'indented';\n        } else if (types.indexOf('comment') === -1) {\n            // has to be after \"indented\" check, since first chars of first indented line aren\"t marked as such\n            return false;\n        } else if (token_state(firstTok).fencedChars || token_state(lastTok).fencedChars || fencing_line(line)) {\n            return 'fenced';\n        } else {\n            return 'single';\n        }\n    }\n\n    function insertFencingAtSelection(cm, cur_start, cur_end, fenceCharsToInsert) {\n        var start_line_sel = cur_start.line + 1,\n            end_line_sel = cur_end.line + 1,\n            sel_multi = cur_start.line !== cur_end.line,\n            repl_start = fenceCharsToInsert + '\\n',\n            repl_end = '\\n' + fenceCharsToInsert;\n        if (sel_multi) {\n            end_line_sel++;\n        }\n        // handle last char including \\n or not\n        if (sel_multi && cur_end.ch === 0) {\n            repl_end = fenceCharsToInsert + '\\n';\n            end_line_sel--;\n        }\n        _replaceSelection(cm, false, [repl_start, repl_end]);\n        cm.setSelection({\n            line: start_line_sel,\n            ch: 0,\n        }, {\n            line: end_line_sel,\n            ch: 0,\n        });\n    }\n\n    var cm = editor.codemirror,\n        cur_start = cm.getCursor('start'),\n        cur_end = cm.getCursor('end'),\n        tok = cm.getTokenAt({\n            line: cur_start.line,\n            ch: cur_start.ch || 1,\n        }), // avoid ch 0 which is a cursor pos but not token\n        line = cm.getLineHandle(cur_start.line),\n        is_code = code_type(cm, cur_start.line, line, tok);\n    var block_start, block_end, lineCount;\n\n    if (is_code === 'single') {\n        // similar to some EasyMDE _toggleBlock logic\n        var start = line.text.slice(0, cur_start.ch).replace('`', ''),\n            end = line.text.slice(cur_start.ch).replace('`', '');\n        cm.replaceRange(start + end, {\n            line: cur_start.line,\n            ch: 0,\n        }, {\n            line: cur_start.line,\n            ch: 99999999999999,\n        });\n        cur_start.ch--;\n        if (cur_start !== cur_end) {\n            cur_end.ch--;\n        }\n        cm.setSelection(cur_start, cur_end);\n        cm.focus();\n    } else if (is_code === 'fenced') {\n        if (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n            // use selection\n\n            // find the fenced line so we know what type it is (tilde, backticks, number of them)\n            for (block_start = cur_start.line; block_start >= 0; block_start--) {\n                line = cm.getLineHandle(block_start);\n                if (fencing_line(line)) {\n                    break;\n                }\n            }\n            var fencedTok = cm.getTokenAt({\n                line: block_start,\n                ch: 1,\n            });\n            var fence_chars = token_state(fencedTok).fencedChars;\n            var start_text, start_line;\n            var end_text, end_line;\n            // check for selection going up against fenced lines, in which case we don't want to add more fencing\n            if (fencing_line(cm.getLineHandle(cur_start.line))) {\n                start_text = '';\n                start_line = cur_start.line;\n            } else if (fencing_line(cm.getLineHandle(cur_start.line - 1))) {\n                start_text = '';\n                start_line = cur_start.line - 1;\n            } else {\n                start_text = fence_chars + '\\n';\n                start_line = cur_start.line;\n            }\n            if (fencing_line(cm.getLineHandle(cur_end.line))) {\n                end_text = '';\n                end_line = cur_end.line;\n                if (cur_end.ch === 0) {\n                    end_line += 1;\n                }\n            } else if (cur_end.ch !== 0 && fencing_line(cm.getLineHandle(cur_end.line + 1))) {\n                end_text = '';\n                end_line = cur_end.line + 1;\n            } else {\n                end_text = fence_chars + '\\n';\n                end_line = cur_end.line + 1;\n            }\n            if (cur_end.ch === 0) {\n                // full last line selected, putting cursor at beginning of next\n                end_line -= 1;\n            }\n            cm.operation(function () {\n                // end line first, so that line numbers don't change\n                cm.replaceRange(end_text, {\n                    line: end_line,\n                    ch: 0,\n                }, {\n                    line: end_line + (end_text ? 0 : 1),\n                    ch: 0,\n                });\n                cm.replaceRange(start_text, {\n                    line: start_line,\n                    ch: 0,\n                }, {\n                    line: start_line + (start_text ? 0 : 1),\n                    ch: 0,\n                });\n            });\n            cm.setSelection({\n                line: start_line + (start_text ? 1 : 0),\n                ch: 0,\n            }, {\n                line: end_line + (start_text ? 1 : -1),\n                ch: 0,\n            });\n            cm.focus();\n        } else {\n            // no selection, search for ends of this fenced block\n            var search_from = cur_start.line;\n            if (fencing_line(cm.getLineHandle(cur_start.line))) { // gets a little tricky if cursor is right on a fenced line\n                if (code_type(cm, cur_start.line + 1) === 'fenced') {\n                    block_start = cur_start.line;\n                    search_from = cur_start.line + 1; // for searching for \"end\"\n                } else {\n                    block_end = cur_start.line;\n                    search_from = cur_start.line - 1; // for searching for \"start\"\n                }\n            }\n            if (block_start === undefined) {\n                for (block_start = search_from; block_start >= 0; block_start--) {\n                    line = cm.getLineHandle(block_start);\n                    if (fencing_line(line)) {\n                        break;\n                    }\n                }\n            }\n            if (block_end === undefined) {\n                lineCount = cm.lineCount();\n                for (block_end = search_from; block_end < lineCount; block_end++) {\n                    line = cm.getLineHandle(block_end);\n                    if (fencing_line(line)) {\n                        break;\n                    }\n                }\n            }\n            cm.operation(function () {\n                cm.replaceRange('', {\n                    line: block_start,\n                    ch: 0,\n                }, {\n                    line: block_start + 1,\n                    ch: 0,\n                });\n                cm.replaceRange('', {\n                    line: block_end - 1,\n                    ch: 0,\n                }, {\n                    line: block_end,\n                    ch: 0,\n                });\n            });\n            cm.focus();\n        }\n    } else if (is_code === 'indented') {\n        if (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n            // use selection\n            block_start = cur_start.line;\n            block_end = cur_end.line;\n            if (cur_end.ch === 0) {\n                block_end--;\n            }\n        } else {\n            // no selection, search for ends of this indented block\n            for (block_start = cur_start.line; block_start >= 0; block_start--) {\n                line = cm.getLineHandle(block_start);\n                if (line.text.match(/^\\s*$/)) {\n                    // empty or all whitespace - keep going\n                    continue;\n                } else {\n                    if (code_type(cm, block_start, line) !== 'indented') {\n                        block_start += 1;\n                        break;\n                    }\n                }\n            }\n            lineCount = cm.lineCount();\n            for (block_end = cur_start.line; block_end < lineCount; block_end++) {\n                line = cm.getLineHandle(block_end);\n                if (line.text.match(/^\\s*$/)) {\n                    // empty or all whitespace - keep going\n                    continue;\n                } else {\n                    if (code_type(cm, block_end, line) !== 'indented') {\n                        block_end -= 1;\n                        break;\n                    }\n                }\n            }\n        }\n        // if we are going to un-indent based on a selected set of lines, and the next line is indented too, we need to\n        // insert a blank line so that the next line(s) continue to be indented code\n        var next_line = cm.getLineHandle(block_end + 1),\n            next_line_last_tok = next_line && cm.getTokenAt({\n                line: block_end + 1,\n                ch: next_line.text.length - 1,\n            }),\n            next_line_indented = next_line_last_tok && token_state(next_line_last_tok).indentedCode;\n        if (next_line_indented) {\n            cm.replaceRange('\\n', {\n                line: block_end + 1,\n                ch: 0,\n            });\n        }\n\n        for (var i = block_start; i <= block_end; i++) {\n            cm.indentLine(i, 'subtract'); // TODO: this doesn't get tracked in the history, so can't be undone :(\n        }\n        cm.focus();\n    } else {\n        // insert code formatting\n        var no_sel_and_starting_of_line = (cur_start.line === cur_end.line && cur_start.ch === cur_end.ch && cur_start.ch === 0);\n        var sel_multi = cur_start.line !== cur_end.line;\n        if (no_sel_and_starting_of_line || sel_multi) {\n            insertFencingAtSelection(cm, cur_start, cur_end, fenceCharsToInsert);\n        } else {\n            _replaceSelection(cm, false, ['`', '`']);\n        }\n    }\n}\n\n/**\n * Action for toggling blockquote.\n */\nfunction toggleBlockquote(editor) {\n    var cm = editor.codemirror;\n    _toggleLine(cm, 'quote');\n}\n\n/**\n * Action for toggling heading size: normal -> h1 -> h2 -> h3 -> h4 -> h5 -> h6 -> normal\n */\nfunction toggleHeadingSmaller(editor) {\n    var cm = editor.codemirror;\n    _toggleHeading(cm, 'smaller');\n}\n\n/**\n * Action for toggling heading size: normal -> h6 -> h5 -> h4 -> h3 -> h2 -> h1 -> normal\n */\nfunction toggleHeadingBigger(editor) {\n    var cm = editor.codemirror;\n    _toggleHeading(cm, 'bigger');\n}\n\n/**\n * Action for toggling heading size 1\n */\nfunction toggleHeading1(editor) {\n    var cm = editor.codemirror;\n    _toggleHeading(cm, undefined, 1);\n}\n\n/**\n * Action for toggling heading size 2\n */\nfunction toggleHeading2(editor) {\n    var cm = editor.codemirror;\n    _toggleHeading(cm, undefined, 2);\n}\n\n/**\n * Action for toggling heading size 3\n */\nfunction toggleHeading3(editor) {\n    var cm = editor.codemirror;\n    _toggleHeading(cm, undefined, 3);\n}\n\n\n/**\n * Action for toggling ul.\n */\nfunction toggleUnorderedList(editor) {\n    var cm = editor.codemirror;\n    _toggleLine(cm, 'unordered-list');\n}\n\n\n/**\n * Action for toggling ol.\n */\nfunction toggleOrderedList(editor) {\n    var cm = editor.codemirror;\n    _toggleLine(cm, 'ordered-list');\n}\n\n/**\n * Action for clean block (remove headline, list, blockquote code, markers)\n */\nfunction cleanBlock(editor) {\n    var cm = editor.codemirror;\n    _cleanBlock(cm);\n}\n\n/**\n * Action for drawing a link.\n */\nfunction drawLink(editor) {\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n    var options = editor.options;\n    var url = 'https://';\n    if (options.promptURLs) {\n        url = prompt(options.promptTexts.link, 'https://');\n        if (!url) {\n            return false;\n        }\n    }\n    _replaceSelection(cm, stat.link, options.insertTexts.link, url);\n}\n\n/**\n * Action for drawing an img.\n */\nfunction drawImage(editor) {\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n    var options = editor.options;\n    var url = 'https://';\n    if (options.promptURLs) {\n        url = prompt(options.promptTexts.image, 'https://');\n        if (!url) {\n            return false;\n        }\n    }\n    _replaceSelection(cm, stat.image, options.insertTexts.image, url);\n}\n\n/**\n * Action for opening the browse-file window to upload an image to a server.\n * @param editor {EasyMDE} The EasyMDE object\n */\nfunction drawUploadedImage(editor) {\n    // TODO: Draw the image template with a fake url? ie: '![](importing foo.png...)'\n    editor.openBrowseFileWindow();\n}\n\n/**\n * Action executed after an image have been successfully imported on the server.\n * @param editor {EasyMDE} The EasyMDE object\n * @param url {string} The url of the uploaded image\n */\nfunction afterImageUploaded(editor, url) {\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n    var options = editor.options;\n    var imageName = url.substr(url.lastIndexOf('/') + 1);\n    var ext = imageName.substring(imageName.lastIndexOf('.') + 1).replace(/\\?.*$/, '');\n\n    // Check if media is an image\n    if (['png', 'jpg', 'jpeg', 'gif', 'svg'].includes(ext)) {\n      _replaceSelection(cm, stat.image, options.insertTexts.uploadedImage, url);\n    } else {\n      var text_link = options.insertTexts.link;\n      text_link[0] = '[' + imageName;\n      _replaceSelection(cm, stat.link, text_link, url);\n    }\n\n    // show uploaded image filename for 1000ms\n    editor.updateStatusBar('upload-image', editor.options.imageTexts.sbOnUploaded.replace('#image_name#', imageName));\n    setTimeout(function () {\n        editor.updateStatusBar('upload-image', editor.options.imageTexts.sbInit);\n    }, 1000);\n}\n\n/**\n * Action for drawing a table.\n */\nfunction drawTable(editor) {\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n    var options = editor.options;\n    _replaceSelection(cm, stat.table, options.insertTexts.table);\n}\n\n/**\n * Action for drawing a horizontal rule.\n */\nfunction drawHorizontalRule(editor) {\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n    var options = editor.options;\n    _replaceSelection(cm, stat.image, options.insertTexts.horizontalRule);\n}\n\n\n/**\n * Undo action.\n */\nfunction undo(editor) {\n    var cm = editor.codemirror;\n    cm.undo();\n    cm.focus();\n}\n\n\n/**\n * Redo action.\n */\nfunction redo(editor) {\n    var cm = editor.codemirror;\n    cm.redo();\n    cm.focus();\n}\n\n\n/**\n * Toggle side by side preview\n */\nfunction toggleSideBySide(editor) {\n    var cm = editor.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var preview = wrapper.nextSibling;\n    var toolbarButton = editor.toolbarElements && editor.toolbarElements['side-by-side'];\n    var useSideBySideListener = false;\n\n    var easyMDEContainer = wrapper.parentNode;\n\n    if (/editor-preview-active-side/.test(preview.className)) {\n        if (editor.options.sideBySideFullscreen === false) {\n            // if side-by-side not-fullscreen ok, remove classes when hiding side\n            removeClass(easyMDEContainer, 'sided--no-fullscreen');\n        }\n        preview.className = preview.className.replace(\n            /\\s*editor-preview-active-side\\s*/g, ''\n        );\n        if (toolbarButton) toolbarButton.className = toolbarButton.className.replace(/\\s*active\\s*/g, '');\n        wrapper.className = wrapper.className.replace(/\\s*CodeMirror-sided\\s*/g, ' ');\n    } else {\n        // When the preview button is clicked for the first time,\n        // give some time for the transition from editor.css to fire and the view to slide from right to left,\n        // instead of just appearing.\n        setTimeout(function () {\n            if (!cm.getOption('fullScreen')) {\n                if (editor.options.sideBySideFullscreen === false) {\n                    // if side-by-side not-fullscreen ok, add classes when not fullscreen and showing side\n                    addClass(easyMDEContainer, 'sided--no-fullscreen');\n                } else {\n                    toggleFullScreen(editor);\n                }\n            }\n            preview.className += ' editor-preview-active-side';\n        }, 1);\n        if (toolbarButton) toolbarButton.className += ' active';\n        wrapper.className += ' CodeMirror-sided';\n        useSideBySideListener = true;\n    }\n\n    // Hide normal preview if active\n    var previewNormal = wrapper.lastChild;\n    if (/editor-preview-active/.test(previewNormal.className)) {\n        previewNormal.className = previewNormal.className.replace(\n            /\\s*editor-preview-active\\s*/g, ''\n        );\n        var toolbar = editor.toolbarElements.preview;\n        var toolbar_div = editor.toolbar_div;\n        toolbar.className = toolbar.className.replace(/\\s*active\\s*/g, '');\n        toolbar_div.className = toolbar_div.className.replace(/\\s*disabled-for-preview*/g, '');\n    }\n\n    var sideBySideRenderingFunction = function () {\n        var newValue = editor.options.previewRender(editor.value(), preview);\n        if (newValue != null) {\n            preview.innerHTML = newValue;\n        }\n    };\n\n    if (!cm.sideBySideRenderingFunction) {\n        cm.sideBySideRenderingFunction = sideBySideRenderingFunction;\n    }\n\n    if (useSideBySideListener) {\n        var newValue = editor.options.previewRender(editor.value(), preview);\n        if (newValue != null) {\n            preview.innerHTML = newValue;\n        }\n        cm.on('update', cm.sideBySideRenderingFunction);\n    } else {\n        cm.off('update', cm.sideBySideRenderingFunction);\n    }\n\n    // Refresh to fix selection being off (#309)\n    cm.refresh();\n}\n\n\n/**\n * Preview action.\n */\nfunction togglePreview(editor) {\n    var cm = editor.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var toolbar_div = editor.toolbar_div;\n    var toolbar = editor.options.toolbar ? editor.toolbarElements.preview : false;\n    var preview = wrapper.lastChild;\n\n    // Turn off side by side if needed\n    var sidebyside = cm.getWrapperElement().nextSibling;\n    if (/editor-preview-active-side/.test(sidebyside.className))\n        toggleSideBySide(editor);\n\n    if (!preview || !/editor-preview-full/.test(preview.className)) {\n\n        preview = document.createElement('div');\n        preview.className = 'editor-preview-full';\n\n        if (editor.options.previewClass) {\n\n            if (Array.isArray(editor.options.previewClass)) {\n                for (var i = 0; i < editor.options.previewClass.length; i++) {\n                    preview.className += (' ' + editor.options.previewClass[i]);\n                }\n\n            } else if (typeof editor.options.previewClass === 'string') {\n                preview.className += (' ' + editor.options.previewClass);\n            }\n        }\n\n        wrapper.appendChild(preview);\n    }\n\n    if (/editor-preview-active/.test(preview.className)) {\n        preview.className = preview.className.replace(\n            /\\s*editor-preview-active\\s*/g, ''\n        );\n        if (toolbar) {\n            toolbar.className = toolbar.className.replace(/\\s*active\\s*/g, '');\n            toolbar_div.className = toolbar_div.className.replace(/\\s*disabled-for-preview*/g, '');\n        }\n    } else {\n        // When the preview button is clicked for the first time,\n        // give some time for the transition from editor.css to fire and the view to slide from right to left,\n        // instead of just appearing.\n        setTimeout(function () {\n            preview.className += ' editor-preview-active';\n        }, 1);\n        if (toolbar) {\n            toolbar.className += ' active';\n            toolbar_div.className += ' disabled-for-preview';\n        }\n    }\n    preview.innerHTML = editor.options.previewRender(editor.value(), preview);\n\n}\n\nfunction _replaceSelection(cm, active, startEnd, url) {\n    if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className))\n        return;\n\n    var text;\n    var start = startEnd[0];\n    var end = startEnd[1];\n    var startPoint = {},\n        endPoint = {};\n    Object.assign(startPoint, cm.getCursor('start'));\n    Object.assign(endPoint, cm.getCursor('end'));\n    if (url) {\n        start = start.replace('#url#', url);  // url is in start for upload-image\n        end = end.replace('#url#', url);\n    }\n    if (active) {\n        text = cm.getLine(startPoint.line);\n        start = text.slice(0, startPoint.ch);\n        end = text.slice(startPoint.ch);\n        cm.replaceRange(start + end, {\n            line: startPoint.line,\n            ch: 0,\n        });\n    } else {\n        text = cm.getSelection();\n        cm.replaceSelection(start + text + end);\n\n        startPoint.ch += start.length;\n        if (startPoint !== endPoint) {\n            endPoint.ch += start.length;\n        }\n    }\n    cm.setSelection(startPoint, endPoint);\n    cm.focus();\n}\n\n\nfunction _toggleHeading(cm, direction, size) {\n    if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className))\n        return;\n\n    var startPoint = cm.getCursor('start');\n    var endPoint = cm.getCursor('end');\n    for (var i = startPoint.line; i <= endPoint.line; i++) {\n        (function (i) {\n            var text = cm.getLine(i);\n            var currHeadingLevel = text.search(/[^#]/);\n\n            if (direction !== undefined) {\n                if (currHeadingLevel <= 0) {\n                    if (direction == 'bigger') {\n                        text = '###### ' + text;\n                    } else {\n                        text = '# ' + text;\n                    }\n                } else if (currHeadingLevel == 6 && direction == 'smaller') {\n                    text = text.substr(7);\n                } else if (currHeadingLevel == 1 && direction == 'bigger') {\n                    text = text.substr(2);\n                } else {\n                    if (direction == 'bigger') {\n                        text = text.substr(1);\n                    } else {\n                        text = '#' + text;\n                    }\n                }\n            } else {\n                if (size == 1) {\n                    if (currHeadingLevel <= 0) {\n                        text = '# ' + text;\n                    } else if (currHeadingLevel == size) {\n                        text = text.substr(currHeadingLevel + 1);\n                    } else {\n                        text = '# ' + text.substr(currHeadingLevel + 1);\n                    }\n                } else if (size == 2) {\n                    if (currHeadingLevel <= 0) {\n                        text = '## ' + text;\n                    } else if (currHeadingLevel == size) {\n                        text = text.substr(currHeadingLevel + 1);\n                    } else {\n                        text = '## ' + text.substr(currHeadingLevel + 1);\n                    }\n                } else {\n                    if (currHeadingLevel <= 0) {\n                        text = '### ' + text;\n                    } else if (currHeadingLevel == size) {\n                        text = text.substr(currHeadingLevel + 1);\n                    } else {\n                        text = '### ' + text.substr(currHeadingLevel + 1);\n                    }\n                }\n            }\n\n            cm.replaceRange(text, {\n                line: i,\n                ch: 0,\n            }, {\n                line: i,\n                ch: 99999999999999,\n            });\n        })(i);\n    }\n    cm.focus();\n}\n\n\nfunction _toggleLine(cm, name) {\n    if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className))\n        return;\n\n    var listRegexp = /^(\\s*)(\\*|-|\\+|\\d*\\.)(\\s+)/;\n    var whitespacesRegexp = /^\\s*/;\n\n    var stat = getState(cm);\n    var startPoint = cm.getCursor('start');\n    var endPoint = cm.getCursor('end');\n    var repl = {\n        'quote': /^(\\s*)>\\s+/,\n        'unordered-list': listRegexp,\n        'ordered-list': listRegexp,\n    };\n\n    var _getChar = function (name, i) {\n        var map = {\n            'quote': '>',\n            'unordered-list': '*',\n            'ordered-list': '%%i.',\n        };\n\n        return map[name].replace('%%i', i);\n    };\n\n    var _checkChar = function (name, char) {\n        var map = {\n            'quote': '>',\n            'unordered-list': '*',\n            'ordered-list': '\\\\d+.',\n        };\n        var rt = new RegExp(map[name]);\n\n        return char && rt.test(char);\n    };\n\n    var _toggle = function (name, text, untoggleOnly) {\n        var arr = listRegexp.exec(text);\n        var char = _getChar(name, line);\n        if (arr !== null) {\n            if (_checkChar(name, arr[2])) {\n                char = '';\n            }\n            text = arr[1] + char + arr[3] + text.replace(whitespacesRegexp, '').replace(repl[name], '$1');\n        } else if (untoggleOnly == false) {\n            text = char + ' ' + text;\n        }\n        return text;\n    };\n\n    var line = 1;\n    for (var i = startPoint.line; i <= endPoint.line; i++) {\n        (function (i) {\n            var text = cm.getLine(i);\n            if (stat[name]) {\n                text = text.replace(repl[name], '$1');\n            } else {\n                // If we're toggling unordered-list formatting, check if the current line\n                // is part of an ordered-list, and if so, untoggle that first.\n                // Workaround for https://github.com/Ionaru/easy-markdown-editor/issues/92\n                if (name == 'unordered-list') {\n                    text = _toggle('ordered-list', text, true);\n                }\n                text = _toggle(name, text, false);\n                line += 1;\n            }\n            cm.replaceRange(text, {\n                line: i,\n                ch: 0,\n            }, {\n                line: i,\n                ch: 99999999999999,\n            });\n        })(i);\n    }\n    cm.focus();\n}\n\nfunction _toggleBlock(editor, type, start_chars, end_chars) {\n    if (/editor-preview-active/.test(editor.codemirror.getWrapperElement().lastChild.className))\n        return;\n\n    end_chars = (typeof end_chars === 'undefined') ? start_chars : end_chars;\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n\n    var text;\n    var start = start_chars;\n    var end = end_chars;\n\n    var startPoint = cm.getCursor('start');\n    var endPoint = cm.getCursor('end');\n\n    if (stat[type]) {\n        text = cm.getLine(startPoint.line);\n        start = text.slice(0, startPoint.ch);\n        end = text.slice(startPoint.ch);\n        if (type == 'bold') {\n            start = start.replace(/(\\*\\*|__)(?![\\s\\S]*(\\*\\*|__))/, '');\n            end = end.replace(/(\\*\\*|__)/, '');\n        } else if (type == 'italic') {\n            start = start.replace(/(\\*|_)(?![\\s\\S]*(\\*|_))/, '');\n            end = end.replace(/(\\*|_)/, '');\n        } else if (type == 'strikethrough') {\n            start = start.replace(/(\\*\\*|~~)(?![\\s\\S]*(\\*\\*|~~))/, '');\n            end = end.replace(/(\\*\\*|~~)/, '');\n        }\n        cm.replaceRange(start + end, {\n            line: startPoint.line,\n            ch: 0,\n        }, {\n            line: startPoint.line,\n            ch: 99999999999999,\n        });\n\n        if (type == 'bold' || type == 'strikethrough') {\n            startPoint.ch -= 2;\n            if (startPoint !== endPoint) {\n                endPoint.ch -= 2;\n            }\n        } else if (type == 'italic') {\n            startPoint.ch -= 1;\n            if (startPoint !== endPoint) {\n                endPoint.ch -= 1;\n            }\n        }\n    } else {\n        text = cm.getSelection();\n        if (type == 'bold') {\n            text = text.split('**').join('');\n            text = text.split('__').join('');\n        } else if (type == 'italic') {\n            text = text.split('*').join('');\n            text = text.split('_').join('');\n        } else if (type == 'strikethrough') {\n            text = text.split('~~').join('');\n        }\n        cm.replaceSelection(start + text + end);\n\n        startPoint.ch += start_chars.length;\n        endPoint.ch = startPoint.ch + text.length;\n    }\n\n    cm.setSelection(startPoint, endPoint);\n    cm.focus();\n}\n\nfunction _cleanBlock(cm) {\n    if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className))\n        return;\n\n    var startPoint = cm.getCursor('start');\n    var endPoint = cm.getCursor('end');\n    var text;\n\n    for (var line = startPoint.line; line <= endPoint.line; line++) {\n        text = cm.getLine(line);\n        text = text.replace(/^[ ]*([# ]+|\\*|-|[> ]+|[0-9]+(.|\\)))[ ]*/, '');\n\n        cm.replaceRange(text, {\n            line: line,\n            ch: 0,\n        }, {\n            line: line,\n            ch: 99999999999999,\n        });\n    }\n}\n\n/**\n * Convert a number of bytes to a human-readable file size. If you desire\n * to add a space between the value and the unit, you need to add this space\n * to the given units.\n * @param bytes {integer} A number of bytes, as integer. Ex: 421137\n * @param units {number[]} An array of human-readable units, ie. [' B', ' K', ' MB']\n * @returns string A human-readable file size. Ex: '412 KB'\n */\nfunction humanFileSize(bytes, units) {\n    if (Math.abs(bytes) < 1024) {\n        return '' + bytes + units[0];\n    }\n    var u = 0;\n    do {\n        bytes /= 1024;\n        ++u;\n    } while (Math.abs(bytes) >= 1024 && u < units.length);\n    return '' + bytes.toFixed(1) + units[u];\n}\n\n// Merge the properties of one object into another.\nfunction _mergeProperties(target, source) {\n    for (var property in source) {\n        if (Object.prototype.hasOwnProperty.call(source, property)) {\n            if (source[property] instanceof Array) {\n                target[property] = source[property].concat(target[property] instanceof Array ? target[property] : []);\n            } else if (\n                source[property] !== null &&\n                typeof source[property] === 'object' &&\n                source[property].constructor === Object\n            ) {\n                target[property] = _mergeProperties(target[property] || {}, source[property]);\n            } else {\n                target[property] = source[property];\n            }\n        }\n    }\n\n    return target;\n}\n\n// Merge an arbitrary number of objects into one.\nfunction extend(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        target = _mergeProperties(target, arguments[i]);\n    }\n\n    return target;\n}\n\n/* The right word count in respect for CJK. */\nfunction wordCount(data) {\n    var pattern = /[a-zA-Z0-9_\\u00A0-\\u02AF\\u0392-\\u03c9\\u0410-\\u04F9]+|[\\u4E00-\\u9FFF\\u3400-\\u4dbf\\uf900-\\ufaff\\u3040-\\u309f\\uac00-\\ud7af]+/g;\n    var m = data.match(pattern);\n    var count = 0;\n    if (m === null) return count;\n    for (var i = 0; i < m.length; i++) {\n        if (m[i].charCodeAt(0) >= 0x4E00) {\n            count += m[i].length;\n        } else {\n            count += 1;\n        }\n    }\n    return count;\n}\n\nvar toolbarBuiltInButtons = {\n    'bold': {\n        name: 'bold',\n        action: toggleBold,\n        className: 'fa fa-bold',\n        title: 'Bold',\n        default: true,\n    },\n    'italic': {\n        name: 'italic',\n        action: toggleItalic,\n        className: 'fa fa-italic',\n        title: 'Italic',\n        default: true,\n    },\n    'strikethrough': {\n        name: 'strikethrough',\n        action: toggleStrikethrough,\n        className: 'fa fa-strikethrough',\n        title: 'Strikethrough',\n    },\n    'heading': {\n        name: 'heading',\n        action: toggleHeadingSmaller,\n        className: 'fa fa-header fa-heading',\n        title: 'Heading',\n        default: true,\n    },\n    'heading-smaller': {\n        name: 'heading-smaller',\n        action: toggleHeadingSmaller,\n        className: 'fa fa-header fa-heading header-smaller',\n        title: 'Smaller Heading',\n    },\n    'heading-bigger': {\n        name: 'heading-bigger',\n        action: toggleHeadingBigger,\n        className: 'fa fa-header fa-heading header-bigger',\n        title: 'Bigger Heading',\n    },\n    'heading-1': {\n        name: 'heading-1',\n        action: toggleHeading1,\n        className: 'fa fa-header fa-heading header-1',\n        title: 'Big Heading',\n    },\n    'heading-2': {\n        name: 'heading-2',\n        action: toggleHeading2,\n        className: 'fa fa-header fa-heading header-2',\n        title: 'Medium Heading',\n    },\n    'heading-3': {\n        name: 'heading-3',\n        action: toggleHeading3,\n        className: 'fa fa-header fa-heading header-3',\n        title: 'Small Heading',\n    },\n    'separator-1': {\n        name: 'separator-1',\n    },\n    'code': {\n        name: 'code',\n        action: toggleCodeBlock,\n        className: 'fa fa-code',\n        title: 'Code',\n    },\n    'quote': {\n        name: 'quote',\n        action: toggleBlockquote,\n        className: 'fa fa-quote-left',\n        title: 'Quote',\n        default: true,\n    },\n    'unordered-list': {\n        name: 'unordered-list',\n        action: toggleUnorderedList,\n        className: 'fa fa-list-ul',\n        title: 'Generic List',\n        default: true,\n    },\n    'ordered-list': {\n        name: 'ordered-list',\n        action: toggleOrderedList,\n        className: 'fa fa-list-ol',\n        title: 'Numbered List',\n        default: true,\n    },\n    'clean-block': {\n        name: 'clean-block',\n        action: cleanBlock,\n        className: 'fa fa-eraser',\n        title: 'Clean block',\n    },\n    'separator-2': {\n        name: 'separator-2',\n    },\n    'link': {\n        name: 'link',\n        action: drawLink,\n        className: 'fa fa-link',\n        title: 'Create Link',\n        default: true,\n    },\n    'image': {\n        name: 'image',\n        action: drawImage,\n        className: 'fa fa-image',\n        title: 'Insert Image',\n        default: true,\n    },\n    'upload-image': {\n        name: 'upload-image',\n        action: drawUploadedImage,\n        className: 'fa fa-image',\n        title: 'Import an image',\n    },\n    'table': {\n        name: 'table',\n        action: drawTable,\n        className: 'fa fa-table',\n        title: 'Insert Table',\n    },\n    'horizontal-rule': {\n        name: 'horizontal-rule',\n        action: drawHorizontalRule,\n        className: 'fa fa-minus',\n        title: 'Insert Horizontal Line',\n    },\n    'separator-3': {\n        name: 'separator-3',\n    },\n    'preview': {\n        name: 'preview',\n        action: togglePreview,\n        className: 'fa fa-eye',\n        noDisable: true,\n        title: 'Toggle Preview',\n        default: true,\n    },\n    'side-by-side': {\n        name: 'side-by-side',\n        action: toggleSideBySide,\n        className: 'fa fa-columns',\n        noDisable: true,\n        noMobile: true,\n        title: 'Toggle Side by Side',\n        default: true,\n    },\n    'fullscreen': {\n        name: 'fullscreen',\n        action: toggleFullScreen,\n        className: 'fa fa-arrows-alt',\n        noDisable: true,\n        noMobile: true,\n        title: 'Toggle Fullscreen',\n        default: true,\n    },\n    'separator-4': {\n        name: 'separator-4',\n    },\n    'guide': {\n        name: 'guide',\n        action: 'https://www.markdownguide.org/basic-syntax/',\n        className: 'fa fa-question-circle',\n        noDisable: true,\n        title: 'Markdown Guide',\n        default: true,\n    },\n    'separator-5': {\n        name: 'separator-5',\n    },\n    'undo': {\n        name: 'undo',\n        action: undo,\n        className: 'fa fa-undo',\n        noDisable: true,\n        title: 'Undo',\n    },\n    'redo': {\n        name: 'redo',\n        action: redo,\n        className: 'fa fa-repeat fa-redo',\n        noDisable: true,\n        title: 'Redo',\n    },\n};\n\nvar insertTexts = {\n    link: ['[', '](#url#)'],\n    image: ['![](', '#url#)'],\n    uploadedImage: ['![](#url#)', ''],\n    // uploadedImage: ['![](#url#)\\n', ''], // TODO: New line insertion doesn't work here.\n    table: ['', '\\n\\n| Column 1 | Column 2 | Column 3 |\\n| -------- | -------- | -------- |\\n| Text     | Text     | Text     |\\n\\n'],\n    horizontalRule: ['', '\\n\\n-----\\n\\n'],\n};\n\nvar promptTexts = {\n    link: 'URL for the link:',\n    image: 'URL of the image:',\n};\n\nvar timeFormat = {\n    locale: 'en-US',\n    format: {\n        hour: '2-digit',\n        minute: '2-digit',\n    },\n};\n\nvar blockStyles = {\n    'bold': '**',\n    'code': '```',\n    'italic': '*',\n};\n\n/**\n * Texts displayed to the user (mainly on the status bar) for the import image\n * feature. Can be used for customization or internationalization.\n */\nvar imageTexts = {\n    sbInit: 'Attach files by drag and dropping or pasting from clipboard.',\n    sbOnDragEnter: 'Drop image to upload it.',\n    sbOnDrop: 'Uploading image #images_names#...',\n    sbProgress: 'Uploading #file_name#: #progress#%',\n    sbOnUploaded: 'Uploaded #image_name#',\n    sizeUnits: ' B, KB, MB',\n};\n\n/**\n * Errors displayed to the user, using the `errorCallback` option. Can be used for\n * customization or internationalization.\n */\nvar errorMessages = {\n    noFileGiven: 'You must select a file.',\n    typeNotAllowed: 'This image type is not allowed.',\n    fileTooLarge: 'Image #image_name# is too big (#image_size#).\\n' +\n        'Maximum file size is #image_max_size#.',\n    importError: 'Something went wrong when uploading the image #image_name#.',\n};\n\n/**\n * Interface of EasyMDE.\n */\nfunction EasyMDE(options) {\n    // Handle options parameter\n    options = options || {};\n\n    // Used later to refer to it\"s parent\n    options.parent = this;\n\n    // Check if Font Awesome needs to be auto downloaded\n    var autoDownloadFA = true;\n\n    if (options.autoDownloadFontAwesome === false) {\n        autoDownloadFA = false;\n    }\n\n    if (options.autoDownloadFontAwesome !== true) {\n        var styleSheets = document.styleSheets;\n        for (var i = 0; i < styleSheets.length; i++) {\n            if (!styleSheets[i].href)\n                continue;\n\n            if (styleSheets[i].href.indexOf('//maxcdn.bootstrapcdn.com/font-awesome/') > -1) {\n                autoDownloadFA = false;\n            }\n        }\n    }\n\n    if (autoDownloadFA) {\n        var link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.href = 'https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css';\n        document.getElementsByTagName('head')[0].appendChild(link);\n    }\n\n\n    // Find the textarea to use\n    if (options.element) {\n        this.element = options.element;\n    } else if (options.element === null) {\n        // This means that the element option was specified, but no element was found\n        console.log('EasyMDE: Error. No element was found.');\n        return;\n    }\n\n\n    // Handle toolbar\n    if (options.toolbar === undefined) {\n        // Initialize\n        options.toolbar = [];\n\n\n        // Loop over the built in buttons, to get the preferred order\n        for (var key in toolbarBuiltInButtons) {\n            if (Object.prototype.hasOwnProperty.call(toolbarBuiltInButtons, key)) {\n                if (key.indexOf('separator-') != -1) {\n                    options.toolbar.push('|');\n                }\n\n                if (toolbarBuiltInButtons[key].default === true || (options.showIcons && options.showIcons.constructor === Array && options.showIcons.indexOf(key) != -1)) {\n                    options.toolbar.push(key);\n                }\n            }\n        }\n    }\n\n    // Editor preview styling class.\n    if (!Object.prototype.hasOwnProperty.call(options, 'previewClass')) {\n        options.previewClass = 'editor-preview';\n    }\n\n    // Handle status bar\n    if (!Object.prototype.hasOwnProperty.call(options, 'status')) {\n        options.status = ['autosave', 'lines', 'words', 'cursor'];\n\n        if (options.uploadImage) {\n            options.status.unshift('upload-image');\n        }\n    }\n\n\n    // Add default preview rendering function\n    if (!options.previewRender) {\n        options.previewRender = function (plainText) {\n            // Note: \"this\" refers to the options object\n            return this.parent.markdown(plainText);\n        };\n    }\n\n\n    // Set default options for parsing config\n    options.parsingConfig = extend({\n        highlightFormatting: true, // needed for toggleCodeBlock to detect types of code\n    }, options.parsingConfig || {});\n\n\n    // Merging the insertTexts, with the given options\n    options.insertTexts = extend({}, insertTexts, options.insertTexts || {});\n\n\n    // Merging the promptTexts, with the given options\n    options.promptTexts = extend({}, promptTexts, options.promptTexts || {});\n\n\n    // Merging the blockStyles, with the given options\n    options.blockStyles = extend({}, blockStyles, options.blockStyles || {});\n\n\n    if (options.autosave != undefined) {\n        // Merging the Autosave timeFormat, with the given options\n        options.autosave.timeFormat = extend({}, timeFormat, options.autosave.timeFormat || {});\n    }\n\n\n    // Merging the shortcuts, with the given options\n    options.shortcuts = extend({}, shortcuts, options.shortcuts || {});\n\n    options.maxHeight = options.maxHeight || undefined;\n\n    if (typeof options.maxHeight !== 'undefined') {\n        // Min and max height are equal if maxHeight is set\n        options.minHeight = options.maxHeight;\n    } else {\n        options.minHeight = options.minHeight || '300px';\n    }\n\n    options.errorCallback = options.errorCallback || function (errorMessage) {\n        alert(errorMessage);\n    };\n\n    // Import-image default configuration\n    options.uploadImage = options.uploadImage || false;\n    options.imageMaxSize = options.imageMaxSize || 2097152; // 1024 * 1024 * 2\n    options.imageAccept = options.imageAccept || 'image/png, image/jpeg';\n    options.imageTexts = extend({}, imageTexts, options.imageTexts || {});\n    options.errorMessages = extend({}, errorMessages, options.errorMessages || {});\n\n\n    // Change unique_id to uniqueId for backwards compatibility\n    if (options.autosave != undefined && options.autosave.unique_id != undefined && options.autosave.unique_id != '')\n        options.autosave.uniqueId = options.autosave.unique_id;\n\n    // If overlay mode is specified and combine is not provided, default it to true\n    if (options.overlayMode && options.overlayMode.combine === undefined) {\n      options.overlayMode.combine = true;\n    }\n\n    // Update this options\n    this.options = options;\n\n\n    // Auto render\n    this.render();\n\n\n    // The codemirror component is only available after rendering\n    // so, the setter for the initialValue can only run after\n    // the element has been rendered\n    if (options.initialValue && (!this.options.autosave || this.options.autosave.foundSavedValue !== true)) {\n        this.value(options.initialValue);\n    }\n\n    if (options.uploadImage) {\n        var self = this;\n\n        this.codemirror.on('dragenter', function (cm, event) {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbOnDragEnter);\n            event.stopPropagation();\n            event.preventDefault();\n        });\n        this.codemirror.on('dragend', function (cm, event) {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n            event.stopPropagation();\n            event.preventDefault();\n        });\n        this.codemirror.on('dragleave', function (cm, event) {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n            event.stopPropagation();\n            event.preventDefault();\n        });\n\n        this.codemirror.on('dragover', function (cm, event) {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbOnDragEnter);\n            event.stopPropagation();\n            event.preventDefault();\n        });\n\n        this.codemirror.on('drop', function (cm, event) {\n            event.stopPropagation();\n            event.preventDefault();\n            if (options.imageUploadFunction) {\n                self.uploadImagesUsingCustomFunction(options.imageUploadFunction, event.dataTransfer.files);\n            } else {\n                self.uploadImages(event.dataTransfer.files);\n            }\n        });\n\n        this.codemirror.on('paste', function (cm, event) {\n            if (options.imageUploadFunction) {\n                self.uploadImagesUsingCustomFunction(options.imageUploadFunction, event.clipboardData.files);\n            } else {\n                self.uploadImages(event.clipboardData.files);\n            }\n        });\n    }\n}\n\n/**\n * Upload asynchronously a list of images to a server.\n *\n * Can be triggered by:\n * - drag&drop;\n * - copy-paste;\n * - the browse-file window (opened when the user clicks on the *upload-image* icon).\n * @param {FileList} files The files to upload the the server.\n * @param [onSuccess] {function} see EasyMDE.prototype.uploadImage\n * @param [onError] {function} see EasyMDE.prototype.uploadImage\n */\nEasyMDE.prototype.uploadImages = function (files, onSuccess, onError) {\n    if (files.length === 0) {\n      return;\n    }\n    var names = [];\n    for (var i = 0; i < files.length; i++) {\n        names.push(files[i].name);\n        this.uploadImage(files[i], onSuccess, onError);\n    }\n    this.updateStatusBar('upload-image', this.options.imageTexts.sbOnDrop.replace('#images_names#', names.join(', ')));\n};\n\n/**\n * Upload asynchronously a list of images to a server.\n *\n * Can be triggered by:\n * - drag&drop;\n * - copy-paste;\n * - the browse-file window (opened when the user clicks on the *upload-image* icon).\n * @param imageUploadFunction {Function} The custom function to upload the image passed in options.\n * @param {FileList} files The files to upload the the server.\n */\nEasyMDE.prototype.uploadImagesUsingCustomFunction = function (imageUploadFunction, files) {\n    if (files.length === 0) {\n      return;\n    }\n    var names = [];\n    for (var i = 0; i < files.length; i++) {\n        names.push(files[i].name);\n        this.uploadImageUsingCustomFunction(imageUploadFunction, files[i]);\n    }\n    this.updateStatusBar('upload-image', this.options.imageTexts.sbOnDrop.replace('#images_names#', names.join(', ')));\n};\n\n/**\n * Update an item in the status bar.\n * @param itemName {string} The name of the item to update (ie. 'upload-image', 'autosave', etc.).\n * @param content {string} the new content of the item to write in the status bar.\n */\nEasyMDE.prototype.updateStatusBar = function (itemName, content) {\n    if (!this.gui.statusbar) {\n        return;\n    }\n\n    var matchingClasses = this.gui.statusbar.getElementsByClassName(itemName);\n    if (matchingClasses.length === 1) {\n        this.gui.statusbar.getElementsByClassName(itemName)[0].textContent = content;\n    } else if (matchingClasses.length === 0) {\n        console.log('EasyMDE: status bar item ' + itemName + ' was not found.');\n    } else {\n        console.log('EasyMDE: Several status bar items named ' + itemName + ' was found.');\n    }\n};\n\n/**\n * Default markdown render.\n */\nEasyMDE.prototype.markdown = function (text) {\n    if (marked) {\n        // Initialize\n        var markedOptions;\n        if (this.options && this.options.renderingConfig && this.options.renderingConfig.markedOptions) {\n            markedOptions = this.options.renderingConfig.markedOptions;\n        } else {\n            markedOptions = {};\n        }\n\n        // Update options\n        if (this.options && this.options.renderingConfig && this.options.renderingConfig.singleLineBreaks === false) {\n            markedOptions.breaks = false;\n        } else {\n            markedOptions.breaks = true;\n        }\n\n        if (this.options && this.options.renderingConfig && this.options.renderingConfig.codeSyntaxHighlighting === true) {\n\n            /* Get HLJS from config or window */\n            var hljs = this.options.renderingConfig.hljs || window.hljs;\n\n            /* Check if HLJS loaded */\n            if (hljs) {\n                markedOptions.highlight = function (code, language) {\n                    if (language && hljs.getLanguage(language)) {\n                      return hljs.highlight(language, code).value;\n                    } else {\n                    return hljs.highlightAuto(code).value;\n                    }\n                };\n            }\n        }\n\n        // Set options\n        marked.setOptions(markedOptions);\n\n        // Convert the markdown to HTML\n        var htmlText = marked(text);\n\n        // Sanitize HTML\n        if (this.options.renderingConfig && typeof this.options.renderingConfig.sanitizerFunction === 'function') {\n            htmlText = this.options.renderingConfig.sanitizerFunction.call(this, htmlText);\n        }\n\n        // Edit the HTML anchors to add 'target=\"_blank\"' by default.\n        htmlText = addAnchorTargetBlank(htmlText);\n\n        // Remove list-style when rendering checkboxes\n        htmlText = removeListStyleWhenCheckbox(htmlText);\n\n        return htmlText;\n    }\n};\n\n/**\n * Render editor to the given element.\n */\nEasyMDE.prototype.render = function (el) {\n    if (!el) {\n        el = this.element || document.getElementsByTagName('textarea')[0];\n    }\n\n    if (this._rendered && this._rendered === el) {\n        // Already rendered.\n        return;\n    }\n\n    this.element = el;\n    var options = this.options;\n\n    var self = this;\n    var keyMaps = {};\n\n    for (var key in options.shortcuts) {\n        // null stands for \"do not bind this command\"\n        if (options.shortcuts[key] !== null && bindings[key] !== null) {\n            (function (key) {\n                keyMaps[fixShortcut(options.shortcuts[key])] = function () {\n                    var action = bindings[key];\n                    if (typeof action === 'function') {\n                        action(self);\n                    } else if (typeof action === 'string') {\n                        window.open(action, '_blank');\n                    }\n                };\n            })(key);\n        }\n    }\n\n    keyMaps['Enter'] = 'newlineAndIndentContinueMarkdownList';\n    keyMaps['Tab'] = 'tabAndIndentMarkdownList';\n    keyMaps['Shift-Tab'] = 'shiftTabAndUnindentMarkdownList';\n    keyMaps['Esc'] = function (cm) {\n        if (cm.getOption('fullScreen')) toggleFullScreen(self);\n    };\n\n    this.documentOnKeyDown = function (e) {\n        e = e || window.event;\n\n        if (e.keyCode == 27) {\n            if (self.codemirror.getOption('fullScreen')) toggleFullScreen(self);\n        }\n    };\n    document.addEventListener('keydown', this.documentOnKeyDown, false);\n\n    var mode, backdrop;\n\n    // CodeMirror overlay mode\n    if (options.overlayMode) {\n      CodeMirror.defineMode('overlay-mode', function(config) {\n        return CodeMirror.overlayMode(CodeMirror.getMode(config, options.spellChecker !== false ? 'spell-checker' : 'gfm'), options.overlayMode.mode, options.overlayMode.combine);\n      });\n\n      mode = 'overlay-mode';\n      backdrop = options.parsingConfig;\n      backdrop.gitHubSpice = false;\n    } else {\n        mode = options.parsingConfig;\n        mode.name = 'gfm';\n        mode.gitHubSpice = false;\n    }\n    if (options.spellChecker !== false) {\n        mode = 'spell-checker';\n        backdrop = options.parsingConfig;\n        backdrop.name = 'gfm';\n        backdrop.gitHubSpice = false;\n\n        CodeMirrorSpellChecker({\n            codeMirrorInstance: CodeMirror,\n        });\n    }\n\n    // eslint-disable-next-line no-unused-vars\n    function configureMouse(cm, repeat, event) {\n        return {\n            addNew: false,\n        };\n    }\n\n    this.codemirror = CodeMirror.fromTextArea(el, {\n        mode: mode,\n        backdrop: backdrop,\n        theme: (options.theme != undefined) ? options.theme : 'easymde',\n        tabSize: (options.tabSize != undefined) ? options.tabSize : 2,\n        indentUnit: (options.tabSize != undefined) ? options.tabSize : 2,\n        indentWithTabs: (options.indentWithTabs === false) ? false : true,\n        lineNumbers: (options.lineNumbers === true) ? true : false,\n        autofocus: (options.autofocus === true) ? true : false,\n        extraKeys: keyMaps,\n        lineWrapping: (options.lineWrapping === false) ? false : true,\n        allowDropFileTypes: ['text/plain'],\n        placeholder: options.placeholder || el.getAttribute('placeholder') || '',\n        styleSelectedText: (options.styleSelectedText != undefined) ? options.styleSelectedText : !isMobile(),\n        scrollbarStyle: (options.scrollbarStyle != undefined) ? options.scrollbarStyle : 'native',\n        configureMouse: configureMouse,\n        inputStyle: (options.inputStyle != undefined) ? options.inputStyle : isMobile() ? 'contenteditable' : 'textarea',\n        spellcheck: (options.nativeSpellcheck != undefined) ? options.nativeSpellcheck : true,\n        autoRefresh: (options.autoRefresh != undefined) ? options.autoRefresh : false,\n    });\n\n    this.codemirror.getScrollerElement().style.minHeight = options.minHeight;\n\n    if (typeof options.maxHeight !== 'undefined') {\n        this.codemirror.getScrollerElement().style.height = options.maxHeight;\n    }\n\n    if (options.forceSync === true) {\n        var cm = this.codemirror;\n        cm.on('change', function () {\n            cm.save();\n        });\n    }\n\n    this.gui = {};\n\n    // Wrap Codemirror with container before create toolbar, etc,\n    // to use with sideBySideFullscreen option.\n    var easyMDEContainer = document.createElement('div');\n    easyMDEContainer.classList.add('EasyMDEContainer');\n    var cmWrapper = this.codemirror.getWrapperElement();\n    cmWrapper.parentNode.insertBefore(easyMDEContainer, cmWrapper);\n    easyMDEContainer.appendChild(cmWrapper);\n\n    if (options.toolbar !== false) {\n        this.gui.toolbar = this.createToolbar();\n    }\n    if (options.status !== false) {\n        this.gui.statusbar = this.createStatusbar();\n    }\n    if (options.autosave != undefined && options.autosave.enabled === true) {\n        this.autosave(); // use to load localstorage content\n        this.codemirror.on('change', function () {\n            clearTimeout(self._autosave_timeout);\n            self._autosave_timeout = setTimeout(function () {\n                self.autosave();\n            }, self.options.autosave.submit_delay || self.options.autosave.delay || 1000);\n        });\n    }\n\n    function calcHeight(naturalWidth, naturalHeight) {\n        var height;\n        var viewportWidth = window.getComputedStyle(document.querySelector('.CodeMirror-sizer')).width.replace('px', '');\n        if (naturalWidth < viewportWidth) {\n            height = naturalHeight + 'px';\n        } else {\n            height = (naturalHeight / naturalWidth * 100) + '%';\n        }\n        return height;\n    }\n\n    var _vm = this;\n\n\n    function assignImageBlockAttributes(parentEl, img) {\n        parentEl.setAttribute('data-img-src', img.url);\n        parentEl.setAttribute('style', '--bg-image:url('+img.url+');--width:'+img.naturalWidth+'px;--height:'+calcHeight(img.naturalWidth, img.naturalHeight));\n        _vm.codemirror.setSize();\n    }\n\n    function handleImages() {\n        if (!options.previewImagesInEditor) {\n            return;\n        }\n\n        easyMDEContainer.querySelectorAll('.cm-image-marker').forEach(function(e) {\n            var parentEl =  e.parentElement;\n            if (!parentEl.innerText.match(/^!\\[.*?\\]\\(.*\\)/g)) {\n                // if img pasted on the same line with other text, don't preview, preview only images on separate line\n                return;\n            }\n            if (!parentEl.hasAttribute('data-img-src')) {\n                var srcAttr = parentEl.innerText.match('\\\\((.*)\\\\)'); // might require better parsing according to markdown spec\n                if (!window.EMDEimagesCache) {\n                    window.EMDEimagesCache = {};\n                }\n\n                if (srcAttr && srcAttr.length >= 2) {\n                    var keySrc = srcAttr[1];\n\n                    if (! window.EMDEimagesCache[keySrc]) {\n                        var img = document.createElement('img');\n                        img.onload = function() {\n                            window.EMDEimagesCache[keySrc] = {\n                                naturalWidth: img.naturalWidth,\n                                naturalHeight: img.naturalHeight,\n                                url: keySrc,\n                            };\n                            assignImageBlockAttributes(parentEl, window.EMDEimagesCache[keySrc]);\n                        };\n                        img.src = keySrc;\n                    } else {\n                        assignImageBlockAttributes(parentEl, window.EMDEimagesCache[keySrc]);\n                    }\n                }\n            }\n        });\n    }\n    this.codemirror.on('update', function () {\n        handleImages();\n    });\n\n    this.gui.sideBySide = this.createSideBySide();\n    this._rendered = this.element;\n\n    // Fixes CodeMirror bug (#344)\n    var temp_cm = this.codemirror;\n    setTimeout(function () {\n        temp_cm.refresh();\n    }.bind(temp_cm), 0);\n};\n\nEasyMDE.prototype.cleanup = function () {\n    document.removeEventListener('keydown', this.documentOnKeyDown);\n};\n\n// Safari, in Private Browsing Mode, looks like it supports localStorage but all calls to setItem throw QuotaExceededError. We're going to detect this and set a variable accordingly.\nfunction isLocalStorageAvailable() {\n    if (typeof localStorage === 'object') {\n        try {\n            localStorage.setItem('smde_localStorage', 1);\n            localStorage.removeItem('smde_localStorage');\n        } catch (e) {\n            return false;\n        }\n    } else {\n        return false;\n    }\n\n    return true;\n}\n\nEasyMDE.prototype.autosave = function () {\n    if (isLocalStorageAvailable()) {\n        var easyMDE = this;\n\n        if (this.options.autosave.uniqueId == undefined || this.options.autosave.uniqueId == '') {\n            console.log('EasyMDE: You must set a uniqueId to use the autosave feature');\n            return;\n        }\n\n        if (this.options.autosave.binded !== true) {\n            if (easyMDE.element.form != null && easyMDE.element.form != undefined) {\n                easyMDE.element.form.addEventListener('submit', function () {\n                    clearTimeout(easyMDE.autosaveTimeoutId);\n                    easyMDE.autosaveTimeoutId = undefined;\n\n                    localStorage.removeItem('smde_' + easyMDE.options.autosave.uniqueId);\n                });\n            }\n\n            this.options.autosave.binded = true;\n        }\n\n        if (this.options.autosave.loaded !== true) {\n            if (typeof localStorage.getItem('smde_' + this.options.autosave.uniqueId) == 'string' && localStorage.getItem('smde_' + this.options.autosave.uniqueId) != '') {\n                this.codemirror.setValue(localStorage.getItem('smde_' + this.options.autosave.uniqueId));\n                this.options.autosave.foundSavedValue = true;\n            }\n\n            this.options.autosave.loaded = true;\n        }\n\n        var value = easyMDE.value();\n        if (value !== '') {\n            localStorage.setItem('smde_' + this.options.autosave.uniqueId, value);\n        } else {\n            localStorage.removeItem('smde_' + this.options.autosave.uniqueId);\n        }\n\n        var el = document.getElementById('autosaved');\n        if (el != null && el != undefined && el != '') {\n            var d = new Date();\n            var dd = new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale, 'en-US'], this.options.autosave.timeFormat.format).format(d);\n            var save = this.options.autosave.text == undefined ? 'Autosaved: ' : this.options.autosave.text;\n\n            el.innerHTML = save + dd;\n        }\n    } else {\n        console.log('EasyMDE: localStorage not available, cannot autosave');\n    }\n};\n\nEasyMDE.prototype.clearAutosavedValue = function () {\n    if (isLocalStorageAvailable()) {\n        if (this.options.autosave == undefined || this.options.autosave.uniqueId == undefined || this.options.autosave.uniqueId == '') {\n            console.log('EasyMDE: You must set a uniqueId to clear the autosave value');\n            return;\n        }\n\n        localStorage.removeItem('smde_' + this.options.autosave.uniqueId);\n    } else {\n        console.log('EasyMDE: localStorage not available, cannot autosave');\n    }\n};\n\n/**\n * Open the browse-file window to upload an image to a server.\n * @param [onSuccess] {function} see EasyMDE.prototype.uploadImage\n * @param [onError] {function} see EasyMDE.prototype.uploadImage\n */\nEasyMDE.prototype.openBrowseFileWindow = function (onSuccess, onError) {\n    var self = this;\n    var imageInput = this.gui.toolbar.getElementsByClassName('imageInput')[0];\n    imageInput.click(); //dispatchEvent(new MouseEvent('click'));  // replaced with click() for IE11 compatibility.\n    function onChange(event) {\n        if (self.options.imageUploadFunction) {\n          self.uploadImagesUsingCustomFunction(self.options.imageUploadFunction, event.target.files);\n        } else {\n          self.uploadImages(event.target.files, onSuccess, onError);\n        }\n        imageInput.removeEventListener('change', onChange);\n    }\n\n    imageInput.addEventListener('change', onChange);\n};\n\n/**\n * Upload an image to the server.\n *\n * @param file {File} The image to upload, as a HTML5 File object (https://developer.mozilla.org/en-US/docs/Web/API/File)\n * @param [onSuccess] {function} A callback function to execute after the image has been successfully uploaded, with one parameter:\n * - url (string): The URL of the uploaded image.\n * @param [onError] {function} A callback function to execute when the image upload fails, with one parameter:\n * - error (string): the detailed error to display to the user (based on messages from options.errorMessages).\n */\nEasyMDE.prototype.uploadImage = function (file, onSuccess, onError) {\n    var self = this;\n    onSuccess = onSuccess || function onSuccess(imageUrl) {\n        afterImageUploaded(self, imageUrl);\n    };\n\n    function onErrorSup(errorMessage) {\n        // show error on status bar and reset after 10000ms\n        self.updateStatusBar('upload-image', errorMessage);\n\n        setTimeout(function () {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n        }, 10000);\n\n        // run custom error handler\n        if (onError && typeof onError === 'function') {\n            onError(errorMessage);\n        }\n        // run error handler from options, this alerts the message.\n        self.options.errorCallback(errorMessage);\n    }\n\n    function fillErrorMessage(errorMessage) {\n        var units = self.options.imageTexts.sizeUnits.split(',');\n        return errorMessage\n            .replace('#image_name#', file.name)\n            .replace('#image_size#', humanFileSize(file.size, units))\n            .replace('#image_max_size#', humanFileSize(self.options.imageMaxSize, units));\n    }\n\n    if (file.size > this.options.imageMaxSize) {\n        onErrorSup(fillErrorMessage(this.options.errorMessages.fileTooLarge));\n        return;\n    }\n\n    var formData = new FormData();\n    formData.append('image', file);\n\n    // insert CSRF token if provided in config.\n    if (self.options.imageCSRFToken) {\n        formData.append('csrfmiddlewaretoken', self.options.imageCSRFToken);\n    }\n    var request = new XMLHttpRequest();\n    request.upload.onprogress = function (event) {\n        if (event.lengthComputable) {\n            var progress = '' + Math.round((event.loaded * 100) / event.total);\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbProgress.replace('#file_name#', file.name).replace('#progress#', progress));\n        }\n    };\n    request.open('POST', this.options.imageUploadEndpoint);\n\n    request.onload = function () {\n        try {\n            var response = JSON.parse(this.responseText);\n        } catch (error) {\n            console.error('EasyMDE: The server did not return a valid json.');\n            onErrorSup(fillErrorMessage(self.options.errorMessages.importError));\n            return;\n        }\n        if (this.status === 200 && response && !response.error && response.data && response.data.filePath) {\n            onSuccess((self.options.imagePathAbsolute ? '' : (window.location.origin + '/')) + response.data.filePath);\n        } else {\n            if (response.error && response.error in self.options.errorMessages) {  // preformatted error message\n                onErrorSup(fillErrorMessage(self.options.errorMessages[response.error]));\n            } else if (response.error) {  // server side generated error message\n                onErrorSup(fillErrorMessage(response.error));\n            } else {  //unknown error\n                console.error('EasyMDE: Received an unexpected response after uploading the image.'\n                    + this.status + ' (' + this.statusText + ')');\n                onErrorSup(fillErrorMessage(self.options.errorMessages.importError));\n            }\n        }\n    };\n\n    request.onerror = function (event) {\n        console.error('EasyMDE: An unexpected error occurred when trying to upload the image.'\n            + event.target.status + ' (' + event.target.statusText + ')');\n        onErrorSup(self.options.errorMessages.importError);\n    };\n\n    request.send(formData);\n\n};\n\n/**\n * Upload an image to the server using a custom upload function.\n *\n * @param imageUploadFunction {Function} The custom function to upload the image passed in options\n * @param file {File} The image to upload, as a HTML5 File object (https://developer.mozilla.org/en-US/docs/Web/API/File).\n */\nEasyMDE.prototype.uploadImageUsingCustomFunction = function(imageUploadFunction, file) {\n    var self = this;\n    function onSuccess(imageUrl) {\n        afterImageUploaded(self, imageUrl);\n    }\n\n    function onError(errorMessage) {\n        var filledErrorMessage = fillErrorMessage(errorMessage);\n        // show error on status bar and reset after 10000ms\n        self.updateStatusBar('upload-image', filledErrorMessage);\n\n        setTimeout(function () {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n        }, 10000);\n\n        // run error handler from options, this alerts the message.\n        self.options.errorCallback(filledErrorMessage);\n    }\n\n    function fillErrorMessage(errorMessage) {\n        var units = self.options.imageTexts.sizeUnits.split(',');\n        return errorMessage\n            .replace('#image_name#', file.name)\n            .replace('#image_size#', humanFileSize(file.size, units))\n            .replace('#image_max_size#', humanFileSize(self.options.imageMaxSize, units));\n    }\n\n    imageUploadFunction.apply(this, [file, onSuccess, onError]);\n};\n\nEasyMDE.prototype.setPreviewMaxHeight = function () {\n    var cm = this.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var preview = wrapper.nextSibling;\n\n    // Calc preview max height\n    var paddingTop = parseInt(window.getComputedStyle(wrapper).paddingTop);\n    var borderTopWidth = parseInt(window.getComputedStyle(wrapper).borderTopWidth);\n    var optionsMaxHeight = parseInt(this.options.maxHeight);\n    var wrapperMaxHeight = optionsMaxHeight + paddingTop * 2 + borderTopWidth * 2;\n    var previewMaxHeight = wrapperMaxHeight.toString() + 'px';\n\n    preview.style.height =  previewMaxHeight;\n};\n\nEasyMDE.prototype.createSideBySide = function () {\n    var cm = this.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var preview = wrapper.nextSibling;\n\n    if (!preview || !/editor-preview-side/.test(preview.className)) {\n        preview = document.createElement('div');\n        preview.className = 'editor-preview-side';\n\n        if (this.options.previewClass) {\n\n            if (Array.isArray(this.options.previewClass)) {\n                for (var i = 0; i < this.options.previewClass.length; i++) {\n                    preview.className += (' ' + this.options.previewClass[i]);\n                }\n\n            } else if (typeof this.options.previewClass === 'string') {\n                preview.className += (' ' + this.options.previewClass);\n            }\n        }\n\n        wrapper.parentNode.insertBefore(preview, wrapper.nextSibling);\n    }\n\n    if (typeof this.options.maxHeight !== 'undefined') {\n        this.setPreviewMaxHeight();\n    }\n\n    if (this.options.syncSideBySidePreviewScroll === false) return preview;\n    // Syncs scroll  editor -> preview\n    var cScroll = false;\n    var pScroll = false;\n    cm.on('scroll', function (v) {\n        if (cScroll) {\n            cScroll = false;\n            return;\n        }\n        pScroll = true;\n        var height = v.getScrollInfo().height - v.getScrollInfo().clientHeight;\n        var ratio = parseFloat(v.getScrollInfo().top) / height;\n        var move = (preview.scrollHeight - preview.clientHeight) * ratio;\n        preview.scrollTop = move;\n    });\n\n    // Syncs scroll  preview -> editor\n    preview.onscroll = function () {\n        if (pScroll) {\n            pScroll = false;\n            return;\n        }\n        cScroll = true;\n        var height = preview.scrollHeight - preview.clientHeight;\n        var ratio = parseFloat(preview.scrollTop) / height;\n        var move = (cm.getScrollInfo().height - cm.getScrollInfo().clientHeight) * ratio;\n        cm.scrollTo(0, move);\n    };\n    return preview;\n};\n\nEasyMDE.prototype.createToolbar = function (items) {\n    items = items || this.options.toolbar;\n\n    if (!items || items.length === 0) {\n        return;\n    }\n    var i;\n    for (i = 0; i < items.length; i++) {\n        if (toolbarBuiltInButtons[items[i]] != undefined) {\n            items[i] = toolbarBuiltInButtons[items[i]];\n        }\n    }\n\n    var bar = document.createElement('div');\n    bar.className = 'editor-toolbar';\n\n    var self = this;\n\n    var toolbarData = {};\n    self.toolbar = items;\n\n    for (i = 0; i < items.length; i++) {\n        if (items[i].name == 'guide' && self.options.toolbarGuideIcon === false)\n            continue;\n\n        if (self.options.hideIcons && self.options.hideIcons.indexOf(items[i].name) != -1)\n            continue;\n\n        // Fullscreen does not work well on mobile devices (even tablets)\n        // In the future, hopefully this can be resolved\n        if ((items[i].name == 'fullscreen' || items[i].name == 'side-by-side') && isMobile())\n            continue;\n\n\n        // Don't include trailing separators\n        if (items[i] === '|') {\n            var nonSeparatorIconsFollow = false;\n\n            for (var x = (i + 1); x < items.length; x++) {\n                if (items[x] !== '|' && (!self.options.hideIcons || self.options.hideIcons.indexOf(items[x].name) == -1)) {\n                    nonSeparatorIconsFollow = true;\n                }\n            }\n\n            if (!nonSeparatorIconsFollow)\n                continue;\n        }\n\n\n        // Create the icon and append to the toolbar\n        (function (item) {\n            var el;\n            if (item === '|') {\n                el = createSep();\n            } else if (item.children) {\n                el = createToolbarDropdown(item, self.options.toolbarTips, self.options.shortcuts, self);\n            } else {\n                el = createToolbarButton(item, true, self.options.toolbarTips, self.options.shortcuts, 'button', self);\n            }\n\n\n            toolbarData[item.name || item] = el;\n            bar.appendChild(el);\n\n            // Create the input element (ie. <input type='file'>), used among\n            // with the 'import-image' icon to open the browse-file window.\n            if (item.name === 'upload-image') {\n                var imageInput = document.createElement('input');\n                imageInput.className = 'imageInput';\n                imageInput.type = 'file';\n                imageInput.multiple = true;\n                imageInput.name = 'image';\n                imageInput.accept = self.options.imageAccept;\n                imageInput.style.display = 'none';\n                imageInput.style.opacity = 0;\n                bar.appendChild(imageInput);\n            }\n        })(items[i]);\n    }\n\n    self.toolbar_div = bar;\n    self.toolbarElements = toolbarData;\n\n    var cm = this.codemirror;\n    cm.on('cursorActivity', function () {\n        var stat = getState(cm);\n\n        for (var key in toolbarData) {\n            (function (key) {\n                var el = toolbarData[key];\n                if (stat[key]) {\n                    el.className += ' active';\n                } else if (key != 'fullscreen' && key != 'side-by-side') {\n                    el.className = el.className.replace(/\\s*active\\s*/g, '');\n                }\n            })(key);\n        }\n    });\n\n    var cmWrapper = cm.getWrapperElement();\n    cmWrapper.parentNode.insertBefore(bar, cmWrapper);\n    return bar;\n};\n\nEasyMDE.prototype.createStatusbar = function (status) {\n    // Initialize\n    status = status || this.options.status;\n    var options = this.options;\n    var cm = this.codemirror;\n\n    // Make sure the status variable is valid\n    if (!status || status.length === 0) {\n        return;\n    }\n\n    // Set up the built-in items\n    var items = [];\n    var i, onUpdate, onActivity, defaultValue;\n\n    for (i = 0; i < status.length; i++) {\n        // Reset some values\n        onUpdate = undefined;\n        onActivity = undefined;\n        defaultValue = undefined;\n\n\n        // Handle if custom or not\n        if (typeof status[i] === 'object') {\n            items.push({\n                className: status[i].className,\n                defaultValue: status[i].defaultValue,\n                onUpdate: status[i].onUpdate,\n                onActivity: status[i].onActivity,\n            });\n        } else {\n            var name = status[i];\n\n            if (name === 'words') {\n                defaultValue = function (el) {\n                    el.innerHTML = wordCount(cm.getValue());\n                };\n                onUpdate = function (el) {\n                    el.innerHTML = wordCount(cm.getValue());\n                };\n            } else if (name === 'lines') {\n                defaultValue = function (el) {\n                    el.innerHTML = cm.lineCount();\n                };\n                onUpdate = function (el) {\n                    el.innerHTML = cm.lineCount();\n                };\n            } else if (name === 'cursor') {\n                defaultValue = function (el) {\n                    el.innerHTML = '0:0';\n                };\n                onActivity = function (el) {\n                    var pos = cm.getCursor();\n                    el.innerHTML = pos.line + ':' + pos.ch;\n                };\n            } else if (name === 'autosave') {\n                defaultValue = function (el) {\n                    if (options.autosave != undefined && options.autosave.enabled === true) {\n                        el.setAttribute('id', 'autosaved');\n                    }\n                };\n            } else if (name === 'upload-image') {\n                defaultValue = function (el) {\n                    el.innerHTML = options.imageTexts.sbInit;\n                };\n            }\n\n            items.push({\n                className: name,\n                defaultValue: defaultValue,\n                onUpdate: onUpdate,\n                onActivity: onActivity,\n            });\n        }\n    }\n\n\n    // Create element for the status bar\n    var bar = document.createElement('div');\n    bar.className = 'editor-statusbar';\n\n\n    // Create a new span for each item\n    for (i = 0; i < items.length; i++) {\n        // Store in temporary variable\n        var item = items[i];\n\n\n        // Create span element\n        var el = document.createElement('span');\n        el.className = item.className;\n\n\n        // Ensure the defaultValue is a function\n        if (typeof item.defaultValue === 'function') {\n            item.defaultValue(el);\n        }\n\n\n        // Ensure the onUpdate is a function\n        if (typeof item.onUpdate === 'function') {\n            // Create a closure around the span of the current action, then execute the onUpdate handler\n            this.codemirror.on('update', (function (el, item) {\n                return function () {\n                    item.onUpdate(el);\n                };\n            }(el, item)));\n        }\n        if (typeof item.onActivity === 'function') {\n            // Create a closure around the span of the current action, then execute the onActivity handler\n            this.codemirror.on('cursorActivity', (function (el, item) {\n                return function () {\n                    item.onActivity(el);\n                };\n            }(el, item)));\n        }\n\n\n        // Append the item to the status bar\n        bar.appendChild(el);\n    }\n\n\n    // Insert the status bar into the DOM\n    var cmWrapper = this.codemirror.getWrapperElement();\n    cmWrapper.parentNode.insertBefore(bar, cmWrapper.nextSibling);\n    return bar;\n};\n\n/**\n * Get or set the text content.\n */\nEasyMDE.prototype.value = function (val) {\n    var cm = this.codemirror;\n    if (val === undefined) {\n        return cm.getValue();\n    } else {\n        cm.getDoc().setValue(val);\n        if (this.isPreviewActive()) {\n            var wrapper = cm.getWrapperElement();\n            var preview = wrapper.lastChild;\n            preview.innerHTML = this.options.previewRender(val, preview);\n        }\n        return this;\n    }\n};\n\n\n/**\n * Bind static methods for exports.\n */\nEasyMDE.toggleBold = toggleBold;\nEasyMDE.toggleItalic = toggleItalic;\nEasyMDE.toggleStrikethrough = toggleStrikethrough;\nEasyMDE.toggleBlockquote = toggleBlockquote;\nEasyMDE.toggleHeadingSmaller = toggleHeadingSmaller;\nEasyMDE.toggleHeadingBigger = toggleHeadingBigger;\nEasyMDE.toggleHeading1 = toggleHeading1;\nEasyMDE.toggleHeading2 = toggleHeading2;\nEasyMDE.toggleHeading3 = toggleHeading3;\nEasyMDE.toggleCodeBlock = toggleCodeBlock;\nEasyMDE.toggleUnorderedList = toggleUnorderedList;\nEasyMDE.toggleOrderedList = toggleOrderedList;\nEasyMDE.cleanBlock = cleanBlock;\nEasyMDE.drawLink = drawLink;\nEasyMDE.drawImage = drawImage;\nEasyMDE.drawUploadedImage = drawUploadedImage;\nEasyMDE.drawTable = drawTable;\nEasyMDE.drawHorizontalRule = drawHorizontalRule;\nEasyMDE.undo = undo;\nEasyMDE.redo = redo;\nEasyMDE.togglePreview = togglePreview;\nEasyMDE.toggleSideBySide = toggleSideBySide;\nEasyMDE.toggleFullScreen = toggleFullScreen;\n\n/**\n * Bind instance methods for exports.\n */\nEasyMDE.prototype.toggleBold = function () {\n    toggleBold(this);\n};\nEasyMDE.prototype.toggleItalic = function () {\n    toggleItalic(this);\n};\nEasyMDE.prototype.toggleStrikethrough = function () {\n    toggleStrikethrough(this);\n};\nEasyMDE.prototype.toggleBlockquote = function () {\n    toggleBlockquote(this);\n};\nEasyMDE.prototype.toggleHeadingSmaller = function () {\n    toggleHeadingSmaller(this);\n};\nEasyMDE.prototype.toggleHeadingBigger = function () {\n    toggleHeadingBigger(this);\n};\nEasyMDE.prototype.toggleHeading1 = function () {\n    toggleHeading1(this);\n};\nEasyMDE.prototype.toggleHeading2 = function () {\n    toggleHeading2(this);\n};\nEasyMDE.prototype.toggleHeading3 = function () {\n    toggleHeading3(this);\n};\nEasyMDE.prototype.toggleCodeBlock = function () {\n    toggleCodeBlock(this);\n};\nEasyMDE.prototype.toggleUnorderedList = function () {\n    toggleUnorderedList(this);\n};\nEasyMDE.prototype.toggleOrderedList = function () {\n    toggleOrderedList(this);\n};\nEasyMDE.prototype.cleanBlock = function () {\n    cleanBlock(this);\n};\nEasyMDE.prototype.drawLink = function () {\n    drawLink(this);\n};\nEasyMDE.prototype.drawImage = function () {\n    drawImage(this);\n};\nEasyMDE.prototype.drawUploadedImage = function () {\n    drawUploadedImage(this);\n};\nEasyMDE.prototype.drawTable = function () {\n    drawTable(this);\n};\nEasyMDE.prototype.drawHorizontalRule = function () {\n    drawHorizontalRule(this);\n};\nEasyMDE.prototype.undo = function () {\n    undo(this);\n};\nEasyMDE.prototype.redo = function () {\n    redo(this);\n};\nEasyMDE.prototype.togglePreview = function () {\n    togglePreview(this);\n};\nEasyMDE.prototype.toggleSideBySide = function () {\n    toggleSideBySide(this);\n};\nEasyMDE.prototype.toggleFullScreen = function () {\n    toggleFullScreen(this);\n};\n\nEasyMDE.prototype.isPreviewActive = function () {\n    var cm = this.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var preview = wrapper.lastChild;\n\n    return /editor-preview-active/.test(preview.className);\n};\n\nEasyMDE.prototype.isSideBySideActive = function () {\n    var cm = this.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var preview = wrapper.nextSibling;\n\n    return /editor-preview-active-side/.test(preview.className);\n};\n\nEasyMDE.prototype.isFullscreenActive = function () {\n    var cm = this.codemirror;\n\n    return cm.getOption('fullScreen');\n};\n\nEasyMDE.prototype.getState = function () {\n    var cm = this.codemirror;\n\n    return getState(cm);\n};\n\nEasyMDE.prototype.toTextArea = function () {\n    var cm = this.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var easyMDEContainer = wrapper.parentNode;\n\n    if (easyMDEContainer) {\n        if (this.gui.toolbar) {\n            easyMDEContainer.removeChild(this.gui.toolbar);\n        }\n        if (this.gui.statusbar) {\n            easyMDEContainer.removeChild(this.gui.statusbar);\n        }\n        if (this.gui.sideBySide) {\n            easyMDEContainer.removeChild(this.gui.sideBySide);\n        }\n    }\n\n    // Unwrap easyMDEcontainer before codemirror toTextArea() call\n    easyMDEContainer.parentNode.insertBefore(wrapper, easyMDEContainer);\n    easyMDEContainer.remove();\n\n    cm.toTextArea();\n\n    if (this.autosaveTimeoutId) {\n        clearTimeout(this.autosaveTimeoutId);\n        this.autosaveTimeoutId = undefined;\n        this.clearAutosavedValue();\n    }\n};\n\nmodule.exports = EasyMDE;\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var listRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]\\s|[*+-]\\s|(\\d+)([.)]))(\\s*)/,\n      emptyListRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]|[*+-]|(\\d+)[.)])(\\s*)$/,\n      unorderedListRE = /[*+-]\\s/;\n\n  CodeMirror.commands.newlineAndIndentContinueMarkdownList = function(cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    var ranges = cm.listSelections(), replacements = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var pos = ranges[i].head;\n\n      // If we're not in Markdown mode, fall back to normal newlineAndIndent\n      var eolState = cm.getStateAfter(pos.line);\n      var inner = CodeMirror.innerMode(cm.getMode(), eolState);\n      if (inner.mode.name !== \"markdown\") {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      } else {\n        eolState = inner.state;\n      }\n\n      var inList = eolState.list !== false;\n      var inQuote = eolState.quote !== 0;\n\n      var line = cm.getLine(pos.line), match = listRE.exec(line);\n      var cursorBeforeBullet = /^\\s*$/.test(line.slice(0, pos.ch));\n      if (!ranges[i].empty() || (!inList && !inQuote) || !match || cursorBeforeBullet) {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      }\n      if (emptyListRE.test(line)) {\n        var endOfQuote = inQuote && />\\s*$/.test(line)\n        var endOfList = !/>\\s*$/.test(line)\n        if (endOfQuote || endOfList) cm.replaceRange(\"\", {\n          line: pos.line, ch: 0\n        }, {\n          line: pos.line, ch: pos.ch + 1\n        });\n        replacements[i] = \"\\n\";\n      } else {\n        var indent = match[1], after = match[5];\n        var numbered = !(unorderedListRE.test(match[2]) || match[2].indexOf(\">\") >= 0);\n        var bullet = numbered ? (parseInt(match[3], 10) + 1) + match[4] : match[2].replace(\"x\", \" \");\n        replacements[i] = \"\\n\" + indent + bullet + after;\n\n        if (numbered) incrementRemainingMarkdownListNumbers(cm, pos);\n      }\n    }\n\n    cm.replaceSelections(replacements);\n  };\n\n  // Auto-updating Markdown list numbers when a new item is added to the\n  // middle of a list\n  function incrementRemainingMarkdownListNumbers(cm, pos) {\n    var startLine = pos.line, lookAhead = 0, skipCount = 0;\n    var startItem = listRE.exec(cm.getLine(startLine)), startIndent = startItem[1];\n\n    do {\n      lookAhead += 1;\n      var nextLineNumber = startLine + lookAhead;\n      var nextLine = cm.getLine(nextLineNumber), nextItem = listRE.exec(nextLine);\n\n      if (nextItem) {\n        var nextIndent = nextItem[1];\n        var newNumber = (parseInt(startItem[3], 10) + lookAhead - skipCount);\n        var nextNumber = (parseInt(nextItem[3], 10)), itemNumber = nextNumber;\n\n        if (startIndent === nextIndent && !isNaN(nextNumber)) {\n          if (newNumber === nextNumber) itemNumber = nextNumber + 1;\n          if (newNumber > nextNumber) itemNumber = newNumber + 1;\n          cm.replaceRange(\n            nextLine.replace(listRE, nextIndent + itemNumber + nextItem[4] + nextItem[5]),\n          {\n            line: nextLineNumber, ch: 0\n          }, {\n            line: nextLineNumber, ch: nextLine.length\n          });\n        } else {\n          if (startIndent.length > nextIndent.length) return;\n          // This doesn't run if the next line immediately indents, as it is\n          // not clear of the users intention (new indented item or same level)\n          if ((startIndent.length < nextIndent.length) && (lookAhead === 1)) return;\n          skipCount += 1;\n        }\n      }\n    } while (nextItem);\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\nvar CodeMirror = require('codemirror');\n\nCodeMirror.commands.tabAndIndentMarkdownList = function (cm) {\n    var ranges = cm.listSelections();\n    var pos = ranges[0].head;\n    var eolState = cm.getStateAfter(pos.line);\n    var inList = eolState.list !== false;\n\n    if (inList) {\n        cm.execCommand('indentMore');\n        return;\n    }\n\n    if (cm.options.indentWithTabs) {\n        cm.execCommand('insertTab');\n    }\n    else {\n        var spaces = Array(cm.options.tabSize + 1).join(' ');\n        cm.replaceSelection(spaces);\n    }\n};\n\nCodeMirror.commands.shiftTabAndUnindentMarkdownList = function (cm) {\n    var ranges = cm.listSelections();\n    var pos = ranges[0].head;\n    var eolState = cm.getStateAfter(pos.line);\n    var inList = eolState.list !== false;\n\n    if (inList) {\n        cm.execCommand('indentLess');\n        return;\n    }\n\n    if (cm.options.indentWithTabs) {\n        cm.execCommand('insertTab');\n    }\n    else {\n        var spaces = Array(cm.options.tabSize + 1).join(' ');\n        cm.replaceSelection(spaces);\n    }\n};\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"fullScreen\", false, function(cm, val, old) {\n    if (old == CodeMirror.Init) old = false;\n    if (!old == !val) return;\n    if (val) setFullscreen(cm);\n    else setNormal(cm);\n  });\n\n  function setFullscreen(cm) {\n    var wrap = cm.getWrapperElement();\n    cm.state.fullScreenRestore = {scrollTop: window.pageYOffset, scrollLeft: window.pageXOffset,\n                                  width: wrap.style.width, height: wrap.style.height};\n    wrap.style.width = \"\";\n    wrap.style.height = \"auto\";\n    wrap.className += \" CodeMirror-fullscreen\";\n    document.documentElement.style.overflow = \"hidden\";\n    cm.refresh();\n  }\n\n  function setNormal(cm) {\n    var wrap = cm.getWrapperElement();\n    wrap.className = wrap.className.replace(/\\s*CodeMirror-fullscreen\\b/, \"\");\n    document.documentElement.style.overflow = \"\";\n    var info = cm.state.fullScreenRestore;\n    wrap.style.width = info.width; wrap.style.height = info.height;\n    window.scrollTo(info.scrollLeft, info.scrollTop);\n    cm.refresh();\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.modeInfo = [\n    {name: \"APL\", mime: \"text/apl\", mode: \"apl\", ext: [\"dyalog\", \"apl\"]},\n    {name: \"PGP\", mimes: [\"application/pgp\", \"application/pgp-encrypted\", \"application/pgp-keys\", \"application/pgp-signature\"], mode: \"asciiarmor\", ext: [\"asc\", \"pgp\", \"sig\"]},\n    {name: \"ASN.1\", mime: \"text/x-ttcn-asn\", mode: \"asn.1\", ext: [\"asn\", \"asn1\"]},\n    {name: \"Asterisk\", mime: \"text/x-asterisk\", mode: \"asterisk\", file: /^extensions\\.conf$/i},\n    {name: \"Brainfuck\", mime: \"text/x-brainfuck\", mode: \"brainfuck\", ext: [\"b\", \"bf\"]},\n    {name: \"C\", mime: \"text/x-csrc\", mode: \"clike\", ext: [\"c\", \"h\", \"ino\"]},\n    {name: \"C++\", mime: \"text/x-c++src\", mode: \"clike\", ext: [\"cpp\", \"c++\", \"cc\", \"cxx\", \"hpp\", \"h++\", \"hh\", \"hxx\"], alias: [\"cpp\"]},\n    {name: \"Cobol\", mime: \"text/x-cobol\", mode: \"cobol\", ext: [\"cob\", \"cpy\"]},\n    {name: \"C#\", mime: \"text/x-csharp\", mode: \"clike\", ext: [\"cs\"], alias: [\"csharp\", \"cs\"]},\n    {name: \"Clojure\", mime: \"text/x-clojure\", mode: \"clojure\", ext: [\"clj\", \"cljc\", \"cljx\"]},\n    {name: \"ClojureScript\", mime: \"text/x-clojurescript\", mode: \"clojure\", ext: [\"cljs\"]},\n    {name: \"Closure Stylesheets (GSS)\", mime: \"text/x-gss\", mode: \"css\", ext: [\"gss\"]},\n    {name: \"CMake\", mime: \"text/x-cmake\", mode: \"cmake\", ext: [\"cmake\", \"cmake.in\"], file: /^CMakeLists\\.txt$/},\n    {name: \"CoffeeScript\", mimes: [\"application/vnd.coffeescript\", \"text/coffeescript\", \"text/x-coffeescript\"], mode: \"coffeescript\", ext: [\"coffee\"], alias: [\"coffee\", \"coffee-script\"]},\n    {name: \"Common Lisp\", mime: \"text/x-common-lisp\", mode: \"commonlisp\", ext: [\"cl\", \"lisp\", \"el\"], alias: [\"lisp\"]},\n    {name: \"Cypher\", mime: \"application/x-cypher-query\", mode: \"cypher\", ext: [\"cyp\", \"cypher\"]},\n    {name: \"Cython\", mime: \"text/x-cython\", mode: \"python\", ext: [\"pyx\", \"pxd\", \"pxi\"]},\n    {name: \"Crystal\", mime: \"text/x-crystal\", mode: \"crystal\", ext: [\"cr\"]},\n    {name: \"CSS\", mime: \"text/css\", mode: \"css\", ext: [\"css\"]},\n    {name: \"CQL\", mime: \"text/x-cassandra\", mode: \"sql\", ext: [\"cql\"]},\n    {name: \"D\", mime: \"text/x-d\", mode: \"d\", ext: [\"d\"]},\n    {name: \"Dart\", mimes: [\"application/dart\", \"text/x-dart\"], mode: \"dart\", ext: [\"dart\"]},\n    {name: \"diff\", mime: \"text/x-diff\", mode: \"diff\", ext: [\"diff\", \"patch\"]},\n    {name: \"Django\", mime: \"text/x-django\", mode: \"django\"},\n    {name: \"Dockerfile\", mime: \"text/x-dockerfile\", mode: \"dockerfile\", file: /^Dockerfile$/},\n    {name: \"DTD\", mime: \"application/xml-dtd\", mode: \"dtd\", ext: [\"dtd\"]},\n    {name: \"Dylan\", mime: \"text/x-dylan\", mode: \"dylan\", ext: [\"dylan\", \"dyl\", \"intr\"]},\n    {name: \"EBNF\", mime: \"text/x-ebnf\", mode: \"ebnf\"},\n    {name: \"ECL\", mime: \"text/x-ecl\", mode: \"ecl\", ext: [\"ecl\"]},\n    {name: \"edn\", mime: \"application/edn\", mode: \"clojure\", ext: [\"edn\"]},\n    {name: \"Eiffel\", mime: \"text/x-eiffel\", mode: \"eiffel\", ext: [\"e\"]},\n    {name: \"Elm\", mime: \"text/x-elm\", mode: \"elm\", ext: [\"elm\"]},\n    {name: \"Embedded JavaScript\", mime: \"application/x-ejs\", mode: \"htmlembedded\", ext: [\"ejs\"]},\n    {name: \"Embedded Ruby\", mime: \"application/x-erb\", mode: \"htmlembedded\", ext: [\"erb\"]},\n    {name: \"Erlang\", mime: \"text/x-erlang\", mode: \"erlang\", ext: [\"erl\"]},\n    {name: \"Esper\", mime: \"text/x-esper\", mode: \"sql\"},\n    {name: \"Factor\", mime: \"text/x-factor\", mode: \"factor\", ext: [\"factor\"]},\n    {name: \"FCL\", mime: \"text/x-fcl\", mode: \"fcl\"},\n    {name: \"Forth\", mime: \"text/x-forth\", mode: \"forth\", ext: [\"forth\", \"fth\", \"4th\"]},\n    {name: \"Fortran\", mime: \"text/x-fortran\", mode: \"fortran\", ext: [\"f\", \"for\", \"f77\", \"f90\", \"f95\"]},\n    {name: \"F#\", mime: \"text/x-fsharp\", mode: \"mllike\", ext: [\"fs\"], alias: [\"fsharp\"]},\n    {name: \"Gas\", mime: \"text/x-gas\", mode: \"gas\", ext: [\"s\"]},\n    {name: \"Gherkin\", mime: \"text/x-feature\", mode: \"gherkin\", ext: [\"feature\"]},\n    {name: \"GitHub Flavored Markdown\", mime: \"text/x-gfm\", mode: \"gfm\", file: /^(readme|contributing|history)\\.md$/i},\n    {name: \"Go\", mime: \"text/x-go\", mode: \"go\", ext: [\"go\"]},\n    {name: \"Groovy\", mime: \"text/x-groovy\", mode: \"groovy\", ext: [\"groovy\", \"gradle\"], file: /^Jenkinsfile$/},\n    {name: \"HAML\", mime: \"text/x-haml\", mode: \"haml\", ext: [\"haml\"]},\n    {name: \"Haskell\", mime: \"text/x-haskell\", mode: \"haskell\", ext: [\"hs\"]},\n    {name: \"Haskell (Literate)\", mime: \"text/x-literate-haskell\", mode: \"haskell-literate\", ext: [\"lhs\"]},\n    {name: \"Haxe\", mime: \"text/x-haxe\", mode: \"haxe\", ext: [\"hx\"]},\n    {name: \"HXML\", mime: \"text/x-hxml\", mode: \"haxe\", ext: [\"hxml\"]},\n    {name: \"ASP.NET\", mime: \"application/x-aspx\", mode: \"htmlembedded\", ext: [\"aspx\"], alias: [\"asp\", \"aspx\"]},\n    {name: \"HTML\", mime: \"text/html\", mode: \"htmlmixed\", ext: [\"html\", \"htm\", \"handlebars\", \"hbs\"], alias: [\"xhtml\"]},\n    {name: \"HTTP\", mime: \"message/http\", mode: \"http\"},\n    {name: \"IDL\", mime: \"text/x-idl\", mode: \"idl\", ext: [\"pro\"]},\n    {name: \"Pug\", mime: \"text/x-pug\", mode: \"pug\", ext: [\"jade\", \"pug\"], alias: [\"jade\"]},\n    {name: \"Java\", mime: \"text/x-java\", mode: \"clike\", ext: [\"java\"]},\n    {name: \"Java Server Pages\", mime: \"application/x-jsp\", mode: \"htmlembedded\", ext: [\"jsp\"], alias: [\"jsp\"]},\n    {name: \"JavaScript\", mimes: [\"text/javascript\", \"text/ecmascript\", \"application/javascript\", \"application/x-javascript\", \"application/ecmascript\"],\n     mode: \"javascript\", ext: [\"js\"], alias: [\"ecmascript\", \"js\", \"node\"]},\n    {name: \"JSON\", mimes: [\"application/json\", \"application/x-json\"], mode: \"javascript\", ext: [\"json\", \"map\"], alias: [\"json5\"]},\n    {name: \"JSON-LD\", mime: \"application/ld+json\", mode: \"javascript\", ext: [\"jsonld\"], alias: [\"jsonld\"]},\n    {name: \"JSX\", mime: \"text/jsx\", mode: \"jsx\", ext: [\"jsx\"]},\n    {name: \"Jinja2\", mime: \"text/jinja2\", mode: \"jinja2\", ext: [\"j2\", \"jinja\", \"jinja2\"]},\n    {name: \"Julia\", mime: \"text/x-julia\", mode: \"julia\", ext: [\"jl\"], alias: [\"jl\"]},\n    {name: \"Kotlin\", mime: \"text/x-kotlin\", mode: \"clike\", ext: [\"kt\"]},\n    {name: \"LESS\", mime: \"text/x-less\", mode: \"css\", ext: [\"less\"]},\n    {name: \"LiveScript\", mime: \"text/x-livescript\", mode: \"livescript\", ext: [\"ls\"], alias: [\"ls\"]},\n    {name: \"Lua\", mime: \"text/x-lua\", mode: \"lua\", ext: [\"lua\"]},\n    {name: \"Markdown\", mime: \"text/x-markdown\", mode: \"markdown\", ext: [\"markdown\", \"md\", \"mkd\"]},\n    {name: \"mIRC\", mime: \"text/mirc\", mode: \"mirc\"},\n    {name: \"MariaDB SQL\", mime: \"text/x-mariadb\", mode: \"sql\"},\n    {name: \"Mathematica\", mime: \"text/x-mathematica\", mode: \"mathematica\", ext: [\"m\", \"nb\", \"wl\", \"wls\"]},\n    {name: \"Modelica\", mime: \"text/x-modelica\", mode: \"modelica\", ext: [\"mo\"]},\n    {name: \"MUMPS\", mime: \"text/x-mumps\", mode: \"mumps\", ext: [\"mps\"]},\n    {name: \"MS SQL\", mime: \"text/x-mssql\", mode: \"sql\"},\n    {name: \"mbox\", mime: \"application/mbox\", mode: \"mbox\", ext: [\"mbox\"]},\n    {name: \"MySQL\", mime: \"text/x-mysql\", mode: \"sql\"},\n    {name: \"Nginx\", mime: \"text/x-nginx-conf\", mode: \"nginx\", file: /nginx.*\\.conf$/i},\n    {name: \"NSIS\", mime: \"text/x-nsis\", mode: \"nsis\", ext: [\"nsh\", \"nsi\"]},\n    {name: \"NTriples\", mimes: [\"application/n-triples\", \"application/n-quads\", \"text/n-triples\"],\n     mode: \"ntriples\", ext: [\"nt\", \"nq\"]},\n    {name: \"Objective-C\", mime: \"text/x-objectivec\", mode: \"clike\", ext: [\"m\"], alias: [\"objective-c\", \"objc\"]},\n    {name: \"Objective-C++\", mime: \"text/x-objectivec++\", mode: \"clike\", ext: [\"mm\"], alias: [\"objective-c++\", \"objc++\"]},\n    {name: \"OCaml\", mime: \"text/x-ocaml\", mode: \"mllike\", ext: [\"ml\", \"mli\", \"mll\", \"mly\"]},\n    {name: \"Octave\", mime: \"text/x-octave\", mode: \"octave\", ext: [\"m\"]},\n    {name: \"Oz\", mime: \"text/x-oz\", mode: \"oz\", ext: [\"oz\"]},\n    {name: \"Pascal\", mime: \"text/x-pascal\", mode: \"pascal\", ext: [\"p\", \"pas\"]},\n    {name: \"PEG.js\", mime: \"null\", mode: \"pegjs\", ext: [\"jsonld\"]},\n    {name: \"Perl\", mime: \"text/x-perl\", mode: \"perl\", ext: [\"pl\", \"pm\"]},\n    {name: \"PHP\", mimes: [\"text/x-php\", \"application/x-httpd-php\", \"application/x-httpd-php-open\"], mode: \"php\", ext: [\"php\", \"php3\", \"php4\", \"php5\", \"php7\", \"phtml\"]},\n    {name: \"Pig\", mime: \"text/x-pig\", mode: \"pig\", ext: [\"pig\"]},\n    {name: \"Plain Text\", mime: \"text/plain\", mode: \"null\", ext: [\"txt\", \"text\", \"conf\", \"def\", \"list\", \"log\"]},\n    {name: \"PLSQL\", mime: \"text/x-plsql\", mode: \"sql\", ext: [\"pls\"]},\n    {name: \"PostgreSQL\", mime: \"text/x-pgsql\", mode: \"sql\"},\n    {name: \"PowerShell\", mime: \"application/x-powershell\", mode: \"powershell\", ext: [\"ps1\", \"psd1\", \"psm1\"]},\n    {name: \"Properties files\", mime: \"text/x-properties\", mode: \"properties\", ext: [\"properties\", \"ini\", \"in\"], alias: [\"ini\", \"properties\"]},\n    {name: \"ProtoBuf\", mime: \"text/x-protobuf\", mode: \"protobuf\", ext: [\"proto\"]},\n    {name: \"Python\", mime: \"text/x-python\", mode: \"python\", ext: [\"BUILD\", \"bzl\", \"py\", \"pyw\"], file: /^(BUCK|BUILD)$/},\n    {name: \"Puppet\", mime: \"text/x-puppet\", mode: \"puppet\", ext: [\"pp\"]},\n    {name: \"Q\", mime: \"text/x-q\", mode: \"q\", ext: [\"q\"]},\n    {name: \"R\", mime: \"text/x-rsrc\", mode: \"r\", ext: [\"r\", \"R\"], alias: [\"rscript\"]},\n    {name: \"reStructuredText\", mime: \"text/x-rst\", mode: \"rst\", ext: [\"rst\"], alias: [\"rst\"]},\n    {name: \"RPM Changes\", mime: \"text/x-rpm-changes\", mode: \"rpm\"},\n    {name: \"RPM Spec\", mime: \"text/x-rpm-spec\", mode: \"rpm\", ext: [\"spec\"]},\n    {name: \"Ruby\", mime: \"text/x-ruby\", mode: \"ruby\", ext: [\"rb\"], alias: [\"jruby\", \"macruby\", \"rake\", \"rb\", \"rbx\"]},\n    {name: \"Rust\", mime: \"text/x-rustsrc\", mode: \"rust\", ext: [\"rs\"]},\n    {name: \"SAS\", mime: \"text/x-sas\", mode: \"sas\", ext: [\"sas\"]},\n    {name: \"Sass\", mime: \"text/x-sass\", mode: \"sass\", ext: [\"sass\"]},\n    {name: \"Scala\", mime: \"text/x-scala\", mode: \"clike\", ext: [\"scala\"]},\n    {name: \"Scheme\", mime: \"text/x-scheme\", mode: \"scheme\", ext: [\"scm\", \"ss\"]},\n    {name: \"SCSS\", mime: \"text/x-scss\", mode: \"css\", ext: [\"scss\"]},\n    {name: \"Shell\", mimes: [\"text/x-sh\", \"application/x-sh\"], mode: \"shell\", ext: [\"sh\", \"ksh\", \"bash\"], alias: [\"bash\", \"sh\", \"zsh\"], file: /^PKGBUILD$/},\n    {name: \"Sieve\", mime: \"application/sieve\", mode: \"sieve\", ext: [\"siv\", \"sieve\"]},\n    {name: \"Slim\", mimes: [\"text/x-slim\", \"application/x-slim\"], mode: \"slim\", ext: [\"slim\"]},\n    {name: \"Smalltalk\", mime: \"text/x-stsrc\", mode: \"smalltalk\", ext: [\"st\"]},\n    {name: \"Smarty\", mime: \"text/x-smarty\", mode: \"smarty\", ext: [\"tpl\"]},\n    {name: \"Solr\", mime: \"text/x-solr\", mode: \"solr\"},\n    {name: \"SML\", mime: \"text/x-sml\", mode: \"mllike\", ext: [\"sml\", \"sig\", \"fun\", \"smackspec\"]},\n    {name: \"Soy\", mime: \"text/x-soy\", mode: \"soy\", ext: [\"soy\"], alias: [\"closure template\"]},\n    {name: \"SPARQL\", mime: \"application/sparql-query\", mode: \"sparql\", ext: [\"rq\", \"sparql\"], alias: [\"sparul\"]},\n    {name: \"Spreadsheet\", mime: \"text/x-spreadsheet\", mode: \"spreadsheet\", alias: [\"excel\", \"formula\"]},\n    {name: \"SQL\", mime: \"text/x-sql\", mode: \"sql\", ext: [\"sql\"]},\n    {name: \"SQLite\", mime: \"text/x-sqlite\", mode: \"sql\"},\n    {name: \"Squirrel\", mime: \"text/x-squirrel\", mode: \"clike\", ext: [\"nut\"]},\n    {name: \"Stylus\", mime: \"text/x-styl\", mode: \"stylus\", ext: [\"styl\"]},\n    {name: \"Swift\", mime: \"text/x-swift\", mode: \"swift\", ext: [\"swift\"]},\n    {name: \"sTeX\", mime: \"text/x-stex\", mode: \"stex\"},\n    {name: \"LaTeX\", mime: \"text/x-latex\", mode: \"stex\", ext: [\"text\", \"ltx\", \"tex\"], alias: [\"tex\"]},\n    {name: \"SystemVerilog\", mime: \"text/x-systemverilog\", mode: \"verilog\", ext: [\"v\", \"sv\", \"svh\"]},\n    {name: \"Tcl\", mime: \"text/x-tcl\", mode: \"tcl\", ext: [\"tcl\"]},\n    {name: \"Textile\", mime: \"text/x-textile\", mode: \"textile\", ext: [\"textile\"]},\n    {name: \"TiddlyWiki\", mime: \"text/x-tiddlywiki\", mode: \"tiddlywiki\"},\n    {name: \"Tiki wiki\", mime: \"text/tiki\", mode: \"tiki\"},\n    {name: \"TOML\", mime: \"text/x-toml\", mode: \"toml\", ext: [\"toml\"]},\n    {name: \"Tornado\", mime: \"text/x-tornado\", mode: \"tornado\"},\n    {name: \"troff\", mime: \"text/troff\", mode: \"troff\", ext: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]},\n    {name: \"TTCN\", mime: \"text/x-ttcn\", mode: \"ttcn\", ext: [\"ttcn\", \"ttcn3\", \"ttcnpp\"]},\n    {name: \"TTCN_CFG\", mime: \"text/x-ttcn-cfg\", mode: \"ttcn-cfg\", ext: [\"cfg\"]},\n    {name: \"Turtle\", mime: \"text/turtle\", mode: \"turtle\", ext: [\"ttl\"]},\n    {name: \"TypeScript\", mime: \"application/typescript\", mode: \"javascript\", ext: [\"ts\"], alias: [\"ts\"]},\n    {name: \"TypeScript-JSX\", mime: \"text/typescript-jsx\", mode: \"jsx\", ext: [\"tsx\"], alias: [\"tsx\"]},\n    {name: \"Twig\", mime: \"text/x-twig\", mode: \"twig\"},\n    {name: \"Web IDL\", mime: \"text/x-webidl\", mode: \"webidl\", ext: [\"webidl\"]},\n    {name: \"VB.NET\", mime: \"text/x-vb\", mode: \"vb\", ext: [\"vb\"]},\n    {name: \"VBScript\", mime: \"text/vbscript\", mode: \"vbscript\", ext: [\"vbs\"]},\n    {name: \"Velocity\", mime: \"text/velocity\", mode: \"velocity\", ext: [\"vtl\"]},\n    {name: \"Verilog\", mime: \"text/x-verilog\", mode: \"verilog\", ext: [\"v\"]},\n    {name: \"VHDL\", mime: \"text/x-vhdl\", mode: \"vhdl\", ext: [\"vhd\", \"vhdl\"]},\n    {name: \"Vue.js Component\", mimes: [\"script/x-vue\", \"text/x-vue\"], mode: \"vue\", ext: [\"vue\"]},\n    {name: \"XML\", mimes: [\"application/xml\", \"text/xml\"], mode: \"xml\", ext: [\"xml\", \"xsl\", \"xsd\", \"svg\"], alias: [\"rss\", \"wsdl\", \"xsd\"]},\n    {name: \"XQuery\", mime: \"application/xquery\", mode: \"xquery\", ext: [\"xy\", \"xquery\"]},\n    {name: \"Yacas\", mime: \"text/x-yacas\", mode: \"yacas\", ext: [\"ys\"]},\n    {name: \"YAML\", mimes: [\"text/x-yaml\", \"text/yaml\"], mode: \"yaml\", ext: [\"yaml\", \"yml\"], alias: [\"yml\"]},\n    {name: \"Z80\", mime: \"text/x-z80\", mode: \"z80\", ext: [\"z80\"]},\n    {name: \"mscgen\", mime: \"text/x-mscgen\", mode: \"mscgen\", ext: [\"mscgen\", \"mscin\", \"msc\"]},\n    {name: \"xu\", mime: \"text/x-xu\", mode: \"mscgen\", ext: [\"xu\"]},\n    {name: \"msgenny\", mime: \"text/x-msgenny\", mode: \"mscgen\", ext: [\"msgenny\"]},\n    {name: \"WebAssembly\", mime: \"text/webassembly\", mode: \"wast\", ext: [\"wat\", \"wast\"]},\n  ];\n  // Ensure all modes have a mime property for backwards compatibility\n  for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n    var info = CodeMirror.modeInfo[i];\n    if (info.mimes) info.mime = info.mimes[0];\n  }\n\n  CodeMirror.findModeByMIME = function(mime) {\n    mime = mime.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.mime == mime) return info;\n      if (info.mimes) for (var j = 0; j < info.mimes.length; j++)\n        if (info.mimes[j] == mime) return info;\n    }\n    if (/\\+xml$/.test(mime)) return CodeMirror.findModeByMIME(\"application/xml\")\n    if (/\\+json$/.test(mime)) return CodeMirror.findModeByMIME(\"application/json\")\n  };\n\n  CodeMirror.findModeByExtension = function(ext) {\n    ext = ext.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.ext) for (var j = 0; j < info.ext.length; j++)\n        if (info.ext[j] == ext) return info;\n    }\n  };\n\n  CodeMirror.findModeByFileName = function(filename) {\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.file && info.file.test(filename)) return info;\n    }\n    var dot = filename.lastIndexOf(\".\");\n    var ext = dot > -1 && filename.substring(dot + 1, filename.length);\n    if (ext) return CodeMirror.findModeByExtension(ext);\n  };\n\n  CodeMirror.findModeByName = function(name) {\n    name = name.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.name.toLowerCase() == name) return info;\n      if (info.alias) for (var j = 0; j < info.alias.length; j++)\n        if (info.alias[j].toLowerCase() == name) return info;\n    }\n  };\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function(cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      CodeMirror.on(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose = function() { onComposition(cm) })\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      CodeMirror.off(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose)\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.style.direction = cm.getOption(\"direction\");\n    elt.className = \"CodeMirror-placeholder CodeMirror-line-like\";\n    var placeHolder = cm.getOption(\"placeholder\")\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder)\n    elt.appendChild(placeHolder)\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onComposition(cm) {\n    setTimeout(function() {\n      var empty = false\n      if (cm.lineCount() == 1) {\n        var input = cm.getInputField()\n        empty = input.nodeName == \"TEXTAREA\" ? !cm.getLine(0).length\n          : !/[^\\u200b]/.test(input.querySelector(\".CodeMirror-line\").textContent)\n      }\n      if (empty) setPlaceholder(cm)\n      else clearPlaceholder(cm)\n    }, 20)\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(), empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n\n    if (empty) setPlaceholder(cm);\n    else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return (cm.lineCount() === 1) && (cm.getLine(0) === \"\");\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"))\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod)\n  else // Plain browser env\n    mod(CodeMirror)\n})(function(CodeMirror) {\n  \"use strict\"\n\n  CodeMirror.defineOption(\"autoRefresh\", false, function(cm, val) {\n    if (cm.state.autoRefresh) {\n      stopListening(cm, cm.state.autoRefresh)\n      cm.state.autoRefresh = null\n    }\n    if (val && cm.display.wrapper.offsetHeight == 0)\n      startListening(cm, cm.state.autoRefresh = {delay: val.delay || 250})\n  })\n\n  function startListening(cm, state) {\n    function check() {\n      if (cm.display.wrapper.offsetHeight) {\n        stopListening(cm, state)\n        if (cm.display.lastWrapHeight != cm.display.wrapper.clientHeight)\n          cm.refresh()\n      } else {\n        state.timeout = setTimeout(check, state.delay)\n      }\n    }\n    state.timeout = setTimeout(check, state.delay)\n    state.hurry = function() {\n      clearTimeout(state.timeout)\n      state.timeout = setTimeout(check, 50)\n    }\n    CodeMirror.on(window, \"mouseup\", state.hurry)\n    CodeMirror.on(window, \"keyup\", state.hurry)\n  }\n\n  function stopListening(_cm, state) {\n    clearTimeout(state.timeout)\n    CodeMirror.off(window, \"mouseup\", state.hurry)\n    CodeMirror.off(window, \"keyup\", state.hurry)\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Because sometimes you need to mark the selected *text*.\n//\n// Adds an option 'styleSelectedText' which, when enabled, gives\n// selected text the CSS class given as option value, or\n// \"CodeMirror-selectedtext\" when the value is not a string.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"styleSelectedText\", false, function(cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n    if (val && !prev) {\n      cm.state.markedSelection = [];\n      cm.state.markedSelectionStyle = typeof val == \"string\" ? val : \"CodeMirror-selectedtext\";\n      reset(cm);\n      cm.on(\"cursorActivity\", onCursorActivity);\n      cm.on(\"change\", onChange);\n    } else if (!val && prev) {\n      cm.off(\"cursorActivity\", onCursorActivity);\n      cm.off(\"change\", onChange);\n      clear(cm);\n      cm.state.markedSelection = cm.state.markedSelectionStyle = null;\n    }\n  });\n\n  function onCursorActivity(cm) {\n    if (cm.state.markedSelection)\n      cm.operation(function() { update(cm); });\n  }\n\n  function onChange(cm) {\n    if (cm.state.markedSelection && cm.state.markedSelection.length)\n      cm.operation(function() { clear(cm); });\n  }\n\n  var CHUNK_SIZE = 8;\n  var Pos = CodeMirror.Pos;\n  var cmp = CodeMirror.cmpPos;\n\n  function coverRange(cm, from, to, addAt) {\n    if (cmp(from, to) == 0) return;\n    var array = cm.state.markedSelection;\n    var cls = cm.state.markedSelectionStyle;\n    for (var line = from.line;;) {\n      var start = line == from.line ? from : Pos(line, 0);\n      var endLine = line + CHUNK_SIZE, atEnd = endLine >= to.line;\n      var end = atEnd ? to : Pos(endLine, 0);\n      var mark = cm.markText(start, end, {className: cls});\n      if (addAt == null) array.push(mark);\n      else array.splice(addAt++, 0, mark);\n      if (atEnd) break;\n      line = endLine;\n    }\n  }\n\n  function clear(cm) {\n    var array = cm.state.markedSelection;\n    for (var i = 0; i < array.length; ++i) array[i].clear();\n    array.length = 0;\n  }\n\n  function reset(cm) {\n    clear(cm);\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++)\n      coverRange(cm, ranges[i].from(), ranges[i].to());\n  }\n\n  function update(cm) {\n    if (!cm.somethingSelected()) return clear(cm);\n    if (cm.listSelections().length > 1) return reset(cm);\n\n    var from = cm.getCursor(\"start\"), to = cm.getCursor(\"end\");\n\n    var array = cm.state.markedSelection;\n    if (!array.length) return coverRange(cm, from, to);\n\n    var coverStart = array[0].find(), coverEnd = array[array.length - 1].find();\n    if (!coverStart || !coverEnd || to.line - from.line <= CHUNK_SIZE ||\n        cmp(from, coverEnd.to) >= 0 || cmp(to, coverStart.from) <= 0)\n      return reset(cm);\n\n    while (cmp(from, coverStart.from) > 0) {\n      array.shift().clear();\n      coverStart = array[0].find();\n    }\n    if (cmp(from, coverStart.from) < 0) {\n      if (coverStart.to.line - from.line < CHUNK_SIZE) {\n        array.shift().clear();\n        coverRange(cm, from, coverStart.to, 0);\n      } else {\n        coverRange(cm, from, coverStart.from, 0);\n      }\n    }\n\n    while (cmp(to, coverEnd.to) < 0) {\n      array.pop().clear();\n      coverEnd = array[array.length - 1].find();\n    }\n    if (cmp(to, coverEnd.to) > 0) {\n      if (to.line - coverEnd.from.line < CHUNK_SIZE) {\n        array.pop().clear();\n        coverRange(cm, coverEnd.from, to);\n      } else {\n        coverRange(cm, coverEnd.to, to);\n      }\n    }\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"))\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod)\n  else // Plain browser env\n    mod(CodeMirror)\n})(function(CodeMirror) {\n  \"use strict\"\n  var Pos = CodeMirror.Pos\n\n  function regexpFlags(regexp) {\n    var flags = regexp.flags\n    return flags != null ? flags : (regexp.ignoreCase ? \"i\" : \"\")\n      + (regexp.global ? \"g\" : \"\")\n      + (regexp.multiline ? \"m\" : \"\")\n  }\n\n  function ensureFlags(regexp, flags) {\n    var current = regexpFlags(regexp), target = current\n    for (var i = 0; i < flags.length; i++) if (target.indexOf(flags.charAt(i)) == -1)\n      target += flags.charAt(i)\n    return current == target ? regexp : new RegExp(regexp.source, target)\n  }\n\n  function maybeMultiline(regexp) {\n    return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source)\n  }\n\n  function searchRegexpForward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\")\n    for (var line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n      regexp.lastIndex = ch\n      var string = doc.getLine(line), match = regexp.exec(string)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpForwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpForward(doc, regexp, start)\n\n    regexp = ensureFlags(regexp, \"gm\")\n    var string, chunk = 1\n    for (var line = start.line, last = doc.lastLine(); line <= last;) {\n      // This grows the search buffer in exponentially-sized chunks\n      // between matches, so that nearby matches are fast and don't\n      // require concatenating the whole document (in case we're\n      // searching for something that has tons of matches), but at the\n      // same time, the amount of retries is limited.\n      for (var i = 0; i < chunk; i++) {\n        if (line > last) break\n        var curLine = doc.getLine(line++)\n        string = string == null ? curLine : string + \"\\n\" + curLine\n      }\n      chunk = chunk * 2\n      regexp.lastIndex = start.ch\n      var match = regexp.exec(string)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = start.line + before.length - 1, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  function lastMatchIn(string, regexp, endMargin) {\n    var match, from = 0\n    while (from <= string.length) {\n      regexp.lastIndex = from\n      var newMatch = regexp.exec(string)\n      if (!newMatch) break\n      var end = newMatch.index + newMatch[0].length\n      if (end > string.length - endMargin) break\n      if (!match || end > match.index + match[0].length)\n        match = newMatch\n      from = newMatch.index + 1\n    }\n    return match\n  }\n\n  function searchRegexpBackward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\")\n    for (var line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n      var string = doc.getLine(line)\n      var match = lastMatchIn(string, regexp, ch < 0 ? 0 : string.length - ch)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpBackwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpBackward(doc, regexp, start)\n    regexp = ensureFlags(regexp, \"gm\")\n    var string, chunkSize = 1, endMargin = doc.getLine(start.line).length - start.ch\n    for (var line = start.line, first = doc.firstLine(); line >= first;) {\n      for (var i = 0; i < chunkSize && line >= first; i++) {\n        var curLine = doc.getLine(line--)\n        string = string == null ? curLine : curLine + \"\\n\" + string\n      }\n      chunkSize *= 2\n\n      var match = lastMatchIn(string, regexp, endMargin)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = line + before.length, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  var doFold, noFold\n  if (String.prototype.normalize) {\n    doFold = function(str) { return str.normalize(\"NFD\").toLowerCase() }\n    noFold = function(str) { return str.normalize(\"NFD\") }\n  } else {\n    doFold = function(str) { return str.toLowerCase() }\n    noFold = function(str) { return str }\n  }\n\n  // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n  function adjustPos(orig, folded, pos, foldFunc) {\n    if (orig.length == folded.length) return pos\n    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length);;) {\n      if (min == max) return min\n      var mid = (min + max) >> 1\n      var len = foldFunc(orig.slice(0, mid)).length\n      if (len == pos) return mid\n      else if (len > pos) max = mid\n      else min = mid + 1\n    }\n  }\n\n  function searchStringForward(doc, query, start, caseFold) {\n    // Empty string would match anything and never progress, so we\n    // define it to match nothing instead.\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {\n      var orig = doc.getLine(line).slice(ch), string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.indexOf(lines[0])\n        if (found == -1) continue search\n        var start = adjustPos(orig, string, found, fold) + ch\n        return {from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)}\n      } else {\n        var cutFrom = string.length - lines[0].length\n        if (string.slice(cutFrom) != lines[0]) continue search\n        for (var i = 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(line + i)) != lines[i]) continue search\n        var end = doc.getLine(line + lines.length - 1), endString = fold(end), lastLine = lines[lines.length - 1]\n        if (endString.slice(0, lastLine.length) != lastLine) continue search\n        return {from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n                to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function searchStringBackward(doc, query, start, caseFold) {\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {\n      var orig = doc.getLine(line)\n      if (ch > -1) orig = orig.slice(0, ch)\n      var string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.lastIndexOf(lines[0])\n        if (found == -1) continue search\n        return {from: Pos(line, adjustPos(orig, string, found, fold)),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))}\n      } else {\n        var lastLine = lines[lines.length - 1]\n        if (string.slice(0, lastLine.length) != lastLine) continue search\n        for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(start + i)) != lines[i]) continue search\n        var top = doc.getLine(line + 1 - lines.length), topString = fold(top)\n        if (topString.slice(topString.length - lines[0].length) != lines[0]) continue search\n        return {from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n                to: Pos(line, adjustPos(orig, string, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function SearchCursor(doc, query, pos, options) {\n    this.atOccurrence = false\n    this.doc = doc\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0)\n    this.pos = {from: pos, to: pos}\n\n    var caseFold\n    if (typeof options == \"object\") {\n      caseFold = options.caseFold\n    } else { // Backwards compat for when caseFold was the 4th argument\n      caseFold = options\n      options = null\n    }\n\n    if (typeof query == \"string\") {\n      if (caseFold == null) caseFold = false\n      this.matches = function(reverse, pos) {\n        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos, caseFold)\n      }\n    } else {\n      query = ensureFlags(query, \"gm\")\n      if (!options || options.multiline !== false)\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos)\n        }\n      else\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos)\n        }\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function() {return this.find(false)},\n    findPrevious: function() {return this.find(true)},\n\n    find: function(reverse) {\n      var result = this.matches(reverse, this.doc.clipPos(reverse ? this.pos.from : this.pos.to))\n\n      // Implements weird auto-growing behavior on null-matches for\n      // backwards-compatibility with the vim code (unfortunately)\n      while (result && CodeMirror.cmpPos(result.from, result.to) == 0) {\n        if (reverse) {\n          if (result.from.ch) result.from = Pos(result.from.line, result.from.ch - 1)\n          else if (result.from.line == this.doc.firstLine()) result = null\n          else result = this.matches(reverse, this.doc.clipPos(Pos(result.from.line - 1)))\n        } else {\n          if (result.to.ch < this.doc.getLine(result.to.line).length) result.to = Pos(result.to.line, result.to.ch + 1)\n          else if (result.to.line == this.doc.lastLine()) result = null\n          else result = this.matches(reverse, Pos(result.to.line + 1, 0))\n        }\n      }\n\n      if (result) {\n        this.pos = result\n        this.atOccurrence = true\n        return this.pos.match || true\n      } else {\n        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0)\n        this.pos = {from: end, to: end}\n        return this.atOccurrence = false\n      }\n    },\n\n    from: function() {if (this.atOccurrence) return this.pos.from},\n    to: function() {if (this.atOccurrence) return this.pos.to},\n\n    replace: function(newText, origin) {\n      if (!this.atOccurrence) return\n      var lines = CodeMirror.splitLines(newText)\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin)\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1,\n                        lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0))\n    }\n  }\n\n  CodeMirror.defineExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold)\n  })\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold)\n  })\n\n  CodeMirror.defineExtension(\"selectMatches\", function(query, caseFold) {\n    var ranges = []\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold)\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break\n      ranges.push({anchor: cur.from(), head: cur.to()})\n    }\n    if (ranges.length)\n      this.setSelections(ranges, 0)\n  })\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../markdown/markdown\"), require(\"../../addon/mode/overlay\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../markdown/markdown\", \"../../addon/mode/overlay\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nvar urlRE = /^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\\.beep|\\.lwz|\\.xpc|\\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\\.beeps?|xmpp|xri|ymsgr|z39\\.50[rs]?):(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`*!()\\[\\]{};:'\".,<>?«»“”‘’]))/i\n\nCodeMirror.defineMode(\"gfm\", function(config, modeConfig) {\n  var codeDepth = 0;\n  function blankLine(state) {\n    state.code = false;\n    return null;\n  }\n  var gfmOverlay = {\n    startState: function() {\n      return {\n        code: false,\n        codeBlock: false,\n        ateSpace: false\n      };\n    },\n    copyState: function(s) {\n      return {\n        code: s.code,\n        codeBlock: s.codeBlock,\n        ateSpace: s.ateSpace\n      };\n    },\n    token: function(stream, state) {\n      state.combineTokens = null;\n\n      // Hack to prevent formatting override inside code blocks (block and inline)\n      if (state.codeBlock) {\n        if (stream.match(/^```+/)) {\n          state.codeBlock = false;\n          return null;\n        }\n        stream.skipToEnd();\n        return null;\n      }\n      if (stream.sol()) {\n        state.code = false;\n      }\n      if (stream.sol() && stream.match(/^```+/)) {\n        stream.skipToEnd();\n        state.codeBlock = true;\n        return null;\n      }\n      // If this block is changed, it may need to be updated in Markdown mode\n      if (stream.peek() === '`') {\n        stream.next();\n        var before = stream.pos;\n        stream.eatWhile('`');\n        var difference = 1 + stream.pos - before;\n        if (!state.code) {\n          codeDepth = difference;\n          state.code = true;\n        } else {\n          if (difference === codeDepth) { // Must be exact\n            state.code = false;\n          }\n        }\n        return null;\n      } else if (state.code) {\n        stream.next();\n        return null;\n      }\n      // Check if space. If so, links can be formatted later on\n      if (stream.eatSpace()) {\n        state.ateSpace = true;\n        return null;\n      }\n      if (stream.sol() || state.ateSpace) {\n        state.ateSpace = false;\n        if (modeConfig.gitHubSpice !== false) {\n          if(stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+@)?(?=.{0,6}\\d)(?:[a-f0-9]{7,40}\\b)/)) {\n            // User/Project@SHA\n            // User@SHA\n            // SHA\n            state.combineTokens = true;\n            return \"link\";\n          } else if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+)?#[0-9]+\\b/)) {\n            // User/Project#Num\n            // User#Num\n            // #Num\n            state.combineTokens = true;\n            return \"link\";\n          }\n        }\n      }\n      if (stream.match(urlRE) &&\n          stream.string.slice(stream.start - 2, stream.start) != \"](\" &&\n          (stream.start == 0 || /\\W/.test(stream.string.charAt(stream.start - 1)))) {\n        // URLs\n        // Taken from http://daringfireball.net/2010/07/improved_regex_for_matching_urls\n        // And then (issue #1160) simplified to make it not crash the Chrome Regexp engine\n        // And then limited url schemes to the CommonMark list, so foo:bar isn't matched as a URL\n        state.combineTokens = true;\n        return \"link\";\n      }\n      stream.next();\n      return null;\n    },\n    blankLine: blankLine\n  };\n\n  var markdownConfig = {\n    taskLists: true,\n    strikethrough: true,\n    emoji: true\n  };\n  for (var attr in modeConfig) {\n    markdownConfig[attr] = modeConfig[attr];\n  }\n  markdownConfig.name = \"markdown\";\n  return CodeMirror.overlayMode(CodeMirror.getMode(config, markdownConfig), gfmOverlay);\n\n}, \"markdown\");\n\n  CodeMirror.defineMIME(\"text/x-gfm\", \"gfm\");\n});\n","// Use strict mode (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)\n\"use strict\";\n\n\n// Requires\nvar Typo = require(\"typo-js\");\n\n\n// Create function\nfunction CodeMirrorSpellChecker(options) {\n\t// Initialize\n\toptions = options || {};\n\n\n\t// Verify\n\tif(typeof options.codeMirrorInstance !== \"function\" || typeof options.codeMirrorInstance.defineMode !== \"function\") {\n\t\tconsole.log(\"CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`\");\n\t\treturn;\n\t}\n\n\n\t// Because some browsers don't support this functionality yet\n\tif(!String.prototype.includes) {\n\t\tString.prototype.includes = function() {\n\t\t\t\"use strict\";\n\t\t\treturn String.prototype.indexOf.apply(this, arguments) !== -1;\n\t\t};\n\t}\n\n\n\t// Define the new mode\n\toptions.codeMirrorInstance.defineMode(\"spell-checker\", function(config) {\n\t\t// Load AFF/DIC data\n\t\tif(!CodeMirrorSpellChecker.aff_loading) {\n\t\t\tCodeMirrorSpellChecker.aff_loading = true;\n\t\t\tvar xhr_aff = new XMLHttpRequest();\n\t\t\txhr_aff.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff\", true);\n\t\t\txhr_aff.onload = function() {\n\t\t\t\tif(xhr_aff.readyState === 4 && xhr_aff.status === 200) {\n\t\t\t\t\tCodeMirrorSpellChecker.aff_data = xhr_aff.responseText;\n\t\t\t\t\tCodeMirrorSpellChecker.num_loaded++;\n\n\t\t\t\t\tif(CodeMirrorSpellChecker.num_loaded == 2) {\n\t\t\t\t\t\tCodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n\t\t\t\t\t\t\tplatform: \"any\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr_aff.send(null);\n\t\t}\n\n\t\tif(!CodeMirrorSpellChecker.dic_loading) {\n\t\t\tCodeMirrorSpellChecker.dic_loading = true;\n\t\t\tvar xhr_dic = new XMLHttpRequest();\n\t\t\txhr_dic.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic\", true);\n\t\t\txhr_dic.onload = function() {\n\t\t\t\tif(xhr_dic.readyState === 4 && xhr_dic.status === 200) {\n\t\t\t\t\tCodeMirrorSpellChecker.dic_data = xhr_dic.responseText;\n\t\t\t\t\tCodeMirrorSpellChecker.num_loaded++;\n\n\t\t\t\t\tif(CodeMirrorSpellChecker.num_loaded == 2) {\n\t\t\t\t\t\tCodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n\t\t\t\t\t\t\tplatform: \"any\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr_dic.send(null);\n\t\t}\n\n\n\t\t// Define what separates a word\n\t\tvar rx_word = \"!\\\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~ \";\n\n\n\t\t// Create the overlay and such\n\t\tvar overlay = {\n\t\t\ttoken: function(stream) {\n\t\t\t\tvar ch = stream.peek();\n\t\t\t\tvar word = \"\";\n\n\t\t\t\tif(rx_word.includes(ch)) {\n\t\t\t\t\tstream.next();\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\twhile((ch = stream.peek()) != null && !rx_word.includes(ch)) {\n\t\t\t\t\tword += ch;\n\t\t\t\t\tstream.next();\n\t\t\t\t}\n\n\t\t\t\tif(CodeMirrorSpellChecker.typo && !CodeMirrorSpellChecker.typo.check(word))\n\t\t\t\t\treturn \"spell-error\"; // CSS class: cm-spell-error\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\tvar mode = options.codeMirrorInstance.getMode(\n\t\t\tconfig, config.backdrop || \"text/plain\"\n\t\t);\n\n\t\treturn options.codeMirrorInstance.overlayMode(mode, overlay, true);\n\t});\n}\n\n\n// Initialize data globally to reduce memory consumption\nCodeMirrorSpellChecker.num_loaded = 0;\nCodeMirrorSpellChecker.aff_loading = false;\nCodeMirrorSpellChecker.dic_loading = false;\nCodeMirrorSpellChecker.aff_data = \"\";\nCodeMirrorSpellChecker.dic_data = \"\";\nCodeMirrorSpellChecker.typo;\n\n\n// Export\nmodule.exports = CodeMirrorSpellChecker;","/* globals chrome: false */\n/* globals __dirname: false */\n/* globals require: false */\n/* globals Buffer: false */\n/* globals module: false */\n\n/**\n * Typo is a JavaScript implementation of a spellchecker using hunspell-style \n * dictionaries.\n */\n\nvar Typo;\n\n(function () {\n\"use strict\";\n\n/**\n * Typo constructor.\n *\n * @param {String} [dictionary] The locale code of the dictionary being used. e.g.,\n *                              \"en_US\". This is only used to auto-load dictionaries.\n * @param {String} [affData]    The data from the dictionary's .aff file. If omitted\n *                              and Typo.js is being used in a Chrome extension, the .aff\n *                              file will be loaded automatically from\n *                              lib/typo/dictionaries/[dictionary]/[dictionary].aff\n *                              In other environments, it will be loaded from\n *                              [settings.dictionaryPath]/dictionaries/[dictionary]/[dictionary].aff\n * @param {String} [wordsData]  The data from the dictionary's .dic file. If omitted\n *                              and Typo.js is being used in a Chrome extension, the .dic\n *                              file will be loaded automatically from\n *                              lib/typo/dictionaries/[dictionary]/[dictionary].dic\n *                              In other environments, it will be loaded from\n *                              [settings.dictionaryPath]/dictionaries/[dictionary]/[dictionary].dic\n * @param {Object} [settings]   Constructor settings. Available properties are:\n *                              {String} [dictionaryPath]: path to load dictionary from in non-chrome\n *                              environment.\n *                              {Object} [flags]: flag information.\n *                              {Boolean} [asyncLoad]: If true, affData and wordsData will be loaded\n *                              asynchronously.\n *                              {Function} [loadedCallback]: Called when both affData and wordsData\n *                              have been loaded. Only used if asyncLoad is set to true. The parameter\n *                              is the instantiated Typo object.\n *\n * @returns {Typo} A Typo object.\n */\n\nTypo = function (dictionary, affData, wordsData, settings) {\n\tsettings = settings || {};\n\n\tthis.dictionary = null;\n\t\n\tthis.rules = {};\n\tthis.dictionaryTable = {};\n\t\n\tthis.compoundRules = [];\n\tthis.compoundRuleCodes = {};\n\t\n\tthis.replacementTable = [];\n\t\n\tthis.flags = settings.flags || {}; \n\t\n\tthis.memoized = {};\n\n\tthis.loaded = false;\n\t\n\tvar self = this;\n\t\n\tvar path;\n\t\n\t// Loop-control variables.\n\tvar i, j, _len, _jlen;\n\t\n\tif (dictionary) {\n\t\tself.dictionary = dictionary;\n\t\t\n\t\t// If the data is preloaded, just setup the Typo object.\n\t\tif (affData && wordsData) {\n\t\t\tsetup();\n\t\t}\n\t\t// Loading data for Chrome extentions.\n\t\telse if (typeof window !== 'undefined' && 'chrome' in window && 'extension' in window.chrome && 'getURL' in window.chrome.extension) {\n\t\t\tif (settings.dictionaryPath) {\n\t\t\t\tpath = settings.dictionaryPath;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpath = \"typo/dictionaries\";\n\t\t\t}\n\t\t\t\n\t\t\tif (!affData) readDataFile(chrome.extension.getURL(path + \"/\" + dictionary + \"/\" + dictionary + \".aff\"), setAffData);\n\t\t\tif (!wordsData) readDataFile(chrome.extension.getURL(path + \"/\" + dictionary + \"/\" + dictionary + \".dic\"), setWordsData);\n\t\t}\n\t\telse {\n\t\t\tif (settings.dictionaryPath) {\n\t\t\t\tpath = settings.dictionaryPath;\n\t\t\t}\n\t\t\telse if (typeof __dirname !== 'undefined') {\n\t\t\t\tpath = __dirname + '/dictionaries';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpath = './dictionaries';\n\t\t\t}\n\t\t\t\n\t\t\tif (!affData) readDataFile(path + \"/\" + dictionary + \"/\" + dictionary + \".aff\", setAffData);\n\t\t\tif (!wordsData) readDataFile(path + \"/\" + dictionary + \"/\" + dictionary + \".dic\", setWordsData);\n\t\t}\n\t}\n\t\n\tfunction readDataFile(url, setFunc) {\n\t\tvar response = self._readFile(url, null, settings.asyncLoad);\n\t\t\n\t\tif (settings.asyncLoad) {\n\t\t\tresponse.then(function(data) {\n\t\t\t\tsetFunc(data);\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tsetFunc(response);\n\t\t}\n\t}\n\n\tfunction setAffData(data) {\n\t\taffData = data;\n\n\t\tif (wordsData) {\n\t\t\tsetup();\n\t\t}\n\t}\n\n\tfunction setWordsData(data) {\n\t\twordsData = data;\n\n\t\tif (affData) {\n\t\t\tsetup();\n\t\t}\n\t}\n\n\tfunction setup() {\n\t\tself.rules = self._parseAFF(affData);\n\t\t\n\t\t// Save the rule codes that are used in compound rules.\n\t\tself.compoundRuleCodes = {};\n\t\t\n\t\tfor (i = 0, _len = self.compoundRules.length; i < _len; i++) {\n\t\t\tvar rule = self.compoundRules[i];\n\t\t\t\n\t\t\tfor (j = 0, _jlen = rule.length; j < _jlen; j++) {\n\t\t\t\tself.compoundRuleCodes[rule[j]] = [];\n\t\t\t}\n\t\t}\n\t\t\n\t\t// If we add this ONLYINCOMPOUND flag to self.compoundRuleCodes, then _parseDIC\n\t\t// will do the work of saving the list of words that are compound-only.\n\t\tif (\"ONLYINCOMPOUND\" in self.flags) {\n\t\t\tself.compoundRuleCodes[self.flags.ONLYINCOMPOUND] = [];\n\t\t}\n\t\t\n\t\tself.dictionaryTable = self._parseDIC(wordsData);\n\t\t\n\t\t// Get rid of any codes from the compound rule codes that are never used \n\t\t// (or that were special regex characters).  Not especially necessary... \n\t\tfor (i in self.compoundRuleCodes) {\n\t\t\tif (self.compoundRuleCodes[i].length === 0) {\n\t\t\t\tdelete self.compoundRuleCodes[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Build the full regular expressions for each compound rule.\n\t\t// I have a feeling (but no confirmation yet) that this method of \n\t\t// testing for compound words is probably slow.\n\t\tfor (i = 0, _len = self.compoundRules.length; i < _len; i++) {\n\t\t\tvar ruleText = self.compoundRules[i];\n\t\t\t\n\t\t\tvar expressionText = \"\";\n\t\t\t\n\t\t\tfor (j = 0, _jlen = ruleText.length; j < _jlen; j++) {\n\t\t\t\tvar character = ruleText[j];\n\t\t\t\t\n\t\t\t\tif (character in self.compoundRuleCodes) {\n\t\t\t\t\texpressionText += \"(\" + self.compoundRuleCodes[character].join(\"|\") + \")\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\texpressionText += character;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself.compoundRules[i] = new RegExp(expressionText, \"i\");\n\t\t}\n\t\t\n\t\tself.loaded = true;\n\t\t\n\t\tif (settings.asyncLoad && settings.loadedCallback) {\n\t\t\tsettings.loadedCallback(self);\n\t\t}\n\t}\n\t\n\treturn this;\n};\n\nTypo.prototype = {\n\t/**\n\t * Loads a Typo instance from a hash of all of the Typo properties.\n\t *\n\t * @param object obj A hash of Typo properties, probably gotten from a JSON.parse(JSON.stringify(typo_instance)).\n\t */\n\t\n\tload : function (obj) {\n\t\tfor (var i in obj) {\n\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\tthis[i] = obj[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Read the contents of a file.\n\t * \n\t * @param {String} path The path (relative) to the file.\n\t * @param {String} [charset=\"ISO8859-1\"] The expected charset of the file\n\t * @param {Boolean} async If true, the file will be read asynchronously. For node.js this does nothing, all\n\t *        files are read synchronously.\n\t * @returns {String} The file data if async is false, otherwise a promise object. If running node.js, the data is\n\t *          always returned.\n\t */\n\t\n\t_readFile : function (path, charset, async) {\n\t\tcharset = charset || \"utf8\";\n\t\t\n\t\tif (typeof XMLHttpRequest !== 'undefined') {\n\t\t\tvar promise;\n\t\t\tvar req = new XMLHttpRequest();\n\t\t\treq.open(\"GET\", path, async);\n\t\t\t\n\t\t\tif (async) {\n\t\t\t\tpromise = new Promise(function(resolve, reject) {\n\t\t\t\t\treq.onload = function() {\n\t\t\t\t\t\tif (req.status === 200) {\n\t\t\t\t\t\t\tresolve(req.responseText);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treject(req.statusText);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\treq.onerror = function() {\n\t\t\t\t\t\treject(req.statusText);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\n\t\t\tif (req.overrideMimeType)\n\t\t\t\treq.overrideMimeType(\"text/plain; charset=\" + charset);\n\t\t\n\t\t\treq.send(null);\n\t\t\t\n\t\t\treturn async ? promise : req.responseText;\n\t\t}\n\t\telse if (typeof require !== 'undefined') {\n\t\t\t// Node.js\n\t\t\tvar fs = require(\"fs\");\n\t\t\t\n\t\t\ttry {\n\t\t\t\tif (fs.existsSync(path)) {\n\t\t\t\t\treturn fs.readFileSync(path, charset);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.log(\"Path \" + path + \" does not exist.\");\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t * Parse the rules out from a .aff file.\n\t *\n\t * @param {String} data The contents of the affix file.\n\t * @returns object The rules from the file.\n\t */\n\t\n\t_parseAFF : function (data) {\n\t\tvar rules = {};\n\t\t\n\t\tvar line, subline, numEntries, lineParts;\n\t\tvar i, j, _len, _jlen;\n\t\t\n\t\t// Remove comment lines\n\t\tdata = this._removeAffixComments(data);\n\t\t\n\t\tvar lines = data.split(/\\r?\\n/);\n\t\t\n\t\tfor (i = 0, _len = lines.length; i < _len; i++) {\n\t\t\tline = lines[i];\n\t\t\t\n\t\t\tvar definitionParts = line.split(/\\s+/);\n\t\t\t\n\t\t\tvar ruleType = definitionParts[0];\n\t\t\t\n\t\t\tif (ruleType == \"PFX\" || ruleType == \"SFX\") {\n\t\t\t\tvar ruleCode = definitionParts[1];\n\t\t\t\tvar combineable = definitionParts[2];\n\t\t\t\tnumEntries = parseInt(definitionParts[3], 10);\n\t\t\t\t\n\t\t\t\tvar entries = [];\n\t\t\t\t\n\t\t\t\tfor (j = i + 1, _jlen = i + 1 + numEntries; j < _jlen; j++) {\n\t\t\t\t\tsubline = lines[j];\n\t\t\t\t\t\n\t\t\t\t\tlineParts = subline.split(/\\s+/);\n\t\t\t\t\tvar charactersToRemove = lineParts[2];\n\t\t\t\t\t\n\t\t\t\t\tvar additionParts = lineParts[3].split(\"/\");\n\t\t\t\t\t\n\t\t\t\t\tvar charactersToAdd = additionParts[0];\n\t\t\t\t\tif (charactersToAdd === \"0\") charactersToAdd = \"\";\n\t\t\t\t\t\n\t\t\t\t\tvar continuationClasses = this.parseRuleCodes(additionParts[1]);\n\t\t\t\t\t\n\t\t\t\t\tvar regexToMatch = lineParts[4];\n\t\t\t\t\t\n\t\t\t\t\tvar entry = {};\n\t\t\t\t\tentry.add = charactersToAdd;\n\t\t\t\t\t\n\t\t\t\t\tif (continuationClasses.length > 0) entry.continuationClasses = continuationClasses;\n\t\t\t\t\t\n\t\t\t\t\tif (regexToMatch !== \".\") {\n\t\t\t\t\t\tif (ruleType === \"SFX\") {\n\t\t\t\t\t\t\tentry.match = new RegExp(regexToMatch + \"$\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tentry.match = new RegExp(\"^\" + regexToMatch);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (charactersToRemove != \"0\") {\n\t\t\t\t\t\tif (ruleType === \"SFX\") {\n\t\t\t\t\t\t\tentry.remove = new RegExp(charactersToRemove  + \"$\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tentry.remove = charactersToRemove;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tentries.push(entry);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trules[ruleCode] = { \"type\" : ruleType, \"combineable\" : (combineable == \"Y\"), \"entries\" : entries };\n\t\t\t\t\n\t\t\t\ti += numEntries;\n\t\t\t}\n\t\t\telse if (ruleType === \"COMPOUNDRULE\") {\n\t\t\t\tnumEntries = parseInt(definitionParts[1], 10);\n\t\t\t\t\n\t\t\t\tfor (j = i + 1, _jlen = i + 1 + numEntries; j < _jlen; j++) {\n\t\t\t\t\tline = lines[j];\n\t\t\t\t\t\n\t\t\t\t\tlineParts = line.split(/\\s+/);\n\t\t\t\t\tthis.compoundRules.push(lineParts[1]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ti += numEntries;\n\t\t\t}\n\t\t\telse if (ruleType === \"REP\") {\n\t\t\t\tlineParts = line.split(/\\s+/);\n\t\t\t\t\n\t\t\t\tif (lineParts.length === 3) {\n\t\t\t\t\tthis.replacementTable.push([ lineParts[1], lineParts[2] ]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// ONLYINCOMPOUND\n\t\t\t\t// COMPOUNDMIN\n\t\t\t\t// FLAG\n\t\t\t\t// KEEPCASE\n\t\t\t\t// NEEDAFFIX\n\t\t\t\t\n\t\t\t\tthis.flags[ruleType] = definitionParts[1];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn rules;\n\t},\n\t\n\t/**\n\t * Removes comment lines and then cleans up blank lines and trailing whitespace.\n\t *\n\t * @param {String} data The data from an affix file.\n\t * @return {String} The cleaned-up data.\n\t */\n\t\n\t_removeAffixComments : function (data) {\n\t\t// Remove comments\n\t\t// This used to remove any string starting with '#' up to the end of the line,\n\t\t// but some COMPOUNDRULE definitions include '#' as part of the rule.\n\t\t// I haven't seen any affix files that use comments on the same line as real data,\n\t\t// so I don't think this will break anything.\n\t\tdata = data.replace(/^\\s*#.*$/mg, \"\");\n\t\t\n\t\t// Trim each line\n\t\tdata = data.replace(/^\\s\\s*/m, '').replace(/\\s\\s*$/m, '');\n\t\t\n\t\t// Remove blank lines.\n\t\tdata = data.replace(/\\n{2,}/g, \"\\n\");\n\t\t\n\t\t// Trim the entire string\n\t\tdata = data.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\t\t\n\t\treturn data;\n\t},\n\t\n\t/**\n\t * Parses the words out from the .dic file.\n\t *\n\t * @param {String} data The data from the dictionary file.\n\t * @returns object The lookup table containing all of the words and\n\t *                 word forms from the dictionary.\n\t */\n\t\n\t_parseDIC : function (data) {\n\t\tdata = this._removeDicComments(data);\n\t\t\n\t\tvar lines = data.split(/\\r?\\n/);\n\t\tvar dictionaryTable = {};\n\t\t\n\t\tfunction addWord(word, rules) {\n\t\t\t// Some dictionaries will list the same word multiple times with different rule sets.\n\t\t\tif (!dictionaryTable.hasOwnProperty(word)) {\n\t\t\t\tdictionaryTable[word] = null;\n\t\t\t}\n\t\t\t\n\t\t\tif (rules.length > 0) {\n\t\t\t\tif (dictionaryTable[word] === null) {\n\t\t\t\t\tdictionaryTable[word] = [];\n\t\t\t\t}\n\n\t\t\t\tdictionaryTable[word].push(rules);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// The first line is the number of words in the dictionary.\n\t\tfor (var i = 1, _len = lines.length; i < _len; i++) {\n\t\t\tvar line = lines[i];\n\t\t\t\n\t\t\tif (!line) {\n\t\t\t\t// Ignore empty lines.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar parts = line.split(\"/\", 2);\n\t\t\t\n\t\t\tvar word = parts[0];\n\n\t\t\t// Now for each affix rule, generate that form of the word.\n\t\t\tif (parts.length > 1) {\n\t\t\t\tvar ruleCodesArray = this.parseRuleCodes(parts[1]);\n\t\t\t\t\n\t\t\t\t// Save the ruleCodes for compound word situations.\n\t\t\t\tif (!(\"NEEDAFFIX\" in this.flags) || ruleCodesArray.indexOf(this.flags.NEEDAFFIX) == -1) {\n\t\t\t\t\taddWord(word, ruleCodesArray);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (var j = 0, _jlen = ruleCodesArray.length; j < _jlen; j++) {\n\t\t\t\t\tvar code = ruleCodesArray[j];\n\t\t\t\t\t\n\t\t\t\t\tvar rule = this.rules[code];\n\t\t\t\t\t\n\t\t\t\t\tif (rule) {\n\t\t\t\t\t\tvar newWords = this._applyRule(word, rule);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var ii = 0, _iilen = newWords.length; ii < _iilen; ii++) {\n\t\t\t\t\t\t\tvar newWord = newWords[ii];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\taddWord(newWord, []);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (rule.combineable) {\n\t\t\t\t\t\t\t\tfor (var k = j + 1; k < _jlen; k++) {\n\t\t\t\t\t\t\t\t\tvar combineCode = ruleCodesArray[k];\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tvar combineRule = this.rules[combineCode];\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (combineRule) {\n\t\t\t\t\t\t\t\t\t\tif (combineRule.combineable && (rule.type != combineRule.type)) {\n\t\t\t\t\t\t\t\t\t\t\tvar otherNewWords = this._applyRule(newWord, combineRule);\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tfor (var iii = 0, _iiilen = otherNewWords.length; iii < _iiilen; iii++) {\n\t\t\t\t\t\t\t\t\t\t\t\tvar otherNewWord = otherNewWords[iii];\n\t\t\t\t\t\t\t\t\t\t\t\taddWord(otherNewWord, []);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (code in this.compoundRuleCodes) {\n\t\t\t\t\t\tthis.compoundRuleCodes[code].push(word);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\taddWord(word.trim(), []);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn dictionaryTable;\n\t},\n\t\n\t\n\t/**\n\t * Removes comment lines and then cleans up blank lines and trailing whitespace.\n\t *\n\t * @param {String} data The data from a .dic file.\n\t * @return {String} The cleaned-up data.\n\t */\n\t\n\t_removeDicComments : function (data) {\n\t\t// I can't find any official documentation on it, but at least the de_DE\n\t\t// dictionary uses tab-indented lines as comments.\n\t\t\n\t\t// Remove comments\n\t\tdata = data.replace(/^\\t.*$/mg, \"\");\n\t\t\n\t\treturn data;\n\t},\n\t\n\tparseRuleCodes : function (textCodes) {\n\t\tif (!textCodes) {\n\t\t\treturn [];\n\t\t}\n\t\telse if (!(\"FLAG\" in this.flags)) {\n\t\t\treturn textCodes.split(\"\");\n\t\t}\n\t\telse if (this.flags.FLAG === \"long\") {\n\t\t\tvar flags = [];\n\t\t\t\n\t\t\tfor (var i = 0, _len = textCodes.length; i < _len; i += 2) {\n\t\t\t\tflags.push(textCodes.substr(i, 2));\n\t\t\t}\n\t\t\t\n\t\t\treturn flags;\n\t\t}\n\t\telse if (this.flags.FLAG === \"num\") {\n\t\t\treturn textCodes.split(\",\");\n\t\t}\n\t},\n\t\n\t/**\n\t * Applies an affix rule to a word.\n\t *\n\t * @param {String} word The base word.\n\t * @param {Object} rule The affix rule.\n\t * @returns {String[]} The new words generated by the rule.\n\t */\n\t\n\t_applyRule : function (word, rule) {\n\t\tvar entries = rule.entries;\n\t\tvar newWords = [];\n\t\t\n\t\tfor (var i = 0, _len = entries.length; i < _len; i++) {\n\t\t\tvar entry = entries[i];\n\t\t\t\n\t\t\tif (!entry.match || word.match(entry.match)) {\n\t\t\t\tvar newWord = word;\n\t\t\t\t\n\t\t\t\tif (entry.remove) {\n\t\t\t\t\tnewWord = newWord.replace(entry.remove, \"\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (rule.type === \"SFX\") {\n\t\t\t\t\tnewWord = newWord + entry.add;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewWord = entry.add + newWord;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tnewWords.push(newWord);\n\t\t\t\t\n\t\t\t\tif (\"continuationClasses\" in entry) {\n\t\t\t\t\tfor (var j = 0, _jlen = entry.continuationClasses.length; j < _jlen; j++) {\n\t\t\t\t\t\tvar continuationRule = this.rules[entry.continuationClasses[j]];\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (continuationRule) {\n\t\t\t\t\t\t\tnewWords = newWords.concat(this._applyRule(newWord, continuationRule));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// This shouldn't happen, but it does, at least in the de_DE dictionary.\n\t\t\t\t\t\t\t// I think the author mistakenly supplied lower-case rule codes instead \n\t\t\t\t\t\t\t// of upper-case.\n\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn newWords;\n\t},\n\t\n\t/**\n\t * Checks whether a word or a capitalization variant exists in the current dictionary.\n\t * The word is trimmed and several variations of capitalizations are checked.\n\t * If you want to check a word without any changes made to it, call checkExact()\n\t *\n\t * @see http://blog.stevenlevithan.com/archives/faster-trim-javascript re:trimming function\n\t *\n\t * @param {String} aWord The word to check.\n\t * @returns {Boolean}\n\t */\n\t\n\tcheck : function (aWord) {\n\t\tif (!this.loaded) {\n\t\t\tthrow \"Dictionary not loaded.\";\n\t\t}\n\t\t\n\t\t// Remove leading and trailing whitespace\n\t\tvar trimmedWord = aWord.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\t\t\n\t\tif (this.checkExact(trimmedWord)) {\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\t// The exact word is not in the dictionary.\n\t\tif (trimmedWord.toUpperCase() === trimmedWord) {\n\t\t\t// The word was supplied in all uppercase.\n\t\t\t// Check for a capitalized form of the word.\n\t\t\tvar capitalizedWord = trimmedWord[0] + trimmedWord.substring(1).toLowerCase();\n\t\t\t\n\t\t\tif (this.hasFlag(capitalizedWord, \"KEEPCASE\")) {\n\t\t\t\t// Capitalization variants are not allowed for this word.\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.checkExact(capitalizedWord)) {\n\t\t\t\t// The all-caps word is a capitalized word spelled correctly.\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (this.checkExact(trimmedWord.toLowerCase())) {\n\t\t\t\t// The all-caps is a lowercase word spelled correctly.\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar uncapitalizedWord = trimmedWord[0].toLowerCase() + trimmedWord.substring(1);\n\t\t\n\t\tif (uncapitalizedWord !== trimmedWord) {\n\t\t\tif (this.hasFlag(uncapitalizedWord, \"KEEPCASE\")) {\n\t\t\t\t// Capitalization variants are not allowed for this word.\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// Check for an uncapitalized form\n\t\t\tif (this.checkExact(uncapitalizedWord)) {\n\t\t\t\t// The word is spelled correctly but with the first letter capitalized.\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\t\n\t/**\n\t * Checks whether a word exists in the current dictionary.\n\t *\n\t * @param {String} word The word to check.\n\t * @returns {Boolean}\n\t */\n\t\n\tcheckExact : function (word) {\n\t\tif (!this.loaded) {\n\t\t\tthrow \"Dictionary not loaded.\";\n\t\t}\n\n\t\tvar ruleCodes = this.dictionaryTable[word];\n\t\t\n\t\tvar i, _len;\n\t\t\n\t\tif (typeof ruleCodes === 'undefined') {\n\t\t\t// Check if this might be a compound word.\n\t\t\tif (\"COMPOUNDMIN\" in this.flags && word.length >= this.flags.COMPOUNDMIN) {\n\t\t\t\tfor (i = 0, _len = this.compoundRules.length; i < _len; i++) {\n\t\t\t\t\tif (word.match(this.compoundRules[i])) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (ruleCodes === null) {\n\t\t\t// a null (but not undefined) value for an entry in the dictionary table\n\t\t\t// means that the word is in the dictionary but has no flags.\n\t\t\treturn true;\n\t\t}\n\t\telse if (typeof ruleCodes === 'object') { // this.dictionary['hasOwnProperty'] will be a function.\n\t\t\tfor (i = 0, _len = ruleCodes.length; i < _len; i++) {\n\t\t\t\tif (!this.hasFlag(word, \"ONLYINCOMPOUND\", ruleCodes[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\t\n\t/**\n\t * Looks up whether a given word is flagged with a given flag.\n\t *\n\t * @param {String} word The word in question.\n\t * @param {String} flag The flag in question.\n\t * @return {Boolean}\n\t */\n\t \n\thasFlag : function (word, flag, wordFlags) {\n\t\tif (!this.loaded) {\n\t\t\tthrow \"Dictionary not loaded.\";\n\t\t}\n\n\t\tif (flag in this.flags) {\n\t\t\tif (typeof wordFlags === 'undefined') {\n\t\t\t\twordFlags = Array.prototype.concat.apply([], this.dictionaryTable[word]);\n\t\t\t}\n\t\t\t\n\t\t\tif (wordFlags && wordFlags.indexOf(this.flags[flag]) !== -1) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\t\n\t/**\n\t * Returns a list of suggestions for a misspelled word.\n\t *\n\t * @see http://www.norvig.com/spell-correct.html for the basis of this suggestor.\n\t * This suggestor is primitive, but it works.\n\t *\n\t * @param {String} word The misspelling.\n\t * @param {Number} [limit=5] The maximum number of suggestions to return.\n\t * @returns {String[]} The array of suggestions.\n\t */\n\t\n\talphabet : \"\",\n\t\n\tsuggest : function (word, limit) {\n\t\tif (!this.loaded) {\n\t\t\tthrow \"Dictionary not loaded.\";\n\t\t}\n\n\t\tlimit = limit || 5;\n\n\t\tif (this.memoized.hasOwnProperty(word)) {\n\t\t\tvar memoizedLimit = this.memoized[word]['limit'];\n\n\t\t\t// Only return the cached list if it's big enough or if there weren't enough suggestions\n\t\t\t// to fill a smaller limit.\n\t\t\tif (limit <= memoizedLimit || this.memoized[word]['suggestions'].length < memoizedLimit) {\n\t\t\t\treturn this.memoized[word]['suggestions'].slice(0, limit);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.check(word)) return [];\n\t\t\n\t\t// Check the replacement table.\n\t\tfor (var i = 0, _len = this.replacementTable.length; i < _len; i++) {\n\t\t\tvar replacementEntry = this.replacementTable[i];\n\t\t\t\n\t\t\tif (word.indexOf(replacementEntry[0]) !== -1) {\n\t\t\t\tvar correctedWord = word.replace(replacementEntry[0], replacementEntry[1]);\n\t\t\t\t\n\t\t\t\tif (this.check(correctedWord)) {\n\t\t\t\t\treturn [ correctedWord ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar self = this;\n\t\tself.alphabet = \"abcdefghijklmnopqrstuvwxyz\";\n\t\t\n\t\t/*\n\t\tif (!self.alphabet) {\n\t\t\t// Use the alphabet as implicitly defined by the words in the dictionary.\n\t\t\tvar alphaHash = {};\n\t\t\t\n\t\t\tfor (var i in self.dictionaryTable) {\n\t\t\t\tfor (var j = 0, _len = i.length; j < _len; j++) {\n\t\t\t\t\talphaHash[i[j]] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfor (var i in alphaHash) {\n\t\t\t\tself.alphabet += i;\n\t\t\t}\n\t\t\t\n\t\t\tvar alphaArray = self.alphabet.split(\"\");\n\t\t\talphaArray.sort();\n\t\t\tself.alphabet = alphaArray.join(\"\");\n\t\t}\n\t\t*/\n\t\t\n\t\t/**\n\t\t * Returns a hash keyed by all of the strings that can be made by making a single edit to the word (or words in) `words`\n\t\t * The value of each entry is the number of unique ways that the resulting word can be made.\n\t\t *\n\t\t * @arg mixed words Either a hash keyed by words or a string word to operate on.\n\t\t * @arg bool known_only Whether this function should ignore strings that are not in the dictionary.\n\t\t */\n\t\tfunction edits1(words, known_only) {\n\t\t\tvar rv = {};\n\t\t\t\n\t\t\tvar i, j, _iilen, _len, _jlen, _edit;\n\n\t\t\tvar alphabetLength = self.alphabet.length;\n\t\t\t\n\t\t\tif (typeof words == 'string') {\n\t\t\t\tvar word = words;\n\t\t\t\twords = {};\n\t\t\t\twords[word] = true;\n\t\t\t}\n\n\t\t\tfor (var word in words) {\n\t\t\t\tfor (i = 0, _len = word.length + 1; i < _len; i++) {\n\t\t\t\t\tvar s = [ word.substring(0, i), word.substring(i) ];\n\t\t\t\t\n\t\t\t\t\t// Remove a letter.\n\t\t\t\t\tif (s[1]) {\n\t\t\t\t\t\t_edit = s[0] + s[1].substring(1);\n\n\t\t\t\t\t\tif (!known_only || self.check(_edit)) {\n\t\t\t\t\t\t\tif (!(_edit in rv)) {\n\t\t\t\t\t\t\t\trv[_edit] = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\trv[_edit] += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Transpose letters\n\t\t\t\t\t// Eliminate transpositions of identical letters\n\t\t\t\t\tif (s[1].length > 1 && s[1][1] !== s[1][0]) {\n\t\t\t\t\t\t_edit = s[0] + s[1][1] + s[1][0] + s[1].substring(2);\n\n\t\t\t\t\t\tif (!known_only || self.check(_edit)) {\n\t\t\t\t\t\t\tif (!(_edit in rv)) {\n\t\t\t\t\t\t\t\trv[_edit] = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\trv[_edit] += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (s[1]) {\n\t\t\t\t\t\t// Replace a letter with another letter.\n\n\t\t\t\t\t\tvar lettercase = (s[1].substring(0,1).toUpperCase() === s[1].substring(0,1)) ? 'uppercase' : 'lowercase';\n\n\t\t\t\t\t\tfor (j = 0; j < alphabetLength; j++) {\n\t\t\t\t\t\t\tvar replacementLetter = self.alphabet[j];\n\n\t\t\t\t\t\t\t// Set the case of the replacement letter to the same as the letter being replaced.\n\t\t\t\t\t\t\tif ( 'uppercase' === lettercase ) {\n\t\t\t\t\t\t\t\treplacementLetter = replacementLetter.toUpperCase();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Eliminate replacement of a letter by itself\n\t\t\t\t\t\t\tif (replacementLetter != s[1].substring(0,1)){\n\t\t\t\t\t\t\t\t_edit = s[0] + replacementLetter + s[1].substring(1);\n\n\t\t\t\t\t\t\t\tif (!known_only || self.check(_edit)) {\n\t\t\t\t\t\t\t\t\tif (!(_edit in rv)) {\n\t\t\t\t\t\t\t\t\t\trv[_edit] = 1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\trv[_edit] += 1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (s[1]) {\n\t\t\t\t\t\t// Add a letter between each letter.\n\t\t\t\t\t\tfor (j = 0; j < alphabetLength; j++) {\n\t\t\t\t\t\t\t// If the letters on each side are capitalized, capitalize the replacement.\n\t\t\t\t\t\t\tvar lettercase = (s[0].substring(-1).toUpperCase() === s[0].substring(-1) && s[1].substring(0,1).toUpperCase() === s[1].substring(0,1)) ? 'uppercase' : 'lowercase';\n\n\t\t\t\t\t\t\tvar replacementLetter = self.alphabet[j];\n\n\t\t\t\t\t\t\tif ( 'uppercase' === lettercase ) {\n\t\t\t\t\t\t\t\treplacementLetter = replacementLetter.toUpperCase();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_edit = s[0] + replacementLetter + s[1];\n\n\t\t\t\t\t\t\tif (!known_only || self.check(_edit)) {\n\t\t\t\t\t\t\t\tif (!(_edit in rv)) {\n\t\t\t\t\t\t\t\t\trv[_edit] = 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\trv[_edit] += 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn rv;\n\t\t}\n\n\t\tfunction correct(word) {\n\t\t\t// Get the edit-distance-1 and edit-distance-2 forms of this word.\n\t\t\tvar ed1 = edits1(word);\n\t\t\tvar ed2 = edits1(ed1, true);\n\t\t\t\n\t\t\t// Sort the edits based on how many different ways they were created.\n\t\t\tvar weighted_corrections = ed2;\n\t\t\t\n\t\t\tfor (var ed1word in ed1) {\n\t\t\t\tif (!self.check(ed1word)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (ed1word in weighted_corrections) {\n\t\t\t\t\tweighted_corrections[ed1word] += ed1[ed1word];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tweighted_corrections[ed1word] = ed1[ed1word];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar i, _len;\n\n\t\t\tvar sorted_corrections = [];\n\t\t\t\n\t\t\tfor (i in weighted_corrections) {\n\t\t\t\tif (weighted_corrections.hasOwnProperty(i)) {\n\t\t\t\t\tsorted_corrections.push([ i, weighted_corrections[i] ]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction sorter(a, b) {\n\t\t\t\tvar a_val = a[1];\n\t\t\t\tvar b_val = b[1];\n\t\t\t\tif (a_val < b_val) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (a_val > b_val) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\t// @todo If a and b are equally weighted, add our own weight based on something like the key locations on this language's default keyboard.\n\t\t\t\treturn b[0].localeCompare(a[0]);\n\t\t\t}\n\t\t\t\n\t\t\tsorted_corrections.sort(sorter).reverse();\n\n\t\t\tvar rv = [];\n\n\t\t\tvar capitalization_scheme = \"lowercase\";\n\t\t\t\n\t\t\tif (word.toUpperCase() === word) {\n\t\t\t\tcapitalization_scheme = \"uppercase\";\n\t\t\t}\n\t\t\telse if (word.substr(0, 1).toUpperCase() + word.substr(1).toLowerCase() === word) {\n\t\t\t\tcapitalization_scheme = \"capitalized\";\n\t\t\t}\n\t\t\t\n\t\t\tvar working_limit = limit;\n\n\t\t\tfor (i = 0; i < Math.min(working_limit, sorted_corrections.length); i++) {\n\t\t\t\tif (\"uppercase\" === capitalization_scheme) {\n\t\t\t\t\tsorted_corrections[i][0] = sorted_corrections[i][0].toUpperCase();\n\t\t\t\t}\n\t\t\t\telse if (\"capitalized\" === capitalization_scheme) {\n\t\t\t\t\tsorted_corrections[i][0] = sorted_corrections[i][0].substr(0, 1).toUpperCase() + sorted_corrections[i][0].substr(1);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!self.hasFlag(sorted_corrections[i][0], \"NOSUGGEST\") && rv.indexOf(sorted_corrections[i][0]) == -1) {\n\t\t\t\t\trv.push(sorted_corrections[i][0]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// If one of the corrections is not eligible as a suggestion , make sure we still return the right number of suggestions.\n\t\t\t\t\tworking_limit++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn rv;\n\t\t}\n\t\t\n\t\tthis.memoized[word] = {\n\t\t\t'suggestions': correct(word),\n\t\t\t'limit': limit\n\t\t};\n\n\t\treturn this.memoized[word]['suggestions'];\n\t}\n};\n})();\n\n// Support for use as a node.js module.\nif (typeof module !== 'undefined') {\n\tmodule.exports = Typo;\n}\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2021, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.marked = factory());\n}(this, (function () { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n    if (it) return (it = it.call(o)).next.bind(it);\n\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var defaults$5 = {exports: {}};\n\n  function getDefaults$1() {\n    return {\n      baseUrl: null,\n      breaks: false,\n      extensions: null,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: null,\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartLists: false,\n      smartypants: false,\n      tokenizer: null,\n      walkTokens: null,\n      xhtml: false\n    };\n  }\n\n  function changeDefaults$1(newDefaults) {\n    defaults$5.exports.defaults = newDefaults;\n  }\n\n  defaults$5.exports = {\n    defaults: getDefaults$1(),\n    getDefaults: getDefaults$1,\n    changeDefaults: changeDefaults$1\n  };\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape$2(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n  function unescape$1(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n\n  var caret = /(^|[^\\[])\\^/g;\n\n  function edit$1(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  function cleanUrl$1(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape$1(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim$1(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n\n  var noopTest$1 = {\n    exec: function noopTest() {}\n  };\n\n  function merge$2(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function splitCells$1(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0;\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n\n  function rtrim$1(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, l - suffLen);\n  }\n\n  function findClosingBracket$1(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function checkSanitizeDeprecation$1(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  } // copied from https://stackoverflow.com/a/5450113/806777\n\n\n  function repeatString$1(pattern, count) {\n    if (count < 1) {\n      return '';\n    }\n\n    var result = '';\n\n    while (count > 1) {\n      if (count & 1) {\n        result += pattern;\n      }\n\n      count >>= 1;\n      pattern += pattern;\n    }\n\n    return result + pattern;\n  }\n\n  var helpers = {\n    escape: escape$2,\n    unescape: unescape$1,\n    edit: edit$1,\n    cleanUrl: cleanUrl$1,\n    resolveUrl: resolveUrl,\n    noopTest: noopTest$1,\n    merge: merge$2,\n    splitCells: splitCells$1,\n    rtrim: rtrim$1,\n    findClosingBracket: findClosingBracket$1,\n    checkSanitizeDeprecation: checkSanitizeDeprecation$1,\n    repeatString: repeatString$1\n  };\n\n  var defaults$4 = defaults$5.exports.defaults;\n  var rtrim = helpers.rtrim,\n      splitCells = helpers.splitCells,\n      _escape = helpers.escape,\n      findClosingBracket = helpers.findClosingBracket;\n\n  function outputLink(cap, link, raw) {\n    var href = link.href;\n    var title = link.title ? _escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n    if (cap[0].charAt(0) !== '!') {\n      return {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text\n      };\n    } else {\n      return {\n        type: 'image',\n        raw: raw,\n        href: href,\n        title: title,\n        text: _escape(text)\n      };\n    }\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer_1 = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || defaults$4;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap) {\n        if (cap[0].length > 1) {\n          return {\n            type: 'space',\n            raw: cap[0]\n          };\n        }\n\n        return {\n          raw: '\\n'\n        };\n      }\n    };\n\n    _proto.code = function code(src) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ {1,4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        var text = cap[2].trim(); // remove trailing #s\n\n        if (/#$/.test(text)) {\n          var trimmed = rtrim(text, '#');\n\n          if (this.options.pedantic) {\n            text = trimmed.trim();\n          } else if (!trimmed || / $/.test(trimmed)) {\n            // CommonMark requires space before trailing #s\n            text = trimmed.trim();\n          }\n        }\n\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: text\n        };\n      }\n    };\n\n    _proto.nptable = function nptable(src) {\n      var cap = this.rules.block.nptable.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n          raw: cap[0]\n        };\n\n        if (item.header.length === item.align.length) {\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells(item.cells[i], item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *> ?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var bull = cap[2];\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: raw,\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        }; // Get each top-level item.\n\n        var itemMatch = cap[0].match(this.rules.block.item);\n        var next = false,\n            item,\n            space,\n            bcurr,\n            bnext,\n            addBack,\n            loose,\n            istask,\n            ischecked,\n            endMatch;\n        var l = itemMatch.length;\n        bcurr = this.rules.block.listItemStart.exec(itemMatch[0]);\n\n        for (var i = 0; i < l; i++) {\n          item = itemMatch[i];\n          raw = item;\n\n          if (!this.options.pedantic) {\n            // Determine if current item contains the end of the list\n            endMatch = item.match(new RegExp('\\\\n\\\\s*\\\\n {0,' + (bcurr[0].length - 1) + '}\\\\S'));\n\n            if (endMatch) {\n              addBack = item.length - endMatch.index + itemMatch.slice(i + 1).join('\\n').length;\n              list.raw = list.raw.substring(0, list.raw.length - addBack);\n              item = item.substring(0, endMatch.index);\n              raw = item;\n              l = i + 1;\n            }\n          } // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n\n\n          if (i !== l - 1) {\n            bnext = this.rules.block.listItemStart.exec(itemMatch[i + 1]);\n\n            if (!this.options.pedantic ? bnext[1].length >= bcurr[0].length || bnext[1].length > 3 : bnext[1].length > bcurr[1].length) {\n              // nested list or continuation\n              itemMatch.splice(i, 2, itemMatch[i] + (!this.options.pedantic && bnext[1].length < bcurr[0].length && !itemMatch[i].match(/\\n$/) ? '' : '\\n') + itemMatch[i + 1]);\n              i--;\n              l--;\n              continue;\n            } else if ( // different bullet style\n            !this.options.pedantic || this.options.smartLists ? bnext[2][bnext[2].length - 1] !== bull[bull.length - 1] : isordered === (bnext[2].length === 1)) {\n              addBack = itemMatch.slice(i + 1).join('\\n').length;\n              list.raw = list.raw.substring(0, list.raw.length - addBack);\n              i = l - 1;\n            }\n\n            bcurr = bnext;\n          } // Remove the list item's bullet\n          // so it is seen as the next token.\n\n\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+[.)]) ?/, ''); // Outdent whatever the\n          // list item contains. Hacky.\n\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          } // trim item newlines at end\n\n\n          item = rtrim(item, '\\n');\n\n          if (i !== l - 1) {\n            raw = raw + '\\n';\n          } // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n\n\n          loose = next || /\\n\\n(?!\\s*$)/.test(raw);\n\n          if (i !== l - 1) {\n            next = raw.slice(-2) === '\\n\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            list.loose = true;\n          } // Check for task list items\n\n\n          if (this.options.gfm) {\n            istask = /^\\[[ xX]\\] /.test(item);\n            ischecked = undefined;\n\n            if (istask) {\n              ischecked = item[1] !== ' ';\n              item = item.replace(/^\\[[ xX]\\] +/, '');\n            }\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: istask,\n            checked: ischecked,\n            loose: loose,\n            text: item\n          });\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        return {\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          type: 'def',\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells(item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''), item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        };\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        return {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        };\n      }\n    };\n\n    _proto.text = function text(src) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n    };\n\n    _proto.escape = function escape(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: _escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src, inLink, inRawBlock) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!inLink && /^<a /i.test(cap[0])) {\n          inLink = true;\n        } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n          inLink = false;\n        }\n\n        if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = true;\n        } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: inLink,\n          inRawBlock: inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var trimmedUrl = cap[2].trim();\n\n        if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n          // commonmark requires matching angle brackets\n          if (!/>$/.test(trimmedUrl)) {\n            return;\n          } // ending angle bracket cannot be escaped\n\n\n          var rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n\n          if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n            return;\n          }\n        } else {\n          // find closing parenthesis\n          var lastParenIndex = findClosingBracket(cap[2], '()');\n\n          if (lastParenIndex > -1) {\n            var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n            var linkLen = start + cap[1].length + lastParenIndex;\n            cap[2] = cap[2].substring(0, lastParenIndex);\n            cap[0] = cap[0].substring(0, linkLen).trim();\n            cap[3] = '';\n          }\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          // split pedantic href and title\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim();\n\n        if (/^</.test(href)) {\n          if (this.options.pedantic && !/>$/.test(trimmedUrl)) {\n            // pedantic allows starting angle bracket without ending angle bracket\n            href = href.slice(1);\n          } else {\n            href = href.slice(1, -1);\n          }\n        }\n\n        return outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0]);\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          var text = cap[0].charAt(0);\n          return {\n            type: 'text',\n            raw: text,\n            text: text\n          };\n        }\n\n        return outputLink(cap, link, cap[0]);\n      }\n    };\n\n    _proto.emStrong = function emStrong(src, maskedSrc, prevChar) {\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var match = this.rules.inline.emStrong.lDelim.exec(src);\n      if (!match) return; // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n\n      if (match[3] && prevChar.match(/(?:[0-9A-Za-z\\xAA\\xB2\\xB3\\xB5\\xB9\\xBA\\xBC-\\xBE\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05D0-\\u05EA\\u05EF-\\u05F2\\u0620-\\u064A\\u0660-\\u0669\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07C0-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u08A0-\\u08B4\\u08B6-\\u08C7\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0966-\\u096F\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09F9\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A6F\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AE6-\\u0AEF\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B66-\\u0B6F\\u0B71-\\u0B77\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0BE6-\\u0BF2\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D04-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D58-\\u0D61\\u0D66-\\u0D78\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DE6-\\u0DEF\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F20-\\u0F33\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F-\\u1049\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u1090-\\u1099\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1369-\\u137C\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B50-\\u1B59\\u1B83-\\u1BA0\\u1BAE-\\u1BE5\\u1C00-\\u1C23\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1C80-\\u1C88\\u1C90-\\u1CBA\\u1CBD-\\u1CBF\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2070\\u2071\\u2074-\\u2079\\u207F-\\u2089\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2150-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2CFD\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u3192-\\u3195\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\u3400-\\u4DBF\\u4E00-\\u9FFC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7BF\\uA7C2-\\uA7CA\\uA7F5-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA830-\\uA835\\uA840-\\uA873\\uA882-\\uA8B3\\uA8D0-\\uA8D9\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA8FE\\uA900-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF-\\uA9D9\\uA9E0-\\uA9E4\\uA9E6-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB69\\uAB70-\\uABE2\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD07-\\uDD33\\uDD40-\\uDD78\\uDD8A\\uDD8B\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDEE1-\\uDEFB\\uDF00-\\uDF23\\uDF2D-\\uDF4A\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCA0-\\uDCA9\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC58-\\uDC76\\uDC79-\\uDC9E\\uDCA7-\\uDCAF\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDCFB-\\uDD1B\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBC-\\uDDCF\\uDDD2-\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE35\\uDE40-\\uDE48\\uDE60-\\uDE7E\\uDE80-\\uDE9F\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDEEB-\\uDEEF\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF58-\\uDF72\\uDF78-\\uDF91\\uDFA9-\\uDFAF]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2\\uDCFA-\\uDD23\\uDD30-\\uDD39\\uDE60-\\uDE7E\\uDE80-\\uDEA9\\uDEB0\\uDEB1\\uDF00-\\uDF27\\uDF30-\\uDF45\\uDF51-\\uDF54\\uDFB0-\\uDFCB\\uDFE0-\\uDFF6]|\\uD804[\\uDC03-\\uDC37\\uDC52-\\uDC6F\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDCF0-\\uDCF9\\uDD03-\\uDD26\\uDD36-\\uDD3F\\uDD44\\uDD47\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDD0-\\uDDDA\\uDDDC\\uDDE1-\\uDDF4\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDEF0-\\uDEF9\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC50-\\uDC59\\uDC5F-\\uDC61\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDCD0-\\uDCD9\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE50-\\uDE59\\uDE80-\\uDEAA\\uDEB8\\uDEC0-\\uDEC9\\uDF00-\\uDF1A\\uDF30-\\uDF3B]|\\uD806[\\uDC00-\\uDC2B\\uDCA0-\\uDCF2\\uDCFF-\\uDD06\\uDD09\\uDD0C-\\uDD13\\uDD15\\uDD16\\uDD18-\\uDD2F\\uDD3F\\uDD41\\uDD50-\\uDD59\\uDDA0-\\uDDA7\\uDDAA-\\uDDD0\\uDDE1\\uDDE3\\uDE00\\uDE0B-\\uDE32\\uDE3A\\uDE50\\uDE5C-\\uDE89\\uDE9D\\uDEC0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC50-\\uDC6C\\uDC72-\\uDC8F\\uDD00-\\uDD06\\uDD08\\uDD09\\uDD0B-\\uDD30\\uDD46\\uDD50-\\uDD59\\uDD60-\\uDD65\\uDD67\\uDD68\\uDD6A-\\uDD89\\uDD98\\uDDA0-\\uDDA9\\uDEE0-\\uDEF2\\uDFB0\\uDFC0-\\uDFD4]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|[\\uD80C\\uD81C-\\uD820\\uD822\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872\\uD874-\\uD879\\uD880-\\uD883][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDE60-\\uDE69\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF50-\\uDF59\\uDF5B-\\uDF61\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDE40-\\uDE96\\uDF00-\\uDF4A\\uDF50\\uDF93-\\uDF9F\\uDFE0\\uDFE1\\uDFE3]|\\uD821[\\uDC00-\\uDFF7]|\\uD823[\\uDC00-\\uDCD5\\uDD00-\\uDD08]|\\uD82C[\\uDC00-\\uDD1E\\uDD50-\\uDD52\\uDD64-\\uDD67\\uDD70-\\uDEFB]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD834[\\uDEE0-\\uDEF3\\uDF60-\\uDF78]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB\\uDFCE-\\uDFFF]|\\uD838[\\uDD00-\\uDD2C\\uDD37-\\uDD3D\\uDD40-\\uDD49\\uDD4E\\uDEC0-\\uDEEB\\uDEF0-\\uDEF9]|\\uD83A[\\uDC00-\\uDCC4\\uDCC7-\\uDCCF\\uDD00-\\uDD43\\uDD4B\\uDD50-\\uDD59]|\\uD83B[\\uDC71-\\uDCAB\\uDCAD-\\uDCAF\\uDCB1-\\uDCB4\\uDD01-\\uDD2D\\uDD2F-\\uDD3D\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD83C[\\uDD00-\\uDD0C]|\\uD83E[\\uDFF0-\\uDFF9]|\\uD869[\\uDC00-\\uDEDD\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF34\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1\\uDEB0-\\uDFFF]|\\uD87A[\\uDC00-\\uDFE0]|\\uD87E[\\uDC00-\\uDE1D]|\\uD884[\\uDC00-\\uDF4A])/)) return;\n      var nextChar = match[1] || match[2] || '';\n\n      if (!nextChar || nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))) {\n        var lLength = match[0].length - 1;\n        var rDelim,\n            rLength,\n            delimTotal = lLength,\n            midDelimTotal = 0;\n        var endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n        endReg.lastIndex = 0; // Clip maskedSrc to same section of string as src (move to lexer?)\n\n        maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n        while ((match = endReg.exec(maskedSrc)) != null) {\n          rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n          if (!rDelim) continue; // skip single * in __abc*abc__\n\n          rLength = rDelim.length;\n\n          if (match[3] || match[4]) {\n            // found another Left Delim\n            delimTotal += rLength;\n            continue;\n          } else if (match[5] || match[6]) {\n            // either Left or Right Delim\n            if (lLength % 3 && !((lLength + rLength) % 3)) {\n              midDelimTotal += rLength;\n              continue; // CommonMark Emphasis Rules 9-10\n            }\n          }\n\n          delimTotal -= rLength;\n          if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n          // Remove extra characters. *a*** -> *a*\n\n          rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal); // Create `em` if smallest delimiter has odd char count. *a***\n\n          if (Math.min(lLength, rLength) % 2) {\n            return {\n              type: 'em',\n              raw: src.slice(0, lLength + match.index + rLength + 1),\n              text: src.slice(1, lLength + match.index + rLength)\n            };\n          } // Create 'strong' if smallest delimiter has even char count. **a***\n\n\n          return {\n            type: 'strong',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text: src.slice(2, lLength + match.index + rLength - 1)\n          };\n        }\n      }\n    };\n\n    _proto.codespan = function codespan(src) {\n      var cap = this.rules.inline.code.exec(src);\n\n      if (cap) {\n        var text = cap[2].replace(/\\n/g, ' ');\n        var hasNonSpaceChars = /[^ ]/.test(text);\n        var hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n\n        if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n          text = text.substring(1, text.length - 1);\n        }\n\n        text = _escape(text, true);\n        return {\n          type: 'codespan',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.br = function br(src) {\n      var cap = this.rules.inline.br.exec(src);\n\n      if (cap) {\n        return {\n          type: 'br',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.del = function del(src) {\n      var cap = this.rules.inline.del.exec(src);\n\n      if (cap) {\n        return {\n          type: 'del',\n          raw: cap[0],\n          text: cap[2]\n        };\n      }\n    };\n\n    _proto.autolink = function autolink(src, mangle) {\n      var cap = this.rules.inline.autolink.exec(src);\n\n      if (cap) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = _escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n          href = 'mailto:' + text;\n        } else {\n          text = _escape(cap[1]);\n          href = text;\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.url = function url(src, mangle) {\n      var cap;\n\n      if (cap = this.rules.inline.url.exec(src)) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = _escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          var prevCapZero;\n\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = _escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.inlineText = function inlineText(src, inRawBlock, smartypants) {\n      var cap = this.rules.inline.text.exec(src);\n\n      if (cap) {\n        var text;\n\n        if (inRawBlock) {\n          text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0];\n        } else {\n          text = _escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    return Tokenizer;\n  }();\n\n  var noopTest = helpers.noopTest,\n      edit = helpers.edit,\n      merge$1 = helpers.merge;\n  /**\n   * Block-Level Grammar\n   */\n\n  var block$1 = {\n    newline: /^(?: *(?:\\n|$))+/,\n    code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n    fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n    hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?! {0,3}bull )\\n*|\\s*$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n    nptable: noopTest,\n    table: noopTest,\n    lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html| +\\n)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block$1._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\n  block$1._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block$1.def = edit(block$1.def).replace('label', block$1._label).replace('title', block$1._title).getRegex();\n  block$1.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\n  block$1.item = /^( *)(bull) ?[^\\n]*(?:\\n(?! *bull ?)[^\\n]*)*/;\n  block$1.item = edit(block$1.item, 'gm').replace(/bull/g, block$1.bullet).getRegex();\n  block$1.listItemStart = edit(/^( *)(bull) */).replace('bull', block$1.bullet).getRegex();\n  block$1.list = edit(block$1.list).replace(/bull/g, block$1.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block$1.def.source + ')').getRegex();\n  block$1._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block$1._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\n  block$1.html = edit(block$1.html, 'i').replace('comment', block$1._comment).replace('tag', block$1._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block$1.paragraph = edit(block$1._paragraph).replace('hr', block$1.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block$1._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block$1.blockquote = edit(block$1.blockquote).replace('paragraph', block$1.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block$1.normal = merge$1({}, block$1);\n  /**\n   * GFM Block Grammar\n   */\n\n  block$1.gfm = merge$1({}, block$1.normal, {\n    nptable: '^ *([^|\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}([-:]+ *\\\\|[-| :]*)' // Align\n    + '(?:\\\\n((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)',\n    // Cells\n    table: '^ *\\\\|(.+)\\\\n' // Header\n    + ' {0,3}\\\\|?( *[-:]+[-| :]*)' // Align\n    + '(?:\\\\n *((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n\n  });\n  block$1.gfm.nptable = edit(block$1.gfm.nptable).replace('hr', block$1.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block$1._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  block$1.gfm.table = edit(block$1.gfm.table).replace('hr', block$1.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block$1._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  /**\n   * Pedantic grammar (original John Gruber's loose markdown specification)\n   */\n\n  block$1.pedantic = merge$1({}, block$1.normal, {\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block$1._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n    fences: noopTest,\n    // fences not supported\n    paragraph: edit(block$1.normal._paragraph).replace('hr', block$1.hr).replace('heading', ' *#{1,6} *[^\\n]').replace('lheading', block$1.lheading).replace('blockquote', ' {0,3}>').replace('|fences', '').replace('|list', '').replace('|html', '').getRegex()\n  });\n  /**\n   * Inline-Level Grammar\n   */\n\n  var inline$1 = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noopTest,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n    nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n    reflinkSearch: 'reflink|nolink(?!\\\\()',\n    emStrong: {\n      lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n      //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n      //        () Skip other delimiter (1) #***                   (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n      rDelimAst: /\\_\\_[^_*]*?\\*[^_*]*?\\_\\_|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,\n      rDelimUnd: /\\*\\*[^_*]*?\\_[^_*]*?\\*\\*|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n\n    },\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noopTest,\n    text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n    punctuation: /^([\\spunctuation])/\n  }; // list of punctuation marks from CommonMark spec\n  // without * and _ to handle the different emphasis markers * and _\n\n  inline$1._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\n  inline$1.punctuation = edit(inline$1.punctuation).replace(/punctuation/g, inline$1._punctuation).getRegex(); // sequences em should skip over [title](link), `code`, <html>\n\n  inline$1.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\n  inline$1.escapedEmSt = /\\\\\\*|\\\\_/g;\n  inline$1._comment = edit(block$1._comment).replace('(?:-->|$)', '-->').getRegex();\n  inline$1.emStrong.lDelim = edit(inline$1.emStrong.lDelim).replace(/punct/g, inline$1._punctuation).getRegex();\n  inline$1.emStrong.rDelimAst = edit(inline$1.emStrong.rDelimAst, 'g').replace(/punct/g, inline$1._punctuation).getRegex();\n  inline$1.emStrong.rDelimUnd = edit(inline$1.emStrong.rDelimUnd, 'g').replace(/punct/g, inline$1._punctuation).getRegex();\n  inline$1._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline$1._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline$1._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline$1.autolink = edit(inline$1.autolink).replace('scheme', inline$1._scheme).replace('email', inline$1._email).getRegex();\n  inline$1._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline$1.tag = edit(inline$1.tag).replace('comment', inline$1._comment).replace('attribute', inline$1._attribute).getRegex();\n  inline$1._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\n  inline$1._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\n  inline$1._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline$1.link = edit(inline$1.link).replace('label', inline$1._label).replace('href', inline$1._href).replace('title', inline$1._title).getRegex();\n  inline$1.reflink = edit(inline$1.reflink).replace('label', inline$1._label).getRegex();\n  inline$1.reflinkSearch = edit(inline$1.reflinkSearch, 'g').replace('reflink', inline$1.reflink).replace('nolink', inline$1.nolink).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline$1.normal = merge$1({}, inline$1);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline$1.pedantic = merge$1({}, inline$1.normal, {\n    strong: {\n      start: /^__|\\*\\*/,\n      middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n      endAst: /\\*\\*(?!\\*)/g,\n      endUnd: /__(?!_)/g\n    },\n    em: {\n      start: /^_|\\*/,\n      middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n      endAst: /\\*(?!\\*)/g,\n      endUnd: /_(?!_)/g\n    },\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline$1._label).getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline$1._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline$1.gfm = merge$1({}, inline$1.normal, {\n    escape: edit(inline$1.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n  });\n  inline$1.gfm.url = edit(inline$1.gfm.url, 'i').replace('email', inline$1.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline$1.breaks = merge$1({}, inline$1.gfm, {\n    br: edit(inline$1.br).replace('{2,}', '*').getRegex(),\n    text: edit(inline$1.gfm.text).replace('\\\\b_', '\\\\b_| {2,}\\\\n').replace(/\\{2,\\}/g, '*').getRegex()\n  });\n  var rules = {\n    block: block$1,\n    inline: inline$1\n  };\n\n  var Tokenizer$1 = Tokenizer_1;\n  var defaults$3 = defaults$5.exports.defaults;\n  var block = rules.block,\n      inline = rules.inline;\n  var repeatString = helpers.repeatString;\n  /**\n   * smartypants text replacement\n   */\n\n  function smartypants(text) {\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  }\n  /**\n   * mangle email addresses\n   */\n\n\n  function mangle(text) {\n    var out = '',\n        i,\n        ch;\n    var l = text.length;\n\n    for (i = 0; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n  /**\n   * Block Lexer\n   */\n\n\n  var Lexer_1 = /*#__PURE__*/function () {\n    function Lexer(options) {\n      this.tokens = [];\n      this.tokens.links = Object.create(null);\n      this.options = options || defaults$3;\n      this.options.tokenizer = this.options.tokenizer || new Tokenizer$1();\n      this.tokenizer = this.options.tokenizer;\n      this.tokenizer.options = this.options;\n      var rules = {\n        block: block.normal,\n        inline: inline.normal\n      };\n\n      if (this.options.pedantic) {\n        rules.block = block.pedantic;\n        rules.inline = inline.pedantic;\n      } else if (this.options.gfm) {\n        rules.block = block.gfm;\n\n        if (this.options.breaks) {\n          rules.inline = inline.breaks;\n        } else {\n          rules.inline = inline.gfm;\n        }\n      }\n\n      this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n\n\n    /**\n     * Static Lex Method\n     */\n    Lexer.lex = function lex(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    ;\n\n    Lexer.lexInline = function lexInline(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    ;\n\n    var _proto = Lexer.prototype;\n\n    _proto.lex = function lex(src) {\n      src = src.replace(/\\r\\n|\\r/g, '\\n').replace(/\\t/g, '    ');\n      this.blockTokens(src, this.tokens, true);\n      this.inline(this.tokens);\n      return this.tokens;\n    }\n    /**\n     * Lexing\n     */\n    ;\n\n    _proto.blockTokens = function blockTokens(src, tokens, top) {\n      var _this = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (top === void 0) {\n        top = true;\n      }\n\n      if (this.options.pedantic) {\n        src = src.replace(/^ +$/gm, '');\n      }\n\n      var token, i, l, lastToken, cutSrc, lastParagraphClipped;\n\n      while (src) {\n        if (this.options.extensions && this.options.extensions.block && this.options.extensions.block.some(function (extTokenizer) {\n          if (token = extTokenizer.call(_this, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // newline\n\n\n        if (token = this.tokenizer.space(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type) {\n            tokens.push(token);\n          }\n\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.code(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n          if (lastToken && lastToken.type === 'paragraph') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // fences\n\n\n        if (token = this.tokenizer.fences(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // heading\n\n\n        if (token = this.tokenizer.heading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // table no leading pipe (gfm)\n\n\n        if (token = this.tokenizer.nptable(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // hr\n\n\n        if (token = this.tokenizer.hr(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // blockquote\n\n\n        if (token = this.tokenizer.blockquote(src)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.blockTokens(token.text, [], top);\n          tokens.push(token);\n          continue;\n        } // list\n\n\n        if (token = this.tokenizer.list(src)) {\n          src = src.substring(token.raw.length);\n          l = token.items.length;\n\n          for (i = 0; i < l; i++) {\n            token.items[i].tokens = this.blockTokens(token.items[i].text, [], false);\n          }\n\n          tokens.push(token);\n          continue;\n        } // html\n\n\n        if (token = this.tokenizer.html(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // def\n\n\n        if (top && (token = this.tokenizer.def(src))) {\n          src = src.substring(token.raw.length);\n\n          if (!this.tokens.links[token.tag]) {\n            this.tokens.links[token.tag] = {\n              href: token.href,\n              title: token.title\n            };\n          }\n\n          continue;\n        } // table (gfm)\n\n\n        if (token = this.tokenizer.table(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // lheading\n\n\n        if (token = this.tokenizer.lheading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // top-level paragraph\n        // prevent paragraph consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startBlock) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this.options.extensions.startBlock.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call(this, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (top && (token = this.tokenizer.paragraph(cutSrc))) {\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastParagraphClipped && lastToken.type === 'paragraph') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          lastParagraphClipped = cutSrc.length !== src.length;\n          src = src.substring(token.raw.length);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.text(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _proto.inline = function inline(tokens) {\n      var i, j, k, l2, row, token;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i];\n\n        switch (token.type) {\n          case 'paragraph':\n          case 'text':\n          case 'heading':\n            {\n              token.tokens = [];\n              this.inlineTokens(token.text, token.tokens);\n              break;\n            }\n\n          case 'table':\n            {\n              token.tokens = {\n                header: [],\n                cells: []\n              }; // header\n\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                token.tokens.header[j] = [];\n                this.inlineTokens(token.header[j], token.tokens.header[j]);\n              } // cells\n\n\n              l2 = token.cells.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.cells[j];\n                token.tokens.cells[j] = [];\n\n                for (k = 0; k < row.length; k++) {\n                  token.tokens.cells[j][k] = [];\n                  this.inlineTokens(row[k], token.tokens.cells[j][k]);\n                }\n              }\n\n              break;\n            }\n\n          case 'blockquote':\n            {\n              this.inline(token.tokens);\n              break;\n            }\n\n          case 'list':\n            {\n              l2 = token.items.length;\n\n              for (j = 0; j < l2; j++) {\n                this.inline(token.items[j].tokens);\n              }\n\n              break;\n            }\n        }\n      }\n\n      return tokens;\n    }\n    /**\n     * Lexing/Compiling\n     */\n    ;\n\n    _proto.inlineTokens = function inlineTokens(src, tokens, inLink, inRawBlock) {\n      var _this2 = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (inLink === void 0) {\n        inLink = false;\n      }\n\n      if (inRawBlock === void 0) {\n        inRawBlock = false;\n      }\n\n      var token, lastToken, cutSrc; // String with links masked to avoid interference with em and strong\n\n      var maskedSrc = src;\n      var match;\n      var keepPrevChar, prevChar; // Mask out reflinks\n\n      if (this.tokens.links) {\n        var links = Object.keys(this.tokens.links);\n\n        if (links.length > 0) {\n          while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n            if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n              maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n            }\n          }\n        }\n      } // Mask out other blocks\n\n\n      while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n      } // Mask out escaped em & strong delimiters\n\n\n      while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);\n      }\n\n      while (src) {\n        if (!keepPrevChar) {\n          prevChar = '';\n        }\n\n        keepPrevChar = false; // extensions\n\n        if (this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some(function (extTokenizer) {\n          if (token = extTokenizer.call(_this2, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // escape\n\n\n        if (token = this.tokenizer.escape(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // tag\n\n\n        if (token = this.tokenizer.tag(src, inLink, inRawBlock)) {\n          src = src.substring(token.raw.length);\n          inLink = token.inLink;\n          inRawBlock = token.inRawBlock;\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // link\n\n\n        if (token = this.tokenizer.link(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type === 'link') {\n            token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n          }\n\n          tokens.push(token);\n          continue;\n        } // reflink, nolink\n\n\n        if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (token.type === 'link') {\n            token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n            tokens.push(token);\n          } else if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // em & strong\n\n\n        if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.codespan(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // br\n\n\n        if (token = this.tokenizer.br(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // del (gfm)\n\n\n        if (token = this.tokenizer.del(src)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // autolink\n\n\n        if (token = this.tokenizer.autolink(src, mangle)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // url (gfm)\n\n\n        if (!inLink && (token = this.tokenizer.url(src, mangle))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n        // prevent inlineText consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startInline) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this2.options.extensions.startInline.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call(this, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (token = this.tokenizer.inlineText(cutSrc, inRawBlock, smartypants)) {\n          src = src.substring(token.raw.length);\n\n          if (token.raw.slice(-1) !== '_') {\n            // Track prevChar before string of ____ started\n            prevChar = token.raw.slice(-1);\n          }\n\n          keepPrevChar = true;\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _createClass(Lexer, null, [{\n      key: \"rules\",\n      get: function get() {\n        return {\n          block: block,\n          inline: inline\n        };\n      }\n    }]);\n\n    return Lexer;\n  }();\n\n  var defaults$2 = defaults$5.exports.defaults;\n  var cleanUrl = helpers.cleanUrl,\n      escape$1 = helpers.escape;\n  /**\n   * Renderer\n   */\n\n  var Renderer_1 = /*#__PURE__*/function () {\n    function Renderer(options) {\n      this.options = options || defaults$2;\n    }\n\n    var _proto = Renderer.prototype;\n\n    _proto.code = function code(_code, infostring, escaped) {\n      var lang = (infostring || '').match(/\\S*/)[0];\n\n      if (this.options.highlight) {\n        var out = this.options.highlight(_code, lang);\n\n        if (out != null && out !== _code) {\n          escaped = true;\n          _code = out;\n        }\n      }\n\n      _code = _code.replace(/\\n$/, '') + '\\n';\n\n      if (!lang) {\n        return '<pre><code>' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>\\n';\n      }\n\n      return '<pre><code class=\"' + this.options.langPrefix + escape$1(lang, true) + '\">' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>\\n';\n    };\n\n    _proto.blockquote = function blockquote(quote) {\n      return '<blockquote>\\n' + quote + '</blockquote>\\n';\n    };\n\n    _proto.html = function html(_html) {\n      return _html;\n    };\n\n    _proto.heading = function heading(text, level, raw, slugger) {\n      if (this.options.headerIds) {\n        return '<h' + level + ' id=\"' + this.options.headerPrefix + slugger.slug(raw) + '\">' + text + '</h' + level + '>\\n';\n      } // ignore IDs\n\n\n      return '<h' + level + '>' + text + '</h' + level + '>\\n';\n    };\n\n    _proto.hr = function hr() {\n      return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n    };\n\n    _proto.list = function list(body, ordered, start) {\n      var type = ordered ? 'ol' : 'ul',\n          startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n      return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    };\n\n    _proto.listitem = function listitem(text) {\n      return '<li>' + text + '</li>\\n';\n    };\n\n    _proto.checkbox = function checkbox(checked) {\n      return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n    };\n\n    _proto.paragraph = function paragraph(text) {\n      return '<p>' + text + '</p>\\n';\n    };\n\n    _proto.table = function table(header, body) {\n      if (body) body = '<tbody>' + body + '</tbody>';\n      return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n    };\n\n    _proto.tablerow = function tablerow(content) {\n      return '<tr>\\n' + content + '</tr>\\n';\n    };\n\n    _proto.tablecell = function tablecell(content, flags) {\n      var type = flags.header ? 'th' : 'td';\n      var tag = flags.align ? '<' + type + ' align=\"' + flags.align + '\">' : '<' + type + '>';\n      return tag + content + '</' + type + '>\\n';\n    } // span level renderer\n    ;\n\n    _proto.strong = function strong(text) {\n      return '<strong>' + text + '</strong>';\n    };\n\n    _proto.em = function em(text) {\n      return '<em>' + text + '</em>';\n    };\n\n    _proto.codespan = function codespan(text) {\n      return '<code>' + text + '</code>';\n    };\n\n    _proto.br = function br() {\n      return this.options.xhtml ? '<br/>' : '<br>';\n    };\n\n    _proto.del = function del(text) {\n      return '<del>' + text + '</del>';\n    };\n\n    _proto.link = function link(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<a href=\"' + escape$1(href) + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += '>' + text + '</a>';\n      return out;\n    };\n\n    _proto.image = function image(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += this.options.xhtml ? '/>' : '>';\n      return out;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    return Renderer;\n  }();\n\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n\n  var TextRenderer_1 = /*#__PURE__*/function () {\n    function TextRenderer() {}\n\n    var _proto = TextRenderer.prototype;\n\n    // no need for block level renderers\n    _proto.strong = function strong(text) {\n      return text;\n    };\n\n    _proto.em = function em(text) {\n      return text;\n    };\n\n    _proto.codespan = function codespan(text) {\n      return text;\n    };\n\n    _proto.del = function del(text) {\n      return text;\n    };\n\n    _proto.html = function html(text) {\n      return text;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    _proto.link = function link(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.image = function image(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.br = function br() {\n      return '';\n    };\n\n    return TextRenderer;\n  }();\n\n  /**\n   * Slugger generates header id\n   */\n\n  var Slugger_1 = /*#__PURE__*/function () {\n    function Slugger() {\n      this.seen = {};\n    }\n\n    var _proto = Slugger.prototype;\n\n    _proto.serialize = function serialize(value) {\n      return value.toLowerCase().trim() // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '') // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n    }\n    /**\n     * Finds the next safe (unique) slug to use\n     */\n    ;\n\n    _proto.getNextSafeSlug = function getNextSafeSlug(originalSlug, isDryRun) {\n      var slug = originalSlug;\n      var occurenceAccumulator = 0;\n\n      if (this.seen.hasOwnProperty(slug)) {\n        occurenceAccumulator = this.seen[originalSlug];\n\n        do {\n          occurenceAccumulator++;\n          slug = originalSlug + '-' + occurenceAccumulator;\n        } while (this.seen.hasOwnProperty(slug));\n      }\n\n      if (!isDryRun) {\n        this.seen[originalSlug] = occurenceAccumulator;\n        this.seen[slug] = 0;\n      }\n\n      return slug;\n    }\n    /**\n     * Convert string to unique id\n     * @param {object} options\n     * @param {boolean} options.dryrun Generates the next unique slug without updating the internal accumulator.\n     */\n    ;\n\n    _proto.slug = function slug(value, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var slug = this.serialize(value);\n      return this.getNextSafeSlug(slug, options.dryrun);\n    };\n\n    return Slugger;\n  }();\n\n  var Renderer$1 = Renderer_1;\n  var TextRenderer$1 = TextRenderer_1;\n  var Slugger$1 = Slugger_1;\n  var defaults$1 = defaults$5.exports.defaults;\n  var unescape = helpers.unescape;\n  /**\n   * Parsing & Compiling\n   */\n\n  var Parser_1 = /*#__PURE__*/function () {\n    function Parser(options) {\n      this.options = options || defaults$1;\n      this.options.renderer = this.options.renderer || new Renderer$1();\n      this.renderer = this.options.renderer;\n      this.renderer.options = this.options;\n      this.textRenderer = new TextRenderer$1();\n      this.slugger = new Slugger$1();\n    }\n    /**\n     * Static Parse Method\n     */\n\n\n    Parser.parse = function parse(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    ;\n\n    Parser.parseInline = function parseInline(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    ;\n\n    var _proto = Parser.prototype;\n\n    _proto.parse = function parse(tokens, top) {\n      if (top === void 0) {\n        top = true;\n      }\n\n      var out = '',\n          i,\n          j,\n          k,\n          l2,\n          l3,\n          row,\n          cell,\n          header,\n          body,\n          token,\n          ordered,\n          start,\n          loose,\n          itemBody,\n          item,\n          checked,\n          task,\n          checkbox,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call(this, token);\n\n          if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'space':\n            {\n              continue;\n            }\n\n          case 'hr':\n            {\n              out += this.renderer.hr();\n              continue;\n            }\n\n          case 'heading':\n            {\n              out += this.renderer.heading(this.parseInline(token.tokens), token.depth, unescape(this.parseInline(token.tokens, this.textRenderer)), this.slugger);\n              continue;\n            }\n\n          case 'code':\n            {\n              out += this.renderer.code(token.text, token.lang, token.escaped);\n              continue;\n            }\n\n          case 'table':\n            {\n              header = ''; // header\n\n              cell = '';\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                cell += this.renderer.tablecell(this.parseInline(token.tokens.header[j]), {\n                  header: true,\n                  align: token.align[j]\n                });\n              }\n\n              header += this.renderer.tablerow(cell);\n              body = '';\n              l2 = token.cells.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.tokens.cells[j];\n                cell = '';\n                l3 = row.length;\n\n                for (k = 0; k < l3; k++) {\n                  cell += this.renderer.tablecell(this.parseInline(row[k]), {\n                    header: false,\n                    align: token.align[k]\n                  });\n                }\n\n                body += this.renderer.tablerow(cell);\n              }\n\n              out += this.renderer.table(header, body);\n              continue;\n            }\n\n          case 'blockquote':\n            {\n              body = this.parse(token.tokens);\n              out += this.renderer.blockquote(body);\n              continue;\n            }\n\n          case 'list':\n            {\n              ordered = token.ordered;\n              start = token.start;\n              loose = token.loose;\n              l2 = token.items.length;\n              body = '';\n\n              for (j = 0; j < l2; j++) {\n                item = token.items[j];\n                checked = item.checked;\n                task = item.task;\n                itemBody = '';\n\n                if (item.task) {\n                  checkbox = this.renderer.checkbox(checked);\n\n                  if (loose) {\n                    if (item.tokens.length > 0 && item.tokens[0].type === 'text') {\n                      item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n\n                      if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                      }\n                    } else {\n                      item.tokens.unshift({\n                        type: 'text',\n                        text: checkbox\n                      });\n                    }\n                  } else {\n                    itemBody += checkbox;\n                  }\n                }\n\n                itemBody += this.parse(item.tokens, loose);\n                body += this.renderer.listitem(itemBody, task, checked);\n              }\n\n              out += this.renderer.list(body, ordered, start);\n              continue;\n            }\n\n          case 'html':\n            {\n              // TODO parse inline content if parameter markdown=1\n              out += this.renderer.html(token.text);\n              continue;\n            }\n\n          case 'paragraph':\n            {\n              out += this.renderer.paragraph(this.parseInline(token.tokens));\n              continue;\n            }\n\n          case 'text':\n            {\n              body = token.tokens ? this.parseInline(token.tokens) : token.text;\n\n              while (i + 1 < l && tokens[i + 1].type === 'text') {\n                token = tokens[++i];\n                body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n              }\n\n              out += top ? this.renderer.paragraph(body) : body;\n              continue;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    ;\n\n    _proto.parseInline = function parseInline(tokens, renderer) {\n      renderer = renderer || this.renderer;\n      var out = '',\n          i,\n          token,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call(this, token);\n\n          if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'escape':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          case 'html':\n            {\n              out += renderer.html(token.text);\n              break;\n            }\n\n          case 'link':\n            {\n              out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'image':\n            {\n              out += renderer.image(token.href, token.title, token.text);\n              break;\n            }\n\n          case 'strong':\n            {\n              out += renderer.strong(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'em':\n            {\n              out += renderer.em(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'codespan':\n            {\n              out += renderer.codespan(token.text);\n              break;\n            }\n\n          case 'br':\n            {\n              out += renderer.br();\n              break;\n            }\n\n          case 'del':\n            {\n              out += renderer.del(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'text':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    };\n\n    return Parser;\n  }();\n\n  var Lexer = Lexer_1;\n  var Parser = Parser_1;\n  var Tokenizer = Tokenizer_1;\n  var Renderer = Renderer_1;\n  var TextRenderer = TextRenderer_1;\n  var Slugger = Slugger_1;\n  var merge = helpers.merge,\n      checkSanitizeDeprecation = helpers.checkSanitizeDeprecation,\n      escape = helpers.escape;\n  var getDefaults = defaults$5.exports.getDefaults,\n      changeDefaults = defaults$5.exports.changeDefaults,\n      defaults = defaults$5.exports.defaults;\n  /**\n   * Marked\n   */\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    if (callback) {\n      var highlight = opt.highlight;\n      var tokens;\n\n      try {\n        tokens = Lexer.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      var done = function done(err) {\n        var out;\n\n        if (!err) {\n          try {\n            if (opt.walkTokens) {\n              marked.walkTokens(tokens, opt.walkTokens);\n            }\n\n            out = Parser.parse(tokens, opt);\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!tokens.length) return done();\n      var pending = 0;\n      marked.walkTokens(tokens, function (token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(function () {\n            highlight(token.text, token.lang, function (err, code) {\n              if (err) {\n                return done(err);\n              }\n\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    try {\n      var _tokens = Lexer.lex(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(_tokens, opt.walkTokens);\n      }\n\n      return Parser.parse(_tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n\n  marked.options = marked.setOptions = function (opt) {\n    merge(marked.defaults, opt);\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n  marked.getDefaults = getDefaults;\n  marked.defaults = defaults;\n  /**\n   * Use Extension\n   */\n\n  marked.use = function () {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var opts = merge.apply(void 0, [{}].concat(args));\n    var extensions = marked.defaults.extensions || {\n      renderers: {},\n      childTokens: {}\n    };\n    var hasExtensions;\n    args.forEach(function (pack) {\n      // ==-- Parse \"addon\" extensions --== //\n      if (pack.extensions) {\n        hasExtensions = true;\n        pack.extensions.forEach(function (ext) {\n          if (!ext.name) {\n            throw new Error('extension name required');\n          }\n\n          if (ext.renderer) {\n            // Renderer extensions\n            var prevRenderer = extensions.renderers ? extensions.renderers[ext.name] : null;\n\n            if (prevRenderer) {\n              // Replace extension with func to run new extension but fall back if false\n              extensions.renderers[ext.name] = function () {\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  args[_key2] = arguments[_key2];\n                }\n\n                var ret = ext.renderer.apply(this, args);\n\n                if (ret === false) {\n                  ret = prevRenderer.apply(this, args);\n                }\n\n                return ret;\n              };\n            } else {\n              extensions.renderers[ext.name] = ext.renderer;\n            }\n          }\n\n          if (ext.tokenizer) {\n            // Tokenizer Extensions\n            if (!ext.level || ext.level !== 'block' && ext.level !== 'inline') {\n              throw new Error(\"extension level must be 'block' or 'inline'\");\n            }\n\n            if (extensions[ext.level]) {\n              extensions[ext.level].unshift(ext.tokenizer);\n            } else {\n              extensions[ext.level] = [ext.tokenizer];\n            }\n\n            if (ext.start) {\n              // Function to check for start of token\n              if (ext.level === 'block') {\n                if (extensions.startBlock) {\n                  extensions.startBlock.push(ext.start);\n                } else {\n                  extensions.startBlock = [ext.start];\n                }\n              } else if (ext.level === 'inline') {\n                if (extensions.startInline) {\n                  extensions.startInline.push(ext.start);\n                } else {\n                  extensions.startInline = [ext.start];\n                }\n              }\n            }\n          }\n\n          if (ext.childTokens) {\n            // Child tokens to be visited by walkTokens\n            extensions.childTokens[ext.name] = ext.childTokens;\n          }\n        });\n      } // ==-- Parse \"overwrite\" extensions --== //\n\n\n      if (pack.renderer) {\n        (function () {\n          var renderer = marked.defaults.renderer || new Renderer();\n\n          var _loop = function _loop(prop) {\n            var prevRenderer = renderer[prop]; // Replace renderer with func to run extension, but fall back if false\n\n            renderer[prop] = function () {\n              for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                args[_key3] = arguments[_key3];\n              }\n\n              var ret = pack.renderer[prop].apply(renderer, args);\n\n              if (ret === false) {\n                ret = prevRenderer.apply(renderer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.renderer) {\n            _loop(prop);\n          }\n\n          opts.renderer = renderer;\n        })();\n      }\n\n      if (pack.tokenizer) {\n        (function () {\n          var tokenizer = marked.defaults.tokenizer || new Tokenizer();\n\n          var _loop2 = function _loop2(prop) {\n            var prevTokenizer = tokenizer[prop]; // Replace tokenizer with func to run extension, but fall back if false\n\n            tokenizer[prop] = function () {\n              for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n                args[_key4] = arguments[_key4];\n              }\n\n              var ret = pack.tokenizer[prop].apply(tokenizer, args);\n\n              if (ret === false) {\n                ret = prevTokenizer.apply(tokenizer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.tokenizer) {\n            _loop2(prop);\n          }\n\n          opts.tokenizer = tokenizer;\n        })();\n      } // ==-- Parse WalkTokens extensions --== //\n\n\n      if (pack.walkTokens) {\n        var walkTokens = marked.defaults.walkTokens;\n\n        opts.walkTokens = function (token) {\n          pack.walkTokens.call(_this, token);\n\n          if (walkTokens) {\n            walkTokens(token);\n          }\n        };\n      }\n\n      if (hasExtensions) {\n        opts.extensions = extensions;\n      }\n\n      marked.setOptions(opts);\n    });\n  };\n  /**\n   * Run callback for every token\n   */\n\n\n  marked.walkTokens = function (tokens, callback) {\n    var _loop3 = function _loop3() {\n      var token = _step.value;\n      callback(token);\n\n      switch (token.type) {\n        case 'table':\n          {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(token.tokens.header), _step2; !(_step2 = _iterator2()).done;) {\n              var cell = _step2.value;\n              marked.walkTokens(cell, callback);\n            }\n\n            for (var _iterator3 = _createForOfIteratorHelperLoose(token.tokens.cells), _step3; !(_step3 = _iterator3()).done;) {\n              var row = _step3.value;\n\n              for (var _iterator4 = _createForOfIteratorHelperLoose(row), _step4; !(_step4 = _iterator4()).done;) {\n                var _cell = _step4.value;\n                marked.walkTokens(_cell, callback);\n              }\n            }\n\n            break;\n          }\n\n        case 'list':\n          {\n            marked.walkTokens(token.items, callback);\n            break;\n          }\n\n        default:\n          {\n            if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) {\n              // Walk any extensions\n              marked.defaults.extensions.childTokens[token.type].forEach(function (childTokens) {\n                marked.walkTokens(token[childTokens], callback);\n              });\n            } else if (token.tokens) {\n              marked.walkTokens(token.tokens, callback);\n            }\n          }\n      }\n    };\n\n    for (var _iterator = _createForOfIteratorHelperLoose(tokens), _step; !(_step = _iterator()).done;) {\n      _loop3();\n    }\n  };\n  /**\n   * Parse Inline\n   */\n\n\n  marked.parseInline = function (src, opt) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    try {\n      var tokens = Lexer.lexInline(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n\n      return Parser.parseInline(tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser;\n  marked.parser = Parser.parse;\n  marked.Renderer = Renderer;\n  marked.TextRenderer = TextRenderer;\n  marked.Lexer = Lexer;\n  marked.lexer = Lexer.lex;\n  marked.Tokenizer = Tokenizer;\n  marked.Slugger = Slugger;\n  marked.parse = marked;\n  var marked_1 = marked;\n\n  return marked_1;\n\n})));\n","// extracted by mini-css-extract-plugin","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = safari && (/Mobile\\/\\w+/.test(userAgent) || navigator.maxTouchPoints > 2);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = document.activeElement;\n    } catch(e) {\n      activeElement = document.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n    if (self.time <= +new Date) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date);\n    }\n  };\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date + ms;\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 50;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length, isRTL = direction == \"rtl\" ? 1 : 0;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); at += isRTL; }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              at += isRTL;\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers, arr = map && map[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range;\n    try {range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) { return false }\n    return range.compareEndPoints(\"StartToEnd\", range) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\\\s)\" + lineClass[2] + \"(?:$|\\\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n\n  // Add a span to a line.\n  function addMarkedSpan(line, span, op) {\n    var inThisOp = op && window.WeakSet && (op.markedSpans || (op.markedSpans = new WeakSet));\n    if (inThisOp && inThisOp.has(line.markedSpans)) {\n      line.markedSpans.push(span);\n    } else {\n      line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n      if (inThisOp) { inThisOp.add(line.markedSpans); }\n    }\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css || attributes) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      gutterWrap.setAttribute(\"aria-hidden\", \"true\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (isWidget.test(node.className)) { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    for (var i = 0; i < lineView.rest.length; i++)\n      { if (lineView.rest[i] == line)\n        { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n      { if (lineNo(lineView.rest[i$1]) > lineN)\n        { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n  }\n  function pageScrollY() {\n    if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n    if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\n      { height += widgetHeight(lineObj.widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = outside; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight; box.bottom += widgetHeight;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e$1) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range = doc.sel.ranges[i];\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) { continue }\n      var collapsed = range.empty();\n      if (collapsed || cm.options.showCursorWhenSelecting)\n        { drawSelectionCursor(cm, range.head, curFragment); }\n      if (!collapsed)\n        { drawSelectionRange(cm, range, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range.from(), sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () {\n        if (!cm.hasFocus()) { onBlur(cm); }\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.hasFocus()) {\n      cm.display.input.focus();\n      if (!cm.state.focused) { onFocus(cm); }\n    }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      if (cm.state.focused) { onBlur(cm); }\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent && !cm.state.draggingText) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var gutterSpace = cm.options.fixedGutter ? 0 : display.gutters.offsetWidth;\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft - gutterSpace;\n    var screenw = displayWidth(cm) - display.gutters.offsetWidth;\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left + gutterSpace - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt != bar) { bar.style.pointerEvents = \"none\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId,          // Unique ID\n      markArrays: null         // Used by addMarkedSpan\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt();\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n    snapshot.activeElt.focus();\n    if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) &&\n        snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(), range = document.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      } else if (first) {\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n    // Send an event to consumers responding to changes in gutter width.\n    signalLater(display, \"gutterChanged\", display);\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    cm.options.direction = doc.direction;\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(prev) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = prev ? prev.undoDepth : Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = prev ? prev.maxGeneration : 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm && doc.cm.getOption(\"readOnly\") != \"nocursor\")\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n      { doc.cantEdit = false; }\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        { if (op(this.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null), doc.cm && doc.cm.curOp);\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      if (lineSep === '') { return lines.join('') }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range.head; }\n      else if (start == \"anchor\") { pos = range.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range.to(); }\n      else { pos = range.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head || ranges[i].anchor)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {\n      var this$1 = this;\n\n      this.history = new History(this.history);\n      linkedDocs(this, function (doc) { return doc.history = this$1.history; }, true);\n    },\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n                span.from == null && lineNo != from.line ||\n                span.from != null && lineNo == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) { continue }\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var markAsReadAndPasteIfAllFilesAreRead = function () {\n        if (++read == n) {\n          operation(cm, function () {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(\n                              text.filter(function (t) { return t != null; }).join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))));\n          })();\n        }\n      };\n      var readTextFromFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          markAsReadAndPasteIfAllFilesAreRead();\n          return\n        }\n        var reader = new FileReader;\n        reader.onerror = function () { return markAsReadAndPasteIfAllFilesAreRead(); };\n        reader.onload = function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            markAsReadAndPasteIfAllFilesAreRead();\n            return\n          }\n          text[i] = content;\n          markAsReadAndPasteIfAllFilesAreRead();\n        };\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < files.length; i++) { readTextFromFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e$1){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 224: \"Mod\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\", \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\", \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map.fallthrough, handle, context) }\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Mod\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      if (cm.doc.direction == \"rtl\") { dir = -dir; }\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"codepoint\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(start.ch, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand)\n      { document.execCommand(\"cut\"); }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      if (cm.state.delayingBlurEvent) {\n        if (cm.hasFocus()) { cm.state.delayingBlurEvent = false; }\n        else { delayBlurEvent(cm); }\n      }\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if ((webkit && !safari) || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus({preventScroll: true}); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { return display.input.focus(); }, 20);\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    if (ie) { delayBlurEvent(cm); }\n    var display = cm.display, doc = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend); }\n      else\n        { ourRange = range; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range }\n    var order = getOrder(anchorLine);\n    if (!order) { return range }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e$1) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b\\u200e\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n\n    option(\"screenReaderLabel\", null, function (cm, val) {\n      val = (val === '') ? null : val;\n      cm.display.input.screenReaderLabelChanged(val);\n    });\n\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(function () {\n        if (this$1.hasFocus() && !this$1.state.focused) { onFocus(this$1); }\n      }, 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n    on(d.input.getField(), \"contextmenu\", function (e) {\n      if (!d.scroller.contains(e.target)) { onContextMenu(cm, e); }\n    });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(), to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == textLines.join(\"\\n\"))\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput)\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) { continue }\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          { indented = indentLine(cm, range.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    disableBrowserMagic(te);\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){window.focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function(map) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n          if (!range.empty()) {\n            var from = range.from(), to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this, j, how); }\n            var newRanges = this.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n            if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range = this.doc.sel.primary();\n        if (start == null) { pos = range.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range.from() : range.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty())\n            { return findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range.from() : range.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range) {\n            var other = findPosH(doc, range.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse)\n            { return dir < 0 ? range.from() : range.to() }\n          var headPos = cursorCoords(this$1, range.head, \"div\");\n          if (range.goalColumn != null) { headPos.left = range.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt() },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range, margin) {\n        if (range == null) {\n          range = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range == \"number\") {\n          range = {from: Pos(range, 0), to: null};\n        } else if (range.from == null) {\n          range = {from: range, to: null};\n        }\n        if (!range.to) { range.to = range.from; }\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo, \"widget\"); break } } }\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5 || this.options.lineWrapping)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"codepoint\", \"char\", \"column\" (like char, but\n  // doesn't cross line boundaries), \"word\" (across next word), or\n  // \"group\" (to the start of next group of word or\n  // non-word-non-whitespace chars). The visually param controls\n  // whether, in right-to-left text, direction 1 means to move towards\n  // the next index in the string, or towards the character to the right\n  // of the current position. The resulting position will have a\n  // hitSide=true property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    var lineDir = visually && doc.direction == \"rtl\" ? -dir : dir;\n    function findNextLine() {\n      var l = pos.line + lineDir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (unit == \"codepoint\") {\n        var ch = lineObj.text.charCodeAt(pos.ch + (dir > 0 ? 0 : -1));\n        if (isNaN(ch)) {\n          next = null;\n        } else {\n          var astral = dir > 0 ? ch >= 0xD800 && ch < 0xDC00 : ch >= 0xDC00 && ch < 0xDFFF;\n          next = new Pos(pos.line, Math.max(0, Math.min(lineObj.text.length, pos.ch + dir * (astral ? 2 : 1))), -dir);\n        }\n      } else if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\" || unit == \"codepoint\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    div.contentEditable = true;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    function belongsToInput(e) {\n      for (var t = e.target; t; t = t.parentNode) {\n        if (t == div) { return true }\n        if (/\\bCodeMirror-(?:line)?widget\\b/.test(t.className)) { break }\n      }\n      return false\n    }\n\n    on(div, \"paste\", function (e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = activeElt();\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.div.setAttribute('aria-label', label);\n    } else {\n      this.div.removeAttribute('aria-label');\n    }\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = activeElt() == this.div;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor() || activeElt() != this.div)\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n    if (this.selectionInEditor())\n      { this.pollSelection(); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find(0)))\n            { addText(getBetween(cm.doc, range.from, range.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.textarea.setAttribute('aria-label', label);\n    } else {\n      this.textarea.removeAttribute('aria-label');\n    }\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) { return }\n    var cm = this.cm;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { window.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n    this.textarea.readOnly = !!val;\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, …*/) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.62.0\";\n\n  return CodeMirror;\n\n})));\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../meta\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../xml/xml\", \"../meta\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"markdown\", function(cmCfg, modeCfg) {\n\n  var htmlMode = CodeMirror.getMode(cmCfg, \"text/html\");\n  var htmlModeMissing = htmlMode.name == \"null\"\n\n  function getMode(name) {\n    if (CodeMirror.findModeByName) {\n      var found = CodeMirror.findModeByName(name);\n      if (found) name = found.mime || found.mimes[0];\n    }\n    var mode = CodeMirror.getMode(cmCfg, name);\n    return mode.name == \"null\" ? null : mode;\n  }\n\n  // Should characters that affect highlighting be highlighted separate?\n  // Does not include characters that will be output (such as `1.` and `-` for lists)\n  if (modeCfg.highlightFormatting === undefined)\n    modeCfg.highlightFormatting = false;\n\n  // Maximum number of nested blockquotes. Set to 0 for infinite nesting.\n  // Excess `>` will emit `error` token.\n  if (modeCfg.maxBlockquoteDepth === undefined)\n    modeCfg.maxBlockquoteDepth = 0;\n\n  // Turn on task lists? (\"- [ ] \" and \"- [x] \")\n  if (modeCfg.taskLists === undefined) modeCfg.taskLists = false;\n\n  // Turn on strikethrough syntax\n  if (modeCfg.strikethrough === undefined)\n    modeCfg.strikethrough = false;\n\n  if (modeCfg.emoji === undefined)\n    modeCfg.emoji = false;\n\n  if (modeCfg.fencedCodeBlockHighlighting === undefined)\n    modeCfg.fencedCodeBlockHighlighting = true;\n\n  if (modeCfg.fencedCodeBlockDefaultMode === undefined)\n    modeCfg.fencedCodeBlockDefaultMode = 'text/plain';\n\n  if (modeCfg.xml === undefined)\n    modeCfg.xml = true;\n\n  // Allow token types to be overridden by user-provided token types.\n  if (modeCfg.tokenTypeOverrides === undefined)\n    modeCfg.tokenTypeOverrides = {};\n\n  var tokenTypes = {\n    header: \"header\",\n    code: \"comment\",\n    quote: \"quote\",\n    list1: \"variable-2\",\n    list2: \"variable-3\",\n    list3: \"keyword\",\n    hr: \"hr\",\n    image: \"image\",\n    imageAltText: \"image-alt-text\",\n    imageMarker: \"image-marker\",\n    formatting: \"formatting\",\n    linkInline: \"link\",\n    linkEmail: \"link\",\n    linkText: \"link\",\n    linkHref: \"string\",\n    em: \"em\",\n    strong: \"strong\",\n    strikethrough: \"strikethrough\",\n    emoji: \"builtin\"\n  };\n\n  for (var tokenType in tokenTypes) {\n    if (tokenTypes.hasOwnProperty(tokenType) && modeCfg.tokenTypeOverrides[tokenType]) {\n      tokenTypes[tokenType] = modeCfg.tokenTypeOverrides[tokenType];\n    }\n  }\n\n  var hrRE = /^([*\\-_])(?:\\s*\\1){2,}\\s*$/\n  ,   listRE = /^(?:[*\\-+]|^[0-9]+([.)]))\\s+/\n  ,   taskListRE = /^\\[(x| )\\](?=\\s)/i // Must follow listRE\n  ,   atxHeaderRE = modeCfg.allowAtxHeaderWithoutSpace ? /^(#+)/ : /^(#+)(?: |$)/\n  ,   setextHeaderRE = /^ {0,3}(?:\\={1,}|-{2,})\\s*$/\n  ,   textRE = /^[^#!\\[\\]*_\\\\<>` \"'(~:]+/\n  ,   fencedCodeRE = /^(~~~+|```+)[ \\t]*([\\w\\/+#-]*)[^\\n`]*$/\n  ,   linkDefRE = /^\\s*\\[[^\\]]+?\\]:.*$/ // naive link-definition\n  ,   punctuation = /[!\"#$%&'()*+,\\-.\\/:;<=>?@\\[\\\\\\]^_`{|}~\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDF3C-\\uDF3E]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]/\n  ,   expandedTab = \"    \" // CommonMark specifies tab as 4 spaces\n\n  function switchInline(stream, state, f) {\n    state.f = state.inline = f;\n    return f(stream, state);\n  }\n\n  function switchBlock(stream, state, f) {\n    state.f = state.block = f;\n    return f(stream, state);\n  }\n\n  function lineIsEmpty(line) {\n    return !line || !/\\S/.test(line.string)\n  }\n\n  // Blocks\n\n  function blankLine(state) {\n    // Reset linkTitle state\n    state.linkTitle = false;\n    state.linkHref = false;\n    state.linkText = false;\n    // Reset EM state\n    state.em = false;\n    // Reset STRONG state\n    state.strong = false;\n    // Reset strikethrough state\n    state.strikethrough = false;\n    // Reset state.quote\n    state.quote = 0;\n    // Reset state.indentedCode\n    state.indentedCode = false;\n    if (state.f == htmlBlock) {\n      var exit = htmlModeMissing\n      if (!exit) {\n        var inner = CodeMirror.innerMode(htmlMode, state.htmlState)\n        exit = inner.mode.name == \"xml\" && inner.state.tagStart === null &&\n          (!inner.state.context && inner.state.tokenize.isInText)\n      }\n      if (exit) {\n        state.f = inlineNormal;\n        state.block = blockNormal;\n        state.htmlState = null;\n      }\n    }\n    // Reset state.trailingSpace\n    state.trailingSpace = 0;\n    state.trailingSpaceNewLine = false;\n    // Mark this line as blank\n    state.prevLine = state.thisLine\n    state.thisLine = {stream: null}\n    return null;\n  }\n\n  function blockNormal(stream, state) {\n    var firstTokenOnLine = stream.column() === state.indentation;\n    var prevLineLineIsEmpty = lineIsEmpty(state.prevLine.stream);\n    var prevLineIsIndentedCode = state.indentedCode;\n    var prevLineIsHr = state.prevLine.hr;\n    var prevLineIsList = state.list !== false;\n    var maxNonCodeIndentation = (state.listStack[state.listStack.length - 1] || 0) + 3;\n\n    state.indentedCode = false;\n\n    var lineIndentation = state.indentation;\n    // compute once per line (on first token)\n    if (state.indentationDiff === null) {\n      state.indentationDiff = state.indentation;\n      if (prevLineIsList) {\n        state.list = null;\n        // While this list item's marker's indentation is less than the deepest\n        //  list item's content's indentation,pop the deepest list item\n        //  indentation off the stack, and update block indentation state\n        while (lineIndentation < state.listStack[state.listStack.length - 1]) {\n          state.listStack.pop();\n          if (state.listStack.length) {\n            state.indentation = state.listStack[state.listStack.length - 1];\n          // less than the first list's indent -> the line is no longer a list\n          } else {\n            state.list = false;\n          }\n        }\n        if (state.list !== false) {\n          state.indentationDiff = lineIndentation - state.listStack[state.listStack.length - 1]\n        }\n      }\n    }\n\n    // not comprehensive (currently only for setext detection purposes)\n    var allowsInlineContinuation = (\n        !prevLineLineIsEmpty && !prevLineIsHr && !state.prevLine.header &&\n        (!prevLineIsList || !prevLineIsIndentedCode) &&\n        !state.prevLine.fencedCodeEnd\n    );\n\n    var isHr = (state.list === false || prevLineIsHr || prevLineLineIsEmpty) &&\n      state.indentation <= maxNonCodeIndentation && stream.match(hrRE);\n\n    var match = null;\n    if (state.indentationDiff >= 4 && (prevLineIsIndentedCode || state.prevLine.fencedCodeEnd ||\n         state.prevLine.header || prevLineLineIsEmpty)) {\n      stream.skipToEnd();\n      state.indentedCode = true;\n      return tokenTypes.code;\n    } else if (stream.eatSpace()) {\n      return null;\n    } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(atxHeaderRE)) && match[1].length <= 6) {\n      state.quote = 0;\n      state.header = match[1].length;\n      state.thisLine.header = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      state.f = state.inline;\n      return getType(state);\n    } else if (state.indentation <= maxNonCodeIndentation && stream.eat('>')) {\n      state.quote = firstTokenOnLine ? 1 : state.quote + 1;\n      if (modeCfg.highlightFormatting) state.formatting = \"quote\";\n      stream.eatSpace();\n      return getType(state);\n    } else if (!isHr && !state.setext && firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(listRE))) {\n      var listType = match[1] ? \"ol\" : \"ul\";\n\n      state.indentation = lineIndentation + stream.current().length;\n      state.list = true;\n      state.quote = 0;\n\n      // Add this list item's content's indentation to the stack\n      state.listStack.push(state.indentation);\n      // Reset inline styles which shouldn't propagate across list items\n      state.em = false;\n      state.strong = false;\n      state.code = false;\n      state.strikethrough = false;\n\n      if (modeCfg.taskLists && stream.match(taskListRE, false)) {\n        state.taskList = true;\n      }\n      state.f = state.inline;\n      if (modeCfg.highlightFormatting) state.formatting = [\"list\", \"list-\" + listType];\n      return getType(state);\n    } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(fencedCodeRE, true))) {\n      state.quote = 0;\n      state.fencedEndRE = new RegExp(match[1] + \"+ *$\");\n      // try switching mode\n      state.localMode = modeCfg.fencedCodeBlockHighlighting && getMode(match[2] || modeCfg.fencedCodeBlockDefaultMode );\n      if (state.localMode) state.localState = CodeMirror.startState(state.localMode);\n      state.f = state.block = local;\n      if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n      state.code = -1\n      return getType(state);\n    // SETEXT has lowest block-scope precedence after HR, so check it after\n    //  the others (code, blockquote, list...)\n    } else if (\n      // if setext set, indicates line after ---/===\n      state.setext || (\n        // line before ---/===\n        (!allowsInlineContinuation || !prevLineIsList) && !state.quote && state.list === false &&\n        !state.code && !isHr && !linkDefRE.test(stream.string) &&\n        (match = stream.lookAhead(1)) && (match = match.match(setextHeaderRE))\n      )\n    ) {\n      if ( !state.setext ) {\n        state.header = match[0].charAt(0) == '=' ? 1 : 2;\n        state.setext = state.header;\n      } else {\n        state.header = state.setext;\n        // has no effect on type so we can reset it now\n        state.setext = 0;\n        stream.skipToEnd();\n        if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      }\n      state.thisLine.header = true;\n      state.f = state.inline;\n      return getType(state);\n    } else if (isHr) {\n      stream.skipToEnd();\n      state.hr = true;\n      state.thisLine.hr = true;\n      return tokenTypes.hr;\n    } else if (stream.peek() === '[') {\n      return switchInline(stream, state, footnoteLink);\n    }\n\n    return switchInline(stream, state, state.inline);\n  }\n\n  function htmlBlock(stream, state) {\n    var style = htmlMode.token(stream, state.htmlState);\n    if (!htmlModeMissing) {\n      var inner = CodeMirror.innerMode(htmlMode, state.htmlState)\n      if ((inner.mode.name == \"xml\" && inner.state.tagStart === null &&\n           (!inner.state.context && inner.state.tokenize.isInText)) ||\n          (state.md_inside && stream.current().indexOf(\">\") > -1)) {\n        state.f = inlineNormal;\n        state.block = blockNormal;\n        state.htmlState = null;\n      }\n    }\n    return style;\n  }\n\n  function local(stream, state) {\n    var currListInd = state.listStack[state.listStack.length - 1] || 0;\n    var hasExitedList = state.indentation < currListInd;\n    var maxFencedEndInd = currListInd + 3;\n    if (state.fencedEndRE && state.indentation <= maxFencedEndInd && (hasExitedList || stream.match(state.fencedEndRE))) {\n      if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n      var returnType;\n      if (!hasExitedList) returnType = getType(state)\n      state.localMode = state.localState = null;\n      state.block = blockNormal;\n      state.f = inlineNormal;\n      state.fencedEndRE = null;\n      state.code = 0\n      state.thisLine.fencedCodeEnd = true;\n      if (hasExitedList) return switchBlock(stream, state, state.block);\n      return returnType;\n    } else if (state.localMode) {\n      return state.localMode.token(stream, state.localState);\n    } else {\n      stream.skipToEnd();\n      return tokenTypes.code;\n    }\n  }\n\n  // Inline\n  function getType(state) {\n    var styles = [];\n\n    if (state.formatting) {\n      styles.push(tokenTypes.formatting);\n\n      if (typeof state.formatting === \"string\") state.formatting = [state.formatting];\n\n      for (var i = 0; i < state.formatting.length; i++) {\n        styles.push(tokenTypes.formatting + \"-\" + state.formatting[i]);\n\n        if (state.formatting[i] === \"header\") {\n          styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.header);\n        }\n\n        // Add `formatting-quote` and `formatting-quote-#` for blockquotes\n        // Add `error` instead if the maximum blockquote nesting depth is passed\n        if (state.formatting[i] === \"quote\") {\n          if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n            styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.quote);\n          } else {\n            styles.push(\"error\");\n          }\n        }\n      }\n    }\n\n    if (state.taskOpen) {\n      styles.push(\"meta\");\n      return styles.length ? styles.join(' ') : null;\n    }\n    if (state.taskClosed) {\n      styles.push(\"property\");\n      return styles.length ? styles.join(' ') : null;\n    }\n\n    if (state.linkHref) {\n      styles.push(tokenTypes.linkHref, \"url\");\n    } else { // Only apply inline styles to non-url text\n      if (state.strong) { styles.push(tokenTypes.strong); }\n      if (state.em) { styles.push(tokenTypes.em); }\n      if (state.strikethrough) { styles.push(tokenTypes.strikethrough); }\n      if (state.emoji) { styles.push(tokenTypes.emoji); }\n      if (state.linkText) { styles.push(tokenTypes.linkText); }\n      if (state.code) { styles.push(tokenTypes.code); }\n      if (state.image) { styles.push(tokenTypes.image); }\n      if (state.imageAltText) { styles.push(tokenTypes.imageAltText, \"link\"); }\n      if (state.imageMarker) { styles.push(tokenTypes.imageMarker); }\n    }\n\n    if (state.header) { styles.push(tokenTypes.header, tokenTypes.header + \"-\" + state.header); }\n\n    if (state.quote) {\n      styles.push(tokenTypes.quote);\n\n      // Add `quote-#` where the maximum for `#` is modeCfg.maxBlockquoteDepth\n      if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n        styles.push(tokenTypes.quote + \"-\" + state.quote);\n      } else {\n        styles.push(tokenTypes.quote + \"-\" + modeCfg.maxBlockquoteDepth);\n      }\n    }\n\n    if (state.list !== false) {\n      var listMod = (state.listStack.length - 1) % 3;\n      if (!listMod) {\n        styles.push(tokenTypes.list1);\n      } else if (listMod === 1) {\n        styles.push(tokenTypes.list2);\n      } else {\n        styles.push(tokenTypes.list3);\n      }\n    }\n\n    if (state.trailingSpaceNewLine) {\n      styles.push(\"trailing-space-new-line\");\n    } else if (state.trailingSpace) {\n      styles.push(\"trailing-space-\" + (state.trailingSpace % 2 ? \"a\" : \"b\"));\n    }\n\n    return styles.length ? styles.join(' ') : null;\n  }\n\n  function handleText(stream, state) {\n    if (stream.match(textRE, true)) {\n      return getType(state);\n    }\n    return undefined;\n  }\n\n  function inlineNormal(stream, state) {\n    var style = state.text(stream, state);\n    if (typeof style !== 'undefined')\n      return style;\n\n    if (state.list) { // List marker (*, +, -, 1., etc)\n      state.list = null;\n      return getType(state);\n    }\n\n    if (state.taskList) {\n      var taskOpen = stream.match(taskListRE, true)[1] === \" \";\n      if (taskOpen) state.taskOpen = true;\n      else state.taskClosed = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"task\";\n      state.taskList = false;\n      return getType(state);\n    }\n\n    state.taskOpen = false;\n    state.taskClosed = false;\n\n    if (state.header && stream.match(/^#+$/, true)) {\n      if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      return getType(state);\n    }\n\n    var ch = stream.next();\n\n    // Matches link titles present on next line\n    if (state.linkTitle) {\n      state.linkTitle = false;\n      var matchCh = ch;\n      if (ch === '(') {\n        matchCh = ')';\n      }\n      matchCh = (matchCh+'').replace(/([.?*+^\\[\\]\\\\(){}|-])/g, \"\\\\$1\");\n      var regex = '^\\\\s*(?:[^' + matchCh + '\\\\\\\\]+|\\\\\\\\\\\\\\\\|\\\\\\\\.)' + matchCh;\n      if (stream.match(new RegExp(regex), true)) {\n        return tokenTypes.linkHref;\n      }\n    }\n\n    // If this block is changed, it may need to be updated in GFM mode\n    if (ch === '`') {\n      var previousFormatting = state.formatting;\n      if (modeCfg.highlightFormatting) state.formatting = \"code\";\n      stream.eatWhile('`');\n      var count = stream.current().length\n      if (state.code == 0 && (!state.quote || count == 1)) {\n        state.code = count\n        return getType(state)\n      } else if (count == state.code) { // Must be exact\n        var t = getType(state)\n        state.code = 0\n        return t\n      } else {\n        state.formatting = previousFormatting\n        return getType(state)\n      }\n    } else if (state.code) {\n      return getType(state);\n    }\n\n    if (ch === '\\\\') {\n      stream.next();\n      if (modeCfg.highlightFormatting) {\n        var type = getType(state);\n        var formattingEscape = tokenTypes.formatting + \"-escape\";\n        return type ? type + \" \" + formattingEscape : formattingEscape;\n      }\n    }\n\n    if (ch === '!' && stream.match(/\\[[^\\]]*\\] ?(?:\\(|\\[)/, false)) {\n      state.imageMarker = true;\n      state.image = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      return getType(state);\n    }\n\n    if (ch === '[' && state.imageMarker && stream.match(/[^\\]]*\\](\\(.*?\\)| ?\\[.*?\\])/, false)) {\n      state.imageMarker = false;\n      state.imageAltText = true\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      return getType(state);\n    }\n\n    if (ch === ']' && state.imageAltText) {\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      var type = getType(state);\n      state.imageAltText = false;\n      state.image = false;\n      state.inline = state.f = linkHref;\n      return type;\n    }\n\n    if (ch === '[' && !state.image) {\n      if (state.linkText && stream.match(/^.*?\\]/)) return getType(state)\n      state.linkText = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      return getType(state);\n    }\n\n    if (ch === ']' && state.linkText) {\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      state.linkText = false;\n      state.inline = state.f = stream.match(/\\(.*?\\)| ?\\[.*?\\]/, false) ? linkHref : inlineNormal\n      return type;\n    }\n\n    if (ch === '<' && stream.match(/^(https?|ftps?):\\/\\/(?:[^\\\\>]|\\\\.)+>/, false)) {\n      state.f = state.inline = linkInline;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkInline;\n    }\n\n    if (ch === '<' && stream.match(/^[^> \\\\]+@(?:[^\\\\>]|\\\\.)+>/, false)) {\n      state.f = state.inline = linkInline;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkEmail;\n    }\n\n    if (modeCfg.xml && ch === '<' && stream.match(/^(!--|\\?|!\\[CDATA\\[|[a-z][a-z0-9-]*(?:\\s+[a-z_:.\\-]+(?:\\s*=\\s*[^>]+)?)*\\s*(?:>|$))/i, false)) {\n      var end = stream.string.indexOf(\">\", stream.pos);\n      if (end != -1) {\n        var atts = stream.string.substring(stream.start, end);\n        if (/markdown\\s*=\\s*('|\"){0,1}1('|\"){0,1}/.test(atts)) state.md_inside = true;\n      }\n      stream.backUp(1);\n      state.htmlState = CodeMirror.startState(htmlMode);\n      return switchBlock(stream, state, htmlBlock);\n    }\n\n    if (modeCfg.xml && ch === '<' && stream.match(/^\\/\\w*?>/)) {\n      state.md_inside = false;\n      return \"tag\";\n    } else if (ch === \"*\" || ch === \"_\") {\n      var len = 1, before = stream.pos == 1 ? \" \" : stream.string.charAt(stream.pos - 2)\n      while (len < 3 && stream.eat(ch)) len++\n      var after = stream.peek() || \" \"\n      // See http://spec.commonmark.org/0.27/#emphasis-and-strong-emphasis\n      var leftFlanking = !/\\s/.test(after) && (!punctuation.test(after) || /\\s/.test(before) || punctuation.test(before))\n      var rightFlanking = !/\\s/.test(before) && (!punctuation.test(before) || /\\s/.test(after) || punctuation.test(after))\n      var setEm = null, setStrong = null\n      if (len % 2) { // Em\n        if (!state.em && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before)))\n          setEm = true\n        else if (state.em == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after)))\n          setEm = false\n      }\n      if (len > 1) { // Strong\n        if (!state.strong && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before)))\n          setStrong = true\n        else if (state.strong == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after)))\n          setStrong = false\n      }\n      if (setStrong != null || setEm != null) {\n        if (modeCfg.highlightFormatting) state.formatting = setEm == null ? \"strong\" : setStrong == null ? \"em\" : \"strong em\"\n        if (setEm === true) state.em = ch\n        if (setStrong === true) state.strong = ch\n        var t = getType(state)\n        if (setEm === false) state.em = false\n        if (setStrong === false) state.strong = false\n        return t\n      }\n    } else if (ch === ' ') {\n      if (stream.eat('*') || stream.eat('_')) { // Probably surrounded by spaces\n        if (stream.peek() === ' ') { // Surrounded by spaces, ignore\n          return getType(state);\n        } else { // Not surrounded by spaces, back up pointer\n          stream.backUp(1);\n        }\n      }\n    }\n\n    if (modeCfg.strikethrough) {\n      if (ch === '~' && stream.eatWhile(ch)) {\n        if (state.strikethrough) {// Remove strikethrough\n          if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n          var t = getType(state);\n          state.strikethrough = false;\n          return t;\n        } else if (stream.match(/^[^\\s]/, false)) {// Add strikethrough\n          state.strikethrough = true;\n          if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n          return getType(state);\n        }\n      } else if (ch === ' ') {\n        if (stream.match('~~', true)) { // Probably surrounded by space\n          if (stream.peek() === ' ') { // Surrounded by spaces, ignore\n            return getType(state);\n          } else { // Not surrounded by spaces, back up pointer\n            stream.backUp(2);\n          }\n        }\n      }\n    }\n\n    if (modeCfg.emoji && ch === \":\" && stream.match(/^(?:[a-z_\\d+][a-z_\\d+-]*|\\-[a-z_\\d+][a-z_\\d+-]*):/)) {\n      state.emoji = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"emoji\";\n      var retType = getType(state);\n      state.emoji = false;\n      return retType;\n    }\n\n    if (ch === ' ') {\n      if (stream.match(/^ +$/, false)) {\n        state.trailingSpace++;\n      } else if (state.trailingSpace) {\n        state.trailingSpaceNewLine = true;\n      }\n    }\n\n    return getType(state);\n  }\n\n  function linkInline(stream, state) {\n    var ch = stream.next();\n\n    if (ch === \">\") {\n      state.f = state.inline = inlineNormal;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkInline;\n    }\n\n    stream.match(/^[^>]+/, true);\n\n    return tokenTypes.linkInline;\n  }\n\n  function linkHref(stream, state) {\n    // Check if space, and return NULL if so (to avoid marking the space)\n    if(stream.eatSpace()){\n      return null;\n    }\n    var ch = stream.next();\n    if (ch === '(' || ch === '[') {\n      state.f = state.inline = getLinkHrefInside(ch === \"(\" ? \")\" : \"]\");\n      if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n      state.linkHref = true;\n      return getType(state);\n    }\n    return 'error';\n  }\n\n  var linkRE = {\n    \")\": /^(?:[^\\\\\\(\\)]|\\\\.|\\((?:[^\\\\\\(\\)]|\\\\.)*\\))*?(?=\\))/,\n    \"]\": /^(?:[^\\\\\\[\\]]|\\\\.|\\[(?:[^\\\\\\[\\]]|\\\\.)*\\])*?(?=\\])/\n  }\n\n  function getLinkHrefInside(endChar) {\n    return function(stream, state) {\n      var ch = stream.next();\n\n      if (ch === endChar) {\n        state.f = state.inline = inlineNormal;\n        if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n        var returnState = getType(state);\n        state.linkHref = false;\n        return returnState;\n      }\n\n      stream.match(linkRE[endChar])\n      state.linkHref = true;\n      return getType(state);\n    };\n  }\n\n  function footnoteLink(stream, state) {\n    if (stream.match(/^([^\\]\\\\]|\\\\.)*\\]:/, false)) {\n      state.f = footnoteLinkInside;\n      stream.next(); // Consume [\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      state.linkText = true;\n      return getType(state);\n    }\n    return switchInline(stream, state, inlineNormal);\n  }\n\n  function footnoteLinkInside(stream, state) {\n    if (stream.match(']:', true)) {\n      state.f = state.inline = footnoteUrl;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var returnType = getType(state);\n      state.linkText = false;\n      return returnType;\n    }\n\n    stream.match(/^([^\\]\\\\]|\\\\.)+/, true);\n\n    return tokenTypes.linkText;\n  }\n\n  function footnoteUrl(stream, state) {\n    // Check if space, and return NULL if so (to avoid marking the space)\n    if(stream.eatSpace()){\n      return null;\n    }\n    // Match URL\n    stream.match(/^[^\\s]+/, true);\n    // Check for link title\n    if (stream.peek() === undefined) { // End of line, set flag to check next line\n      state.linkTitle = true;\n    } else { // More content on line, check if link title\n      stream.match(/^(?:\\s+(?:\"(?:[^\"\\\\]|\\\\.)+\"|'(?:[^'\\\\]|\\\\.)+'|\\((?:[^)\\\\]|\\\\.)+\\)))?/, true);\n    }\n    state.f = state.inline = inlineNormal;\n    return tokenTypes.linkHref + \" url\";\n  }\n\n  var mode = {\n    startState: function() {\n      return {\n        f: blockNormal,\n\n        prevLine: {stream: null},\n        thisLine: {stream: null},\n\n        block: blockNormal,\n        htmlState: null,\n        indentation: 0,\n\n        inline: inlineNormal,\n        text: handleText,\n\n        formatting: false,\n        linkText: false,\n        linkHref: false,\n        linkTitle: false,\n        code: 0,\n        em: false,\n        strong: false,\n        header: 0,\n        setext: 0,\n        hr: false,\n        taskList: false,\n        list: false,\n        listStack: [],\n        quote: 0,\n        trailingSpace: 0,\n        trailingSpaceNewLine: false,\n        strikethrough: false,\n        emoji: false,\n        fencedEndRE: null\n      };\n    },\n\n    copyState: function(s) {\n      return {\n        f: s.f,\n\n        prevLine: s.prevLine,\n        thisLine: s.thisLine,\n\n        block: s.block,\n        htmlState: s.htmlState && CodeMirror.copyState(htmlMode, s.htmlState),\n        indentation: s.indentation,\n\n        localMode: s.localMode,\n        localState: s.localMode ? CodeMirror.copyState(s.localMode, s.localState) : null,\n\n        inline: s.inline,\n        text: s.text,\n        formatting: false,\n        linkText: s.linkText,\n        linkTitle: s.linkTitle,\n        linkHref: s.linkHref,\n        code: s.code,\n        em: s.em,\n        strong: s.strong,\n        strikethrough: s.strikethrough,\n        emoji: s.emoji,\n        header: s.header,\n        setext: s.setext,\n        hr: s.hr,\n        taskList: s.taskList,\n        list: s.list,\n        listStack: s.listStack.slice(0),\n        quote: s.quote,\n        indentedCode: s.indentedCode,\n        trailingSpace: s.trailingSpace,\n        trailingSpaceNewLine: s.trailingSpaceNewLine,\n        md_inside: s.md_inside,\n        fencedEndRE: s.fencedEndRE\n      };\n    },\n\n    token: function(stream, state) {\n\n      // Reset state.formatting\n      state.formatting = false;\n\n      if (stream != state.thisLine.stream) {\n        state.header = 0;\n        state.hr = false;\n\n        if (stream.match(/^\\s*$/, true)) {\n          blankLine(state);\n          return null;\n        }\n\n        state.prevLine = state.thisLine\n        state.thisLine = {stream: stream}\n\n        // Reset state.taskList\n        state.taskList = false;\n\n        // Reset state.trailingSpace\n        state.trailingSpace = 0;\n        state.trailingSpaceNewLine = false;\n\n        if (!state.localState) {\n          state.f = state.block;\n          if (state.f != htmlBlock) {\n            var indentation = stream.match(/^\\s*/, true)[0].replace(/\\t/g, expandedTab).length;\n            state.indentation = indentation;\n            state.indentationDiff = null;\n            if (indentation > 0) return null;\n          }\n        }\n      }\n      return state.f(stream, state);\n    },\n\n    innerMode: function(state) {\n      if (state.block == htmlBlock) return {state: state.htmlState, mode: htmlMode};\n      if (state.localState) return {state: state.localState, mode: state.localMode};\n      return {state: state, mode: mode};\n    },\n\n    indent: function(state, textAfter, line) {\n      if (state.block == htmlBlock && htmlMode.indent) return htmlMode.indent(state.htmlState, textAfter, line)\n      if (state.localState && state.localMode.indent) return state.localMode.indent(state.localState, textAfter, line)\n      return CodeMirror.Pass\n    },\n\n    blankLine: blankLine,\n\n    getType: getType,\n\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n    fold: \"markdown\"\n  };\n  return mode;\n}, \"xml\");\n\nCodeMirror.defineMIME(\"text/markdown\", \"markdown\");\n\nCodeMirror.defineMIME(\"text/x-markdown\", \"markdown\");\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nvar htmlConfig = {\n  autoSelfClosers: {'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n                    'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n                    'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n                    'track': true, 'wbr': true, 'menuitem': true},\n  implicitlyClosed: {'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n                     'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n                     'th': true, 'tr': true},\n  contextGrabbers: {\n    'dd': {'dd': true, 'dt': true},\n    'dt': {'dd': true, 'dt': true},\n    'li': {'li': true},\n    'option': {'option': true, 'optgroup': true},\n    'optgroup': {'optgroup': true},\n    'p': {'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n          'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n          'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n          'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n          'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true},\n    'rp': {'rp': true, 'rt': true},\n    'rt': {'rp': true, 'rt': true},\n    'tbody': {'tbody': true, 'tfoot': true},\n    'td': {'td': true, 'th': true},\n    'tfoot': {'tbody': true},\n    'th': {'td': true, 'th': true},\n    'thead': {'tbody': true, 'tfoot': true},\n    'tr': {'tr': true}\n  },\n  doNotIndent: {\"pre\": true},\n  allowUnquoted: true,\n  allowMissing: true,\n  caseFold: true\n}\n\nvar xmlConfig = {\n  autoSelfClosers: {},\n  implicitlyClosed: {},\n  contextGrabbers: {},\n  doNotIndent: {},\n  allowUnquoted: false,\n  allowMissing: false,\n  allowMissingTagName: false,\n  caseFold: false\n}\n\nCodeMirror.defineMode(\"xml\", function(editorConf, config_) {\n  var indentUnit = editorConf.indentUnit\n  var config = {}\n  var defaults = config_.htmlMode ? htmlConfig : xmlConfig\n  for (var prop in defaults) config[prop] = defaults[prop]\n  for (var prop in config_) config[prop] = config_[prop]\n\n  // Return variables for tokenizers\n  var type, setStyle;\n\n  function inText(stream, state) {\n    function chain(parser) {\n      state.tokenize = parser;\n      return parser(stream, state);\n    }\n\n    var ch = stream.next();\n    if (ch == \"<\") {\n      if (stream.eat(\"!\")) {\n        if (stream.eat(\"[\")) {\n          if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));\n          else return null;\n        } else if (stream.match(\"--\")) {\n          return chain(inBlock(\"comment\", \"-->\"));\n        } else if (stream.match(\"DOCTYPE\", true, true)) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          return chain(doctype(1));\n        } else {\n          return null;\n        }\n      } else if (stream.eat(\"?\")) {\n        stream.eatWhile(/[\\w\\._\\-]/);\n        state.tokenize = inBlock(\"meta\", \"?>\");\n        return \"meta\";\n      } else {\n        type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n        state.tokenize = inTag;\n        return \"tag bracket\";\n      }\n    } else if (ch == \"&\") {\n      var ok;\n      if (stream.eat(\"#\")) {\n        if (stream.eat(\"x\")) {\n          ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n        } else {\n          ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n        }\n      } else {\n        ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n      }\n      return ok ? \"atom\" : \"error\";\n    } else {\n      stream.eatWhile(/[^&<]/);\n      return null;\n    }\n  }\n  inText.isInText = true;\n\n  function inTag(stream, state) {\n    var ch = stream.next();\n    if (ch == \">\" || (ch == \"/\" && stream.eat(\">\"))) {\n      state.tokenize = inText;\n      type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n      return \"tag bracket\";\n    } else if (ch == \"=\") {\n      type = \"equals\";\n      return null;\n    } else if (ch == \"<\") {\n      state.tokenize = inText;\n      state.state = baseState;\n      state.tagName = state.tagStart = null;\n      var next = state.tokenize(stream, state);\n      return next ? next + \" tag error\" : \"tag error\";\n    } else if (/[\\'\\\"]/.test(ch)) {\n      state.tokenize = inAttribute(ch);\n      state.stringStartCol = stream.column();\n      return state.tokenize(stream, state);\n    } else {\n      stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n      return \"word\";\n    }\n  }\n\n  function inAttribute(quote) {\n    var closure = function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.next() == quote) {\n          state.tokenize = inTag;\n          break;\n        }\n      }\n      return \"string\";\n    };\n    closure.isInAttribute = true;\n    return closure;\n  }\n\n  function inBlock(style, terminator) {\n    return function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.match(terminator)) {\n          state.tokenize = inText;\n          break;\n        }\n        stream.next();\n      }\n      return style;\n    }\n  }\n\n  function doctype(depth) {\n    return function(stream, state) {\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == \"<\") {\n          state.tokenize = doctype(depth + 1);\n          return state.tokenize(stream, state);\n        } else if (ch == \">\") {\n          if (depth == 1) {\n            state.tokenize = inText;\n            break;\n          } else {\n            state.tokenize = doctype(depth - 1);\n            return state.tokenize(stream, state);\n          }\n        }\n      }\n      return \"meta\";\n    };\n  }\n\n  function Context(state, tagName, startOfLine) {\n    this.prev = state.context;\n    this.tagName = tagName || \"\";\n    this.indent = state.indented;\n    this.startOfLine = startOfLine;\n    if (config.doNotIndent.hasOwnProperty(tagName) || (state.context && state.context.noIndent))\n      this.noIndent = true;\n  }\n  function popContext(state) {\n    if (state.context) state.context = state.context.prev;\n  }\n  function maybePopContext(state, nextTagName) {\n    var parentTagName;\n    while (true) {\n      if (!state.context) {\n        return;\n      }\n      parentTagName = state.context.tagName;\n      if (!config.contextGrabbers.hasOwnProperty(parentTagName) ||\n          !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n        return;\n      }\n      popContext(state);\n    }\n  }\n\n  function baseState(type, stream, state) {\n    if (type == \"openTag\") {\n      state.tagStart = stream.column();\n      return tagNameState;\n    } else if (type == \"closeTag\") {\n      return closeTagNameState;\n    } else {\n      return baseState;\n    }\n  }\n  function tagNameState(type, stream, state) {\n    if (type == \"word\") {\n      state.tagName = stream.current();\n      setStyle = \"tag\";\n      return attrState;\n    } else if (config.allowMissingTagName && type == \"endTag\") {\n      setStyle = \"tag bracket\";\n      return attrState(type, stream, state);\n    } else {\n      setStyle = \"error\";\n      return tagNameState;\n    }\n  }\n  function closeTagNameState(type, stream, state) {\n    if (type == \"word\") {\n      var tagName = stream.current();\n      if (state.context && state.context.tagName != tagName &&\n          config.implicitlyClosed.hasOwnProperty(state.context.tagName))\n        popContext(state);\n      if ((state.context && state.context.tagName == tagName) || config.matchClosing === false) {\n        setStyle = \"tag\";\n        return closeState;\n      } else {\n        setStyle = \"tag error\";\n        return closeStateErr;\n      }\n    } else if (config.allowMissingTagName && type == \"endTag\") {\n      setStyle = \"tag bracket\";\n      return closeState(type, stream, state);\n    } else {\n      setStyle = \"error\";\n      return closeStateErr;\n    }\n  }\n\n  function closeState(type, _stream, state) {\n    if (type != \"endTag\") {\n      setStyle = \"error\";\n      return closeState;\n    }\n    popContext(state);\n    return baseState;\n  }\n  function closeStateErr(type, stream, state) {\n    setStyle = \"error\";\n    return closeState(type, stream, state);\n  }\n\n  function attrState(type, _stream, state) {\n    if (type == \"word\") {\n      setStyle = \"attribute\";\n      return attrEqState;\n    } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n      var tagName = state.tagName, tagStart = state.tagStart;\n      state.tagName = state.tagStart = null;\n      if (type == \"selfcloseTag\" ||\n          config.autoSelfClosers.hasOwnProperty(tagName)) {\n        maybePopContext(state, tagName);\n      } else {\n        maybePopContext(state, tagName);\n        state.context = new Context(state, tagName, tagStart == state.indented);\n      }\n      return baseState;\n    }\n    setStyle = \"error\";\n    return attrState;\n  }\n  function attrEqState(type, stream, state) {\n    if (type == \"equals\") return attrValueState;\n    if (!config.allowMissing) setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrValueState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    if (type == \"word\" && config.allowUnquoted) {setStyle = \"string\"; return attrState;}\n    setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrContinuedState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    return attrState(type, stream, state);\n  }\n\n  return {\n    startState: function(baseIndent) {\n      var state = {tokenize: inText,\n                   state: baseState,\n                   indented: baseIndent || 0,\n                   tagName: null, tagStart: null,\n                   context: null}\n      if (baseIndent != null) state.baseIndent = baseIndent\n      return state\n    },\n\n    token: function(stream, state) {\n      if (!state.tagName && stream.sol())\n        state.indented = stream.indentation();\n\n      if (stream.eatSpace()) return null;\n      type = null;\n      var style = state.tokenize(stream, state);\n      if ((style || type) && style != \"comment\") {\n        setStyle = null;\n        state.state = state.state(type || style, stream, state);\n        if (setStyle)\n          style = setStyle == \"error\" ? style + \" error\" : setStyle;\n      }\n      return style;\n    },\n\n    indent: function(state, textAfter, fullLine) {\n      var context = state.context;\n      // Indent multi-line strings (e.g. css).\n      if (state.tokenize.isInAttribute) {\n        if (state.tagStart == state.indented)\n          return state.stringStartCol + 1;\n        else\n          return state.indented + indentUnit;\n      }\n      if (context && context.noIndent) return CodeMirror.Pass;\n      if (state.tokenize != inTag && state.tokenize != inText)\n        return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n      // Indent the starts of attribute names.\n      if (state.tagName) {\n        if (config.multilineTagIndentPastTag !== false)\n          return state.tagStart + state.tagName.length + 2;\n        else\n          return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n      }\n      if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n      var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n      if (tagAfter && tagAfter[1]) { // Closing tag spotted\n        while (context) {\n          if (context.tagName == tagAfter[2]) {\n            context = context.prev;\n            break;\n          } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n            context = context.prev;\n          } else {\n            break;\n          }\n        }\n      } else if (tagAfter) { // Opening tag spotted\n        while (context) {\n          var grabbers = config.contextGrabbers[context.tagName];\n          if (grabbers && grabbers.hasOwnProperty(tagAfter[2]))\n            context = context.prev;\n          else\n            break;\n        }\n      }\n      while (context && context.prev && !context.startOfLine)\n        context = context.prev;\n      if (context) return context.indent + indentUnit;\n      else return state.baseIndent || 0;\n    },\n\n    electricInput: /<\\/[\\s\\w:]+>$/,\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n\n    configuration: config.htmlMode ? \"html\" : \"xml\",\n    helperType: config.htmlMode ? \"html\" : \"xml\",\n\n    skipAttribute: function(state) {\n      if (state.state == attrValueState)\n        state.state = attrState\n    },\n\n    xmlCurrentTag: function(state) {\n      return state.tagName ? {name: state.tagName, close: state.type == \"closeTag\"} : null\n    },\n\n    xmlCurrentContext: function(state) {\n      var context = []\n      for (var cx = state.context; cx; cx = cx.prev)\n        context.push(cx.tagName)\n      return context.reverse()\n    }\n  };\n});\n\nCodeMirror.defineMIME(\"text/xml\", \"xml\");\nCodeMirror.defineMIME(\"application/xml\", \"xml\");\nif (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\"))\n  CodeMirror.defineMIME(\"text/html\", {name: \"xml\", htmlMode: true});\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Utility function that allows modes to be combined. The mode given\n// as the base argument takes care of most of the normal mode\n// functionality, but a second (typically simple) mode is used, which\n// can override the style of text. Both modes get to parse all of the\n// text, but when both assign a non-null style to a piece of code, the\n// overlay wins, unless the combine argument was true and not overridden,\n// or state.overlay.combineTokens was true, in which case the styles are\n// combined.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.overlayMode = function(base, overlay, combine) {\n  return {\n    startState: function() {\n      return {\n        base: CodeMirror.startState(base),\n        overlay: CodeMirror.startState(overlay),\n        basePos: 0, baseCur: null,\n        overlayPos: 0, overlayCur: null,\n        streamSeen: null\n      };\n    },\n    copyState: function(state) {\n      return {\n        base: CodeMirror.copyState(base, state.base),\n        overlay: CodeMirror.copyState(overlay, state.overlay),\n        basePos: state.basePos, baseCur: null,\n        overlayPos: state.overlayPos, overlayCur: null\n      };\n    },\n\n    token: function(stream, state) {\n      if (stream != state.streamSeen ||\n          Math.min(state.basePos, state.overlayPos) < stream.start) {\n        state.streamSeen = stream;\n        state.basePos = state.overlayPos = stream.start;\n      }\n\n      if (stream.start == state.basePos) {\n        state.baseCur = base.token(stream, state.base);\n        state.basePos = stream.pos;\n      }\n      if (stream.start == state.overlayPos) {\n        stream.pos = stream.start;\n        state.overlayCur = overlay.token(stream, state.overlay);\n        state.overlayPos = stream.pos;\n      }\n      stream.pos = Math.min(state.basePos, state.overlayPos);\n\n      // state.overlay.combineTokens always takes precedence over combine,\n      // unless set to null\n      if (state.overlayCur == null) return state.baseCur;\n      else if (state.baseCur != null &&\n               state.overlay.combineTokens ||\n               combine && state.overlay.combineTokens == null)\n        return state.baseCur + \" \" + state.overlayCur;\n      else return state.overlayCur;\n    },\n\n    indent: base.indent && function(state, textAfter, line) {\n      return base.indent(state.base, textAfter, line);\n    },\n    electricChars: base.electricChars,\n\n    innerMode: function(state) { return {state: state.base, mode: base}; },\n\n    blankLine: function(state) {\n      var baseToken, overlayToken;\n      if (base.blankLine) baseToken = base.blankLine(state.base);\n      if (overlay.blankLine) overlayToken = overlay.blankLine(state.overlay);\n\n      return overlayToken == null ?\n        baseToken :\n        (combine && baseToken != null ? baseToken + \" \" + overlayToken : overlayToken);\n    }\n  };\n};\n\n});\n"]}}